var GlobalParams={};function getGlobalParams(){return GlobalParams}function getRequest(){var t=location.search,e=new Object;if(t&&-1!=t.indexOf("?")){var i=t.substr(1);strs=i.split("&");for(var n=0;n<strs.length;n++)e[strs[n].split("=")[0]]=unescape(strs[n].split("=")[1])}return e}GlobalParams.host="https://res1.cqjy.5jli.com/cqjy_res_minigame_tishen/resources/",GlobalParams.serverName="传奇纪元首服",GlobalParams.clickStream="1",GlobalParams.adminClickStream="1",GlobalParams.clickAppids="awyxcx|awy|",GlobalParams.run_loader="1",GlobalParams.query_subscribe="https://apigameh5.37.com/index.php?c=game&a=query_subscribe",GlobalParams.importServerUrl="https://api.cqjy.5jli.com/importServer",GlobalParams.getServerListUrl="https://api.cqjy.5jli.com/loginserverdata/",GlobalParams.pNoteUrl="https://api.cqjy.5jli.com/gameNotice/",GlobalParams.clickUrl="https://click.cqjy.5jli.com/click",GlobalParams.verifyUrl="https://api.cqjy.5jli.com/h5/enter",GlobalParams.mobileVerifyUrl="https://api.cqjy.5jli.com/mobile/enter",GlobalParams.bigClickUrl="https://newclick.cqjy.5jli.com/click";var Laya=window.Laya=function(h,t){var c={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(t,e){return 1==arguments.length?c.__presubstr.call(this,t):c.__presubstr.call(this,t,0<e?e:this.length+e)},__init:function(t){t.forEach(function(t){t.__init$&&t.__init$()})},__isClass:function(t){return t&&(t.__isclass||t==Object||t==String||t==Array)},__newvec:function(t,e){var i=[];i.length=t;for(var n=0;n<t;n++)i[n]=e;return i},__extend:function(t,e){for(var i in e)if(e.hasOwnProperty(i)){var n=Object.getOwnPropertyDescriptor(e,i),s=n.get,o=n.set;s||o?s&&o?Object.defineProperty(t,i,n):(s&&Object.defineProperty(t,i,s),o&&Object.defineProperty(t,i,o)):t[i]=e[i]}function a(){c.un(this,"constructor",t)}a.prototype=e.prototype,t.prototype=new a,c.un(t.prototype,"__imps",c.__copy({},e.prototype.__imps))},__copy:function(t,e){if(!e)return null;for(var i in t=t||{},e)t[i]=e[i];return t},__package:function(t,e){if(!c.__packages[t]){c.__packages[t]=!0;var i=h,n=t.split(".");if(1<n.length)for(var s=0,o=n.length-1;s<o;s++){var a=i[n[s]];i=a||(i[n[s]]={})}i[n[n.length-1]]||(i[n[n.length-1]]=e||{})}},__hasOwnProperty:function(t,e){return e=e||this,Object.hasOwnProperty.call(e,t)||function t(e,i){if(Object.hasOwnProperty.call(i.prototype,e))return!0;var n=i.prototype.__super;return null==n?null:t(e,n)}(t,e.__class)},__typeof:function(t,e){if(!t||!e)return!1;if(e===String)return"string"==typeof t;if(e===Number)return"number"==typeof t;if(e.__interface__)e=e.__interface__;else if("string"!=typeof e)return t instanceof e;return t.__imps&&t.__imps[e]||t.__class==e},__as:function(t,e){return this.__typeof(t,e)?t:null},__int:function(t){return t?parseInt(t):0},interface:function(t,e){c.__package(t,{});var i=c.__internals,n=i[t]=i[t]||{self:t};if(e){var s=e.split(",");n.extend=[];for(var o=0;o<s.length;o++){var a=s[o];i[a]=i[a]||{self:a},n.extend.push(i[a])}}var r=h,l=t.split(".");for(o=0;o<l.length-1;o++)r=r[l[o]];r[l[l.length-1]]={__interface__:t}},class:function(t,e,i,n){if(i&&c.__extend(t,i),e)if(c.__package(e,t),c.__classmap[e]=t,0<e.indexOf(".")){if(0==e.indexOf("laya.")){var s=e.split(".");n=n||s[s.length-1],c[n]&&console.log("Warning!,this class["+n+"] already exist:",c[n]),c[n]=t}}else"Main"==e?h.Main=t:(c[e]&&console.log("Error!,this class["+e+"] already exist:",c[e]),c[e]=t);var o=c.un,a=t.prototype;o(a,"hasOwnProperty",c.__hasOwnProperty),o(a,"__class",t),o(a,"__super",i),o(a,"__className",e),o(t,"__super",i),o(t,"__className",e),o(t,"__isclass",!0),o(t,"super",function(t){this.__super.call(t)})},imps:function(t,e){if(!e)return null;var s=t.__imps||c.un(t,"__imps",{});function o(t){var e,i;if((e=c.__internals[t])&&(s[t]=!0,i=e.extend))for(var n=0;n<i.length;n++)o(i[n].self)}for(var i in e)o(i)},superSet:function(t,e,i,n){var s=t.prototype["_$set_"+i];s&&s.call(e,n)},superGet:function(t,e,i){var n=t.prototype["_$get_"+i];return n?n.call(e):null},getset:function(t,e,i,n,s){t?(n&&(e["_$GET_"+i]=n),s&&(e["_$SET_"+i]=s)):(n&&c.un(e,"_$get_"+i,n),s&&c.un(e,"_$set_"+i,s)),n&&s?Object.defineProperty(e,i,{get:n,set:s,enumerable:!1,configurable:!0}):(n&&Object.defineProperty(e,i,{get:n,enumerable:!1,configurable:!0}),s&&Object.defineProperty(e,i,{set:s,enumerable:!1,configurable:!0}))},static:function(i,n){for(var s=0,t=n.length;s<t;s+=2)if("length"==n[s])i.length=n[s+1].call(i);else{function e(){var e=n[s],t=n[s+1];Object.defineProperty(i,e,{get:function(){return delete this[e],this[e]=t.call(this)},set:function(t){delete this[e],this[e]=t},enumerable:!0,configurable:!0})}e()}},un:function(t,e,i){return i||(i=t[e]),c.__propun.value=i,Object.defineProperty(t,e,c.__propun),i},uns:function(e,t){t.forEach(function(t){c.un(e,t)})}};return h.console=h.console||{log:function(){}},h.trace=h.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),c}(window,document);!function(window,document,Laya){var __un=Laya.un,__uns=Laya.uns,__static=Laya.static,__class=Laya.class,__getset=Laya.getset,__newvec=Laya.__newvec;Laya.interface("laya.ui.IItem"),Laya.interface("laya.ui.ISelect"),Laya.interface("laya.runtime.IMarket"),Laya.interface("laya.filters.IFilter"),Laya.interface("laya.display.ILayout"),Laya.interface("laya.resource.IDispose"),Laya.interface("laya.runtime.IConchNode"),Laya.interface("laya.webgl.shapes.IShape"),Laya.interface("laya.webgl.submit.ISubmit"),Laya.interface("laya.filters.IFilterAction"),Laya.interface("laya.webgl.text.ICharSegment"),Laya.interface("zwc.saiman.interfaces.IProto"),Laya.interface("laya.runtime.ICPlatformClass"),Laya.interface("laya.webgl.canvas.save.ISaveData"),Laya.interface("laya.webgl.resource.IMergeAtlasBitmap"),Laya.interface("gateModule.zwc.saiman.interfaces.dock.ISocket_toc"),Laya.interface("gateModule.zwc.saiman.interfaces.dock.ISocket_tos"),Laya.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform"),Laya.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction"),Laya.interface("gateModule.zwc.saiman.interfaces.IMessage","gateModule.zwc.saiman.interfaces.IProto"),Laya.interface("gateModule.zwc.saiman.interfaces.dock.IModule","zwc.saiman.interfaces.IProto"),Laya.interface("gateModule.zwc.saiman.interfaces.dock.IMessage","zwc.saiman.interfaces.IProto");var RunDriver=function(){function o(){}return __class(o,"laya.utils.RunDriver"),o.FILTER_ACTIONS=[],o.pixelRatio=-1,o._charSizeTestDiv=null,o.now=function(){return Date.now()},o.getWindow=function(){return window},o.getPixelRatio=function(){if(o.pixelRatio<0){var t=Browser.context,e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;(o.pixelRatio=(Browser.window.devicePixelRatio||1)/e)<1&&(o.pixelRatio=1)}return o.pixelRatio},o.getIncludeStr=function(t){return null},o.createShaderCondition=function(t){var e="(function() {return "+t+";})";return Laya._runScript(e)},o.fontMap=[],o.measureText=function(t,e){var i=o.hanzi.test(t);if(i&&o.fontMap[e])return o.fontMap[e];var n=Browser.context;n.font=e;var s=n.measureText(t);return i&&(o.fontMap[e]=s),s},o.getWebGLContext=function(t){},o.beginFlush=function(){},o.endFinish=function(){},o.addToAtlas=null,o.flashFlushImage=function(t){},o.drawToCanvas=function(t,e,i,n,s,o){var a=HTMLCanvas.create("2D"),r=new RenderContext(i,n,a);return RenderSprite.renders[e]._fun(t,r,s,o),a},o.createParticleTemplate2D=null,o.createGLTextur=null,o.createWebGLContext2D=null,o.changeWebGLSize=function(t,e){},o.createRenderSprite=function(t,e){return new RenderSprite(t,e)},o.createFilterAction=function(t){return new ColorFilterAction},o.createGraphics=function(){return new Graphics},o.clear=function(t){Render._context.ctx.clear()},o.cancelLoadByUrl=function(t){},o.clearAtlas=function(t){},o.isAtlas=function(t){return!1},o.addTextureToAtlas=function(t){},o.getTexturePixels=function(t,e,i,n,s){return null},o.skinAniSprite=function(){return null},o.update3DLoop=function(){},__static(o,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),o}(),___Laya=(__getset(1,Laya,"alertGlobalError",null,function(t){var o=0;Browser.window.onerror=t?function(t,e,i,n,s){o++<5&&s&&alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+s.stack||s)}:null}),Laya.init=function(t,e,i){for(var n=[],s=2,o=arguments.length;s<o;s++)n.push(arguments[s]);if(!Laya._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=Laya._arrayBufferSlice),Laya._isinit=!0,Browser.__init__(),Context.__init__(),Graphics.__init__(),Laya.timer=new Timer,Laya.scaleTimer=new Timer,Laya.loader=new LoaderManager,WeakObject.__init__(),s=0;for(var a=n.length;s<a;s++)n[s].enable&&n[s].enable();return Font.__init__(),Style.__init__(),ResourceManager.__init__(),CacheManager.beginCheck(),Laya._currentStage=Laya.stage=new Stage,Laya.stage.conchModel&&Laya.stage.conchModel.setRootNode(),Laya._getUrlPath(),Laya.render=new Render(0,0),Laya.stage.size(t,e),RenderSprite.__init__(),KeyBoardManager.__init__(),MouseManager.instance.__init__(Laya.stage,Render.canvas),Input.__init__(),SoundManager.autoStopMusic=!0,LocalStorage.__init__(),Render.canvas}},Laya._getUrlPath=function(){var t=Browser.window.location,e=t.pathname;e=":"==e.charAt(2)?e.substring(1):e,URL.rootPath=URL.basePath=URL.getPath("file:"==t.protocol?e:t.protocol+"//"+t.host+t.pathname)},Laya._arrayBufferSlice=function(t,e){var i=new Uint8Array(this,t,e-t),n=new Uint8Array(i.length);return n.set(i),n.buffer},Laya._runScript=function(t){return Browser.window[Laya._evcode](t)},Laya.stage=null,Laya.timer=null,Laya.scaleTimer=null,Laya.loader=null,Laya.version="1.8.1beta",Laya.render=null,Laya._currentStage=null,Laya._isinit=!1,Laya.MiniAdpter={init:function(){window.navigator&&window.navigator.userAgent&&-1<window.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},__static(Laya,["conchMarket",function(){return this.conchMarket=window.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=window.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),Laya),EventDispatcher=function(){var l;function e(){this._events=null}__class(e,"laya.events.EventDispatcher");var t=e.prototype;return t.hasListener=function(t){return!!(this._events&&this._events[t])},t.event=function(t,e){if(!this._events||!this._events[t])return!1;var i=this._events[t];if(i.run)i.once&&delete this._events[t],null!=e?i.runWith(e):i.run();else{for(var n=0,s=i.length;n<s;n++){var o=i[n];o&&(null!=e?o.runWith(e):o.run()),o&&!o.once||(i.splice(n,1),n--,s--)}0===i.length&&this._events&&delete this._events[t]}return!0},t.on=function(t,e,i,n){return this._createListener(t,e,i,n,!1)},t.once=function(t,e,i,n){return this._createListener(t,e,i,n,!0)},t._createListener=function(t,e,i,n,s,o){void 0===o&&(o=!0),o&&this.off(t,e,i,s);var a=l.create(e||this,i,n,s);this._events||(this._events={});var r=this._events;return r[t]?r[t].run?r[t]=[r[t],a]:r[t].push(a):r[t]=a,this},t.off=function(t,e,i,n){if(void 0===n&&(n=!1),!this._events||!this._events[t])return this;var s=this._events[t];if(null!=s)if(s.run)e&&s.caller!==e||s.method!==i||n&&!s.once||(delete this._events[t],s.recover());else{for(var o=0,a=0,r=s.length;a<r;a++){var l=s[a];l?!l||e&&l.caller!==e||l.method!==i||n&&!l.once||(o++,s[a]=null,l.recover()):o++}o===r&&delete this._events[t]}return this},t.offAll=function(t){var e=this._events;if(!e)return this;if(t)this._recoverHandlers(e[t]),delete e[t];else{for(var i in e)this._recoverHandlers(e[i]);this._events=null}return this},t._recoverHandlers=function(t){if(t)if(t.run)t.recover();else for(var e=t.length-1;-1<e;e--)t[e]&&(t[e].recover(),t[e]=null)},t.isMouseEvent=function(t){return e.MOUSE_EVENTS[t]},e.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},e.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0}),l=function(t){function s(t,e,i,n){s.__super.call(this,t,e,i,n)}return __class(s,"",Handler),s.prototype.recover=function(){0<this._id&&(this._id=0,s._pool.push(this.clear()))},s.create=function(t,e,i,n){return void 0===n&&(n=!0),s._pool.length?s._pool.pop().setTo(t,e,i,n):new s(t,e,i,n)},s._pool=[],s}()},e}(),Handler=function(){function s(t,e,i,n){this.once=!1,void(this._id=0)===n&&(n=!1),this.setTo(t,e,i,n)}__class(s,"laya.utils.Handler");var t=s.prototype;return t.setTo=function(t,e,i,n){return this._id=s._gid++,this.caller=t,this.method=e,this.args=i,this.once=n,this},t.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},t.runWith=function(t){if(null==this.method)return null;var e=this._id;if(null==t)var i=this.method.apply(this.caller,this.args);else i=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===e&&this.once&&this.recover(),i},t.clear=function(){return this.caller=null,this.method=null,this.args=null,this},t.recover=function(){0<this._id&&(this._id=0,s._pool.push(this.clear()))},s.create=function(t,e,i,n){return void 0===n&&(n=!0),s._pool.length?s._pool.pop().setTo(t,e,i,n):new s(t,e,i,n)},s._pool=[],s._gid=1,s}(),NativeSdk=function(){function o(){}return __class(o,"gateModule.global.app.NativeSdk"),__getset(1,o,"hasPhoneBang",function(){if(console.log("+++++++++++++++ run hasPhoneBang,deviceInfo:"+(o.deviceInfo?o.deviceInfo.phone_model:"null")),-1!=o.phoneBangType)return 0<o.phoneBangType;if(o.deviceInfo&&o.deviceInfo.phone_model){var t=o.deviceInfo.phone_model;if(Browser.onIOS){if("iPhone10,3"==t||"iPhone10,6"==t)return o.phoneBangType=1,!0;if(0<=t.indexOf("iPhone11"))return o.phoneBangType=2,!0}o.phoneBangType=0}return!1}),o.initSdk=function(){if(o.jsToNativeClass=Global.nativeIOS?"SDKManager":"com.h5.SDKManager",o.jsToNativeFunction=Global.nativeIOS?"OnCall:":"OnCall",!o.SdkClass)try{o.SdkClass=Laya.PlatformClass.createClass(o.jsToNativeClass)}catch(t){console.log(t)}o.connectGame()},o.cmdTranferString=function(t,e){var i=new Object;return i.cxt=e,i.cmd=t,JSON.stringify(i)},o.jsCallApp=function(t,e){e||(e=new Object),o.SdkClass&&o.SdkClass.call(o.jsToNativeFunction,o.cmdTranferString(t,e))},o.jsCallAppWithBack=function(t,e){e||(e=new Object),o.SdkClass&&o.SdkClass.callWithBack(o.callBackFromApp,o.jsToNativeFunction,o.cmdTranferString(t,e))},o.callBackFromApp=function(t){console.log("app callback:"+t);var e=JSON.parse(t),i=e.cmd,n=e.cxt;o.onCallBack(i,n)},o.gmCmd=function(t,e){switch(t){case"connect":o.connectGame();break;case"login":o.login();break;case"logout":case"pay":case"switch_account":break;case"selected_server":case"role_update":o.selected_server(GlobalConfig.serverID,GlobalConfig.serverName);break;case"create_role":o.create_role(GlobalConfig.serverID,GlobalConfig.serverName);break;case"enter_game":o.enter_game(GlobalConfig.serverID,GlobalConfig.serverName);break;default:o.jsCallAppWithBack(t,e)}},o.onCallBack=function(t,e){switch(t){case"connect":o.backConnectGame(e);break;case"login":o.backLogin(e);break;case"logout":break;case"pay":o.backPay(e);break;case"switch_account":o.backSwitchAccount(e)}},o.onTimeOut=function(){},o.connectGame=function(){o.jsCallAppWithBack("connect"),Laya.timer.once(5e3,o,gateModule.global.app.NativeSdk.onTimeOut)},o.backConnectGame=function(t){o.connected=!0,o.deviceInfo||(o.deviceInfo={}),t.phone_model&&(o.deviceInfo.phone_model=t.phone_model),t.bundle_id&&(o.deviceInfo.bundle_id=t.bundle_id,GlobalConfig.packageName=t.bundle_id),t.bundle_version&&(o.deviceInfo.bundle_version=t.bundle_version),t.bundle_version_code&&(o.deviceInfo.bundle_version_code=t.bundle_version_code),t.display_name&&(o.deviceInfo.display_name=t.display_name)},o.login=function(){o.jsCallAppWithBack("login")},o.backLogin=function(t){o.logined=!0,t.appid&&(GlobalConfig.pid=GlobalConfig.appid=t.appid),t.gameid&&(GlobalConfig.gid=t.gameid),t.token&&(GlobalConfig.token=t.token),t.clientid&&(GlobalConfig.clientid=t.clientid),t.imei&&(o.deviceInfo||(o.deviceInfo={}),o.deviceInfo.IMEI=t.imei,GlobalConfig.IMEI=t.imei),Global.requestNotice(),SkinUtil.setup(GlobalConfig.appid),Message.sendToModule("SHOWLOGINUI",["gateModule.modules.login.LoginGateModule"])},o.selected_server=function(t,e){Browser.onIOS?o.jsCallApp("selected_server",{serverid:t,servername:e}):console.log("selected_server report error")},o.create_role=function(t,e){Browser.onIOS?o.jsCallApp("create_role",{serverid:t,servername:e}):console.log("create_role report error")},o.enter_game=function(t,e){Browser.onIOS?o.jsCallApp("enter_game",{serverid:t,servername:e}):console.log("enter_game report error")},o.reportRole=function(t,e,i){o.jsCallApp(t,o.getReportFormatByObject(e,i))},o.pay=function(t,e){var i=o.changeData(t);if(e)for(var n in e)0==i.hasOwnProperty(n)&&(i[n]=e[n]);o.jsCallAppWithBack("pay",i)},o.getReportFormatByObject=function(t,e){var i=new Object,n=null;if(n=Browser.onIOS?o.attrs_ios:o.attrs_android,t)for(var s in n)t.hasOwnProperty(s)?i[s]=t[s]:i[s]=n[s];return i.ext=e,i},o.changeData=function(t){if(!t)return{};for(var e={},i=t?t.split("&"):[],n=0,s=i.length;n<s;n++){var o=i[n];if(o&&0<o.length){var a=o.indexOf("="),r=o.slice(0,a),l=o.slice(a+1,o.length);l&&l.match(/^\d*(\.\d*){0,1}$/)?e[r]=parseInt(l):e[r]=l}}return e},o.backPay=function(t){console.log("+++++++++++++++ run backPay")},o.backSwitchAccount=function(t){console.log("+++++++++++++++ run backSwitchAccount"),o.reloadGame()},o.doActivity=function(t){o.jsCallApp("activity",t)},o.reloadGame=function(){Browser.window.location.reload()},o.SdkClass=null,o.connected=!1,o.logined=!1,o.jsToNativeFunction="OnCall:",o.jsToNativeClass="SDKManager",o.cmdQueues=[],o.ACTION_CONNECT="connect",o.ACTION_LOGIN="login",o.ACTION_LOGOUT="logout",o.ACTION_PAY="pay",o.ACTION_SWITCH_ACCOUNT="switch_account",o.ACTION_SELECTED_SERVER="selected_server",o.ACTION_CREATE_ROLE="create_role",o.ACTION_ENTER_GAME="enter_game",o.ACTION_ROLE_UPDATE="role_update",o.ACTION_ACTIVITY="activity",o.deviceInfo=null,o.phoneBangType=-1,__static(o,["attrs_ios",function(){return this.attrs_ios={serverid:"",servername:""}},"attrs_android",function(){return this.attrs_android={serverid:"",servername:"",roleid:"",rolename:"",country:"",viplevel:"0",balance:"0",rolelevel:"0",timestamp:"0",rolecreatetime:"-1",power:"0"}}]),o}(),GProto=function(){function t(){this._className_=null,this._id_=null,this._oid_=null,this._proto_=null,this._className_=ClassUtil.getQualifiedClassName(this),this._id_=Asswc.getSoleId()}__class(t,"gateModule.zwc.engine.core.protos.GProto");var e=t.prototype;return Laya.imps(e,{"zwc.saiman.interfaces.IProto":!0}),e.clone=function(){return null},e.dispose=function(){this._proto_=null,this._oid_=null,this._id_=null},e.toString=function(){return"["+this._className_+"@"+this._id_+"]"},__getset(0,e,"id",function(){return this._id_},function(t){this._id_!=t&&(this._id_=t)}),__getset(0,e,"oid",function(){return this._oid_},function(t){this._oid_=t}),__getset(0,e,"proto",function(){return this._proto_},function(t){this._proto_=t}),__getset(0,e,"className",function(){return this._className_}),t}(),Global=function(){function e(){}return __class(e,"gateModule.global.Global"),__getset(1,e,"nativeIOS",function(){return 1==e.application_model&&Render.isConchApp}),__getset(1,e,"isConchApp",function(){return 0<e.application_model&&Render.isConchApp}),__getset(1,e,"nativeAndroid",function(){return 2==e.application_model&&Render.isConchApp}),e.checkAppModel=function(t){e.application_model=t&&Render.isConchApp?(console.log("======= run checkAppModel,userAgent:"+Browser.window.navigator.userAgent),Browser.onIOS?1:2):0,console.log("======= run application_model:"+e.application_model)},e.requestNotice=function(){var t={};t.platCode=GlobalConfig.platCode,t.pid=GlobalConfig.pid,t.gid=GlobalConfig.gid,GlobalConfig.packageName&&0<GlobalConfig.packageName.length&&(t.packName=GlobalConfig.packageName),console.log("Global.requestNotice pNoteUrl :"+GlobalConfig.pNoteUrl+"params："+JSON.stringify(t)),HttpActionUtil.httpGet(GlobalConfig.pNoteUrl,t,e,gateModule.global.Global.onGetNoticeHandler,gateModule.global.Global.onGetNoticeError)},e.onGetNoticeHandler=function(t){if("string"==typeof t)try{console.log("pNoteUrl jason format:"+t),t=JSON.parse(t),GlobalConfig.logMsg=t,e.setAdminNoticeInfo()}catch(t){GlobalConfig.logMsg=null}},e.setAdminNoticeInfo=function(){if(GlobalConfig.logMsg){if(!GlobalConfig.loadingDescribe&&GlobalConfig.logMsg.hasOwnProperty("info")){var t=GlobalConfig.logMsg.info;t&&0<t.length&&(GlobalConfig.loadingDescribe=t)}if(!GlobalConfig.noticeDescribe&&GlobalConfig.logMsg.hasOwnProperty("content")){var e=GlobalConfig.logMsg.content;e&&0<e.length&&(GlobalConfig.noticeDescribe=e)}}},e.onGetNoticeError=function(t){console.log("获取公告接口错误")},e.checkQualificationDesc=function(t){if(gateModule.global.Global.nativeAndroid)switch(t){case"com.jg.lycj.huawei":GlobalConfig.loadingDescribe="审批文号：新广出审[2018]950 号 \n著作权人：喀什七酷网络科技有限公司 \n著作权登记号：2017SR301085 \n网络游戏出版物号：ISBN 978-7-498-04353-5  \n出版单位名称：华东师范大学电子音像出版社有限公司 \n备案号：文网游备字〔2018〕Ｍ-RPG 0482 号";break;default:GlobalConfig.loadingDescribe="审批文号：新广出审【2016】118号 \n著作权人：江苏易乐网络技术有限公司 \n著作权登记号：2015SR094949 \n网络游戏出版物号：ISBN 978-7-89404-309-2  \n出版单位名称：上海同济大学电子音像出版社有限公司\n备案号：文网游备字〔2016〕Ｍ-RPG 6075 号"}else if(gateModule.global.Global.nativeIOS);else switch(t){case"com.gamesqw.cqjy":case"com.psqw.h5.cqjy1.jrtt":case"com.jg.cqjy.game37":GlobalConfig.loadingDescribe="审批文号：新广出审【2016】118号 \n著作权人：江苏易乐网络技术有限公司 \n著作权登记号：2015SR094949 \n网络游戏出版物号：ISBN 978-7-89404-309-2  \n出版单位名称：上海同济大学电子音像出版社有限公司\n备案号：文网游备字〔2016〕Ｍ-RPG 6075 号"}8==Math.floor(Number(GlobalConfig.serverID)/1e4)&&(GlobalConfig.loadingDescribe="审批文号：新广出审【2016】118号 \n著作权人：江苏易乐网络技术有限公司 \n著作权登记号：2015SR094949 \n网络游戏出版物号：ISBN 978-7-89404-309-2  \n出版单位名称：上海同济大学电子音像出版社有限公司\n备案号：文网游备字〔2016〕Ｍ-RPG 6075 号")},e.isSleep=!1,e.curServerTime=0,e.openServeTime=0,e.comServeTime=0,e.application_model=0,e.run_env=0,e.xgame=0,e.nativeSuffix=!0,e.iosChecking=0,e}(),GlobalConfig=function(){function t(){}return __class(t,"gateModule.global.GlobalConfig"),t.language="ui",t.version="1.0.1.5",t.webversion=201901151543,t.appVersion="",t.mainFile="",t.gateResVerison=201903182216,t.socket_host="10.11.3.112",t.uid=null,t.socket_port=5001,t.serverID="1",t.serverName="s1",t.id_verify=0,t.wx_is_subscribe=0,t.query_subscribe=null,t.mall_list=null,t.serverState=1,t.openSerTime=0,t.serverTime="",t.platform="37wan",t.token="",t.gid="666666",t.pid="1",t.sign="",t.cdns=null,t.IMEI="",t.param="",t.logMsg=null,t.playerName=null,t.referer="",t.loginSign=null,t.passKey="",t.clickStream="0",t.adminClickStream="0",t.clickAppids="awyxcx|awy|",t.client=0,t.guid="123456",t.appid="37wan",t.platformTime="-1",t.platformSign="",t.platformAdult=-1,t.importServerUrl="http://loginmirh5.6wtx.com/importServer",t.getServerListUrl="http://loginmirh5.6wtx.com/loginserverdata/",t.clickUrl="http://click.cqjy.5jli.com/click",t.bigClickUrl="http://newclick.cqjy.5jli.com/click",t.pNoteUrl="http://loginmirh5.6wtx.com/gameNotice",t.verifyUrl="http://api.cqjy.5jli.com/h5/enter",t.mobileVerifyUrl="http://api.cqjy.5jli.com/mobile/enter",t.key="",t.hasFirstSend=!1,t.sameHost=!0,t.newUser=!1,t.versionMap=null,t.webGetParams=null,t.versionFiles=null,t.clientid=null,t.loadingDescribe=null,t.noticeDescribe=null,t.packageName=null,t.platCode="37wan",t.defaultQualification="审批文号：新广出审【2016】118号 \n著作权人：江苏易乐网络技术有限公司 \n著作权登记号：2015SR094949 \n网络游戏出版物号：ISBN 978-7-89404-309-2  \n出版单位名称：上海同济大学电子音像出版社有限公司\n备案号：文网游备字〔2016〕Ｍ-RPG 6075 号",t}(),GlobalConst=function(){function t(){}return __class(t,"gateModule.global.GlobalConst"),t.getFullUrl=function(t,e){void 0===e&&(e=!0);var i="";return t&&t.indexOf("?")<0&&(-1!=gateModule.global.GlobalConst.host.indexOf("http://")||-1!=gateModule.global.GlobalConst.host.indexOf("https://"))&&e&&Global.nativeSuffix&&(i="?"+GlobalConfig.gateResVerison),gateModule.global.GlobalConst.host+t+i},t.getStylegBinPath=function(t){return gateModule.global.GlobalConst.getFullUrl("ui/images/bin/"+t+".tb")},t.getStyleTexturePath=function(t){return gateModule.global.GlobalConst.getFullUrl("ui/images/textures/"+t+".png")},t.getDBPath=function(t){return gateModule.global.GlobalConst.getFullUrl("db/configs/"+t+".jxr")},t.getLayoutsImagePath=function(t,e){return void 0===e&&(e=!0),gateModule.global.GlobalConst.getFullUrl("ui/layouts/"+t,e)},t.getLayoutsPath=function(t){return gateModule.global.GlobalConst.getFullUrl("ui/layouts/"+t+".atlas")},t.checkTranferSkin=function(t,e,i){void 0===i&&(i=!0);var n=SkinUtil.checkTranferSkin(t,e);return gateModule.global.GlobalConst.getFullUrl(n,i)},t.justCreated=!1,t.isCreated=!1,t.host="E:/work/work_h5/trunk/source/client/resources/",t}(),ModulesManager=function(){function t(){this.useZip=!1,this.useVersion=!1,this.versionFiles=null,this.xgamePlatform="swan",this.loadPackage=!1}__class(t,"gateModule.global.ModulesManager");var e=t.prototype;return e.loadSubPackage=function(t,e,i){var n=this;if(this.loadPackage)e.runWith(!1);else{this.loadPackage=!0;try{("swan"==this.xgamePlatform?swan:wx).loadSubpackage({name:t,success:function(t){console.log("loadSubpackage,success:"+JSON.stringify(t)),n.loadPackage=!1,e.runWith(!0)},fail:function(t){console.log("loadSubpackage,fail:"+JSON.stringify(t)),n.loadPackage=!1,e.runWith(!1)}})}catch(t){}}},e.loadJson=function(t,e){var i=null;if("vs"==t){var n="js/resvs/vs.json";GlobalConfig.appVersion&&0<GlobalConfig.appVersion.length?n="js/resvs/vs_"+GlobalConfig.appVersion+".json":this.versionFiles.vs_js&&(n=(n=this.versionFiles.vs_js).replace(".js",".json")),i=GlobalConst.getFullUrl(n)}Laya.loader.load([{url:i,type:"json"}],Handler.create(this,this.onLoaded,[i,e]))},e.onLoaded=function(t,e,i){var n=!1;i&&(n=!0,GlobalConfig.versionMap=Laya.loader.getRes(t)),e&&e.runWith(n),Laya.loader.clearRes(t,!0)},e.initVersionFile=function(){},e.loadModule=function(t,e,i,n){if(void 0===n&&(n=0),0<n&&"vs"!=t)this.loadSubPackage(t,e,i);else if(this.versionFiles||(this.versionFiles=GlobalConfig.versionFiles,this.versionFiles||(this.versionFiles=new Object),GlobalConfig.appVersion&&0<GlobalConfig.appVersion.length&&(this.useVersion=!0),console.log("______versionFiles:"+JSON.stringify(this.versionFiles))),"vs"!=t){var s=t+".js",o="",a=null,r=["gamemain","gameui"];if(this.versionFiles)switch(t){case"gamemain":this.versionFiles.main_js&&(a=this.versionFiles.main_js);break;case"vs":this.versionFiles.vs_js&&(a=this.versionFiles.vs_js);break;case"gameui":this.versionFiles.ui_js&&(a=this.versionFiles.ui_js)}if(a){if(this.useVersion){var l=/_[\w]+./g.exec(a)[0];o=a.replace(l,"_"+GlobalConfig.appVersion+".")}else o=a;0<=r.indexOf(t)&&this.useZip&&(o=o.replace(".js",".bin"),"arraybuffer")}else if(0<=r.indexOf(t)&&this.useZip)o="js/"+t+".bin","arraybuffer";else{var h="";this.useVersion&&(h="?"+GlobalConfig.appVersion),o="js/"+t+".js"+h}var c=GlobalConst.getFullUrl(o);"gamemain"==t&&(GlobalConfig.mainFile=c,console.log("______mainFile:"+c)),console.log("moduleName:"+s+",recordTime:"+Browser.now()),this.createScript(c,e)}else this.loadJson(t,e)},e.createScript=function(t,e){var i=Browser.document.createElement("script");i.type="text/javascript",i.src=t,i.loader="laya",console.log("module createScript start:"+i.src),Browser.document.getElementsByTagName("head")[0].appendChild(i),i.onload=function(){console.log("module createScript complete:"+i.src),e&&e.runWith(!0)},i.onerror=function(){console.log("module createScript error:"+i.src),e&&e.runWith(!1)}},e.loadedCompeleteHandler=function(t,e,i,n){var s=Browser.now(),o=null;if(0<=t.indexOf(".bin")){var a=new ByteArray;a.writeArrayBuffer(n),a.position=0,a.uncompress(),0<a.bytesAvailable&&(o=a.readUTFBytes(a.bytesAvailable),a.clear()),a=null,console.log("moduleName:"+e+",parseTime:"+(Browser.now()-s)+",length:"+o.length)}else o=n;var r=!1;o&&(r=!0,window.eval(o+"//# sourceURL="+e)),console.log("moduleName:"+e+",endTime:"+(Browser.now()-s)+","+r),i&&i.runWith(r),Laya.loader.clearRes(t,!0)},t.instance=function(){return t._instance||(t._instance=new t),t._instance},t._instance=null,t}(),ReportUtils=function(){function t(){this._list=[],this.onOff=-1,this._t=0}__class(t,"gateModule.global.ReportUtils");var e=t.prototype;return e.pushInfo=function(t){Browser.onPC||200<this._list.length||(t+=" time="+Browser.now(),0!=this.onOff&&this._list.push(t))},e.setSwitch=function(t){t?(this.onOff=1,this.startReport()):(this.onOff=0,this._list=[])},e.startReport=function(){this._t=Browser.now(),Laya.timer.loop(500,this,this.reportNext)},e.reportNext=function(){if(0!=this._list.length&&1==this.onOff){var t=Browser.now();if(!(t-this._t<1e4&&this._list.length<20)){var e=GateSocketDock.GetIntance().loginSocket;if(e&&e.connected){for(var i="",n=20;n--&&0<this._list.length;){var s=this._list.shift();0<i.length?i+="|"+s:i+=s}this.sendReport(i),this._t=t}}}},e.sendReport=function(t){var e=new tos_13601;e.info=t,Message.sendToService(e)},__getset(1,t,"ins",function(){return t._inst=t._inst||new t}),t._inst=null,t}(),ResUtils=function(){function l(){}return __class(l,"gateModule.global.ResUtils"),l.getHost=function(){if(!l._host_){var t=Browser.window.location.href;l._host_=t.substring(0,t.indexOf("h5"))}return l._host_},l.loadStyleImage=function(t,e){void 0===e&&(e="");var i=GlobalConst.getStyleTexturePath(t),n=GlobalConst.getStylegBinPath(t),s=Handler.create(l,gateModule.global.ResUtils.onImageComplete,[e,n,i]);Laya.loader.load([{url:n,type:"arraybuffer"},{url:i,type:"image"}],s)},l.onImageComplete=function(t,e,i){var n=new ByteArray(Laya.loader.getRes(e)),s=Laya.loader.getRes(i);if(null!=s){var o=TextureSheet.GetNew();o.fileName=t,o.sourceTexture=s,o.decode(n),l.UiTextureHash.put(o.fileName,o)}else console.log("load error ----\x3e",e,i)},l.takeTexture=function(t,e){var i=l.UiTextureHash.take(t);return i?i.takeTexture(e):null},l.drawTexture=function(t,e,i,n,s,o){void 0===o&&(o=!1);var a=l.takeTexture(t,e);return o&&i.clear(),a?(i.drawTexture(a,n,s,a.width,a.height),new Rectangle(n,s,a.width,a.height)):new Rectangle(n,s)},l.loadConfig=function(t,e,i,n){for(var s=[],o=0;o<t.length;++o){var a=ClassUtils.getClass("gateModule.protos.db."+e[o]);if(a)if(a.hash)console.log(e[o]+"类已解析");else{var r=t[o];r=GlobalConst.getDBPath(t[o]),s.push({url:r,type:"arraybuffer",className:e[o]})}else console.log(e[o]+"类不存在或者未在ConfigDataUtils注册")}0<s.length?Laya.loader.load(s,Handler.create(l,gateModule.global.ResUtils.onConfigComplete,[s,i]),null,"arraybuffer"):(n&&(n.run(),n.clear(),n=null),i&&(i.run(),i.clear(),i=null))},l.onConfigComplete=function(t,e){for(var i=0;i<t.length;++i){var n=t[i],s=ClassUtils.getClass("gateModule.protos.db."+n.className);if(s&&null==s.hash){s.setup(n.url);for(var o=0;o<s.count;++o)s.config(o)}Laya.loader.clearRes(n.url),n=null}t.length=0,t=null,e&&(e.run(),e.clear(),e=null)},l.setCookie=function(t){for(var e in t)LocalStorage.setItem(e,t[e])},l.getCookie=function(t){return LocalStorage.getItem(t)},l.loadRes=function(t,e){},l.hasResLoaded=function(){return!1},l.taskLoadPro=function(t,e){var i=l.taskPros[t];if(i)for(var n=String(i).split(","),s=0;s<n.length;s++)l.startLoad(n[s])},l.startLoad=function(t){var e=[{url:GlobalConst.getLayoutsPath(t),type:"atlas"}];Laya.loader.load(e,Handler.create(l,gateModule.global.ResUtils.onLoad),null,"atlas")},l.onLoad=function(){},l._host_=null,__static(l,["UiTextureHash",function(){return this.UiTextureHash=new Hash},"checkPointPros",function(){return this.checkPointPros={2:"actor",3:"skill",4:"bag,strength,strength_mix",5:"specialgodring",7:"strength,strength_mix",12:"strength,strength_mix",12:"specialgodring",14:"skill",16:"specialgodring",17:"boss",18:"digger"}},"taskPros",function(){return this.taskPros={10046:"copy",10047:"strength,strength_mix"}}]),l}(),WebSdk=function(){function a(){}return __class(a,"gateModule.global.web.WebSdk"),a.getIns=function(){if(!a.sqgamesdk)try{a.sqgamesdk=new SQGAMESDK}catch(t){return!1}return!0},a.share=function(t,e,i,n,s,o){a.getIns()&&a.sqgamesdk&&a.sqgamesdk.share&&a.sqgamesdk.share(e,t,i,function(){console.log("分享成功"),s&&s.apply(n)},function(){o&&o.apply(n)})},a.subscribe=function(e,i){a.getIns()&&a.sqgamesdk&&a.sqgamesdk.subscribe&&a.sqgamesdk.subscribe(function(t){console.log("关注结果："+t),i&&i.apply(e,[t])})},a.querySubscrible=function(t,e,i,n){var s=GlobalConfig.query_subscribe;s?HttpActionUtil.httpGet(s,t,e,i,n):console.log("关注查询接口地址不存在，请查看，GlobalConfig.query_subscribe")},a.logServer=function(t,e){void 0===e&&(e="server"),a.getIns()&&a.sqgamesdk&&a.sqgamesdk.log&&a.sqgamesdk.log(t,e)},a.download_wd=function(e,i){a.getIns()&&a.sqgamesdk&&a.sqgamesdk.download_wd&&a.sqgamesdk.download_wd(function(t){console.log("下载微端结果："+t),i&&i.apply(e,[t])})},a.verify=function(e,i){a.getIns()&&a.sqgamesdk&&a.sqgamesdk.verify&&a.sqgamesdk.verify(function(t){console.log("认证功能 ："+t),GlobalConfig.id_verify=2,i&&i.apply(e,[t])})},a.switchAccount=function(){a.getIns()&&a.sqgamesdk&&a.sqgamesdk.switchAccount&&(a.sqgamesdk.switchAccount(),console.log("已送切换账号"))},a.saveToDesktop=function(e,i){a.getIns()&&a.sqgamesdk&&a.sqgamesdk.saveToDesktop&&a.sqgamesdk.saveToDesktop(function(t){console.log("保存桌面 ："+t),i&&i.apply(e,[t])})},a.mallList=function(t,e,i,n){var s=GlobalConfig.mall_list;s?HttpActionUtil.httpGet(s,t,e,i,n):console.log("平台商品列表地址不存在，请查看，GlobalConfig.mall_list")},a.pay=function(t){a.getIns()&&a.sqgamesdk&&a.sqgamesdk.pay&&(console.log("下单充值："+t),a.sqgamesdk.pay(a.changeData(t)))},a.getAppDeviceInfo=function(i,e,n){if(a.getIns()&&a.sqgamesdk)if(a.sqgamesdk.getAppInfo)try{a.sqgamesdk.getAppInfo(function(t){console.log("getAppInfo,获取成功："+JSON.stringify(t)),e&&e.apply(i,[t])},function(t,e){console.log("getAppInfo,获取失败"+t,e),n&&n.apply(i,[t,e])})}catch(t){console.log(t)}else console.log("sqgamesdk.getAppInfo no own")},a.xgameLogin=function(e,i){if(a.getIns()&&a.sqgamesdk)if(a.sqgamesdk.login)try{a.sqgamesdk.login(function(t){console.log("xgameLogin,获取成功"),i&&i.apply(e,[t])})}catch(t){console.log(t)}else console.log("sqgamesdk.login no own")},a.changeData=function(t){if(!t)return{};for(var e={},i=t?t.split("&"):[],n=0,s=i.length;n<s;n++){var o=i[n];if(o&&0<o.length){var a=o.indexOf("="),r=o.slice(0,a),l=o.slice(a+1,o.length);l&&l.match(/^\d*(\.\d*){0,1}$/)?e[r]=parseInt(l):e[r]=l}}return e},a.sqgamesdk=null,a}(),WebSdkUtil=function(){function i(){}return __class(i,"gateModule.global.web.WebSdkUtil"),i.initSdk=function(){WebSdk.getIns()},i.getWebSdk=function(){return WebSdk.sqgamesdk},i.sdk_cmd=function(t,e){if(t)switch(t=t.toLowerCase()){case"app_device_info":WebSdk.getAppDeviceInfo(null,gateModule.global.web.WebSdkUtil.getDeviceSuccessFn,gateModule.global.web.WebSdkUtil.getDeviceFailFn);break;case"xgame_login":GameLog.log("===========get user info"),GameLog.ins().startStep(GameLog.INFO,3e3),WebSdk.xgameLogin(null,gateModule.global.web.WebSdkUtil.xgameLoginSuccessFn);break;case"report_server":var i=t.split("_")[1],n={};n.serverid=GlobalConfig.serverID,n.servername=GlobalConfig.serverName,Global.curServerTime?n.timestamp=Global.curServerTime:n.timestamp=Browser.now(),WebSdk.logServer(n,i)}},i.getDeviceSuccessFn=function(t){(i.deviceInfo=t)&&(i.deviceInfo.IMEI&&(GlobalConfig.IMEI=i.deviceInfo.IMEI),i.deviceInfo.PACKAGE_NAME&&(GlobalConfig.packageName=i.deviceInfo.PACKAGE_NAME),Global.requestNotice())},i.getDeviceFailFn=function(t,e){i.getDeviceFailTimes++,e&&console.log("获取设备失败消息：",e),i.getDeviceFailTimes<3&&i.sdk_cmd("app_device_info")},i.xgameLoginSuccessFn=function(t){if(t&&0!=t.code){var e=t.data;if(e.appid&&(GlobalConfig.platform=GlobalConfig.pid=GlobalConfig.appid=e.appid),e.game_id&&(GlobalConfig.gid=e.game_id),e.token&&(GlobalConfig.token=e.token),e.uid&&(GlobalConfig.uid=e.uid),e.hasOwnProperty("click_stream")){var i=e.click_stream+"";"1"==i?GlobalConfig.clickAppids=GlobalConfig.appid+"|":i="0",GlobalConfig.clickStream=i}GlobalConfig.webGetParams=e,GameLog.log(JSON.stringify(e)),Global.requestNotice(),SkinUtil.setup(GlobalConfig.appid),GameLog.ins().endStep(GameLog.INFO),Message.sendToModule("SHOWLOGINUI",["gateModule.modules.login.LoginGateModule"])}else Message.sendToModule("LOGIN_FAIL",["gateModule.modules.login.LoginGateModule"])},i.SHARE="share",i.SUBSCRIBE="subscribe",i.REPORT_SERVER="report_server",i.REPORT_CREATE="report_create",i.REPORT_ENTERGAME="report_entergame",i.REPORT_LEVE_LUP="report_levelup",i.DOWNLOAD_WD="download_wd",i.SWITCHACCOUNT="switchaccount",i.SAVETODESKTOP="savetodesktop",i.PAY_ORDER="pay",i.VERIFY="verify",i.APP_DEVICE_INFO="app_device_info",i.XGAME_LOGIN="xgame_login",i.getDeviceFailTimes=0,i.deviceInfo=null,__static(i,["platformIds",function(){return this.platformIds=[31,32,33,34,35,36]}]),i}(),GateModuleConst=function(){function t(){}return __class(t,"gateModule.modules.GateModuleConst"),t.MGLOGIN="gateModule.modules.login.LoginGateModule",__static(t,["moduleClass",function(){return this.moduleClass=[LoginGateModule]}]),t}(),Login_IntOrder=function(){function t(){}return __class(t,"gateModule.modules.login.order.Login_IntOrder"),t.LOGIN_CONENTED="__SOCKET_CONENTED__",t.LOGIN_RECONENTED="__LOGIN_RECONENTED__",t.SOCKET_CLOSE="SOCKET_CLOSE",t.REQUESTENTER="REQUESTENTER",t.ENGINE_READY="__ENGIN_READY__",t.TO_LOGIN="__TO_LOGIN__",t.LOGIN_ENTERSCENE="__LOGIN_ENTERSCENE__",t.SHOWLOGINUI="SHOWLOGINUI",t.SETLOADING="SETLOADING",t.SHOWCREATEROLE="SHOWCREATEROLE",t.STARTLODING="STARTLODING",t.CLOSESERVERLIST="CLOSESERVERLIST",t.LOGIN_FAIL="LOGIN_FAIL",t.APP_ONBLUR="APP_ONBLUR",t.APP_ONFOCUS="APP_ONFOCUS",t}(),Login_SerOrder=function(){function t(){}return __class(t,"gateModule.modules.login.order.Login_SerOrder"),t.TOC_10102="10102",t.TOC_10104="10104",t.TOC_10106="10106",t.TOC_10110="10110",t.TOC_10114="10114",t.TOC_10118="10118",t.TOC_10201="10201",t.TOC_13602="13602",t.TOC_13303="13303",t}(),CConCeal=function(){function r(){}__class(r,"gateModule.protos.db.CConCeal");var t=r.prototype;return t.key=function(t){return gateModule.protos.db.CConCeal.c_key[t]},t.desc=function(t){return gateModule.protos.db.CConCeal.c_desc[t]},t.title=function(t){return gateModule.protos.db.CConCeal.c_title[t]},t.content=function(t){return gateModule.protos.db.CConCeal.c_content[t]},t.platform=function(t){return gateModule.protos.db.CConCeal.c_platform[t]},t.isAuto=function(t){return gateModule.protos.db.CConCeal.c_isAuto[t]},__getset(1,r,"MODEL",function(){return null==gateModule.protos.db.CConCeal._intance_&&(gateModule.protos.db.CConCeal._intance_=new r),gateModule.protos.db.CConCeal._intance_}),r.hasIndex=function(t){return gateModule.protos.db.CConCeal.hash&&gateModule.protos.db.CConCeal.hash.proto.hasOwnProperty(t)},r.getIndex=function(t){return gateModule.protos.db.CConCeal.hash.take(t)},r.setup=function(t){if(!(0<gateModule.protos.db.CConCeal.count)){gateModule.protos.db.CConCeal.hash=new Hash,gateModule.protos.db.CConCeal.buff=Laya.loader.getRes(t),gateModule.protos.db.CConCeal.bytes=new ByteArray(r.buff);var e=r.bytes.readShort();gateModule.protos.db.CConCeal.count=e}},r.config=function(t){var e=r.bytes.readInt();gateModule.protos.db.CConCeal.c_key.push(e);var i=r.bytes.readUTF();gateModule.protos.db.CConCeal.c_desc.push(i);var n=r.bytes.readUTF();gateModule.protos.db.CConCeal.c_title.push(n);var s=r.bytes.readUTF3();gateModule.protos.db.CConCeal.c_content.push(s);var o=r.bytes.readUTF();gateModule.protos.db.CConCeal.c_platform.push(o);var a=r.bytes.readInt();gateModule.protos.db.CConCeal.c_isAuto.push(a),gateModule.protos.db.CConCeal.hash.put(e,t)},r.hash=null,r._intance_=null,r.count=0,r.buff=null,r.bytes=null,__static(r,["c_key",function(){return this.c_key=new Array},"c_desc",function(){return this.c_desc=new Array},"c_title",function(){return this.c_title=new Array},"c_content",function(){return this.c_content=new Array},"c_platform",function(){return this.c_platform=new Array},"c_isAuto",function(){return this.c_isAuto=new Array}]),r}(),CInventedName=function(){function n(){}__class(n,"gateModule.protos.db.CInventedName");var t=n.prototype;return t.key=function(t){return gateModule.protos.db.CInventedName.c_key[t]},t.name=function(t){return gateModule.protos.db.CInventedName.c_name[t]},__getset(1,n,"MODEL",function(){return null==gateModule.protos.db.CInventedName._intance_&&(gateModule.protos.db.CInventedName._intance_=new n),gateModule.protos.db.CInventedName._intance_}),n.hasIndex=function(t){return gateModule.protos.db.CInventedName.hash&&gateModule.protos.db.CInventedName.hash.proto.hasOwnProperty(t)},n.getIndex=function(t){return gateModule.protos.db.CInventedName.hash.take(t)},n.setup=function(t){gateModule.protos.db.CInventedName.hash=new Hash,gateModule.protos.db.CInventedName.buff=Laya.loader.getRes(t),gateModule.protos.db.CInventedName.bytes=new ByteArray(n.buff);var e=n.bytes.readShort();gateModule.protos.db.CInventedName.count=e},n.config=function(t){var e=n.bytes.readInt();gateModule.protos.db.CInventedName.c_key.push(e);var i=n.bytes.readUTF();gateModule.protos.db.CInventedName.c_name.push(i),gateModule.protos.db.CInventedName.hash.put(e,t)},n.hash=null,n._intance_=null,n.count=0,n.buff=null,n.bytes=null,__static(n,["c_key",function(){return this.c_key=new Array},"c_name",function(){return this.c_name=new Array}]),n}(),CLoadingCoolTime=function(){function n(){}__class(n,"gateModule.protos.db.CLoadingCoolTime");var t=n.prototype;return t.key=function(t){return gateModule.protos.db.CLoadingCoolTime.c_key[t]},t.coolTime=function(t){return gateModule.protos.db.CLoadingCoolTime.c_coolTime[t]},__getset(1,n,"MODEL",function(){return null==gateModule.protos.db.CLoadingCoolTime._intance_&&(gateModule.protos.db.CLoadingCoolTime._intance_=new n),gateModule.protos.db.CLoadingCoolTime._intance_}),n.hasIndex=function(t){return gateModule.protos.db.CLoadingCoolTime.hash&&gateModule.protos.db.CLoadingCoolTime.hash.proto.hasOwnProperty(t)},n.getIndex=function(t){return gateModule.protos.db.CLoadingCoolTime.hash.take(t)},n.setup=function(t){if(!(0<gateModule.protos.db.CLoadingCoolTime.count)){gateModule.protos.db.CLoadingCoolTime.hash=new Hash,gateModule.protos.db.CLoadingCoolTime.buff=Laya.loader.getRes(t),gateModule.protos.db.CLoadingCoolTime.bytes=new ByteArray(n.buff);var e=n.bytes.readShort();gateModule.protos.db.CLoadingCoolTime.count=e}},n.config=function(t){var e=n.bytes.readInt();gateModule.protos.db.CLoadingCoolTime.c_key.push(e);var i=n.bytes.readInt();gateModule.protos.db.CLoadingCoolTime.c_coolTime.push(i),gateModule.protos.db.CLoadingCoolTime.hash.put(e,t)},n.hash=null,n._intance_=null,n.count=0,n.buff=null,n.bytes=null,__static(n,["c_key",function(){return this.c_key=new Array},"c_coolTime",function(){return this.c_coolTime=new Array}]),n}(),CLoadingMsg=function(){function n(){}__class(n,"gateModule.protos.db.CLoadingMsg");var t=n.prototype;return t.key=function(t){return gateModule.protos.db.CLoadingMsg.c_key[t]},t.tipMsg=function(t){return gateModule.protos.db.CLoadingMsg.c_tipMsg[t]},__getset(1,n,"MODEL",function(){return null==gateModule.protos.db.CLoadingMsg._intance_&&(gateModule.protos.db.CLoadingMsg._intance_=new n),gateModule.protos.db.CLoadingMsg._intance_}),n.hasIndex=function(t){return gateModule.protos.db.CLoadingMsg.hash&&gateModule.protos.db.CLoadingMsg.hash.proto.hasOwnProperty(t)},n.getIndex=function(t){return gateModule.protos.db.CLoadingMsg.hash.take(t)},n.setup=function(t){if(!(0<gateModule.protos.db.CLoadingMsg.count)){gateModule.protos.db.CLoadingMsg.hash=new Hash,gateModule.protos.db.CLoadingMsg.buff=Laya.loader.getRes(t),gateModule.protos.db.CLoadingMsg.bytes=new ByteArray(n.buff);var e=n.bytes.readShort();gateModule.protos.db.CLoadingMsg.count=e}},n.config=function(t){var e=n.bytes.readInt();gateModule.protos.db.CLoadingMsg.c_key.push(e);var i=n.bytes.readUTF();gateModule.protos.db.CLoadingMsg.c_tipMsg.push(i),gateModule.protos.db.CLoadingMsg.hash.put(e,t)},n.hash=null,n._intance_=null,n.count=0,n.buff=null,n.bytes=null,__static(n,["c_key",function(){return this.c_key=new Array},"c_tipMsg",function(){return this.c_tipMsg=new Array}]),n}(),TextureSheet=function(){function t(){this.fileName=null,this.styles=null,this.$names=[],this.$width=[],this.$height=[],this.$x=[],this.$y=[],this.$sourceTexture=null,this.$texturePath=null,this.textures=[],null==gateModule.ui.TextureSheet.TextureSheetqueueHash&&(gateModule.ui.TextureSheet.TextureSheetqueueHash=new Hash),this.styles=new Hash}__class(t,"gateModule.ui.TextureSheet");var e=t.prototype;return e.decode=function(t){t.readUTF();for(var e=t.readByte(),i=0;i<e;i++){t.readUTF();for(var n=t.readShort(),s=0;s<n;s++){var o=t.readUTF();if(this.$names.push(o),this.$x.push(t.readShort()),this.$y.push(t.readShort()),this.$width.push(t.readShort()),this.$height.push(t.readShort()),this.styles.put(this.fileName+"#"+o,s),this.sourceTexture){var a=Texture.createFromTexture(this.sourceTexture,this.$x[this.$x.length-1],this.$y[this.$y.length-1],this.$width[this.$width.length-1],this.$height[this.$height.length-1]);this.textures.push(a)}}}gateModule.ui.TextureSheet.TextureSheetqueueHash.put(this.fileName,this)},e.createTetures=function(){},e.takeTexture=function(t){var e=this.fileName+"#"+t+".png",i=this.styles.take(e);return this.textures.length?this.textures[i]:null},e.takeStyleTextureBounds=function(t){var e=this.fileName+"#"+t+".png",i=this.styles.take(e),n=new Rectangle;return n.x=this.$x[i],n.y=this.$y[i],n.width=this.$width[i],n.height=this.$height[i],n},__getset(0,e,"sourceTexture",function(){return this.$sourceTexture},function(t){this.$sourceTexture=t}),t.GetNew=function(){return new t},t.getTextureSheet=function(t){return gateModule.ui.TextureSheet.TextureSheetqueueHash.take(t)},t.TextureSheetqueueHash=null,__static(t,["$ByteArray",function(){return this.$ByteArray=new ByteArray}]),t}(),CodeUtils=function(){function e(){}return __class(e,"gateModule.utils.CodeUtils"),e.createButton=function(t,e,i,n,s,o,a,r,l,h){void 0===o&&(o=2),void 0===a&&(a=""),void 0===l&&(l=0);var c=new Button(t,a);return c.pos(e,i),0<n&&0<s&&c.size(n,s),c.stateNum=o,c.labelFont="黑体",0<l&&(c.labelSize=l),h&&(c.labelColors=h),r&&r.addChild(c),c},e.createText=function(t,e,i,n,s,o,a,r,l,h,c,u,d){void 0===s&&(s=""),void 0===o&&(o=18),void 0===a&&(a="#ffffff"),void 0===r&&(r=!1),void 0===l&&(l="center"),void 0===h&&(h=!1),void 0===c&&(c=!1),void 0===d&&(d=!1);var _=new Text;return _.pos(t,e),0<i&&(_.width=i),0<n&&(_.height=n),_.text=s,_.fontSize=o,_.color=a,_.bold=r,_.align=l,_.wordWrap=h,_.autoSize=c,_.cacheAsBitmap=d,_.font="黑体",u&&u.addChild(_),_},e.createLabel=function(t,e,i,n,s,o,a){void 0===o&&(o=""),void 0===a&&(a=16777215);var r=new Label;return r.text=o,r.pos(t,e),r.size(i,n),r.color="#"+a.toString(16),s&&s.addChild(r),r},e.createImage=function(t,e,i,n,s,o){void 0===n&&(n=0),void 0===s&&(s=0);var a=new Image;return a.pos(e,i),0<n&&0<s&&a.size(n,s),a.dataSource=t,o&&o.addChild(a),a},e.createHtmlDiv=function(t,e,i,n,s,o,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=20),void 0===n&&(n="#ffffff"),void 0===s&&(s=0),void 0===o&&(o=0);var r=new HTMLDivElement;return r.x=t,r.y=e,r.style.font="黑体",r.style.fontFamily="黑体",r.style.fontSize=i,r.style.color=n,0<s&&(r.width=s),0<o&&(r.height=o),a&&a.addChild(r),r},e.createSprite=function(t,e,i,n,s,o){void 0===n&&(n=0),void 0===s&&(s=0);var a=new Sprite;return t&&(a.texture=Laya.loader.getRes(t)),a.pos(e,i),0<n&&(a.width=n),0<s&&(a.height=s),o&&o.addChild(a),a},e.replace=function(t,e){e.pos(t.x,t.y),t.parent&&(t.parent.addChildAt(e,t.parent.getChildIndex(t)),t.removeSelf())},e.enumSuccessRate=function(t){return t=t.toLowerCase(),e._enumSR.indexOf(t)},__static(e,["_enumSR",function(){return this._enumSR=["none","verylow","low","middle","high","veryhigh","mustsuccess"]}]),e}(),Common=function(){function r(){}return __class(r,"gateModule.utils.Common"),r.checkClickOpenStatus=function(){var t=!1;return("all"==GlobalConfig.clickAppids||GlobalConfig.appid&&0<=GlobalConfig.clickAppids.indexOf(GlobalConfig.appid+"|"))&&(t=!0),"1"==GlobalConfig.clickStream&&t},r.mirClick=function(t,e,i,n,s,o,a){void 0===a&&(a="37wan"),null==n&&(n=GlobalConfig.serverID),null==s&&(s=GlobalConfig.gid),null==o&&(o=GlobalConfig.IMEI),r.clickStreamToAdmin(t,e,i),r.clickStreamToBigData(t,e,i,n,s,o,a)},r.clickStreamToAdmin=function(t,e,i,n){if("1"==GlobalConfig.adminClickStream&&gateModule.utils.Common.checkClickOpenStatus()){console.log("发送点击流请求：类型"+t);var s=new Object;s.type=t,s.pid=e,s.account=i,HttpActionUtil.httpGet(GlobalConfig.clickUrl,s,null,null)}},r.clickStreamToBigData=function(t,e,i,n,s,o,a){if(void 0===a&&(a="37wan"),gateModule.utils.Common.checkClickOpenStatus()){var r=new Object;r.type=t,r.pid=e,r.account=i,r.sid=n||"",r.gid=s||"",r.traceId=o||"",r.plat=a,r.time=Browser.now(),HttpActionUtil.httpGet(GlobalConfig.bigClickUrl,r,null,null)}},r.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},r.setup_xgame=function(t){if(2==t){Global.xgame=1;try{BMiniAdapter.init(),ModulesManager.instance().xgamePlatform="swan",swan.setKeepScreenOn({keepScreenOn:!0,complete:function(t){console.log("keepScreenOn:"+t)}})}catch(t){console.log("bd:"+t)}}if(3==t){Global.xgame=2;try{MiniAdpter.init(),MiniAdpter.autoCacheFile=!0,ModulesManager.instance().xgamePlatform="wx",wx.setKeepScreenOn({keepScreenOn:!0,complete:function(t){console.log("keepScreenOn:"+t)}}),wx.getSystemInfo({success:function(t){r.transformSysInfo(t)}})}catch(t){console.log("wx:"+t)}}ProtocolUtil.forceHttps=0<Global.xgame},r.transformSysInfo=function(t){if(t){if(null==WebSdkUtil.deviceInfo)WebSdkUtil.deviceInfo=t;else for(var e in t)WebSdkUtil.deviceInfo[e]=t;t.model&&(WebSdkUtil.deviceInfo.PHONE_MODEL=t.model)}},r.checkWXLib=function(){if(2!=Global.xgame)return 1;var t=wx.getSystemInfoSync().SDKVersion;return 0<=r.compareVersion(t,"2.1.0")?1:(wx.showModal({title:"提示",content:"当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。"}),0)},r.compareVersion=function(t,e){for(var i=t.split("."),n=e.split("."),s=Math.max(i.length,n.length);i.length<s;)i.push("0");for(;n.length<s;)n.push("0");for(var o=0;o<s;o++){var a=parseInt(i[o]),r=parseInt(n[o]);if(r<a)return 1;if(a<r)return-1}return 0},r}(),DateUtil=function(){function c(){}return __class(c,"gateModule.utils.DateUtil"),c.dateFormat=function(t,e){return gateModule.utils.DateUtil.format(e,t.getSeconds(),t.getMinutes(),t.getHours(),t.getDate(),t.getMonth()+1,t.getFullYear(),t.getMilliseconds())},c.format=function(t,e,i,n,s,o,a,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===r&&(r=0);var l={"M+":o,"d+":s,"h+":n,"m+":i,"s+":e,"q+":Math.floor((o-1+3)/3),S:r};for(var h in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a+"").substr(4-RegExp.$1.length))),l)new RegExp("("+h+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?l[h]:("00"+l[h]).substr((""+l[h]).length)));return t},c.deltaFormat=function(t,e){var i=c.getDeltaData(t),n=Common.isArray(e)?c.getFormatStr(e,i):e;return gateModule.utils.DateUtil.format(n,i.s,i.m,i.h,i.d,0,0,i.S)},c.deltaFormatPro=function(t,e,i){var n=c.getDeltaDataPro(t,e),s=Common.isArray(i)?c.getFormatStr(i,n):i;return gateModule.utils.DateUtil.format(s,n.s,n.m,n.h,n.d,n.M,n.y,n.S)},c.getFormatStr=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i].c,s=!0,o=0;o<n.length&&"..."!=StringUtils.numstr(n,o,2);o++){var a=n.charAt(o);if("?"!=a){if("?"==StringUtils.numstr(n,o+1,0)){o++;break}if(e[a]<=0){s=!1;break}}}if(s)return t[i].f}return null},c.getDeltaData=function(t){var e=t%1e3,i=(t=t/1e3>>0)/c.DAY_SECONDS>>0,n=(t%=c.DAY_SECONDS)/3600>>0,s=(t%=3600)/60>>0;return{s:t%=60,m:s,h:n,d:i,S:e}},c.getDeltaDataPro=function(t,e){var i;t.getTime()>e.getTime()&&(i=t,t=e,e=i);for(var n=0;;){if(t.setFullYear(t.getFullYear()+1),!(t.getTime()<=e.getTime())){t.setFullYear(t.getFullYear()-1);break}n++}for(var s=0;;){if(11==t.getMonth()?(t.setFullYear(t.getFullYear()+1),t.setMonth(0)):t.setMonth(t.getMonth()+1),!(t.getTime()<=e.getTime())){0==t.getMonth()?(t.setFullYear(t.getFullYear()-1),t.setMonth(11)):t.setMonth(t.getMonth()-1);break}s++}var o=e.getTime()-t.getTime(),a=o%1e3,r=(o=o/1e3>>0)/c.DAY_SECONDS>>0,l=(o%=c.DAY_SECONDS)/3600>>0,h=(o%=3600)/60>>0;return{s:o%=60,m:h,h:l,d:r,M:s,y:n,S:a}},c.getDayTime=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=NaN),isNaN(i)&&(i=Browser.now()),0!=e&&(i+=e*TimeUtils.DATE_SECOND*1e3);var n=new Date(i);return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setTime(n.getTime()+1e3*t),n},c.getDateByServer=function(t){return void 0===t&&(t=NaN),isNaN(t)&&(t=Browser.now()),new Date(t)},c.FSTR_1="yyyy-MM-dd hh:mm:ss",c.FSTR_2="hh:mm:ss",c.FSTR_3="h小时m分s秒",c.FSTR_4="hh:mm",c.FSTR_5="mm:ss",c.DAY_SECONDS=86400,c.HOUR_SECONDS=3600,c.MINUTE_SECONDS=60,__static(c,["FARR_1",function(){return this.FARR_1=[{c:"y...",f:"yyyy年"},{c:"M...",f:"M月"},{c:"d...",f:"d天"},{c:"hms?",f:"h小时m分"},{c:"h...",f:"h小时"},{c:"ms?",f:"m分钟"},{c:"m?s?",f:"刚刚"}]},"FARR_2",function(){return this.FARR_2=[{c:"hm?s?",f:"h:mm:ss"},{c:"m?s?",f:"mm:ss"}]},"FARR_3",function(){return this.FARR_3=[{c:"h...",f:"h:mm:ss"},{c:"m...",f:"m:ss"},{c:"s?",f:"s"}]},"FARR_4",function(){return this.FARR_4=[{c:"h...",f:"h时mm分ss秒"},{c:"m...",f:"m分ss秒"},{c:"s?",f:"s秒"}]},"FARR_5",function(){return this.FARR_5=[{c:"d...",f:"d天hh:mm:ss"},{c:"h?",f:"h:mm:ss"}]}]),c}(),StringUtils=function(){function a(){}return __class(a,"gateModule.utils.StringUtils"),a.getChineseNum=function(t){if(t<0||99999<t)return"";if(0==t)return a.WORDS[0];for(var e="",i=0;0<t;){e+=a.WORDS[t%10],0<(t=Math.floor(t/10))&&(e+=a.DIVS[i++])}return(e=e.replace(/([十百千万]零)+/g,"零")).charAt(0)==a.WORDS[0]&&(e=e.substring(1)),0==(e=e.split("").reverse().join("")).indexOf("一十")&&(e=e.substring(1)),e},a.numstr=function(t,e,i){e=Math.max(e,0);var n=(e=Math.min(e,t.length-1))+i;if(n=Math.max(n,0),(n=Math.min(n,t.length-1))<e){var s=n;n=e,e=s}return t.slice(e,n+1)},a.getNumber=function(t){return t=t.replace(/[^0-9]/gi,""),parseInt(t)},a.alignAttrStr=function(t,e,i){void 0===i&&(i=!1);for(var n="",s=0;s<t.length;s++){var o=t.charAt(s);" "==o||" "==o||(n+=o)}return n.length<e&&(n=n.charAt(0)+a.getCNSpace(e-n.length,i)+n.slice(1)),n},a.getCNSpace=function(t,e){void 0===e&&(e=!1);for(var i="",n=0;n<t;n++)i+=e?"&nbsp;&nbsp;":" ";return i},a.getBigIntStr=function(t,e){return void 0===e&&(e=1),1e11<=t?(t/=1e10).toFixed(e)+"百亿":1e8<=t?(t/=1e8).toFixed(e)+"亿":1e5<=t?(t/=1e4).toFixed(e)+"万":""+t.toFixed(0)},a.getFormat=function(t,e){for(var i,n=0;n<e.length;n++)i=new RegExp("\\{"+n+"\\}","g"),t=t.replace(i,e[n]);return t},a.equalsIgnoreCase=function(t,e){return t.toLowerCase()==e.toLowerCase()},a.isEmail=function(t){if(null==t)return!1;t=a.trim(t);return/([0-9a-zA-Z]+[-._+&])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,6}/.test(t)},a.isNumber=function(t){return null!=t&&!isNaN(Number(t))},a.isDouble=function(t){t=a.trim(t);return/^[-\+]?\d+(\.\d+)?$/.test(t)},a.isInteger=function(t){if(null==t)return!1;t=a.trim(t);return/^[-\+]?\d+$/.test(t)},a.isEnglish=function(t){if(null==t)return!1;t=a.trim(t);return/^[A-Za-z]+$/.test(t)},a.isChinese=function(t){if(null==t)return!1;t=a.trim(t);return/^[\u0391-\uFFE5]+$/.test(t)},a.hasChineseChar=function(t){if(null==t)return!1;t=a.trim(t);return null!=/[^\x00-\xff]/.exec(t)},a.getStringLength=function(t){for(var e=0,i=0;i<t.length;++i)t.charCodeAt(i)<127?++e:e+=2;return e},a.getStringByLimitLength=function(t,e){for(var i="",n=0;n<t.length&&(t.charCodeAt(n)<127?--e:e-=2,!(e<0));++n)i+=t.charAt(n);return i},a.isURL=function(t){if(null==t)return!1;t=a.trim(t).toLowerCase();return/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/.test(t)},a.trim=function(t){return a.ltrim(a.rtrim(t))},a.ltrim=function(t){for(var e=t.length,i=0;i<e;i++)if(32<t.charCodeAt(i))return t.substring(i);return""},a.rtrim=function(t){for(var e=t.length;0<e;e--)if(32<t.charCodeAt(e-1))return t.substring(0,e);return""},a.beginsWith=function(t,e){return e==t.substring(0,e.length)},a.endsWith=function(t,e){return e==t.substring(t.length-e.length)},a.remove=function(t,e){return a.replace(t,e,"")},a.replace=function(t,e,i){for(var n=new String,s=!1,o=t.length,a=e.length,r=0;r<o;r++){if(t.charAt(r)==e.charAt(0)){s=!0;for(var l=0;l<a;l++)if(t.charAt(r+l)!=e.charAt(l)){s=!1;break}if(s){n+=i,r+=a-1;continue}}n+=t.charAt(r)}return n},a.removeHtmlTags=function(t){return t.replace(/<[^>]*>/g,"")},a.hasHtmlTags=function(t){return-1!=t.search(/<[^>]*>/g)},a.utf16to8=function(t){for(var e=[],i=t.length,n=0;n<i;n++){var s=t.charCodeAt(n);e[n]=1<=s&&s<=127?t.charAt(n):2047<s?String.fromCharCode(224|s>>12&15,128|s>>6&63,128|s>>0&63):String.fromCharCode(192|s>>6&31,128|s>>0&63)}return e.join("")},a.utf8to16=function(t){for(var e=[],i=t.length,n=0,s=0,o=0;n<i;){var a=t.charCodeAt(n++);switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e[e.length]=t.charAt(n-1);break;case 12:case 13:s=t.charCodeAt(n++),e[e.length]=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=t.charCodeAt(n++),o=t.charCodeAt(n++),e[e.length]=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&o)<<0)}}return e.join("")},a.getStringByteCount=function(t){if(null==t)return 0;var e=new ByteArray;return e.writeUTFBytes(t),e.length},a.getUtf8CodeByteCount=function(t){return t<=255?1:t<=65535?2:t<=16777215?3:4},a.getNowString=function(t){void 0===t&&(t=0);var e=new Date;switch(t){case 0:return e.getFullYear()+"-"+String(e.getMonth()+1)+"-"+e.getDate();default:return e.toDateString()}},a.getUtf8CodeSum=function(t){for(var e=0,i=0;i<t.length;++i)e+=t.charCodeAt(i);return e},a.getTwoIntString=function(t){return t<10?"0"+t:t.toString()},a.getPoint=function(t){var e=t.split(",");return 2==e.length?new Point(parseInt(e[0]),parseInt(e[1])):null},a.getMatrix=function(t){var e=t.split(",");return 6!=e.length?null:new Matrix(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5]))},a.substitute=function(t,e){for(var i=[],n=1,s=arguments.length;n<s;n++)i.push(arguments[n]);if(null==t)return"";var o,a=i.length;1==a&&i[0]instanceof Array?a=(o=i[0]).length:o=i;for(n=0;n<a;n++)t=t.replace(new RegExp("\\{"+n+"\\}","g"),o[n]);return t},a.strMoneyToInt=function(t){for(;-1!=t.indexOf(",");)t=t.replace(",","");return parseInt(t)},__static(a,["DAYS",function(){return this.DAYS=["日","一","二","三","四","五","六"]},"DIVS",function(){return this.DIVS=["十","百","千","万"]},"WORDS",function(){return this.WORDS=["零","一","二","三","四","五","六","七","八","九"]},"zeroReg",function(){return this.zeroReg=/([十百千万]零)+/g},"_strnum",function(){return this._strnum=/[^0-9]/gi}]),a}(),TimeUtils=function(){function l(){}return __class(l,"gateModule.utils.TimeUtils"),l.formatBuffTime=function(t){var e=t,i=Math.floor(e/86400);e%=86400;var n=Math.floor(e/3600);e%=3600;var s=Math.floor(e/60);e%=60;var o=Math.floor(e);return 0<i?i+"天"+n+"小时":0<n?n+":"+s+":"+o:0<s?s+":"+o:o+"s"},l.simpleFormat=function(t){var e="",i=Math.floor(t/3600);e+=0<i?10<=i?i.toFixed(0)+":":"0"+i+":":"00:";var n=Math.floor(t%3600/60);e+=0<n?10<=n?n+":":"0"+n+":":"00:";var s=Math.floor(t%60);return e+=10<=s?s+"":"0"+s},l.getFormatDate=function(t,e){return void 0===e&&(e="-"),l.format(t.getFullYear())+e+l.format(t.getMonth()+1)+e+l.format(t.getDate())},l.getFormatDateByTimestamp=function(t,e){void 0===e&&(e="-");var i=new Date(1e3*t);return l.getFormatDate(i,e)},l.getFormatTime=function(t,e){return void 0===e&&(e=":"),l.format(t.getHours())+e+l.format(t.getMinutes())+e+l.format(t.getSeconds())},l.getFormatTimeByTimestamp=function(t,e){void 0===e&&(e=":");var i=new Date(1e3*t);return l.getFormatTime(i,e)},l.getFormatDateByTimestamp2=function(t){var e=new Date(1e3*t);return l.format(e.getDate())+"天"},l.format=function(t){var e=t.toString();return 1==e.length&&(e="0"+e),e},l.getMinute=function(t,e){if(void 0===e&&(e=":"),null==t||0==t.length)return-1;var i=t.split(e);if(null==i||2!=i.length)return-1;if(!l.isNumberStr(i[0]))return-1;if(!l.isNumberStr(i[1]))return-1;var n=parseInt(i[0]),s=parseInt(i[1]);return n<0||23<n?-1:s<0||59<n?-1:60*n+s},l.getSec=function(t,e){if(void 0===e&&(e=":"),null==t||0==t.length)return-1;var i=t.split(e);if(null==i)return-1;if(!l.isNumberStr(i[0]))return-1;if(!l.isNumberStr(i[1]))return-1;var n=parseInt(i[0]),s=parseInt(i[1]);return n<0||23<n?-1:s<0||59<n?-1:3600*n+60*s},l.checkIsTimeFormatHM=function(t,e){return void 0===e&&(e=":"),-1!=l.getMinute(t,e)},l.isNumberStr=function(t){if(null==t&&t.length<=0)return!1;for(var e=0;e<t.length;e++){var i=t.charCodeAt(e);if(i<48||57<i)return!1}return!0},l.getTickNumber=function(t){var e=t/3600,i=(t-3600*e)/60,n=t-3600*e-60*i,s=e<10?"0"+e:e.toString();return s+=":"+(i<10?"0"+i:i),s+=":"+(n<10?"0"+n:n)},l.getTickHM=function(t){var e=t/3600,i=(t-3600*e)/60,n=e<10?"0"+e:e.toString();return n+=":"+(i<10?"0"+i:i)},l.getTickMS=function(t){var e=Math.floor(t/3600),i=Math.floor(t/60),n=t-3600*e-60*Math.floor((t-3600*e)/60),s=(i<10?"0"+i:i)+"";return s+=":"+(n<10?"0"+n:n)},l.changeToMS=function(t){var e=new Date(t);return e.setFullYear(parseInt(t.slice(0,4))),e.setMonth(parseInt(t.slice(4,6))-1),e.setDate(parseInt(t.slice(6,8))),e.getTime()},l.getNowSec=function(t){return 3600*t.getHours()+60*t.getMinutes()+t.getSeconds()},l.getCNTickMS=function(t){var e=Math.floor(t/60),i=Math.floor(t-60*e);if(0<e){var n=""+(10<=e?e:"0"+e);return n+="分"+(10<=i?i:"0"+i)+"秒"}return i+"秒"},l.getENTickMS=function(t){var e=Math.floor(t/60),i=Math.floor(t-60*e),n=""+(10<=e?e:"0"+e);return n+=":"+(10<=i?i:"0"+i)},l.getCNDHMS=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600),n=Math.floor((t-86400*e-3600*i)/60),s=Math.floor(t-86400*e-3600*i-60*n);return(0<e?e+"天":"")+" "+(9<i?i+"":"0"+i)+":"+(9<n?n+"":"0"+n)+":"+(9<s?s+"":"0"+s)},l.getSTRDHMS=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600),n=Math.floor((t-86400*e-3600*i)/60);return e+"天"+i+"小时"+n+"分"+Math.floor(t-86400*e-3600*i-60*n)+"秒"},l.getSTRYMDHM=function(t,e){void 0===e&&(e=!0);var i=new Date(t);return e?i.getFullYear()+"年"+l.format(i.getMonth()+1)+"月"+l.format(i.getDate())+"日 "+l.format(i.getHours())+":"+l.format(i.getMinutes())+":"+l.format(i.getSeconds()):i.getFullYear()+"."+l.format(i.getMonth()+1)+"."+l.format(i.getDate())+" "+l.format(i.getHours())+":"+l.format(i.getMinutes())+":"+l.format(i.getSeconds())},l.getSTRYMDHMWithoutSec=function(t,e){void 0===e&&(e=!0);var i=new Date(t);return e?i.getFullYear()+"年"+l.format(i.getMonth()+1)+"月"+l.format(i.getDate())+"日 "+l.format(i.getHours())+":"+l.format(i.getMinutes()):i.getFullYear()+"."+l.format(i.getMonth()+1)+"."+l.format(i.getDate())+" "+l.format(i.getHours())+":"+l.format(i.getMinutes())},l.getSTRMDHM=function(t){var e=new Date(t);return l.format(e.getMonth()+1)+"月"+l.format(e.getDate())+"日 "+l.format(e.getHours())+":"+l.format(e.getMinutes())+":"+l.format(e.getSeconds())},l.getSTRYMD=function(t){var e=new Date(t);return l.format(e.getFullYear())+"年"+l.format(e.getMonth()+1)+"月"+l.format(e.getDate())+"日"},l.getSTRHMS=function(t){var e=new Date(t);return l.format(e.getHours())+":"+l.format(e.getMinutes())+":"+l.format(e.getSeconds())},l.getSTRMD=function(t){var e=new Date(t);return l.format(e.getMonth()+1)+"月"+l.format(e.getDate())+"日"},l.getDHM=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600);return e+"天"+i+"时"+Math.floor((t-86400*e-3600*i)/60)+"分"},l.getDH=function(t){var e=Math.floor(t/86400);return e+"天"+Math.floor((t-86400*e)/3600)+"小时"},l.getHM=function(t){var e=Math.floor(t/3600);return e+"小时"+Math.floor((t-3600*e)/60)+"分"},l.getHMSOrDHm=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600),n=Math.floor((t-86400*e-3600*i)/60),s=Math.floor(t-86400*e-3600*i-60*n);return 0<e?e+"天"+i+"小时"+n+"分钟":i+"小时"+n+"分钟"+s+"秒"},l.getHMS=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600),n=Math.floor((t-86400*e-3600*i)/60),s=Math.floor(t-86400*e-3600*i-60*n);return 0<e?e+"天"+i+"小时"+n+"分钟"+s+"秒":i+"小时"+n+"分钟"+s+"秒"},l.getFormatDHM=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600),n=Math.floor((t-86400*e-3600*i)/60);return e+"天"+i+"时"+n+"分"},l.getHMTimeString=function(t,e){return(t<10?"0"+t:t.toString())+":"+(e<10?"0"+e:e.toString())},l.getHMSTimeString=function(t){var e=Math.floor(t/3600),i=10<=e?e.toString():"0"+e.toString(),n=Math.floor((t-3600*e)/60),s=10<=n?n.toString():"0"+n.toString(),o=Math.floor(t-3600*e-60*n);return i+":"+s+":"+(10<=o?o.toString():"0"+o.toString())},l.getHMSObject=function(t){return{hour:t/l.HOUR_SECOND,min:t%l.HOUR_SECOND/60,sec:t%60}},l.getSpecialTimeFormat=function(t){var e=new Date(t),i=e.getFullYear()+"/"+l.format(e.getMonth()+1)+"/"+l.format(e.getDate())+"/(",n=e.getHours(),s=10<=n?n.toString():"0"+n.toString(),o=e.getMinutes(),a=10<=o?o.toString():"0"+o.toString(),r=e.getSeconds();return i+=s+":"+a+":"+(10<=r?r.toString():"0"+r.toString())+")"},l.getSpecialTimeFormat1=function(t){var e=new Date(t),i=e.getFullYear()+"-"+l.format(e.getMonth()+1)+"-"+l.format(e.getDate())+" ",n=e.getHours(),s=10<=n?n.toString():"0"+n.toString(),o=e.getMinutes(),a=10<=o?o.toString():"0"+o.toString(),r=e.getSeconds();return i+=s+":"+a+":"+(10<=r?r.toString():"0"+r.toString())},l.MINUTE_SECOND=60,l.HOUR_SECOND=3600,__static(l,["DATE_SECOND",function(){return this.DATE_SECOND=24*l.HOUR_SECOND},"WEEK_SECOND",function(){return this.WEEK_SECOND=7*l.DATE_SECOND}]),l}(),MsgConst=function(){function t(){}return __class(t,"gateModule.zwc.engine.core.controls.dock.MsgConst"),t.MODULE_TO_MODULE=1,t.MODULE_TO_TOTAL_MODULE=2,t.MODULE_TO_SERVICE=3,t.SEND_TO_SOCKET=4,t.NETWORK_MODULE_NAME="gateModule.zwc.engine.core.controls.dock.MainNetworkModule",t}(),Hash=function(){function i(){this._length_=0,this._className_=null,this._id_=null,this._oid_=null,this._proto_={},this._id_=Asswc.getSoleId()}__class(i,"zwc.utils.Hash");var t=i.prototype;return Laya.imps(t,{"zwc.saiman.interfaces.IProto":!0}),t.take=function(t){return this._proto_[t]},t.put=function(t,e,i){void 0===i&&(i=!1);var n=this.has(t);if(i||n){if(i){if("length"==t||"proto"==t||"id"==t||"oid"==t||"className"==t)throw new Error('存储key值:"'+t+'"与对象固有属性名冲突！');this._proto_[t]=e}}else this._proto_[t]=e;n||this._length_++},t.has=function(t){return!!this._proto_[t]},t.remove=function(t){var e=this._proto_[t];return null!=e&&(delete this._proto_[t],this._length_--),e},t.clone=function(){var t=new i;for(var e in this._proto_)t.put(e,this._proto_[e]);return t},t.dispose=function(){for(var t in this._proto_)this._proto_[t]=null,delete this._proto_[t];this._oid_=null,this._id_=null,this._length_=0,this._proto_=null},t.reset=function(){for(var t in this._oid_=null,this._id_=null,this._length_=0,this._proto_)this._proto_[t]=null,delete this._proto_[t];this._id_=Asswc.getSoleId()},t.toString=function(){return"Hash"},t.gc=function(){return!1},__getset(0,t,"length",function(){return this._length_}),__getset(0,t,"id",function(){return this._id_},function(t){this._id_=t}),__getset(0,t,"oid",function(){return this._oid_},function(t){this._oid_=t}),__getset(0,t,"proto",function(){return this._proto_},function(t){this._proto_=t}),__getset(0,t,"className",function(){return this._className_}),i}(),EGlobal=function(){function e(){}return __class(e,"gateModule.zwc.engine.global.EGlobal"),e.getSceneImagePath=function(t){return e.IMAGE_DIR+"ui/images/"+t},e.getActDataPath=function(t){return gateModule.zwc.engine.global.EGlobal.ASSET_DIR+"output/"+t+"."+gateModule.zwc.engine.global.EGlobal.actDataExtension},e.getAvatarTexturePath=function(t,e,i,n){return gateModule.zwc.engine.global.EGlobal.ASSET_DIR+gateModule.zwc.engine.global.EGlobal.ReflexDIR[t]+"/"+e+"/"+i+"/"+n+"."+gateModule.zwc.engine.global.EGlobal.avatarTextureExtension},e.BODY_HEIGHT=130,e.logText=null,e.version="",e.clientVersion="",e.mainVersion="",e.language=null,e.mid="mid",e.wid="wid",e.wgid="wgid",e.eid="eid",e.chuanshiid="chuanshiid",e.midm="midm",e.fid="fid",e.shoawd="shoawd",e.stage=null,e.defaultAvatarMid="ds1000",e.BITMAP_WIDTH=400,e.BITMAP_HEIGHT=300,e.Image_Width=510,e.Image_Height=510,e.IMAGE_DIR=null,e.UiTextureSheet=null,e.selectTexture=null,e.showadTexture=null,e.boolTexture=null,e.innerTexture=null,e.boolHeroTexture=null,e.boolBackgroundTexture=null,e.boolTextureQueue=[],e.isAllStop=!1,e.isSceneReady=!1,e.ASSETS_CATCHE_GROUP="ASSETS_CATCHE_GROUP",e.ASSETS_SCENE_GROUP="ASSETS_SCENE_GROUP",e.ASSETS_TERRAIN_GROUP="ASSETS_TERRAIN_GROUP",e.actDataExtension="sm",e.avatarTextureExtension="png",e.ASSET_DIR=null,__static(e,["ReflexDIR",function(){return this.ReflexDIR={mid:"clothes",wgid:"wings",wid:"weapons",eid:"effects",wmid:"mounts"}}]),e}(),Engine=function(){function e(){}return __class(e,"gateModule.zwc.Engine"),__getset(1,e,"heidOtherCharMode",function(){return e._heidOtherCharMode||e._auto_heidOtherCharMode},function(t){e._heidOtherCharMode=t}),__getset(1,e,"heidOtherHeroMode",function(){return e._heidOtherHeroMode},function(t){e._heidOtherHeroMode=t}),e.loop=function(){},e.getTimer=function(){return(Browser.now()-e._runtime_)*gateModule.zwc.Engine.accSpeed},e.trace=function(t){for(var e=arguments,i="",n=0;n<e.length;n++)i+=e[n]+" ";console.log(i)},e.distance=function(t,e){return t.distance(e.x,e.y)},e.isDirMode5=!0,e.IsModePVE=!0,e.accSpeed=1,e.actSpeed=1,e.defaultActSpeed=.9,e.stage=null,e.isDebugMode=!1,e._heidOtherCharMode=!1,e._auto_heidOtherCharMode=!1,e._auto_heidOtherHeroMode=!1,e._heidOtherHeroMode=!1,e.attackMonsterMode=0,e.countIndex=6,e.set_limi_Dur=-1,e.fpsDurArray=[],e.isSoundAdurationMode=1,e.soundAduration=3e3,__static(e,["_runtime_",function(){return this._runtime_=Browser.now()}]),e}(),FPSUtils=function(){function n(){}return __class(n,"gateModule.zwc.utils.FPSUtils"),__getset(1,n,"fps",function(){return n._fps}),__getset(1,n,"lost_fps",function(){return n._lost_fps}),n.setup=function(t){n._fps=Math.round(t.frameRate),n.fpsTime=Engine.getTimer(),n.fpsTime2=Engine.getTimer(),t.timer.frameLoop(1,n,n.onEnterFrame),n.stage=t,n.count=0,n.count2=0},n.onEnterFrame=function(t){n.count++,n.count2++;var e=Engine.getTimer();if(10<=n.count){n._fps=Math.round(1e4/(e-n.fpsTime));var i=parseInt(n.stage.frameRate)-n._fps;n._lost_fps=0<i?i:0,n.count=0,n.fpsTime=e}n.frameFps=Math.round(1e3/(e-n.fpsTime2)),n.fpsTime2=e},n._fps=30,n.fpsTime=0,n.fpsTime2=0,n.count=0,n.count2=0,n.maxCount=10,n.stage=null,n._lost_fps=0,n.frameFps=0,n}(),Config=function(){function t(){}return __class(t,"Config"),t.WebGLTextCacheCount=500,t.atlasEnable=!1,t.showCanvasMark=!1,t.animationInterval=50,t.isAntialias=!1,t.isAlpha=!1,t.premultipliedAlpha=!0,t.isStencil=!0,t.preserveDrawingBuffer=!1,t}(),Graphics=function(){function u(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,Render.isConchNode){this._nativeObj=new window._conchGraphics,this.id=this._nativeObj.conchID}}__class(u,"laya.display.Graphics");var t=u.prototype;return t.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},t.clear=function(t){void 0===t&&(t=!1);var e=0,i=0;if(t){var n=this._one;if(this._cmds){for(i=this._cmds.length,e=0;e<i;e++)!(n=this._cmds[e])||n.callee!==Render._context._drawTexture&&n.callee!==Render._context._drawTextureWithTransform||(n[0]=null,u._cache.push(n));this._cmds.length=0}else n&&(!n||n.callee!==Render._context._drawTexture&&n.callee!==Render._context._drawTextureWithTransform||(n[0]=null,u._cache.push(n)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(e=0,i=this._vectorgraphArray.length;e<i;e++)VectorGraphManager.getInstance().deleteShape(this._vectorgraphArray[e]);this._vectorgraphArray.length=0}},t._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},t._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new GraphicsBounds,this._graphicBounds._graphics=this)},t._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},t._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},t.getBounds=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(t)},t.getBoundPoints=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(t)},t._addCmd=function(t){this._cmds=this._cmds||[],t.callee=t.shift(),this._cmds.push(t)},t.setFilters=function(t){this._saveToCmd(Render._context._setFilters,t)},t.drawTexture=function(t,e,i,n,s,o,a){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=1),!t||a<.01)return null;n||(n=t.sourceWidth),s||(s=t.sourceHeight),a=a<0?0:1<a?1:a;var r,l=!Render.isWebGL&&(Browser.onFirefox||Browser.onEdge||Browser.onIE||Browser.onSafari)?.5:0,h=n/t.sourceWidth,c=s/t.sourceHeight;return n=t.width*h,s=t.height*c,t.loaded&&(n<=0||s<=0)?null:(e+=t.offsetX*h,i+=t.offsetY*c,this._sp&&(this._sp._renderType|=512),e-=l,i-=l,n+=2*l,s+=2*l,u._cache.length?((r=u._cache.pop())[0]=t,r[1]=e,r[2]=i,r[3]=n,r[4]=s,r[5]=o,r[6]=a):r=[t,e,i,n,s,o,a],r.callee=o||1!=a?Render._context._drawTextureWithTransform:Render._context._drawTexture,null!=this._one||o||1!=a?this._saveToCmd(r.callee,r):(this._one=r,this._render=this._renderOneImg),t.loaded||t.once("loaded",this,this._textureLoaded,[t,r]),this._repaint(),r)},t.cleanByTexture=function(t,e,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=0),!t)return this.clear();if(this._one&&this._render===this._renderOneImg){n||(n=t.sourceWidth),s||(s=t.sourceHeight);var o=n/t.sourceWidth,a=s/t.sourceHeight;n=t.width*o,s=t.height*a,e+=t.offsetX*o,i+=t.offsetY*a,this._one[0]=t,this._one[1]=e,this._one[2]=i,this._one[3]=n,this._one[4]=s,this._repaint()}else this.clear(),t&&this.drawTexture(t,e,i,n,s)},t.drawTextures=function(t,e){t&&this._saveToCmd(Render._context._drawTextures,[t,e])},t.fillTexture=function(t,e,i,n,s,o,a){if(void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o="repeat"),t){var r=[t,e,i,n,s,o,a||Point.EMPTY,{}];t.loaded||t.once("loaded",this,this._textureLoaded,[t,r]),this._saveToCmd(Render._context._fillTexture,r)}},t._textureLoaded=function(t,e){e[3]=e[3]||t.width,e[4]=e[4]||t.height,this._repaint()},t.fillCircle=function(t,e,i,n,s,o,a){i.bitmap.enableMerageInAtlas=!1;var r=new Float32Array(2*(a+1)),l=new Float32Array(2*(a+1)),h=new Uint16Array(3*a),c=2*Math.PI/a,u=0;r[0]=n,r[1]=s,l[0]=n/i.width,l[1]=s/i.height;for(var d=2,_=0;_<a;_++){var f=o*Math.cos(u)+n,p=o*Math.sin(u)+s;r[d]=f,r[d+1]=p,l[d]=f/i.width,l[d+1]=p/i.height,u+=c,d+=2}for(_=d=0;_<a;_++)h[d++]=0,h[d++]=_+1,h[d++]=a+1<=_+2?1:_+2;this.drawTriangles(i,t,e,r,l,h)},t.drawTriangles=function(t,e,i,n,s,o,a,r,l,h){void 0===r&&(r=1),this._saveToCmd(Render._context.drawTriangles,[t,e,i,n,s,o,a,r,l,h])},t._saveToCmd=function(t,e){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=e,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e)),e.callee=t,this._repaint(),e},t.clipRect=function(t,e,i,n){this._saveToCmd(Render._context._clipRect,[t,e,i,n])},t.fillText=function(t,e,i,n,s,o,a){void 0===a&&(a=0),this._saveToCmd(Render._context._fillText,[t,e,i,n||Font.defaultFont,s,o])},t.fillBorderText=function(t,e,i,n,s,o,a,r){this._saveToCmd(Render._context._fillBorderText,[t,e,i,n||Font.defaultFont,s,o,a,r])},t.strokeText=function(t,e,i,n,s,o,a){this._saveToCmd(Render._context._strokeText,[t,e,i,n||Font.defaultFont,s,o,a])},t.alpha=function(t){t=t<0?0:1<t?1:t,this._saveToCmd(Render._context._alpha,[t])},t.setAlpha=function(t){t=t<0?0:1<t?1:t,this._saveToCmd(Render._context._setAlpha,[t])},t.transform=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(Render._context._transform,[t,e,i])},t.rotate=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(Render._context._rotate,[t,e,i])},t.scale=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._saveToCmd(Render._context._scale,[t,e,i,n])},t.translate=function(t,e){this._saveToCmd(Render._context._translate,[t,e])},t.save=function(){this._saveToCmd(Render._context._save,[])},t.restore=function(){this._saveToCmd(Render._context._restore,[])},t.replaceText=function(t){this._repaint();var e=this._cmds;if(e){for(var i=e.length-1;-1<i;i--)if(this._isTextCmd(e[i].callee))return e[i][0].toUpperCase?e[i][0]=t:e[i][0].setText(t),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=t:this._one[0].setText(t),!0;return!1},t._isTextCmd=function(t){return t===Render._context._fillText||t===Render._context._fillBorderText||t===Render._context._strokeText},t.replaceTextColor=function(t){this._repaint();var e=this._cmds;if(e)for(var i=e.length-1;-1<i;i--)this._isTextCmd(e[i].callee)&&(e[i][4]=t,e[i][0].toUpperCase||(e[i][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=t,this._one[0].toUpperCase||(this._one[0].changed=!0))},t.loadImage=function(t,e,i,n,s,o){var a=this;void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0);var r=Loader.getRes(t);function l(t){t&&(a.drawTexture(t,e,i,n,s),null!=o&&o.call(a._sp,t))}r?l(r):Laya.loader.load(t,Handler.create(null,l),null,"image")},t._renderEmpty=function(t,e,i,n){},t._renderAll=function(t,e,i,n){for(var s,o=this._cmds,a=0,r=o.length;a<r;a++)(s=o[a]).callee.call(e,i,n,s)},t._renderOne=function(t,e,i,n){this._one.callee.call(e,i,n,this._one)},t._renderOneImg=function(t,e,i,n){this._one.callee.call(e,i,n,this._one),2305!==t._renderType&&(t._renderType|=1)},t.drawLine=function(t,e,i,n,s,o){void 0===o&&(o=1);var a=0;Render.isWebGL&&(a=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a));var r=o%2==0?0:.5,l=[t+r,e+r,i+r,n+r,s,o,a];this._saveToCmd(Render._context._drawLine,l)},t.drawLines=function(t,e,i,n,s){void 0===s&&(s=1);var o=0;if(i&&!(i.length<4)){Render.isWebGL&&(o=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(o));var a=s%2==0?0:.5,r=[t+a,e+a,i,n,s,o];this._saveToCmd(Render._context._drawLines,r)}},t.drawCurves=function(t,e,i,n,s){void 0===s&&(s=1);var o=[t,e,i,n,s];this._saveToCmd(Render._context._drawCurves,o)},t.drawRect=function(t,e,i,n,s,o,a){void 0===a&&(a=1);var r=o?a/2:0,l=o?a:0,h=[t+r,e+r,i-l,n-l,s,o,a];this._saveToCmd(Render._context._drawRect,h)},t.drawCircle=function(t,e,i,n,s,o){void 0===o&&(o=1);var a=s?o/2:0,r=0;Render.isWebGL&&(r=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(r));var l=[t,e,i-a,n,s,o,r];this._saveToCmd(Render._context._drawCircle,l)},t.drawPie=function(t,e,i,n,s,o,a,r){void 0===r&&(r=1);var l=a?r/2:0,h=a?r:0,c=0;Render.isWebGL&&(c=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(c));var u=[t+l,e+l,i-h,n,s,o,a,r,c];u[3]=Utils.toRadian(n),u[4]=Utils.toRadian(s),this._saveToCmd(Render._context._drawPie,u)},t.drawPoly=function(t,e,i,n,s,o){void 0===o&&(o=1);var a=0,r=!1;Render.isWebGL&&(a=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a),r=!(6<i.length));var l=s?o%2==0?0:.5:0,h=[t+l,e+l,i,n,s,o,a,r];this._saveToCmd(Render._context._drawPoly,h)},t.drawPath=function(t,e,i,n,s){var o=[t,e,i,n,s];this._saveToCmd(Render._context._drawPath,o)},__getset(0,t,"cmds",function(){return this._cmds},function(t){this._sp&&(this._sp._renderType|=512),this._cmds=t,this._render=this._renderAll,this._repaint()}),u.__init__=function(){if(Render.isConchNode){for(var t=laya.display.Graphics.prototype,e=Browser.window.ConchGraphics.prototype,i=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],n=0,s=i.length;n<=s;n++){var o=i[n];t[o]=e[o]}t._saveToCmd=null,e.drawImageS&&(t.drawTextures=function(t,e){if(t&&t.loaded&&t.bitmap&&t.source){var i=t.uv,n=t.bitmap.width,s=t.bitmap.height;this.drawImageS(t.bitmap.source,i[0]*n,i[1]*s,(i[2]-i[0])*n,(i[5]-i[3])*s,t.offsetX,t.offsetY,t.width,t.height,e)}}),t.drawTexture=function(t,e,i,n,s,o,a){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=1),t)if(t.loaded){if(t.loaded&&t.bitmap&&t.source&&(n||(n=t.sourceWidth),s||(s=t.sourceHeight),a=a<0?0:1<a?1:a,n=n-t.sourceWidth+t.width,s=s-t.sourceHeight+t.height,!(n<=0||s<=0))){e+=t.offsetX,i+=t.offsetY;var r=t.uv,l=t.bitmap.width,h=t.bitmap.height;r[4]<r[0]&&r[5]<r[1]?this.drawImageM(t.bitmap.source,r[4]*l,r[5]*h,(r[0]-r[4])*l,(r[1]-r[5])*h,e,i,n,s,o,a):this.drawImageM(t.bitmap.source,r[0]*l,r[1]*h,(r[2]-r[0])*l,(r[5]-r[3])*h,e,i,n,s,o,a),this._repaint()}}else t.once("loaded",this,function(){this.drawTexture(t,e,i,n,s,o)})},t.fillTexture=function(t,e,i,n,s,o,a){if(void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o="repeat"),t&&t.loaded){var r,l=Render._context.ctx,h=t.bitmap.width,c=t.bitmap.height,u=t.uv;r=t.uv!=Texture.DEF_UV?l.createPattern(t.bitmap.source,o,u[0]*h,u[1]*c,(u[2]-u[0])*h,(u[5]-u[3])*c):l.createPattern(t.bitmap.source,o);var d=0,_=0;a&&(e+=a.x%t.width,i+=a.y%t.height,d-=a.x%t.width,_-=a.y%t.height),this._fillImage(r,e,i,d,_,n,s)}}}},u._cache=[],u}(),BMiniAdapter=function(){function h(){}return __class(h,"laya.bd.mini.BMiniAdapter"),h.getJson=function(t){return JSON.parse(t)},h.init=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),!(h._inited||(h._inited=!0,(h.window=window).navigator.userAgent.indexOf("SwanGame")<0))){h.isZiYu=e,h.isPosMsgYu=t,h.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0}catch(t){}h.isZiYu||(MiniFileMgr.setNativeFileDir("/layaairGame"),MiniFileMgr.existDir(MiniFileMgr.fileNativeDir,Handler.create(h,h.onMkdirCallBack))),h.systemInfo=swan.getSystemInfoSync(),h.window.focus=function(){},Laya._getUrlPath=function(){},h.window.logtime=function(t){},h.window.alertTimeLog=function(t){},h.window.resetShareInfo=function(){},h.window.CanvasRenderingContext2D=function(){},h.window.CanvasRenderingContext2D.prototype=h.window.swan.createCanvas().getContext("2d").__proto__,h.window.document.body.appendChild=function(){},h.EnvConfig.pixelRatioInt=0,RunDriver.getPixelRatio=h.pixelRatio,h._preCreateElement=Browser.createElement,Browser.createElement=h.createElement,RunDriver.createShaderCondition=h.createShaderCondition,Utils.parseXMLFromString=h.parseXMLFromString,Input._createInputElement=MiniInput._createInputElement,h.EnvConfig.load=Loader.prototype.load,Loader.prototype.load=MiniLoader.prototype.load,Loader.prototype._loadImage=MiniImage.prototype._loadImage,MiniLocalStorage.__init__(),LocalStorage._baseClass=MiniLocalStorage}},h.getUrlEncode=function(t,e){return-1!=t.indexOf(".fnt")?"utf8":"arraybuffer"==e?"":"ascii"},h.downLoadFile=function(t,e,i,n){void 0===e&&(e=""),void 0===n&&(n="ascii"),MiniFileMgr.getFileInfo(t)?null!=i&&i.runWith([0]):MiniFileMgr.downLoadFile(t,e,i,n)},h.remove=function(t,e){MiniFileMgr.deleteFile("",t,e,"",0)},h.removeAll=function(){MiniFileMgr.deleteAll()},h.hasNativeFile=function(t){return MiniFileMgr.isLocalNativeFile(t)},h.getFileInfo=function(t){return MiniFileMgr.getFileInfo(t)},h.getFileList=function(){return MiniFileMgr.filesListObj},h.exitMiniProgram=function(){h.window.wx.exitMiniProgram()},h.onMkdirCallBack=function(t,e){t||(MiniFileMgr.filesListObj=JSON.parse(e.data))},h.pixelRatio=function(){if(!h.EnvConfig.pixelRatioInt)try{return h.EnvConfig.pixelRatioInt=h.systemInfo.pixelRatio,h.systemInfo.pixelRatio}catch(t){}return h.EnvConfig.pixelRatioInt},h.createElement=function(t){var e;if("canvas"==t)return 1==h.idx?h.isZiYu?(e=sharedCanvas).style={}:(e=window.canvas).style={}:(e=window.swan.createCanvas()).style={},h.idx++,e;if("textarea"==t||"input"==t)return h.onCreateInput(t);if("div"!=t)return h._preCreateElement(t);var i=h._preCreateElement(t);return i.contains=function(t){return null},i.removeChild=function(t){},i},h.onCreateInput=function(t){var e=h._preCreateElement(t);return e.focus=MiniInput.wxinputFocus,e.blur=MiniInput.wxinputblur,e.style={},e.value=0,e.parentElement={},e.placeholder={},e.type={},e.setColor=function(t){},e.setType=function(t){},e.setFontFace=function(t){},e.addEventListener=function(t){},e.contains=function(t){return null},e.removeChild=function(t){},e},h.createShaderCondition=function(t){var e=this;return function(){return e[t.replace("this.","")]}},h.sendAtlasToOpenDataContext=function(t){if(!MiniAdpter.isZiYu){var e=Loader.getRes(URL.formatURL(t));if(!e)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";e.meta.image.split(",");if(e.meta&&e.meta.image)for(var i=e.meta.image.split(","),n=0<=t.indexOf("/")?"/":"\\",s=t.lastIndexOf(n),o=0<=s?t.substr(0,s+1):"",a=0,r=i.length;a<r;a++)i[a]=o+i[a];else i=[t.replace(".json",".png")];for(a=0;a<i.length;a++){var l=i[a];h.postInfoToContext(t,l,e)}}},h.postInfoToContext=function(t,e,i){var n={frames:i.frames,meta:i.meta},s=e,o=MiniFileMgr.getFileInfo(URL.formatURL(e));if(o)var a=o.md5,r=MiniFileMgr.getFileNativePath(a);else r=s;if(!r)throw"获取图集的磁盘url路径不存在！";h.window.swan.getOpenDataContext().postMessage({url:t,atlasdata:n,imgNativeUrl:r,imgReadyUrl:s,isLoad:"opendatacontext"})},h.sendSinglePicToOpenDataContext=function(t){var e=URL.formatURL(t),i=MiniFileMgr.getFileInfo(e);if(i){var n=i.md5,s=MiniFileMgr.getFileNativePath(n);t=e}else s=t;if(!s)throw"获取图集的磁盘url路径不存在！";wx.postMessage({url:t,imgNativeUrl:s,imgReadyUrl:t,isLoad:"openJsondatacontextPic"})},h.sendJsonDataToDataContext=function(t){if(!MiniAdpter.isZiYu){var e=Loader.getRes(t);if(!e)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";wx.postMessage({url:t,atlasdata:e,isLoad:"openJsondatacontext"})}},h.EnvConfig=null,h.window=null,h._preCreateElement=null,h._inited=!1,h.systemInfo=null,h.isZiYu=!1,h.isPosMsgYu=!1,h.autoCacheFile=!0,h.minClearSize=5242880,h.parseXMLFromString=function(t){var e;t=t.replace(/>\s+</g,"><");try{e=(new window.Parser.DOMParser).parseFromString(t,"text/xml")}catch(t){throw"需要引入xml解析库文件"}return e},h.idx=1,__static(h,["nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"]}]),h}(),MiniFileMgr=function(){function h(){}return __class(h,"laya.bd.mini.MiniFileMgr"),h.isLocalNativeFile=function(t){for(var e=0,i=BMiniAdapter.nativefiles.length;e<i;e++)if(-1!=t.indexOf(BMiniAdapter.nativefiles[e]))return!0;return!1},h.getFileInfo=function(t){var e=t.split("?")[0],i=h.filesListObj[e];return null==i?null:i},h.read=function(t,e,i,n,s,o){var a;void 0===e&&(e="ascill"),void 0===n&&(n=""),void 0===s&&(s=!1),void 0===o&&(o=""),a=""==n||-1==n.indexOf("http://")&&-1==n.indexOf("https://")?t:h.getFileNativePath(t),h.fs.readFile({filePath:a,encoding:e,success:function(t){null!=i&&i.runWith([0,t])},fail:function(t){t&&""!=n?h.downFiles(n,e,i,n,s,o):null!=i&&i.runWith([1])}})},h.downFiles=function(t,e,i,n,s,o){void 0===e&&(e="ascii"),void 0===n&&(n=""),void 0===s&&(s=!1),void 0===o&&(o=""),h.wxdown({url:t,success:function(t){200===t.statusCode&&h.readFile(t.tempFilePath,e,i,n,s,o)},fail:function(t){null!=i&&i.runWith([1,t])}}).onProgressUpdate(function(t){null!=i&&i.runWith([2,t.progress])})},h.readFile=function(e,i,n,s,o,t){void 0===i&&(i="ascill"),void 0===s&&(s=""),void 0===o&&(o=!1),void 0===t&&(t=""),h.fs.readFile({filePath:e,encoding:i,success:function(t){-1!=e.indexOf("http://")||-1!=e.indexOf("https://")?(BMiniAdapter.autoCacheFile||o)&&h.copyFile(e,s,n,i):null!=n&&n.runWith([0,t])},fail:function(t){null!=n&&n.runWith([1,t])}})},h.downOtherFiles=function(t,e,i,n){void 0===i&&(i=""),void 0===n&&(n=!1),h.wxdown({url:t,success:function(t){200===t.statusCode&&((BMiniAdapter.autoCacheFile||n)&&-1==i.indexOf("swan.qlogo.cn")?h.copyFile(t.tempFilePath,i,e):null!=e&&e.runWith([0,t.tempFilePath]))},fail:function(t){null!=e&&e.runWith([1,t])}})},h.downLoadFile=function(t,e,i,n){void 0===e&&(e=""),void 0===n&&(n="ascii"),"image"==e||"sound"==e?h.downOtherFiles(t,i,t,!0):h.downFiles(t,n,i,t,!0,e)},h.copyFile=function(t,i,n,s){void 0===s&&(s="");var e=t.split("/"),o=e[e.length-1],a=(i.split("?")[0],h.getFileInfo(i)),r=h.getFileNativePath(o),l=h.getCacheUseSize();a?a.readyUrl!=i?h.fs.getFileInfo({filePath:t,success:function(t){52428800<=l+4194304+t.size&&(t.size>BMiniAdapter.minClearSize&&(BMiniAdapter.minClearSize=t.size),h.onClearCacheRes()),h.deleteFile(o,i,n,s,t.size)},fail:function(t){null!=n&&n.runWith([1,t])}}):null!=n&&n.runWith([0]):h.fs.getFileInfo({filePath:t,success:function(e){52428800<=l+4194304+e.size&&(e.size>BMiniAdapter.minClearSize&&(BMiniAdapter.minClearSize=e.size),h.onClearCacheRes()),h.fs.copyFile({srcPath:t,destPath:r,success:function(t){h.onSaveFile(i,o,!0,s,n,e.size)},fail:function(t){null!=n&&n.runWith([1,t])}})},fail:function(t){null!=n&&n.runWith([1,t])}})},h.onClearCacheRes=function(){var t=BMiniAdapter.minClearSize,e=[];for(var i in h.filesListObj)e.push(h.filesListObj[i]);h.sortOn(e,"time",16);for(var n=0,s=1,o=e.length;s<o;s++){var a=e[s];if(t<=n)break;n+=a.size,h.deleteFile("",a.readyUrl)}},h.sortOn=function(t,i,e){return void 0===e&&(e=0),16==e?t.sort(function(t,e){return t[i]-e[i]}):18==e?t.sort(function(t,e){return e[i]-t[i]}):t.sort(function(t,e){return t[i]-e[i]})},h.getFileNativePath=function(t){return laya.bd.mini.MiniFileMgr.fileNativeDir+"/"+t},h.deleteFile=function(n,s,o,a,r){void 0===s&&(s=""),void 0===a&&(a=""),void 0===r&&(r=0);var t=h.getFileInfo(s),e=h.getFileNativePath(t.md5);h.fs.unlink({filePath:e,success:function(t){var e=""!=n;if(""!=n){var i=h.getFileNativePath(n);h.fs.copyFile({srcPath:n,destPath:i,success:function(t){h.onSaveFile(s,n,e,a,o,t.size)},fail:function(t){null!=o&&o.runWith([1,t])}})}else h.onSaveFile(s,n,e,a,o,r)},fail:function(t){}})},h.deleteAll=function(){var t=[];for(var e in h.filesListObj)t.push(h.filesListObj[e]);for(var i=1,n=t.length;i<n;i++){var s=t[i];h.deleteFile("",s.readyUrl)}},h.onSaveFile=function(t,e,i,n,s,o){void 0===i&&(i=!0),void 0===n&&(n=""),void 0===o&&(o=0);var a=t.split("?")[0];if(null==h.filesListObj.fileUsedSize&&(h.filesListObj.fileUsedSize=0),i){h.getFileNativePath(e);h.filesListObj[a]={md5:e,readyUrl:t,size:o,times:Browser.now(),encoding:n},h.filesListObj.fileUsedSize=parseInt(h.filesListObj.fileUsedSize)+o,h.writeFilesList(a,JSON.stringify(h.filesListObj),!0),null!=s&&s.runWith([0])}else if(h.filesListObj[a]){var r=parseInt(h.filesListObj[a].size);h.filesListObj.fileUsedSize=parseInt(h.filesListObj.fileUsedSize)-r,delete h.filesListObj[a],h.writeFilesList(a,JSON.stringify(h.filesListObj),!1),null!=s&&s.runWith([0])}},h.writeFilesList=function(t,e,i){var n=h.fileNativeDir+"/"+h.fileListName;h.fs.writeFile({filePath:n,encoding:"utf8",data:e,success:function(t){},fail:function(t){}}),!BMiniAdapter.isZiYu&&BMiniAdapter.isPosMsgYu&&wx.postMessage({url:t,data:h.filesListObj[t],isLoad:"filenative",isAdd:i})},h.getCacheUseSize=function(){return h.filesListObj&&h.filesListObj.fileUsedSize?h.filesListObj.fileUsedSize:0},h.existDir=function(t,e){h.fs.mkdir({dirPath:t,success:function(t){null!=e&&e.runWith([0,{data:JSON.stringify({})}])},fail:function(t){-1!=t.errMsg.indexOf("file already exists")?h.readSync(h.fileListName,"utf8",e):null!=e&&e.runWith([1,t])}})},h.readSync=function(t,e,i,n){void 0===e&&(e="ascill"),void 0===n&&(n="");var s,o=h.getFileNativePath(t);try{s=h.fs.readFileSync(o,e),null!=i&&i.runWith([0,{data:s}])}catch(t){null!=i&&i.runWith([1])}},h.setNativeFileDir=function(t){h.fileNativeDir=swan.env.USER_DATA_PATH+t},h.filesListObj={},h.fileNativeDir=null,h.fileListName="layaairfiles.txt",h.ziyuFileData={},h.loadPath="",h.DESCENDING=2,h.NUMERIC=16,__static(h,["fs",function(){return this.fs=swan.getFileSystemManager()},"wxdown",function(){return this.wxdown=swan.downloadFile}]),h}(),MiniImage=function(){function s(){}return __class(s,"laya.bd.mini.MiniImage"),s.prototype._loadImage=function(t){var e=this;if(BMiniAdapter.isZiYu)s.onCreateImage(t,e,!0);else{var i=!1;if(MiniFileMgr.isLocalNativeFile(t)){if(-1==t.indexOf("http://usr/")&&(-1!=t.indexOf("http://")||-1!=t.indexOf("https://")))if(""!=MiniFileMgr.loadPath)t=t.split(MiniFileMgr.loadPath)[1];else{var n=""!=URL.rootPath?URL.rootPath:URL.basePath;""!=n&&(t=t.split(n)[1])}}else i=!0,t=URL.formatURL(t);MiniFileMgr.getFileInfo(t)?s.onCreateImage(t,e,!i):-1!=t.indexOf("http://usr/")||-1==t.indexOf("http://")&&-1==t.indexOf("https://")?s.onCreateImage(t,e,!0):BMiniAdapter.isZiYu?s.onCreateImage(t,e,!0):MiniFileMgr.downOtherFiles(t,new Handler(s,s.onDownImgCallBack,[t,e]),t)}},s.onDownImgCallBack=function(t,e,i,n){void 0===n&&(n=""),i?e.onError(null):s.onCreateImage(t,e,!1,n)},s.onCreateImage=function(e,i,t,n){var s,o;if(void 0===t&&(t=!1),void 0===n&&(n=""),BMiniAdapter.autoCacheFile)if(t)s=e;else if(""!=n)s=n;else{var a=MiniFileMgr.getFileInfo(e).md5;s=MiniFileMgr.getFileNativePath(a)}else s=t?e:n;function r(){o.onload=null,o.onerror=null,delete i.imgCache[e]}null==i.imgCache&&(i.imgCache={});var l=function(){r(),i.onLoaded(o)},h=function(){r(),i.event("error","Load image failed")};"nativeimage"==i._type?((o=new Browser.window.Image).crossOrigin="",o.onload=l,o.onerror=h,o.src=s,i.imgCache[e]=o):new HTMLImage.create(s,{onload:l,onerror:h,onCreate:function(t){o=t,i.imgCache[e]=t}})},s}(),MiniInput=function(){function i(){}return __class(i,"laya.bd.mini.MiniInput"),i._createInputElement=function(){Input._initInput(Input.area=Browser.createElement("textarea")),Input._initInput(Input.input=Browser.createElement("input")),Input.inputContainer=Browser.createElement("div"),Input.inputContainer.style.position="absolute",Input.inputContainer.style.zIndex=1e5,Browser.container.appendChild(Input.inputContainer),Input.inputContainer.setPos=function(t,e){Input.inputContainer.style.left=t+"px",Input.inputContainer.style.top=e+"px"},Laya.stage.on("resize",null,i._onStageResize),swan.onWindowResize&&swan.onWindowResize(function(t){window.dispatchEvent&&window.dispatchEvent("resize")}),SoundManager._soundClass=MiniSound,SoundManager._musicClass=MiniSound;var t=BMiniAdapter.systemInfo.model,e=BMiniAdapter.systemInfo.system;-1!=t.indexOf("iPhone")&&(Browser.onIPhone=!0,Browser.onIOS=!0,Browser.onIPad=!0,Browser.onAndroid=!1),-1==e.indexOf("Android")&&-1==e.indexOf("Adr")||(Browser.onAndroid=!0,Browser.onIPhone=!1,Browser.onIOS=!1,Browser.onIPad=!1)},i._onStageResize=function(){Laya.stage._canvasTransform.identity().scale(Browser.width/Render.canvas.width/RunDriver.getPixelRatio(),Browser.height/Render.canvas.height/RunDriver.getPixelRatio())},i.wxinputFocus=function(t){var i=Input.inputElement.target;i&&!i.editable||(BMiniAdapter.window.swan.offKeyboardConfirm(),BMiniAdapter.window.swan.offKeyboardInput(),BMiniAdapter.window.swan.showKeyboard({defaultValue:i.text,maxLength:i.maxChars,multiple:i.multiline,confirmHold:!0,confirmType:"done",success:function(t){},fail:function(t){}}),BMiniAdapter.window.swan.onKeyboardConfirm(function(t){var e=t?t.value:"";i.text=e,i.event("input"),laya.bd.mini.MiniInput.inputEnter()}),BMiniAdapter.window.swan.onKeyboardInput(function(t){var e=t?t.value:"";i.multiline||-1==e.indexOf("\n")?(i.text=e,i.event("input")):laya.bd.mini.MiniInput.inputEnter()}))},i.inputEnter=function(){Input.inputElement.target.focus=!1},i.wxinputblur=function(){i.hideKeyboard()},i.hideKeyboard=function(){BMiniAdapter.window.swan.offKeyboardConfirm(),BMiniAdapter.window.swan.offKeyboardInput(),BMiniAdapter.window.swan.hideKeyboard({success:function(t){console.log("隐藏键盘")},fail:function(t){console.log("隐藏键盘出错:"+(t?t.errMsg:""))}})},i}(),MiniLocalStorage=function(){function i(){}return __class(i,"laya.bd.mini.MiniLocalStorage"),i.__init__=function(){i.items=i},i.setItem=function(t,e){swan.setStorageSync(t,e)},i.getItem=function(t){return swan.getStorageSync(t)},i.setJSON=function(t,e){i.setItem(t,e)},i.getJSON=function(t){return i.getItem(t)},i.removeItem=function(t){swan.removeStorageSync(t)},i.clear=function(){swan.clearStorageSync()},i.getStorageInfoSync=function(){try{var t=swan.getStorageInfoSync();return console.log(t.keys),console.log(t.currentSize),console.log(t.limitSize),t}catch(t){}return null},i.support=!0,i.items=null,i}(),Base64AtlasManager=function(){function e(){}return __class(e,"laya.debug.data.Base64AtlasManager"),e.replaceRes=function(t){e.base64.replaceRes(t)},__static(e,["dataO",function(){return this.dataO={"comp/button1.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABRCAYAAAApS3MNAAABSUlEQVR4Xu3a0QmFMADFUJ1JXM0h3moPZ6qg4AoNeLqAIenFn65jjLE40w2sQkxvcAMI0eggRKSDEEJUDEQ4/COEiBiIYFiEEBEDEQyLECJiIIJhEUJEDEQwLEKIiIEIhkUIETEQwbAIISIGIhgWIUTEQATDIoSIGIhgWIQQEQMRDIsQImIggnEvYvv9IzjfxDiP/XlgJsTcCyDEXP/v14UQImIggmERQkQMRDAsQoiIgQiGRQgRMRDBsAghIgYiGBYhRMRABMMihIgYiGBYhBARAxEMixAiYiCCYRFCRAxEMCxCiIiBCMa7iAjPpzG8fY3kF0KIiIEIhkUIETEQwbAIISIGIhgWIUTEQATDIoSIGIhgWIQQEQMRDIsQImIggmERQkQMRDAsQoiIgQiGRQgRMRDBsAghIgYiGBYhRMRABMMihIgYiGBcGJiOHTRZjZAAAAAASUVORK5CYII=","comp/line2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAAG0lEQVQYV2NkoDJgpLJ5DIxtra3/qWko1V0IAJvgApS1libIAAAAAElFTkSuQmCC","view/create.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAAAdElEQVQ4T2NkwAIWLFjwH5t4QkICIyM2CXQxmAHka/j///9mXDYxMjL6YtgwBDUg+w8crIT8MBQ0oEca55JvWNPS9xgu4tISzADyNfz///8MnrRkgmHDENSALWng9fRQ0DA40xLecglbWhpqGoZCMUNKUQkANAHAJVkE5XwAAAAASUVORK5CYII=","view/rendertime.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAABeUlEQVQ4T+2Uv0tCURSAvyNdcwiXBlsaaomWFgeHlqAtCPsDJHwIiUtDSxERtErtmQ6CjkHo4FpDBQ0tbVFR0BYE0eQvOnFF7T17QlOTd3m88873OD8+rtA9uVzOBIPBlIisAwvd8B1QajQahXQ63bIx6QHFYrEEJHrv7qeqZhzHOfYA+Xw+Yow5B+YHoGwymdxW1QAQEFWNAk8i8uEDuZM3gUcLZIEJYNcNqWrVcZyd7p9t8jLwYIFTYBx47UHlcjmcSCQ+B5JtpU0LnAFj3br7kE+yTalb4BCYczVqoT3AjteW4T73FlgFNgY+1IGQz4hPLGCAI2DGbweu2Auw1Vmcqk4C+8DsEOgZOBCR9/6mVdU2vgIsAdOuIVwANRFpezatuahpTYVSop1m+y6pasm8NQqSvvW61KwslkSHuCRkgvErr0taiUXaal1Sr0siWRO/9HfpF+RN9nfpB/qqmrXrv7mktVhYVm5GLo1cct9LI5e8d84/3UvfAgdlKH0EO7MAAAAASUVORK5CYII=","view/cache.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAkCAYAAABSSLCCAAAAcElEQVQ4T2NcsGDB/4SEBEYGBgYGYtmMxCpENhhsA6mA8f///5tHNTEwkBcQpIYcSD15kUtWigi51vR/jVYdOGUQy2YkViGywWSnvTOkhiAonkY1gZIRqSEHTntkRe4g10RWQIyWe5Bgo2O5R7dkBADztyP+yFzirAAAAABJRU5ErkJggg==","comp/clip_selectBox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAoCAYAAAAIeF9DAAAAsElEQVRoQ+3ZQQ0AMQzEwAuqEgh/Sj2pKObhIrBsrfLonHPu12MMTEGYFg+kIFaPgmA9ClIQzQDG0w0pCGYAw2khBcEMYDgtpCCYAQynhRQEM4DhtJCCYAYwnBZSEMwAhtNCCoIZwHBmd/tTh6IUBIrx/tRbiFWkIFaPFoL1KEhBNAMYTzekIJgBDKeFFAQzgOG0kIJgBjCcFlIQzACG00IKghnAcFpIQTADGE4LwYL8U/BE1dCJ3PsAAAAASUVORK5CYII=","comp/label.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAASCAYAAACQCxruAAAAmElEQVRoQ+3aMQqAQBBDUef+hx4Zq1mrbPnhWylECHmghVZ397OOqqp97TlugdNzgEXFIaaFuwROt0LmBEay5aXb920+FjIpMJItLy1wvhUyKTCSLS8tcL4VMikwki0vLXC+FTIpMJItLy1wvhUyKTCSLS89wPP1Qeh8M0zy+84gMMbruqjA15OxbtjAu7mPa5bj0fb/A8cLgD4n/wQKNiIAAAAASUVORK5CYII=","comp/clip_tree_arrow.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAQCAYAAAArij59AAAAwUlEQVQoU5WRPRKCMBCFWUt6vYQeB06RUDpoBbFDa7yDwm30FGi9dHnOMiQDBgvT5c3b7+0PRVEUlVV9A3NmzL6T//SRfMz5CgCdtVafjlmzaHAigAbM2tE8YVo1pf0yvABoc9D3wACgBbMKIgD4qqDJsqqlMV8VGL5n/88geCJKlijSMBXFZUNx/CSi9WwX1r7R99thzKKqkxXRbMUWSE2u2sEwHsxHCbrMVSq6N4xRD9HAvJstylEkarhurlqnfQC58YP5+CvQNwAAAABJRU5ErkJggg==","view/bg_panel.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMUlEQVRYR+3QQREAAAjDMGZk/l2CDD6pgl7SduexGCBAgAABAgQIECBAgAABAgS+BQ4oyStBhXcy5AAAAABJRU5ErkJggg==","view/bg_top.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMUlEQVRYR+3QQREAAAjDMKZp/rWBDD6pgl7SduexGCBAgAABAgQIECBAgAABAgS+BQ6WyDMhXMLeQgAAAABJRU5ErkJggg==","view/clickselect.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAACfElEQVRIS8WVO2iTYRSGn5OWqpMOurg0VRBdVVCsg7GgDjpZECyirl4GEYfSgBlaB5VSpApdxCJIoeKgg7dKC21ALahIiyiKKUjxAiI4qCH1lRP/hPhfAnHpGZPv+c4573nP95ukO/xHmINmtq8RtswsPiipB/gAPAFem5nCbcSWKukIsD84/A2YBh4DL8ysWLkk0qOkDcD5GLF+Ac+Ap35ZHGjAdWB5gtJvgZFYVSWdBHaFwBlg1Mw8K0ngFiAbAm+a2XBij/6HpBbgBrAEmAVeAZ1AFU40QDCWrcBZL0/S4Vq4HtgB7DWzU5XyauDBMhhWz70ryVVdb2ZuhGpI2g1MODjfiMFrxZk3s9WNwJ6snHFxQUlXgXfAPeC5mf2O2Y5oqZLcMceCw1+AseCSSTP7mSiOpM3A7RixfvgYgAd+WUQcSSnfPWBlgtIvgf5YVSVdBA6GQF/mS2bmWcvbERmHJF+payFw0MzO1TWApKXBViwL3h5/Pk4AVTjRAMFY9njJXl6wLccrcD3wAHDUzBwuRw18JtbkbkFJruomM7sf2o4u4Jals/mFRgxeFcfBQm97UyOwM+WMiwums/k3QnMps+HWpuLIRC5TCrcRW2pbT35MRiY4XDRsVmiU5uJQIZfxb0k5Ij229eQPySJ287MLGO8Rd1M0XY6AO3LjzYVSy3fAH+VICL4a6o9VtTWbnzbYGKI+IrtQ6Ns2EFuq/5jOTnWD9f4DikeFvvbqhyg2Yzo3voJSy2fAjfEJMYPRQQ2caAAfC7AW2WkvrzU79dCwnRW4Hjgg6JrrbV9VKbkKw1Csyd2Ca7on1y2krHOub3t16//2n79SarbsH7BKtfejoCjmAAAAAElFTkSuQmCC","view/resize.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAABeUlEQVRIS+2UvUpdURCFvxXRKJpIEBURsVAIiiBoaaGCjY2VLyH4MBaCPoWlnQlpI6SxsQmkURQL5eK/6JK57iuRnMPZtxAkuOFUhzWz96xvjcg8tluAT5LOQqJMHba/AgPAD0nOEtruAOaB6Lon6U+ucAoYTLe7Bb5XCm1/BCaAXqAVOAHyOkYn27PA5/TGWmXHxvBeT2i7TVIM4MUp7ZhGPlY3V/pVKUxEjAIjyac74LIAjK70PwCoyfYXYDJwyqDoHtiRdFOfql0naBgIrILF/ZIi1yH6h1XbYXCPpKOq7s34GEX7JB00m445YBzYlPSQ1dF2N7CaWN2W9DNXuJxAj1uGVeuVQtvh32LyuR34DexWCv+CfAXoBzYkHb8Boe1OSRcFkBdfNY18IQiUtFUpTJjNAPEFHVfAaQFyjZ3zNBzbQ8BSWkZViEbk1uIpjXR8AKbT7jwEvpVUqEk6L0pHLN5hSWWxeq7XjI/v6Sgz0vZ7Ov7DdDwCkcb1m86tSukAAAAASUVORK5CYII=","view/clickanalyse.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAAC7UlEQVRIS5WWT2hUZxTFfyfGFolkoUVKrHQiEaX+IfgHa54UQzUqpWYhLbQU6ULNwgYXuog6yiiTgK2LgtAu6yqbFkpRBEURQzJEBN200NqKkxoDLnQhFUrizJU7vje8SSbzZr7FwDy+c75z7z3nfU80uMxMDin9JC0zewvYAHwIrAH65wWaWQuwOdy8CVgUHnBd0sUKoJktBbYC24B1QHMVNeck3ZWZrYhtXpUg/3/gS0kzDnT2/cDqpFqBUUnnK5pjZutDgo01Tr0g6XbVrprZypBgO9AUU/EK+ErSyzLQzC5XkTkCfBR7fl/Smeh/qasOlPRp9DAkOgp8H5P9o6SriUAnMrOzgNdswNeSntcL9IYNAQ8kHYuXU5Y6u8ZIupldAO5I+nkOsNb8wjk/ljTZKFCSvMbSMrPSiOpNx9uAz3UP4IbfWSsdrcDH4eZuYHF46LCk47PT8S6wG9gbJmRhlfoPSLrhJvdERJs7E+S73dZKmnagsx8JB50UEHdY3+x0dIUEO2qcekTSr/OlY21I4N5dEJMwA6yX9CKejqkqGn8DemPPb0v6YrZXpyS1xYbsRD3AtZjsk5IuJQKdyMyGAa/ZnbNR0tN6gd6wXwAP8SfV0jGnxki6mV1xyf4ubdTkPue/Jf3TEJCMNZFRMQLtyNwqvaTrSkdHZry1MFM8bLLPgY5U8/SyeYHvncotb5b1A/t8c2QGg3sT2WBLBbD95PiGogr9Ej0Gbap8r4ZJ5kR+MPhW7WdGd5npEFaa15IE+YWW5uklf2S6/1N7OnfasG+Ad5KiAfyVzwYfVDQnlc71YTaA8Ntrvtq/y2eDgapdTZ0a60UMhjdvmcCgWDClJge7npSBqfRYYY5M6U/M/NqO1mQ+G7xf4VUH5rNBOXtviLQfzH0afizop0fZroOJQCdKpcfyUKrZFhTpfDgU/F4nMNcH9gPwLJ8Nls3xarUaI+mp9NhTg5GJbPBZQyb3OReayP17rutmHPga1PpCOk+zrlEAAAAASUVORK5CYII=","view/res.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAADwUlEQVRIS+3WT2gcdRQH8O/b2SwNC7l4MAEPvbilUkoPOUmLjSDrZn4hxYKH/kGwyB4tQogiu/N+GymyoWguhVBQKKkHQTHsW9fUQwqKp4AgtMXkInhILl4CkoTdmSe/6XZp2pntLli8uMedt9/3mze/33yW8Jw+9Jxy0TeYmV8FcFVVTxPRiwA6AP5U1TvZbHapUqn8nrawxGBVJWvtNVWdJ6K05h1V/dhaW08KT/wRM1sAVQCRqn5JRLdyudw9Iora7faJKIrKqnrBNSWiahAEC0+GHwpm5utEdD+KopsuBMDbzPxt0oqstRdV9Za7lslkzlar1Z8erzsUHATBJhG93C34fmJi4ly5XG6nzTEIgjoRzanqkrX2amowM98F8Fq3wK34PWb+Ii14cXExv7e3V6hWq78+axQrANwt/kVEl5j5h0G2IzMfUdWCtfa3R/VPzvhTAG8AOM/MfwwYehTANwB+ZOYPE4ODIDhJRJvMvD9IqLW2GEXRbSJ6AcBtZr6UGPzoS2Y+lc/nt+bm5v5Oa2CtvaKqywC8bs06M7+eGszMn7nTBqDOzPNpwcvLyyPb29vfAZh2Naq6Za0tpAbXarUzURS53eGKL1trv0oKZ+a3AHytqplMJlOOoui4tfaDvqOw1lZUtabubBOtqOqN0dHRB/v7++62XwHwDoB33dkAUGPmoO92e/yitXZeVT8BkE1acbdpPQiCj4hIBw52hQsLC8c6nc77AN4E8FK3yQ4R/Qzgc2b+Je0ZDPU+fjiZp1eXFD5U8CB7u+/DGybgXxnFMA3/m1GISGwegNMAeuYBuON53lKpVBrePBG5RkTuSPc1b2ZmZnDzRKRnHoDYvIODg3u5XM69/E8AKAO40G1aNcb0N6/ZbF5X1fsAbjpInXnGmETzGo3GRdew+0DPGmPSzRORTQA988bHx89NTk6mmtdoNGLziGjJ9/1085rN5l1VPWSeMSbVvLW1tXwYhoXp6en+5olIbB6A2Dzf9wcyb319/cju7m5hdnY22TwRic3zPO98qVQayLxWq3U0DMPYPGNMsnmrq6snx8bGNqempgYyT0SKzjoAsXnGmP7mNZvNU9lsdqtYLKaaJyJXABwyzxiTbp6IxOYRUd33/VTzNjY2RnZ2dnrmAdgyxqSbJyJnAMTmEdFl3/cTzROR2DzHk6qWiei4Maa/eSJScZY99FRXPM+7MTIy8iAMQ6/dbsfmEVHPPGPM4OaJiBtDqnmuqfuL4Pv+8Oa1Wq1jYRg+ZR6A2DxjzP/mPRupfwAf56Q4urCh6QAAAABJRU5ErkJggg==","view/tab_panel.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAABICAYAAADyMAW8AAAAcUlEQVRYR+3WsQ3AMAhE0TCMeyTvP1tShRQo7lxYegxA8fUPLuac97VhwuKXKhTlFxRQ9GPDClawYvGEDwxIZu7pFRZXr4ACinY1ghWsYMX/NxWQr22edyvGGHt6hcV1NqGAon8QVrCCFYteISDnBuQB3xJuQcDkEngAAAAASUVORK5CYII=","view/btn_close.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAqCAYAAACz+XvQAAACmUlEQVRIS7WWS0/bUBCFz7mJmyZxENm06mNVoVZC7LqGn9FNqy55/BSWSEhs2/4uuqFVoA150JLKJvGdaiIH2TfXNoKQpeP5PHPO3GMTK/5xxTwsAUWkBeBZ+qAByb/Zh4pIA8CL9NqY5Dj7vw9YA/ABwDsAfwB8ITnUIhF5CuATgNcAfgH4RnJSCkwLl6AA/lXBtLZQQxFxoTr6q6LOFl2WmuJAtcY7ZuXIixsczfRyTlPfhpSN7BpwBeBtFdQLFJE2gI8AXi7GBBBl3Fdnv5L87XbpWxuFfQbw3NXM0dQLLdrDIH3ylGTiLLYB8CS9lpCc3tmU+xzL1Z9lEXl/n06KavjowCiK1uM4fqMd1Ov1s3a7fZntZjabtSeTiQYHgiC4aLVavZwpbofT6TQYDAaH1tod3bMwDHc7nc5PLZrNZmG/3z8WkS1jzGm32z1oNBqjUqD+6YM2m81xFWyeNkUaulAAlyKyWdTZbdqUmZKFakEVrLRDV7P5zY6m3rQp6tA1AMC5tXY7he51Op0fdwbGcdwdDodHWc2MMdcL9wGM1tbW9sMw/L6UNm6HChuNRifW2g1XM0dTL3TJZS1KkkTDFbVaLQqCIJcm6k0URRpxuvg39Xo9rtzDh5zt1Z/lXq+32rR5dKC1dt0YM08bAGd65BxN1ZB52ojIBcl82rgdWmsDkocAdgDoW22X5DxtSIZJkhyT3AJwCuCAZD5tfCP7oMaYcRVs/tAiDT1QHX2zqLPbtCkzxYFqjXfM3GKXAR3NtC6nqTccioAeA84BbCuU5B4Af9r4gCLSBXCU1UxErjPuj0Rk3xiznDYuMIWdANhwNXM09UKXXNai9LtQ9y4yxuS/XUijr9L0lXBDMp82j370HhJdWvsftiHJYFPSIqEAAAAASUVORK5CYII=","comp/combobox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABCCAYAAAA476rKAAACfElEQVR4Xu3bMYsTURQF4PMmExgIWkgEU5hskyJYxGYKY5VS7NzCylL8Bftj3NbKQjuxTBWbaUwhKdIYLCJotlACA5m8kQTZZZkkeN9dbuNJOXPPu/DN5ZHkMa7dbpfgx0TAEdvEedeE2HbWxDa0JjaxLQUMe3HPJrahQECrNE3RarUOJheLBbIsq9znZAdgJ0mC4XCIer1eSa/Xa4xGI+R5TuwA272RTqeDfr9fuTeZTDCfz/dmONkK/cFggGazebnCcrnEeDw+uCKxFdiNRmO3nURRBO/9bvtYrVbEVpgejXa7XfR6PUynU8xms6O1nGzlU3DO7fbu7V5dlsf/0yO2ElsSJ7ZES1lLbCWgJE5siZaylthKQEmc2BItZS2xlYCSOLElWspaYisBJXFiS7SUtcRWAkrixJZoKWuJrQSUxIkt0VLWElsJKIkTW6L1t5an6wFooRGerofKBeZ4uh4IFxrj6XqoXECOp+sBaJoIT9c1esIsT9eFYFbl/J5tJc13agyliU1sWwHDbtyziW0oYNiKk22JfXJ6xnfXjcDdFttnb43a/b9tovQ5iG30/IltBL1tQ2xiGwoYtuJkE9tQILBV/ugl4rh2MF1sPJJP59fuc7IDsTe37mHz8Bki+MoKHhFqn9+j9vs7sQN9K7G89xRx837levHzG5Lph8p1TrZK3iF//ApxdLVI4YFk/BpA9Uc5sVXYwObOCfyDJ3AoUcIh+vIRtYuve1clthJ7G8/7p4hv30Xx6weSybuDKxL7BrARxcjTF0iyN4AviH0Tpto1ONlaQUGe2AIsbSmxtYKCPLEFWNpSYmsFBXliC7C0pZfY2oWY/zeBP8uaLni/AFTVAAAAAElFTkSuQmCC","comp/textinput.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAWCAYAAACv8OArAAAAZElEQVRYR+3UQQkAMAwEwcZI/LtsoSL2NTGwMByZ3b3HJQIDO3H+EdidNezQGjbsUiBs+dmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4Ew9QBe0R29X9x+dwAAAABJRU5ErkJggg==","comp/vscroll.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAhCAYAAAA/F0BXAAAAOklEQVRIS2N8+OzVf2YWFgYmJiYGcgHjqCEYQTcaJpipaTRMRsOEmDJmNJ2MppPRdEJMCIymE2JCCQAYonwDuu2VMAAAAABJRU5ErkJggg==","comp/vscroll$down.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAzCAYAAABxCePHAAAC/klEQVRIS+2WS0wTURSG/zszBcrLFVvjio0LiAqRRDAmGpRodFE1MQQQkOKGqBujRo3ExLjB4MaKgDzUaGQhvoJGYwAjYoioERcuDGxYEIwPkBY6nWvObXuLnXZaSklYOIu5M/fxzZn/nvPPsInJKa5qGhRFQaIH+w8xSbcymtTd+gBFYXAdyjM9sf7ORxgGR0t5/j9jpkhq2t5B0xQwBrgqNsnJ9V0j4BzQdQNtNYXWkKz0NDiaXkBTFTCFoaWmCHVtQ+AGh+4z0HNiO2bmPNYQGiXQvkuPoaqqiIgi8Pl8eHBqtwlA86MKS6Cy8z1gjIFzjqcXHBEBlpBgRNuOd+HVlYqogJiQIChcg/BtW5k8SaSSkxPJ5PRPTttHfkI7kcghIpn8NYfp33NLXp+TnYG1OWvA3ox9499nPSjdkCsgHJxOIjc43VMrugL9dEUD4Oj/PA4CsUfDX/jOjbmisHTDCCzi4t4QgLDrQF+qTYOmqhgYGw9BvLpv0ZNjQwieaU9b7ZCDriFhSt3VBSZNartHA6aUJ7SK+jqO5n5pSp1HiqSw1e3Di0ypwBpiU1XsudwnTanraDEqrg2GmZLbGkJh2jQVZY29JlPqPe03JX/uxLE7Nk3DjjP3pCn1Ne7HrNsjdYoLQsmWYtNQ3NCBgeZKzLrn/foEoogbQgvSUmz4454P7VQikGhpHzGSZdVOUqqYTGli6gemZ9yJ+0lSTalk/TrxtQOYaBnESbTinokev4UG+p+9/xoyJQKQn8x7vf7JjEFZ1FJBBvuC12RINIdAwtkIQuksnxgHhKBUZ6scQtLSNyiWJpav47z9STjbjfJ8k5iVN0eEs911bhZjUTWpbR+RztZ6uFBERNCq1rfS2e43lFhDsjPscDS9lM7W4dyCquuvpbM9PFkq0iHm7mSl2yP+bj05uxdeXZe5FHOL6Xdr17nQ79bziwew4NXFqwUTMiaEtKBPwtZjnRi8WgXPglfqsyQITc60pwpAeNpH1GRZtRM0pWVVcTJM6S+dYaRsIf025wAAAABJRU5ErkJggg==","comp/vscroll$bar.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAA/CAYAAAAGyyO8AAABYElEQVRYR+2Wv0sDMRTH30tarCg6dRWnQnFT6OiqoP+tk+Cig+AiHayDiNSlg+jgD47K1US+Lwm5s4o/mkElN1xy73KfcF/efTi+Ht3Y0X1Btw8FffdoLy3QSnuZ+HhwZe+exrS13hGGJYsTWSszN0rJ1zHDDbJ0eDYkgHjv5Nxub3TIGEsTY/xDVq6NAN7MfW2u2aCG1nQ0GEZIOXmp7Pw5BPDF+VaGIGQfbM6k0ng5kw8/wF/eJzP5JInZkjg2CSS8zk6vCys7Wb8r5qqsncAP+pdR1Lu9rvgVT4uYg+3F+PCtAzjzu/taKdKKBSS2/wkEMBg/Q+rB50zqzZb7ZPoD/GeZ1HySxGxJHJsEEl5nc22VmCFalpFJTjLKNUtFxlDfP72IogYAP8PPZekWM5OqjErFWpjjbxprABJRA/JYjOOOX4Bgo6bWGYKsfMg5k+lmy5n8uUxm8kkSs6Vw7Cstibc9Fv5vWQAAAABJRU5ErkJggg==","comp/vscroll$up.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAzCAYAAABxCePHAAADF0lEQVRIS92WTUhUURTHz31vPv0KKmkXrtxUGNomkCANLdCUpEatJFuIClIEFRl9kGH0BYWQElLpotGKEJXAtKQooYUFpi1axLQZMCyyZJqv926cM2/uTM288emoUHfx3v16v3fuuef+72Hume/c7/cBAwaLKWaLBZjLPc0Zk0CSJGBs4SDOObDP7i9ckuXkIbLJRJDFFrJk2SGNvZNwy7ExoZEJLWnqfQ+4SlUFaHNs0gXpQhq6x0GWGe0Y7oCicGivyYsLigup7XgFJlkCJjFwNm2HqrZR4CqHoKLC3fr8GFAMpPLqEJhMoZjpay6Bnx4vpKfYoLx1kCwKBlXoOV78BygGsudCH1nwtNVBgHBBUFFzL1n0+Gx5YghOxhINiAbFG1uZODESxf+bJShKrulv8HUusp1G/IBz1qTZIGvdamBjU584Aopzs+lbDhwfFFgc2/imLq0fazgAHF5MumBtuh3YwJsPfGdeNqgY1qqqfcSprRLgr7rWZzWbwCTL8HLKFYEEgkrUn+eHIDzNbltBSG33O+jcnxNZmrYcw5Yc7hoXotRenRPyz0IgBzrGYkTp9qEtxiEV10eEKD08Wgh7bzwTonSvIV/soK5jd53rE6I0eGY3/PL5wWYxQ+nFgShRKqK6LqTwhJNEafRKNQHCcWK3WmDHqR5NlMoSQzAWUV+9vkBMsKXYLCSbs3Oe+SGqqupGrIL3h3YclifYkjo7yZ7izIzUUGrhnvXAzA+PURkR8xCwPnMVsCUVpW0bsiCUKOH9S0980JvaLJSQUTal9Q+9/RgRJQSgnvgCgdBkxkCKektSpC9cR0HCOQgiZUMI3njijwYg+COzLP9rkLr7E3Dn4Gbhp7BPDC+n0TkhlK2zJpccuSBIfVdsutVdt9U4pLbjtVC2B0cKYN/N50LZHh0rFGGguztV14aFsvWfLiVhSrVboaSlXyjbk/NlBNKFVLT0k7INX3KAx+sXfkBlKzjpJItGLlcmhmSkptAB83h9MTuCICxBRUkMwUmY5+uFPY7LmJ7GW05SZycsSos9xUsmSr8BfgGeWI6+BgEAAAAASUVORK5CYII=","comp/button.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE0AAABFCAYAAAAPWmvdAAABA0lEQVR4Xu3ZMRGDUBRFwXwfKSgxFhfRgAbUxEakkCEO3qmX+p9m5w7NW9v7cz18I4EFbeT1fwxtbgYtmEGDVgRC458GLQiExNKgBYGQWBq0IBASS4MWBEJiadCCQEgsDVoQCImlQQsCIbE0aEEgJJZW0Pbj64Q3hFvQhmL3CQ8atLlAKCwNWhAIiaVBCwIhsTRoQSAklgYtCITE0qAFgZBYGrQgEBJLgxYEQmJp0IJASCwNWhAIiaUVtOfrdMIbwi1oQ7H7hAcN2lwgFJYGLQiExNKgBYGQWBq0IBASS4MWBEJiadCCQEgsDVoQCImlQQsCIbE0aEEgJJYGLQiExNIC2g/MxaMp6CSauwAAAABJRU5ErkJggg==","view/bg_tool.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMklEQVRYR+3QQREAAAjDMCYG/DsEGXxSBb2ke7YeiwECBAgQIECAAAECBAgQIEDgW+AAAeIuAVS/mngAAAAASUVORK5CYII=","comp/minBtn.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA8CAYAAAB1odqiAAAArUlEQVRYR+3X0QmAMAwE0GQN19B9nM193CmiIH7ZXOAoRc/fpjl8jVDdOj/eOc8USBcXqUjLAtDQRMSOdHb3JatTYCZUXodIy10bGxTI1Lx6/YA0Ima6W2tKFcjmdpGKtCow7NBAdxozy+804Gfx/cDqbLzWDzs0ekNY4B9nOMEehMKTVIEEyKeFSKmc18+MppRtipJuYPCa1SkwEyqvo6Tlxm8bFEijvBt9n/QA/fOPydLHcUIAAAAASUVORK5CYII=","view/zoom_out.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAACy0lEQVRIS92WQU8TQRTH/28oQkj0CL0QOMAJQkz4DkS6A+GA+A00Hrhj0uy8NiTwEdBPAOrB0Fnq3U8g6gkOSjxUjpCQCu08M5u2qaVAt7YmOqfNZPa3b9/+Z35L6NOgPnHx98Gbm5sTlUplA0AGQBpACcBBKpXazmaz3+5607YVM/MjEXlNRPdbASJyTkRrzPz+Nvg1MDNPAvgI4AGA10qpvHPuSCk17ZwLAazV4HPM/PUmeDvwSwBPAbxl5sf+RmYWZo7XMvOehwPYYebnScAnAMaVUrNhGH5pBefz+Rnn3GcAJ8w8kQT8E8A9AEMA/HXrqM9fMrO/bjvataJvFdd7/IaZfS9/67ExZpeIngB4xczPklQ8KSKHPmoispdKpXKjo6PHp6enU5VKxXhoV6moVXhnjpVS5wDOwjD81K7qG7e033lXV1cviMjvvDEAP0TkYHBwcKtarT4UkXcALolo1RhTaIV3dVYYY9aIyOfZDw9fMcYUm+FdgWvtYgCmBisrpRbCMPxQh3cNbgM3zJzvCdhDcrncuojMA8gy8/eegTvO8U0Lk87/UY9ve9h/BI6iyJ+1GyLScB4RHQDYDoKgO+dFURSfFQCuOQ9A7LwgCJI5r1gsTlar1YbznHP5crl8NDw8PK2Uip3n4QMDA3OLi4udO89a23Ce1jp2nrVWtNbxh7bWxs4jop0gCDp3XhRFJyIy7pybXV5ejp3XDN7f359RSsXO01p37jxrbey8i4uLoZGRkWvOa5q/1Fp37rx+VtxwntY6dl5zK6Io2hWR2Hla686dV0vFoY+aP8xFJJdOp49LpdIUEZkaNHkqfIWd5JiIzkXkLAiCZM7zO09EYueJyBgRxc4joi0ADeeJyOrS0lJvnBdFkf8xbDhPKbWSyWR647xCocC+53XnAVjQWvfGeS1wo7XunfOstesA5pVS2Uwm8w877xeHf444cscwYAAAAABJRU5ErkJggg==","view/refresh2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAA/CAYAAAAPIIPGAAAEIElEQVRYR+2XTUhjVxTH/+fGpBrGT/xoBQdFFMMQLNLNbLooLbaFzqKMUhCSZwsuhGG6KCNd6DuRLgqzmGVxUd8LUrpoYWZTKO1yNi2F1oVtceEHflSLqNEav8bklPuqgsl75sUPSsucTQj33v895+R/7y+XcA1B16CJ/6GoYRiDItKfzWZjExMTv5/XtoLlx2Kxm0qp1wH0AHgTwC4RfWRZ1mdewp6ig4ODN9Lp9CMieh+AchH41Lbtj92EXUUHBgaCh4eH3wJ4zSObGSLqtSzrZ9+ihmF8CODR8YIflFL3MplMNxF9IiJWIBC4Pz4+/ldR5RuG8QuAlwGsAWi3bTsVj8dvAWhOJpPfFPK2a/mGYewDeAHAV7Zt9+aK9PX1VYRCoVcApNxa4CX6J4B6AE9t2341V9QwjO8AvAFg27btytxxL9EvAbynJxNRj2VZX58sjMfjd4joyT9D9NiyrHf9iup+/gggBCALQPfxVwARAO8cWywD4LZt2z/5EtWT+vv774rIBIBSlx/mmT5dyWTyC9+WOpkYi8XalVIPRKQbwItEpHv9PRE9tCzrt6IsVcgyhcYLnv1CAkWXfxFBxzEXXXipq+8imz7P9CJdO3+N754y86A+vYFAIDY8PHw58DHzTQB54DNNs3jwMfONY6R4go+Z/YNvbGwsuLKyci74APQys3/wMfMZ8InIPaVUt4g44AuHw/eHhoaKAx8znwEfM6dGR0dviUizaZoXA59pmvtE5ICPmfPAx8wVABzwubXA1VLM7IBPRJ4mEok88DHzKfiY2R/4mPkUfCLSk0gkTsHHzHdE5Immnog8TiQS/sDHzK7gE5EIEZ2CTyl1e2RkxD/4TNO8S0Su4BORZ0qpftM0iwefaZrtAB4QkQM+AA74ADxk5ufgc78CfV99xdy61yMajUbfAvA5gJeKycZj7gqADygajf5xRYIn+6xoUbmCDM9I/LuidXV1qK2txdzcHPb39ZPAOwpmGgqFUFFRgerqauczm81iaWkJa2v64eLhU6+eKqXQ1NTkZOcWq6urWF5edh1zzZSI0NbWhvLyctdFBwcHmJ2dxe7urn/R+vp6J0sd6XQaCwsLqKysRGNjI9bX17G4uIhMRr8jiig/EokgHA7j6OgIU1NTjkBZWRl0f7e2tgo60LX8rq4u/UjC5uamU2ZuBAIBZ1O9mVsLXEU7OztRUlKCnZ0dTE9P54nqfmsnaNHJycm8cVfRlpYW1NTUOJN1pjrjk6iqqkJra6vzNZVKYWZmxp+oLq2jo8NpgQ7dx729PZSWlkKL6hARpwr9Q+aGp/m12Zubm6H9mhtacH5+HhsbG/4tdTJTZ9bQ0OD0LxgMOm7Y3t6GNv55R7XgMS3oH5cJ/y3Rq775V3X5bx8zSv8DuWzoa2vgb5tumbHGlerDAAAAAElFTkSuQmCC","view/settings2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAA/CAYAAAAPIIPGAAAD2ElEQVRYR+1Xz08bRxT+ZjAGYQoH4rS9IBJBQJEsUC8VKNdQtamUE0fLayqhKHeOaGbFkT8gFVLZtXzk1qqKSs4NUg8RXCIQVoOQ2jRFHHCwBRj2VW+zttY/14BXVaPOyR7NfPN9771536xACEOEgImPDHRhYaHv/Pz8kEMVjUbjq6urxVZhayo/lUo9chzndTabfWMYxkMAGx7QrG3bL5LJ5B0p5f1MJvNz7QENQdPp9LdE9CMAZrcHYAaoxJ8AvARwD8AtAI9t2/7JD9wQdH5+/q7jOLzx04DqeCelnFlbW/s9EJQXGIbxq8eQ//4mhPieiJjlEwBf8qQQYtOyLFZRNeqYJpPJWCQSeUBEzz3JrwqFwvT6+vo575ybm4vGYrFNAF8AICnlbKlU2sxms4Uych2oYRh5AJ9UFggxb1mW5aeSTqfTRLTmm3tv2/bAVUCfWpb1zA9qGAaHwD/XGjQU+WVGHU0Ug4ZSUjXFnwMwXVP8nP1RAPG2i5/Z+q9pKpWaFUL8wvNE9FUmk9m48jWtLWavofztNZTb124oN2neH1mTvmoo/pcfHDGtdZ9nLbw4rrW+nvGZpvlISvl6aWnpjWmaD4nINT4hxKxS6sXy8vIdx3HuK6XaMz6ttWt8QohDInKNTwjhJtWzlJdCiHtEdEtK+VgpFWx8Wuu7RMQbWxofEb0TQsxordszPq11Q+MjoidCCNf4AGxqrYONb2VlJVYsFh84jvPck/yKW5/W2jU+rXWUwdj4OBQcYzbCxcXF5sanlMoLIaqMTylVZXymaVYZHxG9N02zufE1AH2qlKoyPqUUh6AyFwgaivzyVehoorxkdL6k/MUPIEdE0/7i5zcUGx8Rxdsufmbrv6ZKqSrjM01z48rXtLbFeA3FNT4At6/dUIJ7V/MV/6HOn0gkvgbwA4DPbyLZ2/sWwHcikUj82SHAMqe3DMrv+I6Ofw9USonJyUlXzfb2NhzHaamsKdPBwUGcnp7i7OwMAwMDGBsbc4H29vaQz+fR09OD3t5eHB8f1x3QEJQBR0dHcXFx4QL39/dXbTw5OXEBI5EIcrlcHXBDUGYxPj6O7u7uljJLpRJ2d3ddNf7RVD6DlhkWCgUcHrof0YjH44jFYu5vnt/Z2QmWz0lhsHIMi8Wiu/HDF6T7mMDExAT6+vjR8iHGHA5/8uqYTk1Noaurq3L6/v4+jo6OqtgMDQ1hZGSkMnd5eYmtra3K/0DQg4ODivTyLg7B8PBw+6ChyC8f39FEMWgoJRVK8TPbjl/T2mruWEO5SYMNo/P/xaDfeB712U3YeXv/ALDwD+TbY8Dbd9BBAAAAAElFTkSuQmCC","view/setting.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAACAklEQVQ4T5XUS4iOcRTH8c9xCeVeiiiXhSJRJFIusRO2lEtZKFlgY6GxZDUrk2TFwii22JJLlERRLKRQJmXBkHIb8+hM/2d6ememed93957n93v+55zf9/mHll9VVTNxopTPR8T3piTyT1VVs7AL9zEd+4roOn5gK25HxLfacAjL8A8TWw6ta28jorc2LMLhIu7Ds2Jah4XlRVci4mNUVTUDadiLFF/G5GL4iyOYjxsYMnQ1BDfxujk0VmJPecFAO4bV2Nk05Bqzz3Za6ut86JJDx2vN4Hbj3hjBbcOt4eCaQZXUj5daT4pGoNFimI1zpdYVEf2jsTQX+5MX5NaOFdFFJHzJ2bWI+FJv6SRWYACTWliqa68ioqc2LMWpwtJ7PCymzVhSWOqOiHeZdPachqNIcXdBJV/2B6cLa5cwZLjQYOkqnuNsOeEM1uJgE43xDBsaH9QQfJ21VNBoHfpBaWHLiKGLoeO1ZnAHkpcxgkvOeoeDa0FjTnNLEfF1PJamYkcR3YmIX6OxNA35Kb7BFKwvoqf4jeV4GRE/azQ2Yh4GMaGFpbr2OSKe1Ibse1MRJ84fimkxMqc0Pc55MrjsOYvZRoofNW6/vPUSwEQ+2+tPQ14h9fX4Ap+aQ2MB1pQTB9sx5K24qmnorKWCRvtDF0PHa+0suBaW0ry91O5mus3n/wHmQwUTIH+tVgAAAABJRU5ErkJggg==","view/refresh.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAACiElEQVQ4T4WVS4iPYRTGf4/7/X6XcivXcktEUhTKQkqyYCOKjWyUhezFThbIlJ3LYrIRkoWGUhhhTMko4zJujYRpxgxHj9737/P3zfh239c57/uc5/zO+UQ3T0QsBRYCtZI+5jBVx0fEcGA6MA+YCXQCVyXddWwlISL6ARuARcXvhQPrJF3/nRARvYHtwLRuFLYCFyW15ITl6XTHvwIuJzlrgHrgiqSOiqSI2ANMAL4BxyW1R8RYYKSkp8Vb8w2HgD7AE0kXSozoD0wC2nPCAWAw0CyppiRhBzAD6MgJW4D5KdDFNeSkiJgFbEvONeYE698N2K0ArPsDMAZwguN+AmeKfZgLbAb6llj7A7gk6eFfnY6I0cDKpNc1tQFNwG1JvvFPp0sKXQ2sAGokveuJpVHAHGBJ4ul76vLNapbs9dYk6R8oU7driyztA2Z3w5L1n5LUnBPWptMd/xw4l+RscsHAeeNSZMloTAG+AIcltUXERPdB0qMylk4klu5LOlni2ABgqm3Oko4BQ4Fnko6WJOxPzlXg2wV4hv2czuOYhmsBsDf1rD7fYP0HkyyzZN0twHjACZmlI0WWFgM7e2DprKQ71SyNA9YDBnFYcq0RuOZ5/h9LdsVS6yV97YmlgYDn2X3wjUa7QdKLapY8015ePrWMJVtembhewLI0YWU4eZvck/Q525pXo4M/AY+TLMP40u+SuooseVjsitm/IakzItz5QcXhKSZsBCyrpdjlwuZwfSO8mLOkdYAHqFXSrRKWvErtXFdOcJcnp0AX96ZwuldQ5uxtTrD+VUmWWXqfujwk8eQ4f68rsuRG+d/gZVb9eIk9kPS6miXvIv91rNc12TXPc5MkTyO/AFhJCujHqZlCAAAAAElFTkSuQmCC","comp/checkbox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAABbUlEQVRIS+2TP0gCURzHv88GRYsrExyOo5cEQVEtWdQQpE4N0R+HxmirXXCrKYigqMF2IRqCQByaLJqNIFpyUIzu4rIwpExODy88ITD/cJ603Rsf7/OGz+/zI5TSEAE20cZRgBMySKni8XrbwICrWAwG2ESZIadFS53J0R25brCyHZNud1vbcRuPV7fDAOu9GXJatNSZHN2R6wb/PfJCrxOZCR8Gbk6hWc6Xg8PrcgBETMIVPdIGSjYG/NoOSHcfkLqDK3qsBSRIrgRAuBF1quUPEUPhYGMwb2dhywrqQ3F0Dt++jSokJMBdhmDO52pB2WwFP7OK8rgH9os99IgppNf3QWwMFP4RNHKALrmoflIj53l6CaWpRcBkgiIkYHl6gDTrh5JJg57v/kJ1YOUixw7jfWELxMpAKUmAXAR7tg3LZ7am3IbjKDBOvPiDqkUmcoj+9H1d7k3nmHdweBubB70ON9wRzQH8pVVQb+Q/zZAEfpwDCU4AAAAASUVORK5CYII=","comp/btn_close.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA8CAYAAAB1odqiAAAE6UlEQVRYR+3Y30+bVRgH8G/T0t/0Jy0USrIsC0E2GMKAVYcRpmSbEzIGZhqyxCxeceGVF3pjvJl/wYyJWZYY4hZBFnBuBBUW2ewYAxlsSMiyLKH8aEt/0vZtSxvM+562We15C6jlxr53zfO8z+ec5z2nOTmCk598tY19fAQs+Hlvz76QX1zpAwd+1NMNXzieU1QtFeKbvn4CXvqgC95wLKegRirC1e8GCPjh+53wMnRwedkG54aLG4yhSI/ycnPawHaKJ5M1MhGuXR8k4MX3OnjBx3NPcLX3DPfepSu3odfrYC4r5X7bVlbhcrnT4kdrjlA7xYLffj9EwJ6udnhCW9TEJ08XUgWTqE6n5XLdbk9G7MjhKmodrbwAfQPDBLxw7h1ecH3dDq/Xm1GYrZqceXIgGo0GJSXFvOCNmz8RsLv9NNyhKO+icTqc8Pl8acDLyWyr1Wo1DEYDbw2dXIz+4TsE7DzbBneQH2SruDZc8Pv9GSiLqVQq6Iv0WVe5TiHG4K1RAnaceguuYCTrCx63G4FAgAoqlUpodbqs7+sVEgyN/ELAs20t2Ajwgz6vF6FgMGtL5QoF1BoNL1qklODW6DgBT518gxcM+P1gQqFdLRqZXA6lSkVFWXDk198I2NZyAs7NMDXR7XRmYBKZjMuNMEzmljHQF46hUIrR8XsEbG228IJ+T/rGFkskkMoVHBgOBRGNRNI2vkpL/5YsODZhJeCbJ47D4WeoM4wyDLai5PsWiCUQJ2aXTN4pnswzqmS4e+8BAZstDbxg1qW3hyALTlinCPh6Uz1C0Rg2w/S/tz3UpaYWSgsgF4twf3IagvOXr297PR5YGuv+bd2s71sfzkCj1ULQe+3u9vraGlg0lw+LlZhMEIzUNu7vmYYFmz/9LJeTS9We+PIymaGl6wLizo2cokJDEawDNxLg+W7EHTkGjUWw/tBPwOMdnYg7nNQZep4/Q2B9jYspS0zQHjyUlrdTPJksNBrwYGiQgE3vtiNup4O2SSuOzk5y7z2ubYKyuBiaAwe5394XzxGw29Pi5iYLdeDCYgMmfxxOgKfPIG53UBNt049SBVNo4g864HRmxMz1x3hAIybv3CZg49ttiK/bqYneFRuCLldGYTY5OfPkQBR6PTRl6cfIVEtLivHw51ECNrS2Ir62zrtKfWtrCHo8acDLyWyrFVot1CYTbw2hqQRTY2MJsLk5K8hW8TkcCPp8GSiHqdVQG41ZtxUHTkwQ8NhrFsRXyUrke3wuF0L+TSooVxVCrc9+iBKWmvDodysB65saEFtZ5cX8Hi+YQDBrS2VKBVRa/jONqKwU05NTBKyrexWxlRUquOnfBBNidrVoZHIZClWF1DqisjLMzPxBwNraasRsdHDD6c7ApDIJVzTMRDJiRQb6EUNkLsPs7DwBa6qrELPZqCNzu/1pG1siEUOhkHK5wWAYkUg0La7T0U9tIrMZc/MLBKw+XImtZTrIMBFEouQkIBEXQJaYXXJ0O8WTeQXlZsw/XSRg1SsVvGDWpbuHIAsu/LlEwMrKCsQDAcQ93j2U2H2qUKuBUKnE4uISBF9f/Hj7wJwVhyordl/hH2Q+W1zCixoLOdNUj98Ei+byYbH5lnPkmJhL6O+18/c0/1m38/c0qVbm72nYVuTvadgu5O9pUtsif0+Tv6dhF8P/657mLz4NfQVdLmZiAAAAAElFTkSuQmCC","comp/textarea.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAXCAYAAABkrDOOAAAA4klEQVRoQ+3ZvQrCMBiF4e9rU+sPOErRqxDRe/KG9Fp0EAc3VzuIg1ML4uDmlkaaquDenMUTyJoDD+8W3ZyKlaoshSeogHOy1m1euOmoI1EU+auqQUf/8XHnnBzLp3jsWdaVJEnEGEPsADXU2Ifro8Gej/uSpqnHruvmaVegqirZX+4N9mIy8Nh13XEct7vE18RaK7vzjdiIFoiNUH5vEJvYQAHgFMsmNlAAOMWyiQ0UAE6xbGIDBYBTLJvYQAHgFMsmNlAAOMWyiQ0UAE79lM2fmrDy358a/q6Hhf68ng175QueKdEXxUGVVwAAAABJRU5ErkJggg==","view/re.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAACpklEQVRIS+WWPUgcQRiG3+8O70QEUwTB1EJgsTGdRRrhOMjOtEtSRbBIBMFKuCtkZleES2uRQoWQJggKKW7Of7GyTRvBLkVShhS73OXMfWGOU85Es7uXs0m2XeZh+OZ95xnCHX10R1ykBvu+P5fP59+VSqVvf9pUarBS6jWAR0Q0rbWOboP3BCaiOQAHAKTW+vtN8L8BW96W4zjPPM/78Ss8FlypVEYajYbHzALAJIAHALJdoDWl1Esi4m74rWBmpiAI5pk5AHAvJj0VrXU5Fmyhvu+/AfA8YRxfaa1LsWDf92eZeSMJlJnXtdYvEo1Ca30G4GEH/ImI1lqt1nE+nz9vNBrLnVTY39uO4zxNdHgrKytjzWbzs13FzKfDw8PFxcXF8HL3Nscd8BEAN3HcgiCYbLVaHyyIiGaUUm+7R9JzQZRSo0T0BUCGmRd831/tBttK53K5zXK5/DV1pZVSG0Q0C2BXa/0kySEmKojWeoiZD4hoKpvNTiwtLX1MC7+1IFrrQWZeJaJxx3EKN5186lF0LwiC4DEz31dKvU+z69i7Ig0stnm9wv4zsDGm7bxCodBf5xlj2s5j5mkpZf+c1wHPEdFBGIbS87z+OO8S3EnAVhRFvTnv8PBwpF6ve0QkiGiSmX9znuu66ZxXq9XmAcQ6j5krUspkzqvVaqmcJ4SId54xxl6ZiZwHYN113WTOq1arZ0R05TwAa5lM5rher5/ncrllAPYl1HZeFEXJnLe3tzd2cXHRdh6A04GBgWKxWLxyXlcqjqIochPHbWdn58p5AGaEENec13NB9vf3R5vNZtt5RLTguu4159lKA9gUQqR3njHGHpx9tOxKKfvnvGq1OmQrC2AKwIQQon/OOzk5GQzD0I5hPIqi/jvPGNN2npTyH3feTzoJOzgswwlqAAAAAElFTkSuQmCC","view/search.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAqCAYAAABcOxDuAAABX0lEQVRIS+3VsUrEQBAG4H9HiDZiJQg+gJVaiKAoWClYXWeZ7D6CtbWFr5Ai2ayQxkLQRgsLGwtBUQsRC6sDCxHxEIvIZSRwxRGSu83pNUe23c0H+89kR2AISwzBxAiinuctCSH2AawD+AFwRkR7QRC85CO0ur5SaoOZzwGM54A3IlrJw1aolPIewEJJUY+01jvde31RKeUMgNceXdLSWk9VQl3XnSWiZhnKzF9RFE1WQrPDUsonAHNFsBDiJAzDRmXUdd1tIjoFMJaDW0KI1TAMH61RpdQ0Mx8z8zMzHxLRAYBlAG0Al2ma7hpjHqxbqgNeAJgHcKW1XutEMeE4Ttv3/axXC1dh9XPgbZqmW8aYd9t3ohCVUt4BWARwkyTJZhzHH7Zgdq4MvQbw7ThOw/f9zypgKVoVsS7UX+C+v+kgeI0Oklrvb0Yw03rwlZW8Hnz14OvqjXrw1e/pPyfwCww91CttlMG7AAAAAElFTkSuQmCC","view/save.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAAA1klEQVRIS+2VzQ3DIAyFwxwdoMMAA/VQ8ZByyEBhmA7QOVxxKLIaOcIoSZUfrlifHw/wM91Ky6zE7SZgANTaDEDhzYJ5odSMC7nA5U7+b4X2dVQr3ic4hHCTlMcY33xPZUUGcwBvdEJwjcfGGIQQ4rd2qenWA3hyAUuABwCP31NtN+i1v02qP4DicRybM885J2ceB/NCyUupfuLxBS4WbmKF9rNUv4p9gq21d0l5SunF91RWZDAH8EYnBNd4nDPPWitnXst0I6Leez+feVowEQ3e+wNk3ge7C/Qp3GfwkgAAAABJRU5ErkJggg=="}},"base64",function(){return this.base64=new Base64Atlas(e.dataO)}]),e}(),DebugPanel=function(){function h(){this.tShowObj=null,this.preValueO={},this.div=null,this.debug_view=null,this.height=300,this.clickedHandler=null,this.fromMe=!1,this._treeDataList=null,this._init()}__class(h,"laya.debug.DebugPanel");var t=h.prototype;return t.removeNoDisplayKeys=function(t){var e=0;for(e=t.length-1;0<=e;e--)h.noDisplayKeys[t[e]]&&t.splice(e,1)},t.updateShowKeys=function(){h.tObjKeys.length=0,this.tShowObj&&(h.tObjKeys=ClassTool.getObjectDisplayAbleKeys(this.tShowObj,h.tObjKeys),this.tShowObj==Laya.stage&&this.removeNoDisplayKeys(h.tObjKeys),h.tObjKeys.sort(MathUtil.sortSmallFirst))},t._init=function(){var i=this;this.div=Browser.document.createElement("div"),Browser.document.body.appendChild(this.div),this.clickedHandler=new Handler(this,this.onClickSelected),this.debug_view=Browser.window.layaair_debug_view,this.debug_view.initLayaAirDebugView(this.div),this.debug_view.tree.attachEvent("onSelect",function(t){var e;(e=i.getDataByID(t,i._treeDataList[0])).target&&(DebugTool.showDisBound(e.target),i.showTargetInfo(e.target))}),this.debug_view.setValueChangeHandler(function(t,e){i.onValueChange(t,e)}),this.debug_view.onRefresh(function(){h.I.setRoot(Laya.stage)}),this.debug_view.onInspectElement(function(){ClickSelectTool.I.beginClickSelect(i.clickedHandler)}),this.debug_view.onLogInfo(function(){console.log(i.tShowObj)}),this.debug_view.onPrintEnabledNodeChain(function(){DebugTool.traceDisMouseEnable(i.tShowObj)}),this.debug_view.onPrintSizeChain(function(){DebugTool.traceDisSizeChain(i.tShowObj)}),this.debug_view.onToggleVisibility(function(t){i.tShowObj&&(i.tShowObj.visible=i.debug_view.getVisibility())}),this.debug_view.onToggleDebugBorder(function(t){i.tShowObj&&SpriteRenderHook.showDisplayBorder(i.tShowObj,i.debug_view.getShowDebugBorder())}),this.debug_view.onToggleShowCurrentCache(function(t){CacheAnalyser.showRecacheSprite=i.debug_view.getShowCurrentCache()}),this.debug_view.onToggleShowAllCache(function(t){CacheAnalyser.showCacheSprite=i.debug_view.getShowAllCache()}),this.debug_view.onToggleShowAtlas(function(t){console.log("toggle show atlas:",i.debug_view.getShowAtlas()),i.debug_view.getShowAtlas()?AtlasTools.getInstance().start():AtlasTools.getInstance().end()}),JSTools.showToBody(this.div,0,0),Laya.stage.on("resize",this,this.adptPos),this.adptPos()},t.onClickSelected=function(t){this._treeDataList&&(this.debug_view.tree.selectItem(IDTools.getObjID(t)),this.debug_view.bounceUpInspectButton())},t.updateLoop=function(){this.tShowObj&&this.showTargetInfo(this.tShowObj)},t.onSelectItem=function(t){var e;e=t.target,this.showTargetInfo(e)},t.onValueChange=function(t,e){var i;("number"==t.type&&(e=h.mParseFloat(e)),"boolean"==t.type&&(e="true"==e.toString()),this.tShowObj)&&(i=t.key,this.preValueO[i]=this.tShowObj[i]=e)},t.showTargetInfo=function(t){if(t){this.debug_view.setVisibility(t.visible),this.debug_view.setShowDebugBorder(SpriteRenderHook.isDisplayShowBorder(t));var e,i,n,s=0;if(e=h.tObjKeys.length,this.tShowObj==t)for(s=0;s<e;s++)i=h.tObjKeys[s],this.preValueO[i]!=t[i]&&this.debug_view.changeValueByLabel(i,t[i]);else this.tShowObj=t,this.updateShowKeys(),n=h.getObjectData(t),this.debug_view.setContents(n);for(s=0;s<e;s++)i=h.tObjKeys[s],this.preValueO[i]=t[i]}},t.adptPos=function(){this.fromMe||(this.fromMe=!0,JSTools.setPos(this.div,0,Browser.clientHeight-this.height),this.debug_view.resize(Browser.clientWidth,this.height),h.overlay||Laya.stage.setScreenSize(Browser.clientWidth*Browser.pixelRatio,(Browser.clientHeight-this.height)*Browser.pixelRatio),this.fromMe=!1)},t.setRoot=function(t){var e,i;e=h.getSpriteTreeArr(t),this._treeDataList=[e],(i={id:0}).item=[e],this.debug_view.setTree(i),Laya.timer.loop(500,this,this.updateLoop)},t.getDataByID=function(t,e){if(!e)return null;if(t==e.id)return e;var i;if(!(i=e.item))return null;var n,s,o=0;for(n=i.length,o=0;o<n;o++)if(s=this.getDataByID(t,i[o]))return s;return null},t.getDataByTarget=function(t,e){if(!e)return null;if(t==e.target)return e;var i;if(!(i=e.item))return null;var n,s,o=0;for(n=i.length,o=0;o<n;o++)if(s=this.getDataByTarget(t,i[o]))return s;return null},h.init=function(t,e){void 0===t&&(t=!0),void 0===e&&(e="#ffffff"),h.I||(h.overlay=!t,DivScripts.init(),DebugTool.initBasicFunctions(),RenderSpriteHook.init(),SpriteRenderHook.init(),(h.I=new h).setRoot(Laya.stage),CacheAnalyser.showRecacheSprite=!1,e&&(h.I.div.style.background=e))},h.getSpriteTreeArr=function(t){var e,i;(e={}).text=""+ClassTool.getNodeClassAndName(t),e.target=t,IDTools.idObj(t),e.id=IDTools.getObjID(t);var n,s,o=0;for(n=(i=t._childs).length,s=[],e.item=s,o=0;o<n;o++)s.push(h.getSpriteTreeArr(i[o]));return e},h.getObjectData=function(t){var e,i,n,s,o,a;e=[];var r,l=0;for(r=(a=h.tObjKeys).length,l=0;l<r;l++)o=typeof(s=t[n=a[l]]),"_"!=n.charAt(0)&&h.displayTypes[o]&&((i={}).key=n,i.value=s,i.type=o,e.push(i));return e},h.mParseFloat=function(t){var e;return e=parseFloat(t),isNaN(e)?0:e},h.I=null,h.overlay=!1,h.ChildrenSign="item",h.LabelSign="text",h.tObjKeys=[],__static(h,["displayTypes",function(){return this.displayTypes={boolean:!0,number:!0,string:!0}},"displayKeys",function(){return this.displayKeys=[["x","number"],["y","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"]]},"noDisplayKeys",function(){return this.noDisplayKeys={desginWidth:!0,desginHeight:!0}}]),h}(),DebugTool=function(){function a(){}return __class(a,"laya.debug.DebugTool"),__getset(1,a,"target",function(){return a._target},function(t){a._target=t}),__getset(1,a,"isThisShow",function(){return!1}),__getset(1,a,"showStatu",null,function(t){t?Stat.show():(Stat.hide(),a.clearDebugLayer())}),__getset(1,a,"showBound",function(){return a._showBound},function(t){(a._showBound=t)||a.clearDebugLayer()}),a.getMenuShowEvent=function(){return Browser.onMobile?"doubleclick":"rightclick"},a.init=function(t,e,i,n,s){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===s&&(s=!1),(a.enableCacheAnalyse=t)&&RenderSpriteHook.init(),n&&SpriteRenderHook.init(),(a.enableNodeCreateAnalyse=i)&&ClassCreateHook.I.hookClass(Node),e&&LoaderHook.init(),CacheAnalyser.showCacheSprite=s,NodeInfoPanel.init(),a.initBasicFunctions()},a.initBasicFunctions=function(){DisplayHook.initMe(),a.debugLayer||(DebugInfoLayer.init(),(a.debugLayer=DebugInfoLayer.I.graphicLayer).mouseEnabled=!1,a.debugLayer.mouseThrough=!0,a.showStatu=!0,Laya.stage.on("keydown",null,a.keyHandler),a.cmdToTypeO[1]="IMAGE",a.cmdToTypeO[2]="ALPHA",a.cmdToTypeO[4]="TRANSFORM",a.cmdToTypeO[16]="CANVAS",a.cmdToTypeO[512]="GRAPHICS",a.cmdToTypeO[1024]="CUSTOM",a.cmdToTypeO[2048]="CHILDS",DebugExport.export())},a.dTrace=function(t){null!=a._traceFun&&a._traceFun(t),console.log(t)},a.keyHandler=function(t){var e;if(e=String.fromCharCode(t.keyCode),t.altKey){switch(t.keyCode){case 38:a.showParent();break;case 40:a.showChild();break;case 37:a.showBrother(a.target,1);break;case 39:a.showBrother(a.target,-1)}a.dealCMDKey(e)}},a.dealCMDKey=function(t){switch(t){case"上":a.showParent();break;case"下":a.showChild();break;case"左":a.showBrother(a.target,1);break;case"右":a.showBrother(a.target,-1);break;case"B":a.showAllBrother();break;case"C":a.showAllChild();break;case"E":a.traceDisMouseEnable();break;case"S":a.traceDisSizeChain();break;case"D":DisControlTool.downDis(a.target);break;case"U":DisControlTool.upDis(a.target);break;case"N":a.getNodeInfo();break;case"M":a.showAllUnderMosue();break;case"I":break;case"O":ObjectCreateView.I.show();break;case"L":DisController.I.switchType();break;case"Q":a.showNodeInfo();break;case"F":a.showToolPanel();break;case"P":a.showToolFilter();break;case"V":a.selectNodeUnderMouse();break;case"A":NodeToolView.I.target&&MouseEventAnalyser.analyseNode(NodeToolView.I.target);break;case"K":NodeUtils.traceStage();break;case"T":a.switchNodeTree();break;case"R":RenderCostRankView.I.show();break;case"X":NodeTree.I.fresh();break;case"mCMD":a.traceCMD();break;case"allCMD":a.traceCMDR()}},a.switchNodeTree=function(){ToolPanel.I.switchShow("Tree")},a.analyseMouseHit=function(){a.target&&MouseEventAnalyser.analyseNode(a.target)},a.selectNodeUnderMouse=function(){DisplayHook.instance.selectDisUnderMouse(),a.showDisBound()},a.showToolPanel=function(){ToolPanel.I.switchShow("Find")},a.showToolFilter=function(){ToolPanel.I.switchShow("Filter")},a.showNodeInfo=function(){NodeInfoPanel.I.isWorkState?NodeInfoPanel.I.recoverNodes():NodeInfoPanel.I.showDisInfo(a.target)},a.switchDisController=function(){DisController.I.target?DisController.I.target=null:a.target&&(DisController.I.target=a.target)},a.showParent=function(t){if(t||(t=a.target),!t)return console.log("no targetAvalible"),null;a.target=t.parent,a.autoWork()},a.showChild=function(t){if(t||(t=a.target),!t)return console.log("no targetAvalible"),null;0<t.numChildren&&(a.target=t.getChildAt(0),a.autoWork())},a.showAllChild=function(t){if(t||(t=a.target),!t)return console.log("no targetAvalible"),null;a.selectedNodes=DisControlTool.getAllChild(t),a.showSelected()},a.showAllUnderMosue=function(){a.selectedNodes=DisControlTool.getObjectsUnderGlobalPoint(Laya.stage),a.showSelected()},a.showParentChain=function(t){if(t){var e;for(a.selectedNodes=[],e=t.parent;e;)a.selectedNodes.push(e),e=e.parent;a.showSelected()}},a.showAllBrother=function(t){if(t||(t=a.target),!t)return console.log("no targetAvalible"),null;t.parent&&(a.selectedNodes=DisControlTool.getAllChild(t.parent),a.showSelected())},a.showBrother=function(t,e){if(void 0===e&&(e=1),t||(t=a.target),!t)return console.log("no targetAvalible"),null;var i;if(i=t.parent){var n=0;n=i.getChildIndex(t),(n+=e)<0&&(n+=i.numChildren),n>=i.numChildren&&(n-=i.numChildren),a.target=i.getChildAt(n),a.autoWork()}},a.clearDebugLayer=function(){a.debugLayer.graphics&&a.debugLayer.graphics.clear()},a.showSelected=function(){if(a.autoShowSelected&&a.selectedNodes&&!(a.selectedNodes.length<1)){console.log("selected:",a.selectedNodes);var t,e=0;for(t=a.selectedNodes.length,a.clearDebugLayer(),e=0;e<t;e++)a.showDisBound(a.selectedNodes[e],!1)}},a.getClassCreateInfo=function(t){return RunProfile.getRunInfo(t)},a.autoWork=function(){a.isThisShow&&(a.showBound&&a.showDisBound(),a.autoTraceSpriteInfo&&a.target&&TraceTool.traceSpriteInfo(a.target,a.autoTraceBounds,a.autoTraceSize,a.autoTraceTree),a.target&&(a.autoTraceCMD&&a.traceCMD(),a.autoTraceCMDR&&a.traceCMDR(),a.autoTraceEnable&&a.traceDisMouseEnable(a.target)))},a.traceDisMouseEnable=function(t){if(console.log("----------------traceDisMouseEnable--------------------"),t||(t=a.target),!t)return console.log("no targetAvalible"),null;var e;for(e=[],a.selectedNodes=[];t;)e.push(ClassTool.getNodeClassAndName(t)+": mouseEnabled:"+t.mouseEnabled+" hitFirst:"+t.hitTestPrior),a.selectedNodes.push(t),t=t.parent;return console.log(e.join("\n")),a.showSelected(),e.join("\n")},a.traceDisSizeChain=function(t){if(console.log("---------------------traceDisSizeChain-------------------"),t||(t=a.target),!t)return console.log("no targetAvalible"),null;var e;for(a.selectedNodes=[],e=[];t;)e.push(ClassTool.getNodeClassAndName(t)+": x:"+t.x+" y:"+t.y+" w:"+t.width+" h:"+t.height+" scaleX:"+t.scaleX+" scaleY:"+t.scaleY),a.selectedNodes.push(t),t=t.parent;return console.log(e.join("\n")),a.showSelected(),e.join("\n")},a.showDisBound=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i="#ff0000"),t||(t=a.target),!t)return console.log("no targetAvalible"),null;var n;e&&a.clearDebugLayer(),!(n=t._getBoundPointsM(!0))||n.length<1||(n=GrahamScan.pListToPointList(n,!0),WalkTools.walkArr(n,t.localToGlobal,t),n=GrahamScan.pointListToPlist(n),a._disBoundRec=Rectangle._getWrapRec(n,a._disBoundRec),a.debugLayer.graphics.drawRect(a._disBoundRec.x,a._disBoundRec.y,a._disBoundRec.width,a._disBoundRec.height,null,i),DebugInfoLayer.I.setTop())},a.showDisBoundToSprite=function(t,e,i,n){var s;void 0===i&&(i="#ff0000"),void 0===n&&(n=1),!(s=t._getBoundPointsM(!0))||s.length<1||(s=GrahamScan.pListToPointList(s,!0),WalkTools.walkArr(s,t.localToGlobal,t),s=GrahamScan.pointListToPlist(s),a._disBoundRec=Rectangle._getWrapRec(s,a._disBoundRec),e.graphics.drawRect(a._disBoundRec.x,a._disBoundRec.y,a._disBoundRec.width,a._disBoundRec.height,null,i,n))},a.getNodeInfo=function(){return a.counter.reset(),WalkTools.walkTarget(Laya.stage,a.addNodeInfo),console.log("node info:"),a.counter.traceSelf(),a.counter.data},a.findByClass=function(t){return a._classList=[],a._tFindClass=t,WalkTools.walkTarget(Laya.stage,a.addClassNode),a.selectedNodes=a._classList,a.showSelected(),a._classList},a.addClassNode=function(t){t.constructor.name==a._tFindClass&&a._classList.push(t)},a.traceCMD=function(t){if(t||(t=a.target),!t)return console.log("no targetAvalible"),null;var e;for(console.log("self CMDs:"),console.log(t.graphics.cmds),e=RenderSprite.renders[t._renderType],console.log("renderSprite:",e),a._rSpList.length=0;e&&0<e._sign;)a._rSpList.push(a.cmdToTypeO[e._sign]),e=e._next;return console.log("fun:",a._rSpList.join(",")),a.counter.reset(),a.addCMDs(t.graphics.cmds),a.counter.traceSelf(),a.counter.data},a.addCMDs=function(t){WalkTools.walkArr(t,a.addCMD)},a.addCMD=function(t){a.counter.add(t.callee)},a.traceCMDR=function(t){return t||(t=a.target),t?(a.counter.reset(),WalkTools.walkTarget(t,a.getCMdCount),console.log("cmds include children"),a.counter.traceSelf(),a.counter.data):(console.log("no targetAvalible"),0)},a.getCMdCount=function(t){return t&&t instanceof laya.display.Sprite&&t.graphics.cmds?(a.addCMDs(t.graphics.cmds),t.graphics.cmds.length):0},a.addNodeInfo=function(t){var e;e=t.constructor.name,a.counter.add(e)},a.find=function(t,e){var i;return void 0===e&&(e=!0),i=a.findTarget(Laya.stage,t),(a.selectedNodes=i)&&(a.target=a.selectedNodes[0]),e&&a.showSelected(),i},a.findByName=function(t){return a.nameFilter.name=t,a.find(a.nameFilter)},a.findNameStartWith=function(t){return a.nameFilter.name=a.getStartWithFun(t),a.find(a.nameFilter)},a.findNameHas=function(t,e){return void 0===e&&(e=!0),a.nameFilter.name=a.getHasFun(t),a.find(a.nameFilter,e)},a.getStartWithFun=function(e){return function(t){return!!t&&0==t.indexOf(e)}},a.getHasFun=function(e){return function(t){return!!t&&0<=t.indexOf(e)}},a.findTarget=function(t,e){var i=[];a.isFit(t,e)&&i.push(t);var n,s,o=0;for(n=t.numChildren,o=0;o<n;o++)(s=t.getChildAt(o))instanceof laya.display.Sprite&&(i=i.concat(a.findTarget(s,e)));return i},a.findClassHas=function(t,e){var i=[];0<=ClassTool.getClassName(t).indexOf(e)&&i.push(t);var n,s,o=0;for(n=t.numChildren,o=0;o<n;o++)(s=t.getChildAt(o))instanceof laya.display.Sprite&&(i=i.concat(a.findClassHas(s,e)));return i},a.isFit=function(t,e){if(!t)return!1;if(!e)return!0;if("function"==typeof e)return e(t);var i;for(i in e)if("function"==typeof e[i]){if(!e[i](t[i]))return!1}else if(t[i]!=e[i])return!1;return!0},a.log=function(t){var e,i=arguments;e=DTrace.getArgArr(i),null!=a._logFun&&a._logFun(e.join(" "))},a.enableCacheAnalyse=!1,a.enableNodeCreateAnalyse=!0,a._traceFun=null,a.debugLayer=null,a._target=null,a.selectedNodes=[],a.autoShowSelected=!0,a._showBound=!0,a._disBoundRec=null,a.autoTraceEnable=!1,a.autoTraceBounds=!1,a.autoTraceSize=!1,a.autoTraceTree=!0,a.autoTraceCMD=!0,a.autoTraceCMDR=!1,a.autoTraceSpriteInfo=!0,a._classList=null,a._tFindClass=null,a._rSpList=[],a._logFun=null,__static(a,["text",function(){return this.text=new Stat},"cmdToTypeO",function(){return this.cmdToTypeO={}},"counter",function(){return this.counter=new CountTool},"nameFilter",function(){return this.nameFilter={name:"name"}}]),a}(),DivScripts=function(){function e(){}return __class(e,"laya.debug.divui.DivScripts"),e.init=function(){var t;t=Base64Tool.decodeToByte(e.data).readUTFBytes(),Laya._runScript(t)},e.data="ZnVuY3Rpb24gZGh0bWx4RXZlbnQoZSx0LGkpe2UuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIodCxpLCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KCJvbiIrdCxpKX1mdW5jdGlvbiBkaHRtbFhUcmVlT2JqZWN0KGUsdCxpLG4pe2lmKGRodG1seEV2ZW50LmluaXRUb3VjaCYmZGh0bWx4RXZlbnQuaW5pdFRvdWNoKCksX2lzSUUpdHJ5e2RvY3VtZW50LmV4ZWNDb21tYW5kKCJCYWNrZ3JvdW5kSW1hZ2VDYWNoZSIsITEsITApfWNhdGNoKG8pe30ib2JqZWN0IiE9dHlwZW9mIGU/dGhpcy5wYXJlbnRPYmplY3Q9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk6dGhpcy5wYXJlbnRPYmplY3Q9ZSx0aGlzLnBhcmVudE9iamVjdC5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIix0aGlzLl9pdGltX2RnPSEwLHRoaXMuZGxtdHI9IiwiLHRoaXMuZHJvcExvd2VyPSExLHRoaXMuZW5hYmxlSUVJbWFnZUZpeCghMCksdGhpcy54bWxzdGF0ZT0wLHRoaXMubXl0eXBlPSJ0cmVlIix0aGlzLnNtY2hlY2s9ITAsdGhpcy53aWR0aD10LHRoaXMuaGVpZ2h0PWksdGhpcy5yb290SWQ9bix0aGlzLmNoaWxkQ2FsYz1udWxsLHRoaXMuZGVmX2ltZ194PSIxOHB4Iix0aGlzLmRlZl9pbWdfeT0iMThweCIsdGhpcy5kZWZfbGluZV9pbWdfeD0iMThweCIsdGhpcy5kZWZfbGluZV9pbWdfeT0iMjRweCIsdGhpcy5fZHJhZ2dlZD1uZXcgQXJyYXksdGhpcy5fc2VsZWN0ZWQ9bmV3IEFycmF5LHRoaXMuc3R5bGVfcG9pbnRlcj0icG9pbnRlciIsdGhpcy5fYWltZ3M9ITAsdGhpcy5odG1sY0E9IiBbIix0aGlzLmh0bWxjQj0iXSIsdGhpcy5sV2luPXdpbmRvdyx0aGlzLmNNZW51PTAsdGhpcy5tbGl0ZW1zPTAsdGhpcy5pY29uVVJMPSIiLHRoaXMuZGFkbW9kZT0wLHRoaXMuc2xvd1BhcnNlPSExLHRoaXMuYXV0b1Njcm9sbD0hMCx0aGlzLmhmTW9kZT0wLHRoaXMubm9kZUN1dD1uZXcgQXJyYXksdGhpcy5YTUxzb3VyY2U9MCx0aGlzLlhNTGxvYWRpbmdXYXJuaW5nPTAsdGhpcy5faWRwdWxsPXt9LHRoaXMuX3B1bGxTaXplPTAsdGhpcy50cmVlTGluZXNPbj0hMCx0aGlzLnRzY2hlY2s9ITEsdGhpcy50aW1nZW49ITAsdGhpcy5kcGNweT0hMSx0aGlzLl9sZF9pZD1udWxsLHRoaXMuX2R5bkRlbGV0ZUJyYW5jaGVzPXt9LHRoaXMuX29pZV9vblhMRT1bXSx0aGlzLmltUGF0aD13aW5kb3cuZGh4X2dsb2JhbEltZ1BhdGh8fCIiLHRoaXMuY2hlY2tBcnJheT1uZXcgQXJyYXkoImljb25VbmNoZWNrQWxsLmdpZiIsImljb25DaGVja0FsbC5naWYiLCJpY29uQ2hlY2tHcmF5LmdpZiIsImljb25VbmNoZWNrRGlzLmdpZiIsImljb25DaGVja0Rpcy5naWYiLCJpY29uQ2hlY2tEaXMuZ2lmIiksdGhpcy5yYWRpb0FycmF5PW5ldyBBcnJheSgicmFkaW9fb2ZmLmdpZiIsInJhZGlvX29uLmdpZiIsInJhZGlvX29uLmdpZiIsInJhZGlvX29mZi5naWYiLCJyYWRpb19vbi5naWYiLCJyYWRpb19vbi5naWYiKSx0aGlzLmxpbmVBcnJheT1uZXcgQXJyYXkoImxpbmUyLmdpZiIsImxpbmUzLmdpZiIsImxpbmU0LmdpZiIsYmxhbmtfYmFzZTY0LGJsYW5rX2Jhc2U2NCwibGluZTEuZ2lmIiksdGhpcy5taW51c0FycmF5PW5ldyBBcnJheSgibWludXMyLmdpZiIsIm1pbnVzMy5naWYiLCJtaW51czQuZ2lmIiwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoRWdBWUFKRUNBTEd2clo2ZG5mVDA5QUFBQUNINUJBRUFBQUlBTEFBQUFBQVNBQmdBQUFJY2xJK3B5KzBQbzV5MFdoc0NEV0IzbUdYZnd3SG1oYWJxeXJaVEFRQTciLCJtaW51czUuZ2lmIiksdGhpcy5wbHVzQXJyYXk9bmV3IEFycmF5KCJwbHVzMi5naWYiLCJwbHVzMy5naWYiLCJwbHVzNC5naWYiLCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhFZ0FZQUpFQ0FLR2duN0d2cmZUMDlBQUFBQ0g1QkFFQUFBSUFMQUFBQUFBU0FCZ0FBQUljbEkrcHkrMFBvNXkwVW5CRHlIc0NMUUZmT0U2ZGhhYnF5clpKQVFBNyIsInBsdXM1LmdpZiIpLHRoaXMuaW1hZ2VBcnJheT1uZXcgQXJyYXkoImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEVnQVNBS0VDQUplWGw3R3ZyZi8vLy8vLy95SDVCQUVLQUFJQUxBQUFBQUFTQUJJQUFBSXpsSStwQXUyOURBaTAxamlUWFJuTm0zVEhCNDVCYUoyZXVsQm94TENTL0s2d09OODBYcHQ2citCOUhrU2FJSVdFS1EwRkFEcz0iLCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhFZ0FTQUtFQ0FKZVhsN0d2cmYvLy8vLy8veUg1QkFFS0FBSUFMQUFBQUFBU0FCSUFBQUl6bEkrcHl3Y1BtM21oV2drQ3NqQk92VmtpbUVsRzlabENCbFhkKzJYampMS2c1R3FvZVpYcXZzT1FYSy9palVaVEtWVUZBRHM9IiwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoRWdBU0FLRUNBSmVYbDdHdnJmLy8vLy8vL3lINUJBRUtBQUlBTEFBQUFBQVNBQklBQUFJd2xJK3B5d2NQbTNtaFdna0NzakJPdlZraW1FbEc5WmxDdVlJWTZUWXMrNmJtSERPNGlnZmREM0dOaGhlVjBWUUFBRHM9IiksdGhpcy5jdXRJbWc9bmV3IEFycmF5KDAsMCwwKSx0aGlzLmN1dEltYWdlPSJidXRfY3V0LmdpZiIsZGh4NC5fZXZlbnRhYmxlKHRoaXMpLHRoaXMuaHRtbE5vZGU9bmV3IGRodG1sWFRyZWVJdGVtT2JqZWN0KHRoaXMucm9vdElkLCIiLDAsdGhpcyksdGhpcy5odG1sTm9kZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy5odG1sTm9kZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jbGFzc05hbWU9ImhpZGRlblJvdyIsdGhpcy5hbGxUcmVlPXRoaXMuX2NyZWF0ZVNlbGYoKSx0aGlzLmFsbFRyZWUuYXBwZW5kQ2hpbGQodGhpcy5odG1sTm9kZS5odG1sTm9kZSksZGh0bWx4LiRjdXN0b21TY3JvbGwmJmRodG1seC5DdXN0b21TY3JvbGwuZW5hYmxlKHRoaXMpLF9pc0ZGJiYodGhpcy5hbGxUcmVlLmNoaWxkTm9kZXNbMF0ud2lkdGg9IjEwMCUiLHRoaXMuYWxsVHJlZS5jaGlsZE5vZGVzWzBdLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iKTt2YXIgcj10aGlzO2lmKHRoaXMuYWxsVHJlZS5vbnNlbGVjdHN0YXJ0PW5ldyBGdW5jdGlvbigicmV0dXJuIGZhbHNlOyIpLF9pc01hY09TJiYodGhpcy5hbGxUcmVlLm9uY29udGV4dG1lbnU9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuX2RvQ29udENsaWNrKGV8fHdpbmRvdy5ldmVudCwhMCl9KSx0aGlzLmFsbFRyZWUub25tb3VzZWRvd249ZnVuY3Rpb24oZSl7cmV0dXJuIHIuX2RvQ29udENsaWNrKGV8fHdpbmRvdy5ldmVudCl9LHRoaXMuWE1MTG9hZGVyPXRoaXMuX3BhcnNlWE1MVHJlZSxfaXNJRSYmdGhpcy5wcmV2ZW50SUVDYXNoaW5nKCEwKSx0aGlzLnNlbGVjdGlvbkJhcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJESVYiKSx0aGlzLnNlbGVjdGlvbkJhci5jbGFzc05hbWU9InNlbGVjdGlvbkJhciIsdGhpcy5zZWxlY3Rpb25CYXIuaW5uZXJIVE1MPSImbmJzcDsiLHRoaXMuc2VsZWN0aW9uQmFyLnN0eWxlLmRpc3BsYXk9Im5vbmUiLHRoaXMuYWxsVHJlZS5hcHBlbmRDaGlsZCh0aGlzLnNlbGVjdGlvbkJhciksd2luZG93LmFkZEV2ZW50TGlzdGVuZXImJndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7dHJ5e3IuZGVzdHJ1Y3RvcigpfWNhdGNoKGUpe319LCExKSx3aW5kb3cuYXR0YWNoRXZlbnQmJndpbmRvdy5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7dHJ5e3IuZGVzdHJ1Y3RvcigpfWNhdGNoKGUpe319KSx0aGlzLnNldEltYWdlc1BhdGg9dGhpcy5zZXRJbWFnZVBhdGgsdGhpcy5zZXRJY29uc1BhdGg9dGhpcy5zZXRJY29uUGF0aCx0aGlzLnNldFNraW4oIm1hdGVyaWFsIiksZGh0bWx4LmltYWdlX3BhdGgpe3ZhciBsPWRodG1seC5pbWFnZV9wYXRoLHM9dGhpcy5wYXJlbnRPYmplY3QuY2xhc3NOYW1lLm1hdGNoKC9kaHh0cmVlX2RoeF8oW2Etel9dKikvaSk7bnVsbCE9cyYmbnVsbCE9c1sxXSYmKGwrPSJkaHh0cmVlXyIrc1sxXSsiLyIpLHRoaXMuc2V0SW1hZ2VQYXRoKGwpfXJldHVybiB0aGlzfWZ1bmN0aW9uIGNPYmplY3QoKXtyZXR1cm4gdGhpc31mdW5jdGlvbiBkaHRtbFhUcmVlSXRlbU9iamVjdChlLHQsaSxuLG8scil7cmV0dXJuIHRoaXMuaHRtbE5vZGU9IiIsdGhpcy5hY29sb3I9IiIsdGhpcy5zY29sb3I9IiIsdGhpcy50cj0wLHRoaXMuY2hpbGRzQ291bnQ9MCx0aGlzLnRlbXBET01NPTAsdGhpcy50ZW1wRE9NVT0wLHRoaXMuZHJhZ1NwYW49MCx0aGlzLmRyYWdNb3ZlPTAsdGhpcy5zcGFuPTAsdGhpcy5jbG9zZWJsZT0xLHRoaXMuY2hpbGROb2Rlcz1uZXcgQXJyYXksdGhpcy51c2VyRGF0YT1uZXcgY09iamVjdCx0aGlzLmNoZWNrc3RhdGU9MCx0aGlzLnRyZWVOb2Q9bix0aGlzLmxhYmVsPXQsdGhpcy5wYXJlbnRPYmplY3Q9aSx0aGlzLmFjdGlvbkhhbmRsZXI9byx0aGlzLmltYWdlcz1uZXcgQXJyYXkobi5pbWFnZUFycmF5WzBdLG4uaW1hZ2VBcnJheVsxXSxuLmltYWdlQXJyYXlbMl0pLHRoaXMuaWQ9bi5fZ2xvYmFsSWRTdG9yYWdlQWRkKGUsdGhpcyksdGhpcy50cmVlTm9kLmNoZWNrQm94T2ZmP3RoaXMuaHRtbE5vZGU9dGhpcy50cmVlTm9kLl9jcmVhdGVJdGVtKDEsdGhpcyxyKTp0aGlzLmh0bWxOb2RlPXRoaXMudHJlZU5vZC5fY3JlYXRlSXRlbSgwLHRoaXMsciksdGhpcy5odG1sTm9kZS5vYmpCZWxvbmc9dGhpcyx0aGlzfWZ1bmN0aW9uIGpzb25Qb2ludGVyKGUsdCl7dGhpcy5kPWUsdGhpcy5kcD10fWZ1bmN0aW9uIGRoeF9pbml0X3RyZWVzKCl7Zm9yKHZhciBlPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKSx0PTA7dDxlLmxlbmd0aDt0KyspImRodG1seFRyZWUiPT1lW3RdLmNsYXNzTmFtZSYmZGh0bWxYVHJlZUZyb21IVE1MKGVbdF0pfXZhciBibGFua19iYXNlNjQ9ImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEVnQVNBSUFBQVAvLy8vLy8veUg1QkFVVUFBRUFMQUFBQUFBU0FCSUFBQUlQakkrcHkrMFBvNXkwMm91ejNwd1hBRHM9IjsidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdy5kaHgmJih3aW5kb3cuZGh4PXdpbmRvdy5kaHg0PXt2ZXJzaW9uOiI1LjAiLHNraW46bnVsbCxsYXN0SWQ6MSxuZXdJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhc3RJZCsrfSx6aW06e2RhdGE6e30sc3RlcDo1LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIDEwMH0sbGFzdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZmlyc3QoKTtmb3IodmFyIHQgaW4gdGhpcy5kYXRhKWU9TWF0aC5tYXgoZSx0aGlzLmRhdGFbdF0pO3JldHVybiBlfSxyZXNlcnZlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGFbZV09dGhpcy5sYXN0KCkrdGhpcy5zdGVwLHRoaXMuZGF0YVtlXX0sY2xlYXI6ZnVuY3Rpb24oZSl7bnVsbCE9dGhpcy5kYXRhW2VdJiYodGhpcy5kYXRhW2VdPW51bGwsZGVsZXRlIHRoaXMuZGF0YVtlXSl9fSxzMmI6ZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlJiYoZT1lLnRvTG93ZXJDYXNlKCkpLDE9PWV8fDE9PWV8fCJ0cnVlIj09ZXx8IjEiPT1lfHwieWVzIj09ZXx8InkiPT1lfHwib24iPT1lfSxzMmo6ZnVuY3Rpb24ocyl7dmFyIG9iaj1udWxsO2RoeDQudGVtcD1udWxsO3RyeXtldmFsKCJkaHg0LnRlbXA9IitzKX1jYXRjaChlKXtkaHg0LnRlbXA9bnVsbH1yZXR1cm4gb2JqPWRoeDQudGVtcCxkaHg0LnRlbXA9bnVsbCxvYmp9LGFic0xlZnQ6ZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlJiYoZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKSksdGhpcy5nZXRPZmZzZXQoZSkubGVmdH0sYWJzVG9wOmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmKGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSkpLHRoaXMuZ2V0T2Zmc2V0KGUpLnRvcH0sX2FPZnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsaT0wO2U7KXQrPXBhcnNlSW50KGUub2Zmc2V0VG9wKSxpKz1wYXJzZUludChlLm9mZnNldExlZnQpLGU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJue3RvcDp0LGxlZnQ6aX19LF9hT2ZzUmVjdDpmdW5jdGlvbihlKXt2YXIgdD1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9ZG9jdW1lbnQuYm9keSxuPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxvPXdpbmRvdy5wYWdlWU9mZnNldHx8bi5zY3JvbGxUb3B8fGkuc2Nyb2xsVG9wLHI9d2luZG93LnBhZ2VYT2Zmc2V0fHxuLnNjcm9sbExlZnR8fGkuc2Nyb2xsTGVmdCxsPW4uY2xpZW50VG9wfHxpLmNsaWVudFRvcHx8MCxzPW4uY2xpZW50TGVmdHx8aS5jbGllbnRMZWZ0fHwwLGE9dC50b3Arby1sLGQ9dC5sZWZ0K3ItcztyZXR1cm57dG9wOk1hdGgucm91bmQoYSksbGVmdDpNYXRoLnJvdW5kKGQpfX0sZ2V0T2Zmc2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdD90aGlzLl9hT2ZzUmVjdChlKTp0aGlzLl9hT2ZzKGUpfSxfaXNPYmo6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJiJvYmplY3QiPT10eXBlb2YgZSYmInVuZGVmaW5lZCI9PXR5cGVvZiBlLmxlbmd0aH0sX2NvcHlPYmo6ZnVuY3Rpb24oZSl7aWYodGhpcy5faXNPYmooZSkpe3ZhciB0PXt9O2Zvcih2YXIgaSBpbiBlKSJvYmplY3QiPT10eXBlb2YgZVtpXSYmbnVsbCE9ZVtpXT90W2ldPXRoaXMuX2NvcHlPYmooZVtpXSk6dFtpXT1lW2ldfWVsc2UgZm9yKHZhciB0PVtdLGk9MDtpPGUubGVuZ3RoO2krKykib2JqZWN0Ij09dHlwZW9mIGVbaV0mJm51bGwhPWVbaV0/dFtpXT10aGlzLl9jb3B5T2JqKGVbaV0pOnRbaV09ZVtpXTtyZXR1cm4gdH19LHdpbmRvdy5kaHg0LmlzSUU9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIik+PTB8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiVHJpZGVudCIpPj0wLHdpbmRvdy5kaHg0LmlzSUU2PW51bGw9PXdpbmRvdy5YTUxIdHRwUmVxdWVzdCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIik+PTAsd2luZG93LmRoeDQuaXNJRTc9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDcuMCIpPj0wJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlRyaWRlbnQiKTwwLHdpbmRvdy5kaHg0LmlzSUU4PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSA4LjAiKT49MCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJUcmlkZW50Iik+PTAsd2luZG93LmRoeDQuaXNJRTk9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDkuMCIpPj0wJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlRyaWRlbnQiKT49MCx3aW5kb3cuZGh4NC5pc0lFMTA9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDEwLjAiKT49MCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJUcmlkZW50Iik+PTAmJjEhPXdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQsd2luZG93LmRoeDQuaXNJRTExPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiVHJpZGVudCIpPj0wJiYxPT13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkLHdpbmRvdy5kaHg0LmlzRWRnZT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkVkZ2UiKT49MCx3aW5kb3cuZGh4NC5pc09wZXJhPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiT3BlcmEiKT49MCx3aW5kb3cuZGh4NC5pc0Nocm9tZT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkNocm9tZSIpPj0wJiYhd2luZG93LmRoeDQuaXNFZGdlLHdpbmRvdy5kaHg0LmlzS0hUTUw9KG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+PTB8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiS29ucXVlcm9yIik+PTApJiYhd2luZG93LmRoeDQuaXNFZGdlLHdpbmRvdy5kaHg0LmlzRkY9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94Iik+PTAsd2luZG93LmRoeDQuaXNJUGFkPW5hdmlnYXRvci51c2VyQWdlbnQuc2VhcmNoKC9pUGFkL2dpKT49MCx3aW5kb3cuZGh4NC5kbmQ9e2V2czp7fSxwX2VuOih3aW5kb3cuZGh4NC5pc0lFfHx3aW5kb3cuZGh4NC5pc0VkZ2UpJiYod2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZHx8d2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSxfbVRvdWNoOmZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuZGh4NC5pc0lFMTAmJmUucG9pbnRlclR5cGU9PWUuTVNQT0lOVEVSX1RZUEVfTU9VU0V8fHdpbmRvdy5kaHg0LmlzSUUxMSYmIm1vdXNlIj09ZS5wb2ludGVyVHlwZXx8d2luZG93LmRoeDQuaXNFZGdlJiYibW91c2UiPT1lLnBvaW50ZXJUeXBlfSxfdG91Y2hPbjpmdW5jdGlvbihlKXtudWxsPT1lJiYoZT1kb2N1bWVudC5ib2R5KSxlLnN0eWxlLnRvdWNoQWN0aW9uPWUuc3R5bGUubXNUb3VjaEFjdGlvbj0iIixlPW51bGx9LF90b3VjaE9mZjpmdW5jdGlvbihlKXtudWxsPT1lJiYoZT1kb2N1bWVudC5ib2R5KSxlLnN0eWxlLnRvdWNoQWN0aW9uPWUuc3R5bGUubXNUb3VjaEFjdGlvbj0ibm9uZSIsZT1udWxsfX0sMT09d2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZD93aW5kb3cuZGh4NC5kbmQuZXZzPXtzdGFydDoicG9pbnRlcmRvd24iLG1vdmU6InBvaW50ZXJtb3ZlIixlbmQ6InBvaW50ZXJ1cCJ9OjE9PXdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZD93aW5kb3cuZGh4NC5kbmQuZXZzPXtzdGFydDoiTVNQb2ludGVyRG93biIsbW92ZToiTVNQb2ludGVyTW92ZSIsZW5kOiJNU1BvaW50ZXJVcCJ9OiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXImJih3aW5kb3cuZGh4NC5kbmQuZXZzPXtzdGFydDoidG91Y2hzdGFydCIsbW92ZToidG91Y2htb3ZlIixlbmQ6InRvdWNoZW5kIn0pKSwidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdy5kaHg0Ll9ldmVudGFibGUmJih3aW5kb3cuZGh4NC5fZXZlbnRhYmxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuImNsZWFyIj09dD8oZS5kZXRhY2hBbGxFdmVudHMoKSxlLmRoeGV2cz1udWxsLGUuYXR0YWNoRXZlbnQ9bnVsbCxlLmRldGFjaEV2ZW50PW51bGwsZS5jaGVja0V2ZW50PW51bGwsZS5jYWxsRXZlbnQ9bnVsbCxlLmRldGFjaEFsbEV2ZW50cz1udWxsLHZvaWQoZT1udWxsKSk6KGUuZGh4ZXZzPXtkYXRhOnt9fSxlLmF0dGFjaEV2ZW50PWZ1bmN0aW9uKGUsdCl7ZT1TdHJpbmcoZSkudG9Mb3dlckNhc2UoKSx0aGlzLmRoeGV2cy5kYXRhW2VdfHwodGhpcy5kaHhldnMuZGF0YVtlXT17fSk7dmFyIGk9d2luZG93LmRoeDQubmV3SWQoKTtyZXR1cm4gdGhpcy5kaHhldnMuZGF0YVtlXVtpXT10LGl9LGUuZGV0YWNoRXZlbnQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIHRoaXMuZGh4ZXZzLmRhdGEpe3ZhciBpPTA7Zm9yKHZhciBuIGluIHRoaXMuZGh4ZXZzLmRhdGFbdF0pbj09ZT8odGhpcy5kaHhldnMuZGF0YVt0XVtuXT1udWxsLGRlbGV0ZSB0aGlzLmRoeGV2cy5kYXRhW3RdW25dKTppKys7MD09aSYmKHRoaXMuZGh4ZXZzLmRhdGFbdF09bnVsbCxkZWxldGUgdGhpcy5kaHhldnMuZGF0YVt0XSl9fSxlLmNoZWNrRXZlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9U3RyaW5nKGUpLnRvTG93ZXJDYXNlKCksbnVsbCE9dGhpcy5kaHhldnMuZGF0YVtlXX0sZS5jYWxsRXZlbnQ9ZnVuY3Rpb24oZSx0KXtpZihlPVN0cmluZyhlKS50b0xvd2VyQ2FzZSgpLG51bGw9PXRoaXMuZGh4ZXZzLmRhdGFbZV0pcmV0dXJuITA7dmFyIGk9ITA7Zm9yKHZhciBuIGluIHRoaXMuZGh4ZXZzLmRhdGFbZV0paT10aGlzLmRoeGV2cy5kYXRhW2VdW25dLmFwcGx5KHRoaXMsdCkmJmk7cmV0dXJuIGl9LGUuZGV0YWNoQWxsRXZlbnRzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHRoaXMuZGh4ZXZzLmRhdGEpe2Zvcih2YXIgdCBpbiB0aGlzLmRoeGV2cy5kYXRhW2VdKXRoaXMuZGh4ZXZzLmRhdGFbZV1bdF09bnVsbCxkZWxldGUgdGhpcy5kaHhldnMuZGF0YVtlXVt0XTt0aGlzLmRoeGV2cy5kYXRhW2VdPW51bGwsZGVsZXRlIHRoaXMuZGh4ZXZzLmRhdGFbZV19fSx2b2lkKGU9bnVsbCkpfSxkaHg0Ll9ldmVudGFibGUoZGh4NCkpLCJ1bmRlZmluZWQiPT10eXBlb2Ygd2luZG93LmRodG1seCYmKHdpbmRvdy5kaHRtbHg9e2V4dGVuZDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaSBpbiB0KWVbaV18fChlW2ldPXRbaV0pO3JldHVybiBlfSxleHRlbmRfYXBpOmZ1bmN0aW9uKGUsdCxpKXt2YXIgbj13aW5kb3dbZV07biYmKHdpbmRvd1tlXT1mdW5jdGlvbihlKXtpZihlJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFlLnRhZ05hbWUpe3ZhciBpPW4uYXBwbHkodGhpcyx0Ll9pbml0P3QuX2luaXQoZSk6YXJndW1lbnRzKTtmb3IodmFyIG8gaW4gZGh0bWx4KXRbb10mJnRoaXNbdFtvXV0oZGh0bWx4W29dKTtmb3IodmFyIG8gaW4gZSl0W29dP3RoaXNbdFtvXV0oZVtvXSk6MD09PW8uaW5kZXhPZigib24iKSYmdGhpcy5hdHRhY2hFdmVudChvLGVbb10pfWVsc2UgdmFyIGk9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHQuX3BhdGNoJiZ0Ll9wYXRjaCh0aGlzKSxpfHx0aGlzfSx3aW5kb3dbZV0ucHJvdG90eXBlPW4ucHJvdG90eXBlLGkmJmRodG1seC5leHRlbmQod2luZG93W2VdLnByb3RvdHlwZSxpKSl9LHVybDpmdW5jdGlvbihlKXtyZXR1cm4tMSE9ZS5pbmRleE9mKCI/Iik/IiYiOiI/In19KSxfaXNGRj0hMSxfaXNJRT0hMSxfaXNPcGVyYT0hMSxfaXNLSFRNTD0hMSxfaXNNYWNPUz0hMSxfaXNDaHJvbWU9ITEsX0ZGcnY9ITEsX0tIVE1McnY9ITEsX09wZXJhUnY9ITEsLTEhPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTWFjaW50b3NoIikmJihfaXNNYWNPUz0hMCksbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImNocm9tZSIpPi0xJiYoX2lzQ2hyb21lPSEwKSwtMSE9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJTYWZhcmkiKXx8LTEhPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiS29ucXVlcm9yIik/KF9LSFRNTHJ2PXBhcnNlRmxvYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5zdWJzdHIobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJTYWZhcmkiKSs3LDUpKSxfS0hUTUxydj41MjU/KF9pc0ZGPSEwLF9GRnJ2PTEuOSk6X2lzS0hUTUw9ITApOi0xIT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk9wZXJhIik/KF9pc09wZXJhPSEwLF9PcGVyYVJ2PXBhcnNlRmxvYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5zdWJzdHIobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJPcGVyYSIpKzYsMykpKTotMSE9bmF2aWdhdG9yLmFwcE5hbWUuaW5kZXhPZigiTWljcm9zb2Z0Iik/KF9pc0lFPSEwLCgtMSE9bmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZigiTVNJRSA4LjAiKXx8LTEhPW5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoIk1TSUUgOS4wIil8fC0xIT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCJNU0lFIDEwLjAiKXx8ZG9jdW1lbnQuZG9jdW1lbnRNb2RlPjcpJiYiQmFja0NvbXBhdCIhPWRvY3VtZW50LmNvbXBhdE1vZGUmJihfaXNJRT04KSk6Ik5ldHNjYXBlIj09bmF2aWdhdG9yLmFwcE5hbWUmJi0xIT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlRyaWRlbnQiKT9faXNJRT04OihfaXNGRj0hMCxfRkZydj1wYXJzZUZsb2F0KG5hdmlnYXRvci51c2VyQWdlbnQuc3BsaXQoInJ2OiIpWzFdKSksInVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3cuZGh0bWx4RXZlbnQsbnVsbD09ZGh0bWx4RXZlbnQudG91Y2hEZWxheSYmKGRodG1seEV2ZW50LnRvdWNoRGVsYXk9MmUzKSwidW5kZWZpbmVkIj09dHlwZW9mIGRodG1seEV2ZW50LmluaXRUb3VjaCYmKGRodG1seEV2ZW50LmluaXRUb3VjaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtpZihpKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO2UuaW5pdEV2ZW50KCJkYmxjbGljayIsITAsITApLGkuZGlzcGF0Y2hFdmVudChlKSx0PWk9bnVsbH19dmFyIHQsaSxuLG87ZGh0bWx4RXZlbnQoZG9jdW1lbnQuYm9keSwidG91Y2hzdGFydCIsZnVuY3Rpb24ocil7aT1yLnRvdWNoZXNbMF0udGFyZ2V0LG49ci50b3VjaGVzWzBdLmNsaWVudFgsbz1yLnRvdWNoZXNbMF0uY2xpZW50WSx0PXdpbmRvdy5zZXRUaW1lb3V0KGUsZGh0bWx4RXZlbnQudG91Y2hEZWxheSl9KSxkaHRtbHhFdmVudChkb2N1bWVudC5ib2R5LCJ0b3VjaG1vdmUiLGZ1bmN0aW9uKGUpe3QmJihNYXRoLmFicyhlLnRvdWNoZXNbMF0uY2xpZW50WC1uKT41MHx8TWF0aC5hYnMoZS50b3VjaGVzWzBdLmNsaWVudFktbyk+NTApJiYod2luZG93LmNsZWFyVGltZW91dCh0KSx0PWk9ITEpfSksZGh0bWx4RXZlbnQoZG9jdW1lbnQuYm9keSwidG91Y2hlbmQiLGZ1bmN0aW9uKGUpe3QmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHQpLHQ9aT0hMSl9KSxkaHRtbHhFdmVudC5pbml0VG91Y2g9ZnVuY3Rpb24oKXt9fSksZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2RvQ29udENsaWNrPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJjIhPWUuYnV0dG9uKXJldHVybiB0aGlzLl9hY01lbnUmJih0aGlzLl9hY01lbnUuaGlkZUNvbnRleHRNZW51P3RoaXMuX2FjTWVudS5oaWRlQ29udGV4dE1lbnUoKTp0aGlzLmNNZW51Ll9jb250ZXh0RW5kKCkpLCEwO2Zvcih2YXIgaT1faXNJRT9lLnNyY0VsZW1lbnQ6ZS50YXJnZXQ7aSYmIkJPRFkiIT1pLnRhZ05hbWUmJiFpLnBhcmVudE9iamVjdDspaT1pLnBhcmVudE5vZGU7aWYoIWl8fCFpLnBhcmVudE9iamVjdClyZXR1cm4hMDt2YXIgbj1pLnBhcmVudE9iamVjdDtpZih0aGlzLmNhbGxFdmVudCgib25SaWdodENsaWNrIixbbi5pZCxlXSl8fCgoZS5zcmNFbGVtZW50fHxlLnRhcmdldCkub25jb250ZXh0bWVudT1mdW5jdGlvbihlKXtyZXR1cm4oZXx8ZXZlbnQpLmNhbmNlbEJ1YmJsZT0hMCwhMX0pLHRoaXMuX2FjTWVudT1uLmNNZW51fHx0aGlzLmNNZW51LHRoaXMuX2FjTWVudSl7aWYoIXRoaXMuY2FsbEV2ZW50KCJvbkJlZm9yZUNvbnRleHRNZW51Iixbbi5pZF0pKXJldHVybiEwO2lmKF9pc01hY09TfHwoKGUuc3JjRWxlbWVudHx8ZS50YXJnZXQpLm9uY29udGV4dG1lbnU9ZnVuY3Rpb24oZSl7cmV0dXJuKGV8fGV2ZW50KS5jYW5jZWxCdWJibGU9ITAsITF9KSx0aGlzLl9hY01lbnUuc2hvd0NvbnRleHRNZW51KXt2YXIgbz13aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHI9d2luZG93LmRvY3VtZW50LmJvZHksbD1uZXcgQXJyYXkoby5zY3JvbGxMZWZ0fHxyLnNjcm9sbExlZnQsby5zY3JvbGxUb3B8fHIuc2Nyb2xsVG9wKTtpZihfaXNJRSl2YXIgcz1lLmNsaWVudFgrbFswXSxhPWUuY2xpZW50WStsWzFdO2Vsc2UgdmFyIHM9ZS5wYWdlWCxhPWUucGFnZVk7dGhpcy5fYWNNZW51LnNob3dDb250ZXh0TWVudShzLTEsYS0xKSx0aGlzLmNvbnRleHRJRD1uLmlkLGUuY2FuY2VsQnViYmxlPSEwLHRoaXMuX2FjTWVudS5fc2tpcF9oaWRlPSEwfWVsc2UgaS5jb250ZXh0TWVudUlkPW4uaWQsaS5jb250ZXh0TWVudT10aGlzLl9hY01lbnUsaS5hPXRoaXMuX2FjTWVudS5fY29udGV4dFN0YXJ0LGkuYShpLGUpLGkuYT1udWxsO3JldHVybiExfXJldHVybiEwfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5lbmFibGVJRUltYWdlRml4PWZ1bmN0aW9uKGUpe2U/KHRoaXMuX2dldEltZz1mdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIkRJViIpO3JldHVybiBlLmlubmVySFRNTD0iJm5ic3A7IixlLmNsYXNzTmFtZT0iZGh4X2JnX2ltZ19maXgiLGV9LHRoaXMuX3NldFNyYz1mdW5jdGlvbihlLHQpe2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlPSJ1cmwoIit0KyIpIn0sdGhpcy5fZ2V0U3JjPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3R5bGUuYmFja2dyb3VuZEltYWdlO3JldHVybiB0LnN1YnN0cig0LHQubGVuZ3RoLTUpLnJlcGxhY2UoLyheIil8KCIkKS9nLCIiKX0pOih0aGlzLl9nZXRJbWc9ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZT09dGhpcy5yb290SWQ/ImRpdiI6ImltZyIpfSx0aGlzLl9zZXRTcmM9ZnVuY3Rpb24oZSx0KXtlLnNyYz10fSx0aGlzLl9nZXRTcmM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3JjfSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmRlc3RydWN0b3I9ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5faWRwdWxsKXt2YXIgdD10aGlzLl9pZHB1bGxbZV07dCYmKHQucGFyZW50T2JqZWN0PW51bGwsdC50cmVlTm9kPW51bGwsdC5jaGlsZE5vZGVzPW51bGwsdC5zcGFuPW51bGwsdC50ci5ub2RlbT1udWxsLHQudHI9bnVsbCx0Lmh0bWxOb2RlLm9iakJlbG9uZz1udWxsLHQuaHRtbE5vZGU9bnVsbCx0aGlzLl9pZHB1bGxbZV09bnVsbCl9dGhpcy5wYXJlbnRPYmplY3QuaW5uZXJIVE1MPSIiLHRoaXMuYWxsVHJlZS5vbnNlbGVjdHN0YXJ0PW51bGwsdGhpcy5hbGxUcmVlLm9uY29udGV4dG1lbnU9bnVsbCx0aGlzLmFsbFRyZWUub25tb3VzZWRvd249bnVsbDtmb3IodmFyIGUgaW4gdGhpcyl0aGlzW2VdPW51bGx9LGNPYmplY3QucHJvdG90eXBlPW5ldyBPYmplY3QsY09iamVjdC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZT10aGlzLG5ldyBlfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fZ2xvYmFsSWRTdG9yYWdlQWRkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSwxLDEpPyhlPWUrIl8iKyhuZXcgRGF0ZSkudmFsdWVPZigpLHRoaXMuX2dsb2JhbElkU3RvcmFnZUFkZChlLHQpKToodGhpcy5faWRwdWxsW2VdPXQsdGhpcy5fcHVsbFNpemUrKyxlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2dsb2JhbElkU3RvcmFnZVN1Yj1mdW5jdGlvbihlKXt0aGlzLl9pZHB1bGxbZV0mJih0aGlzLl91bnNlbGVjdEl0ZW0odGhpcy5faWRwdWxsW2VdKSx0aGlzLl9pZHB1bGxbZV09bnVsbCx0aGlzLl9wdWxsU2l6ZS0tKSx0aGlzLl9sb2NrZXImJnRoaXMuX2xvY2tlcltlXSYmKHRoaXMuX2xvY2tlcltlXT0hMSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9nbG9iYWxJZFN0b3JhZ2VGaW5kPWZ1bmN0aW9uKGUsdCxpLG4pe3ZhciBvPXRoaXMuX2lkcHVsbFtlXTtpZihvKXtpZihvLnVuUGFyc2VkJiYhaSYmdGhpcy5yZVBhcnNlKG8sMCksdGhpcy5fc3JuZCYmIW8uaHRtbE5vZGUmJnRoaXMuX2J1aWxkU1JORChvLGkpLG4mJnRoaXMuX2Vkc2Jwc0EpZm9yKHZhciByPTA7cjx0aGlzLl9lZHNicHNBLmxlbmd0aDtyKyspaWYodGhpcy5fZWRzYnBzQVtyXVsyXT09ZSlyZXR1cm4gZGh4NC5jYWxsRXZlbnQoIm9uZ2V0SXRlbUVycm9yIixbIlJlcXVlc3RlZCBpdGVtIHN0aWxsIGluIHBhcnNpbmcgcHJvY2Vzcy4iLGVdKSxudWxsO3JldHVybiBvfXJldHVybiB0aGlzLnNsb3dQYXJzZSYmMCE9ZSYmIXQ/dGhpcy5wcmVQYXJzZShlKTpudWxsfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fZHJhd05ld1RyPWZ1bmN0aW9uKGUsdCl7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIiksbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpO3JldHVybiBuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIgIikpLG8uY29sU3Bhbj0zLG8uYXBwZW5kQ2hpbGQoZSksaS5hcHBlbmRDaGlsZChuKSxpLmFwcGVuZENoaWxkKG8pLGl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGUsdCxpKXtpZigic3RyaW5nIj09dHlwZW9mIHQmJihpPXQsdD1udWxsKSwianNvbiI9PT1pKXJldHVybiB0aGlzLl9sb2FkSlNPTk9iamVjdChlLHQpO2lmKCJjc3YiPT09aSlyZXR1cm4gdGhpcy5fbG9hZENTVlN0cmluZyhlLHQpO2lmKCJqc2FycmF5Ij09PWkpcmV0dXJuIHRoaXMuX2xvYWRKU0FycmF5KGUsdCk7dmFyIG49dGhpczt0aGlzLnBhcnNDb3VudHx8dGhpcy5jYWxsRXZlbnQoIm9uWExTIixbbixudWxsXSksdGhpcy54bWxzdGF0ZT0xLHRoaXMuWE1MTG9hZGVyKHtyZXNwb25zZVhNTDpkaHg0LmFqYXgucGFyc2UoZSl9LHQpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fYXR0YWNoQ2hpbGROb2RlPWZ1bmN0aW9uKGUsdCxpLG4sbyxyLGwscyxhLGQsaCl7ZCYmZC5wYXJlbnRPYmplY3QmJihlPWQucGFyZW50T2JqZWN0KSwwPT1lLlhNTGxvYWQmJnRoaXMuWE1Mc291cmNlJiYhdGhpcy5YTUxsb2FkaW5nV2FybmluZyYmKGUuWE1MbG9hZD0xLHRoaXMuX2xvYWREeW5YTUwoZS5pZCkpO3ZhciBjPWUuY2hpbGRzQ291bnQsdT1lLmNoaWxkTm9kZXM7aWYoaCYmaC50ci5wcmV2aW91c1NpYmxpbmcmJihoLnRyLnByZXZpb3VzU2libGluZy5wcmV2aW91c1NpYmxpbmc/ZD1oLnRyLnByZXZpb3VzU2libGluZy5ub2RlbTpzPXMucmVwbGFjZSgiVE9QIiwiIikrIixUT1AiKSxkKXt2YXIgcCxfO2ZvcihwPTA7Yz5wO3ArKylpZih1W3BdPT1kKXtmb3IoXz1jO18hPXA7Xy0tKXVbMStfXT11W19dO2JyZWFrfXArKyxjPXB9aWYocylmb3IodmFyIG09cy5zcGxpdCgiLCIpLGc9MDtnPG0ubGVuZ3RoO2crKylzd2l0Y2gobVtnXSl7Y2FzZSJUT1AiOmZvcihlLmNoaWxkc0NvdW50PjAmJihkPW5ldyBPYmplY3QsZC50cj1lLmNoaWxkTm9kZXNbMF0udHIucHJldmlvdXNTaWJsaW5nKSxlLl9oYXNfdG9wPSEwLHA9YztwPjA7cC0tKXVbcF09dVtwLTFdO2M9MH12YXIgZjsoZj10aGlzLl9pZHB1bGxbdF0pJiYtMT09Zi5zcGFufHwoZj11W2NdPW5ldyBkaHRtbFhUcmVlSXRlbU9iamVjdCh0LGksZSx0aGlzLG4sMSksdD11W2NdLmlkLGUuY2hpbGRzQ291bnQrKyksZi5odG1sTm9kZXx8KGYubGFiZWw9aSxmLmh0bWxOb2RlPXRoaXMuX2NyZWF0ZUl0ZW0odGhpcy5jaGVja0JveE9mZj8xOjAsZiksZi5odG1sTm9kZS5vYmpCZWxvbmc9ZiksbyYmKGYuaW1hZ2VzWzBdPW8pLHImJihmLmltYWdlc1sxXT1yKSxsJiYoZi5pbWFnZXNbMl09bCk7dmFyIGI9dGhpcy5fZHJhd05ld1RyKGYuaHRtbE5vZGUpO2lmKCh0aGlzLlhNTGxvYWRpbmdXYXJuaW5nfHx0aGlzLl9oQWRJKSYmKGYuaHRtbE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXk9Im5vbmUiKSxkJiZkLnRyJiZkLnRyLm5leHRTaWJsaW5nP2UuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5pbnNlcnRCZWZvcmUoYixkLnRyLm5leHRTaWJsaW5nKTp0aGlzLnBhcnNpbmdPbj09ZS5pZD90aGlzLnBhcnNlZEFycmF5W3RoaXMucGFyc2VkQXJyYXkubGVuZ3RoXT1iOmUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5hcHBlbmRDaGlsZChiKSxkJiYhZC5zcGFuJiYoZD1udWxsKSx0aGlzLlhNTHNvdXJjZSYmKGEmJjAhPWE/Zi5YTUxsb2FkPTA6Zi5YTUxsb2FkPTEpLGYudHI9YixiLm5vZGVtPWYsMD09ZS5pdGVtSWQmJihiLmNoaWxkTm9kZXNbMF0uY2xhc3NOYW1lPSJoaWRkZW5Sb3ciKSwoZS5fcl9sb2dpY3x8dGhpcy5fZnJidHIpJiZ0aGlzLl9zZXRTcmMoZi5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLHRoaXMuaW1QYXRoK3RoaXMucmFkaW9BcnJheVswXSkscylmb3IodmFyIG09cy5zcGxpdCgiLCIpLGc9MDtnPG0ubGVuZ3RoO2crKylzd2l0Y2gobVtnXSl7Y2FzZSJTRUxFQ1QiOnRoaXMuc2VsZWN0SXRlbSh0LCExKTticmVhaztjYXNlIkNBTEwiOnRoaXMuc2VsZWN0SXRlbSh0LCEwKTticmVhaztjYXNlIkNISUxEIjpmLlhNTGxvYWQ9MDticmVhaztjYXNlIkNIRUNLRUQiOnRoaXMuWE1MbG9hZGluZ1dhcm5pbmc/dGhpcy5zZXRDaGVja0xpc3QrPXRoaXMuZGxtdHIrdDp0aGlzLnNldENoZWNrKHQsMSk7YnJlYWs7Y2FzZSJIQ0hFQ0tFRCI6dGhpcy5fc2V0Q2hlY2soZiwidW5zdXJlIik7YnJlYWs7Y2FzZSJPUEVOIjpmLm9wZW5NZT0xfWlmKCF0aGlzLlhNTGxvYWRpbmdXYXJuaW5nJiYodGhpcy5fZ2V0T3BlblN0YXRlKGUpPDAmJiF0aGlzLl9oQWRJJiZ0aGlzLm9wZW5JdGVtKGUuaWQpLGQmJih0aGlzLl9jb3JyZWN0UGx1cyhkKSx0aGlzLl9jb3JyZWN0TGluZShkKSksdGhpcy5fY29ycmVjdFBsdXMoZSksdGhpcy5fY29ycmVjdExpbmUoZSksdGhpcy5fY29ycmVjdFBsdXMoZiksZS5jaGlsZHNDb3VudD49MiYmKHRoaXMuX2NvcnJlY3RQbHVzKHVbZS5jaGlsZHNDb3VudC0yXSksdGhpcy5fY29ycmVjdExpbmUodVtlLmNoaWxkc0NvdW50LTJdKSksMiE9ZS5jaGlsZHNDb3VudCYmdGhpcy5fY29ycmVjdFBsdXModVswXSksdGhpcy50c2NoZWNrJiZ0aGlzLl9jb3JyZWN0Q2hlY2tTdGF0ZXMoZSksdGhpcy5fb25yYWRoKSlpZigxPT10aGlzLnhtbHN0YXRlKXt2YXIgdj10aGlzLm9uWExFO3RoaXMub25YTEU9ZnVuY3Rpb24oZSl7dGhpcy5fb25yYWRoKHQpLHYmJnYoZSl9fWVsc2UgdGhpcy5fb25yYWRoKHQpO3JldHVybiBmfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fcGFyc2VJdGVtPWZ1bmN0aW9uKGUsdCxpLG4pe3ZhciBvO2lmKHRoaXMuX3NybmQmJighdGhpcy5faWRwdWxsW289ZS5nZXQoImlkIildfHwhdGhpcy5faWRwdWxsW29dLnNwYW4pKXJldHVybiB2b2lkIHRoaXMuX2FkZEl0ZW1TUk5EKHQuaWQsbyxlKTt2YXIgcj1lLmdldF9hbGwoKTtpZigib2JqZWN0Ij09dHlwZW9mIHRoaXMud2FpdFVwZGF0ZVhNTCYmIXRoaXMud2FpdFVwZGF0ZVhNTFtyLmlkXSlyZXR1cm4gdm9pZCB0aGlzLl9wYXJzZShlLHIuaWQsMSk7bnVsbCE9PXIudGV4dCYmInVuZGVmaW5lZCIhPXR5cGVvZiByLnRleHR8fChyLnRleHQ9ZS5zdWIoIml0ZW10ZXh0Iiksci50ZXh0JiYoci50ZXh0PXIudGV4dC5jb250ZW50KCkpKTt2YXIgbD1bXTtpZihyLnNlbGVjdCYmbC5wdXNoKCJTRUxFQ1QiKSxyLnRvcCYmbC5wdXNoKCJUT1AiKSxyLmNhbGwmJih0aGlzLm5vZGVBc2tpbmdDYWxsPXIuaWQpLC0xPT1yLmNoZWNrZWQ/bC5wdXNoKCJIQ0hFQ0tFRCIpOnIuY2hlY2tlZCYmbC5wdXNoKCJDSEVDS0VEIiksci5vcGVuJiZsLnB1c2goIk9QRU4iKSx0aGlzLndhaXRVcGRhdGVYTUwpaWYodGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChyLmlkKSl2YXIgcz10aGlzLnVwZGF0ZUl0ZW0oci5pZCxyLnRleHQsci5pbTAsci5pbTEsci5pbTIsci5jaGVja2VkLHIuY2hpbGQpO2Vsc2V7MD09dGhpcy5ucGw/bC5wdXNoKCJUT1AiKTppPXQuY2hpbGROb2Rlc1t0aGlzLm5wbF07dmFyIHM9dGhpcy5fYXR0YWNoQ2hpbGROb2RlKHQsci5pZCxyLnRleHQsMCxyLmltMCxyLmltMSxyLmltMixsLmpvaW4oIiwiKSxyLmNoaWxkLDAsaSk7ci5pZD1zLmlkLGk9bnVsbH1lbHNlIHZhciBzPXRoaXMuX2F0dGFjaENoaWxkTm9kZSh0LHIuaWQsci50ZXh0LDAsci5pbTAsci5pbTEsci5pbTIsbC5qb2luKCIsIiksci5jaGlsZCxufHwwLGkpO2lmKHIudG9vbHRpcCYmKHMuc3Bhbi5wYXJlbnROb2RlLnBhcmVudE5vZGUudGl0bGU9ci50b29sdGlwKSxyLnN0eWxlJiYocy5zcGFuLnN0eWxlLmNzc1RleHQ/cy5zcGFuLnN0eWxlLmNzc1RleHQrPSI7IityLnN0eWxlOnMuc3Bhbi5zZXRBdHRyaWJ1dGUoInN0eWxlIixzLnNwYW4uZ2V0QXR0cmlidXRlKCJzdHlsZSIpKyI7ICIrci5zdHlsZSkpLHIucmFkaW8mJihzLl9yX2xvZ2ljPSEwKSxyLm5vY2hlY2tib3gpe3ZhciBhPXMuc3Bhbi5wYXJlbnROb2RlLnByZXZpb3VzU2libGluZy5wcmV2aW91c1NpYmxpbmc7YS5zdHlsZS5kaXNwbGF5PSJub25lIixzLm5vY2hlY2tib3g9ITB9ci5kaXNhYmxlZCYmKG51bGwhPXIuY2hlY2tlZCYmdGhpcy5fc2V0Q2hlY2socyxyLmNoZWNrZWQpLHRoaXMuZGlzYWJsZUNoZWNrYm94KHMsMSkpLHMuX2FjYz1yLmNoaWxkfHwwLHRoaXMucGFyc2VyRXh0ZW5zaW9uJiZ0aGlzLnBhcnNlckV4dGVuc2lvbi5fcGFyc2VFeHRlbnNpb24uY2FsbCh0aGlzLGUscix0P3QuaWQ6MCksdGhpcy5zZXRJdGVtQ29sb3IocyxyLmFDb2wsci5zQ29sKSwiMSI9PXIubG9ja2VkJiZ0aGlzLmxvY2tJdGVtKHMuaWQsITAsITApLChyLmltd2lkdGh8fHIuaW1oZWlnaHQpJiZ0aGlzLnNldEljb25TaXplKHIuaW13aWR0aCxyLmltaGVpZ2h0LHMpLCIwIiE9ci5jbG9zZWFibGUmJiIxIiE9ci5jbG9zZWFibGV8fHRoaXMuc2V0SXRlbUNsb3NlYWJsZShzLHIuY2xvc2VhYmxlKTt2YXIgZD0iIjtyLnRvcG9mZnNldCYmdGhpcy5zZXRJdGVtVG9wT2Zmc2V0KHMsci50b3BvZmZzZXQpLHRoaXMuc2xvd1BhcnNlJiYib2JqZWN0IiE9dHlwZW9mIHRoaXMud2FpdFVwZGF0ZVhNTD8oIXMuY2hpbGRzQ291bnQmJmUuc3ViX2V4aXN0cygiaXRlbSIpJiYocy51blBhcnNlZD1lLmNsb25lKCkpLGUuZWFjaCgidXNlcmRhdGEiLGZ1bmN0aW9uKGUpe3RoaXMuc2V0VXNlckRhdGEoci5pZCxlLmdldCgibmFtZSIpLGUuY29udGVudCgpKX0sdGhpcykpOmUuc3ViX2V4aXN0cygiaXRlbSIpJiYoZD10aGlzLl9wYXJzZShlLHIuaWQsMSkpLCIiIT1kJiYodGhpcy5ub2RlQXNraW5nQ2FsbD1kKSxlLmVhY2goInVzZXJkYXRhIixmdW5jdGlvbih0KXt0aGlzLnNldFVzZXJEYXRhKGUuZ2V0KCJpZCIpLHQuZ2V0KCJuYW1lIiksdC5jb250ZW50KCkpfSx0aGlzKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3BhcnNlPWZ1bmN0aW9uKGUsdCxpLG4pe2lmKHRoaXMuX3NybmQmJiF0aGlzLnBhcmVudE9iamVjdC5vZmZzZXRIZWlnaHQpe3ZhciBvPXRoaXM7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by5fcGFyc2UoZSx0LGksbil9LDEwMCl9aWYoZS5leGlzdHMoKSl7aWYodGhpcy5za2lwTG9jaz0hMCwhdCl7dD1lLmdldCgiaWQiKSx0aGlzLl9keW5EZWxldGVCcmFuY2hlc1t0XSYmKHRoaXMuZGVsZXRlQ2hpbGRJdGVtcyh0KSx0aGlzLl9keW5EZWxldGVCcmFuY2hlc1t0XS0tLHRoaXMuX2R5bkRlbGV0ZUJyYW5jaGVzW3RdfHxkZWxldGUgdGhpcy5fZHluRGVsZXRlQnJhbmNoZXNbdF0pO3ZhciByPWUuZ2V0KCJkaHhfc2VjdXJpdHkiKTtyJiYoZGh0bWx4LnNlY3VyaXR5X2tleT1yKSxlLmdldCgicmFkaW8iKSYmKHRoaXMuaHRtbE5vZGUuX3JfbG9naWM9ITApLHRoaXMucGFyc2luZ09uPXQsdGhpcy5wYXJzZWRBcnJheT1uZXcgQXJyYXksdGhpcy5zZXRDaGVja0xpc3Q9IiIsdGhpcy5ub2RlQXNraW5nQ2FsbD0iIn12YXIgbD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKHQpO2lmKCFsKXJldHVybiBkaHg0LmNhbGxFdmVudCgib25EYXRhU3RydWN0dXJlRXJyb3IiLFsiWE1MIHJlZmVycyB0byBub3QgZXhpc3RpbmcgcGFyZW50Il0pO2lmKHRoaXMucGFyc0NvdW50PXRoaXMucGFyc0NvdW50P3RoaXMucGFyc0NvdW50KzE6MSx0aGlzLlhNTGxvYWRpbmdXYXJuaW5nPTEsIWwuY2hpbGRzQ291bnR8fG58fHRoaXMuX2Vkc2Jwc3x8bC5faGFzX3RvcCl2YXIgcz0wO2Vsc2UgdmFyIHM9MDtpZih0aGlzLm5wbD0wLGUuZWFjaCgiaXRlbSIsZnVuY3Rpb24obixvKXtyZXR1cm4gbC5YTUxsb2FkPTEsdGhpcy5fcGFyc2VJdGVtKG4sbCwwLHMpLHRoaXMuX2Vkc2JwcyYmdGhpcy5ucGw9PXRoaXMuX2Vkc2Jwc0M/KHRoaXMuX2Rpc3RyaWJ1dGVkU3RhcnQoZSxvKzEsdCxpLGwuY2hpbGRzQ291bnQpLC0xKTp2b2lkIHRoaXMubnBsKyt9LHRoaXMsbiksIWkpe2lmKGUuZWFjaCgidXNlcmRhdGEiLGZ1bmN0aW9uKHQpe3RoaXMuc2V0VXNlckRhdGEoZS5nZXQoImlkIiksdC5nZXQoIm5hbWUiKSx0LmNvbnRlbnQoKSl9LHRoaXMpLGwuWE1MbG9hZD0xLHRoaXMud2FpdFVwZGF0ZVhNTCl7dGhpcy53YWl0VXBkYXRlWE1MPSExO2Zvcih2YXIgYT1sLmNoaWxkc0NvdW50LTE7YT49MDthLS0pbC5jaGlsZE5vZGVzW2FdLl9kbWFyayYmdGhpcy5kZWxldGVJdGVtKGwuY2hpbGROb2Rlc1thXS5pZCl9Zm9yKHZhciBhPSh0aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKHRoaXMucGFyc2luZ09uKSwwKTthPHRoaXMucGFyc2VkQXJyYXkubGVuZ3RoO2ErKylsLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uYXBwZW5kQ2hpbGQodGhpcy5wYXJzZWRBcnJheVthXSk7dGhpcy5wYXJzZWRBcnJheT1bXSx0aGlzLmxhc3RMb2FkZWRYTUxJZD10LHRoaXMuWE1MbG9hZGluZ1dhcm5pbmc9MDtmb3IodmFyIGQ9dGhpcy5zZXRDaGVja0xpc3Quc3BsaXQodGhpcy5kbG10ciksaD0wO2g8ZC5sZW5ndGg7aCsrKWRbaF0mJnRoaXMuc2V0Q2hlY2soZFtoXSwxKTt0aGlzLlhNTHNvdXJjZSYmdGhpcy50c2NoZWNrJiZ0aGlzLnNtY2hlY2smJmwuaWQhPXRoaXMucm9vdElkJiYoMD09PWwuY2hlY2tzdGF0ZT90aGlzLl9zZXRTdWJDaGVja2VkKDAsbCk6MT09PWwuY2hlY2tzdGF0ZSYmdGhpcy5fc2V0U3ViQ2hlY2tlZCgxLGwpKSx0aGlzLl9yZWRyYXdGcm9tKHRoaXMsbnVsbCxuKSxlLmdldCgib3JkZXIiKSYmIm5vbmUiIT1lLmdldCgib3JkZXIiKSYmdGhpcy5fcmVvcmRlckJyYW5jaChsLGUuZ2V0KCJvcmRlciIpLCEwKSwiIiE9dGhpcy5ub2RlQXNraW5nQ2FsbCYmdGhpcy5jYWxsRXZlbnQoIm9uQ2xpY2siLFt0aGlzLm5vZGVBc2tpbmdDYWxsLHRoaXMuZ2V0U2VsZWN0ZWRJdGVtSWQoKV0pLHRoaXMuX2JyYW5jaFVwZGF0ZSYmdGhpcy5fYnJhbmNoVXBkYXRlTmV4dChlKX1pZigxPT10aGlzLnBhcnNDb3VudCl7aWYodGhpcy5wYXJzaW5nT249bnVsbCx0aGlzLl9zcm5kJiZsLmlkIT10aGlzLnJvb3RJZCYmKHRoaXMucHJlcGFyZVNSKGwuaWQpLHRoaXMuWE1Mc291cmNlJiZ0aGlzLm9wZW5JdGVtKGwuaWQpKSxlLnRocm91Z2goIml0ZW0iLCJvcGVuIixudWxsLGZ1bmN0aW9uKGUpe3RoaXMub3Blbkl0ZW0oZS5nZXQoImlkIikpfSx0aGlzKSwhdGhpcy5fZWRzYnBzfHwhdGhpcy5fZWRzYnBzQS5sZW5ndGgpe3ZhciBjPXRoaXM7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmNhbGxFdmVudCgib25YTEUiLFtjLHRdKX0sMSksdGhpcy54bWxzdGF0ZT0wfXRoaXMuc2tpcExvY2s9ITF9dGhpcy5wYXJzQ291bnQtLTt2YXIgYz10aGlzO3JldHVybiB0aGlzLl9lZHNicHMmJndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5fZGlzdHJpYnV0ZWRTdGVwKHQpfSx0aGlzLl9lZHNicHNEKSwhaSYmdGhpcy5vblhMRSYmdGhpcy5vblhMRSh0aGlzLHQpLHRoaXMubm9kZUFza2luZ0NhbGx9fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fcmVkcmF3RnJvbT1mdW5jdGlvbihlLHQsaSxuKXtpZih0KW89dDtlbHNle3ZhciBvPWUuX2dsb2JhbElkU3RvcmFnZUZpbmQoZS5sYXN0TG9hZGVkWE1MSWQpO2lmKGUubGFzdExvYWRlZFhNTElkPS0xLCFvKXJldHVybiAwfWZvcih2YXIgcj0wLGw9aT9pLTE6MDtsPG8uY2hpbGRzQ291bnQ7bCsrKWlmKHRoaXMuX2JyYW5jaFVwZGF0ZSYmMSE9dGhpcy5fZ2V0T3BlblN0YXRlKG8pfHx0JiYxIT1ufHwoby5jaGlsZE5vZGVzW2xdLmh0bWxOb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5PSIiKSwxPT1vLmNoaWxkTm9kZXNbbF0ub3Blbk1lJiYodGhpcy5fb3Blbkl0ZW0oby5jaGlsZE5vZGVzW2xdKSxvLmNoaWxkTm9kZXNbbF0ub3Blbk1lPTApLGUuX3JlZHJhd0Zyb20oZSxvLmNoaWxkTm9kZXNbbF0pLG51bGwhPXRoaXMuY2hpbGRDYWxjKXtpZigoby5jaGlsZE5vZGVzW2xdLnVuUGFyc2VkfHwhby5jaGlsZE5vZGVzW2xdLlhNTGxvYWQmJnRoaXMuWE1Mc291cmNlKSYmKG8uY2hpbGROb2Rlc1tsXS5fYWNjP28uY2hpbGROb2Rlc1tsXS5zcGFuLmlubmVySFRNTD1vLmNoaWxkTm9kZXNbbF0ubGFiZWwrdGhpcy5odG1sY0Erby5jaGlsZE5vZGVzW2xdLl9hY2MrdGhpcy5odG1sY0I6by5jaGlsZE5vZGVzW2xdLnNwYW4uaW5uZXJIVE1MPW8uY2hpbGROb2Rlc1tsXS5sYWJlbCksby5jaGlsZE5vZGVzW2xdLmNoaWxkTm9kZXMubGVuZ3RoJiZ0aGlzLmNoaWxkQ2FsYyl7aWYoMT09dGhpcy5jaGlsZENhbGMmJihvLmNoaWxkTm9kZXNbbF0uc3Bhbi5pbm5lckhUTUw9by5jaGlsZE5vZGVzW2xdLmxhYmVsK3RoaXMuaHRtbGNBK28uY2hpbGROb2Rlc1tsXS5jaGlsZHNDb3VudCt0aGlzLmh0bWxjQiksMj09dGhpcy5jaGlsZENhbGMpe3ZhciBzPW8uY2hpbGROb2Rlc1tsXS5jaGlsZHNDb3VudC0oby5jaGlsZE5vZGVzW2xdLnB1cmVDaGlsZHN8fDApO3MmJihvLmNoaWxkTm9kZXNbbF0uc3Bhbi5pbm5lckhUTUw9by5jaGlsZE5vZGVzW2xdLmxhYmVsK3RoaXMuaHRtbGNBK3MrdGhpcy5odG1sY0IpLG8ucHVyZUNoaWxkcz9vLnB1cmVDaGlsZHMrKzpvLnB1cmVDaGlsZHM9MX1pZigzPT10aGlzLmNoaWxkQ2FsYyYmKG8uY2hpbGROb2Rlc1tsXS5zcGFuLmlubmVySFRNTD1vLmNoaWxkTm9kZXNbbF0ubGFiZWwrdGhpcy5odG1sY0Erby5jaGlsZE5vZGVzW2xdLl9hY2MrdGhpcy5odG1sY0IpLDQ9PXRoaXMuY2hpbGRDYWxjKXt2YXIgcz1vLmNoaWxkTm9kZXNbbF0uX2FjYztzJiYoby5jaGlsZE5vZGVzW2xdLnNwYW4uaW5uZXJIVE1MPW8uY2hpbGROb2Rlc1tsXS5sYWJlbCt0aGlzLmh0bWxjQStzK3RoaXMuaHRtbGNCKX19ZWxzZSA0PT10aGlzLmNoaWxkQ2FsYyYmcisrO3IrPW8uY2hpbGROb2Rlc1tsXS5fYWNjLDM9PXRoaXMuY2hpbGRDYWxjJiZyKyt9by51blBhcnNlZHx8IW8uWE1MbG9hZCYmdGhpcy5YTUxzb3VyY2V8fChvLl9hY2M9ciksZS5fY29ycmVjdExpbmUobyksZS5fY29ycmVjdFBsdXMobyksdGhpcy5jaGlsZENhbGMmJiF0JiZlLl9maXhDaGlsZENvdW50TGFiZWwobyl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9jcmVhdGVTZWxmPWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuY2xhc3NOYW1lPSJjb250YWluZXJUYWJsZVN0eWxlIixlLnN0eWxlLndpZHRoPXRoaXMud2lkdGgsZS5zdHlsZS5oZWlnaHQ9dGhpcy5oZWlnaHQsdGhpcy5wYXJlbnRPYmplY3QuYXBwZW5kQ2hpbGQoZSksZX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3hjbG9zZUFsbD1mdW5jdGlvbihlKXtpZighZS51blBhcnNlZCl7aWYodGhpcy5yb290SWQhPWUuaWQpe2lmKCFlLmh0bWxOb2RlKXJldHVybjtmb3IodmFyIHQ9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXMsaT10Lmxlbmd0aCxuPTE7aT5uO24rKyl0W25dLnN0eWxlLmRpc3BsYXk9Im5vbmUiO3RoaXMuX2NvcnJlY3RQbHVzKGUpfWZvcih2YXIgbj0wO248ZS5jaGlsZHNDb3VudDtuKyspZS5jaGlsZE5vZGVzW25dLmNoaWxkc0NvdW50JiZ0aGlzLl94Y2xvc2VBbGwoZS5jaGlsZE5vZGVzW25dKX19LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl94b3BlbkFsbD1mdW5jdGlvbihlKXt0aGlzLl9IaWRlU2hvdyhlLDIpO2Zvcih2YXIgdD0wO3Q8ZS5jaGlsZHNDb3VudDt0KyspdGhpcy5feG9wZW5BbGwoZS5jaGlsZE5vZGVzW3RdKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2NvcnJlY3RQbHVzPWZ1bmN0aW9uKGUpe2lmKGUuaHRtbE5vZGUpe3ZhciB0PWUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0ubGFzdENoaWxkLGk9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1syXS5jaGlsZE5vZGVzWzBdLG49dGhpcy5saW5lQXJyYXk7aWYodGhpcy5YTUxzb3VyY2UmJiFlLlhNTGxvYWQpe3ZhciBuPXRoaXMucGx1c0FycmF5O2lmKHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1syXSksdGhpcy5fdHh0aW1nKXJldHVybiB0LmlubmVySFRNTD0iWytdIn1lbHNlIGlmKGUuY2hpbGRzQ291bnR8fGUudW5QYXJzZWQpaWYoZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV0mJiJub25lIiE9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV0uc3R5bGUuZGlzcGxheSl7aWYoIWUud3NpZ24pdmFyIG49dGhpcy5taW51c0FycmF5O2lmKHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1sxXSksdGhpcy5fdHh0aW1nKXJldHVybiB0LmlubmVySFRNTD0iWy1dIn1lbHNle2lmKCFlLndzaWduKXZhciBuPXRoaXMucGx1c0FycmF5O2lmKHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1syXSksdGhpcy5fdHh0aW1nKXJldHVybiB0LmlubmVySFRNTD0iWytdIn1lbHNlIHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1swXSk7dmFyIG89MjtlLnRyZWVOb2QudHJlZUxpbmVzT24/KGUucGFyZW50T2JqZWN0JiYobz10aGlzLl9nZXRDb3VudFN0YXR1cyhlLmlkLGUucGFyZW50T2JqZWN0KSksdGhpcy5fc2V0U3JjKHQsdGhpcy5pbVBhdGgrbltvXSkpOnRoaXMuX3NldFNyYyh0LHRoaXMuaW1QYXRoK25bM10pfX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2NvcnJlY3RMaW5lPWZ1bmN0aW9uKGUpe2lmKGUuaHRtbE5vZGUpe3ZhciB0PWUucGFyZW50T2JqZWN0O2lmKHQpaWYoMCE9dGhpcy5fZ2V0TGluZVN0YXR1cyhlLmlkLHQpJiZ0aGlzLnRyZWVMaW5lc09uKWZvcih2YXIgaT0xO2k8PWUuY2hpbGRzQ291bnQmJmUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldO2krKyllLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1tpXS5jaGlsZE5vZGVzWzBdLnN0eWxlLmJhY2tncm91bmRJbWFnZT0idXJsKCIrdGhpcy5pbVBhdGgrdGhpcy5saW5lQXJyYXlbNV0rIikiLGUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZFJlcGVhdD0icmVwZWF0LXkiO2Vsc2UgZm9yKHZhciBpPTE7aTw9ZS5jaGlsZHNDb3VudCYmZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbaV07aSsrKWUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZEltYWdlPSIiLGUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZFJlcGVhdD0iIn19LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9nZXRMaW5lU3RhdHVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuY2hpbGROb2Rlc1t0LmNoaWxkc0NvdW50LTFdLmlkPT1lPzA6MX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX0hpZGVTaG93PWZ1bmN0aW9uKGUsdCl7aWYoIXRoaXMuX2xvY2tlcnx8dGhpcy5za2lwTG9ja3x8IXRoaXMuX2xvY2tlcltlLmlkXSl7aWYodGhpcy5YTUxzb3VyY2UmJiFlLlhNTGxvYWQpe2lmKDE9PXQpcmV0dXJuO3JldHVybiBlLlhNTGxvYWQ9MSx2b2lkIHRoaXMuX2xvYWREeW5YTUwoZS5pZCl9ZS51blBhcnNlZCYmdGhpcy5yZVBhcnNlKGUpO3ZhciBpPWUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzLG49aS5sZW5ndGg7aWYobj4xKXsibm9uZSI9PWlbMV0uc3R5bGUuZGlzcGxheSYmMSE9dHx8Mj09dD9ub2Rlc3R5bGU9IiI6KHRoaXMuYWxsVHJlZS5jaGlsZE5vZGVzWzBdLmJvcmRlcj0iMSIsdGhpcy5hbGxUcmVlLmNoaWxkTm9kZXNbMF0uYm9yZGVyPSIwIixub2Rlc3R5bGU9Im5vbmUiKTtmb3IodmFyIG89MTtuPm87bysrKWlbb10uc3R5bGUuZGlzcGxheT1ub2Rlc3R5bGV9dGhpcy5fY29ycmVjdFBsdXMoZSl9fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fZ2V0T3BlblN0YXRlPWZ1bmN0aW9uKGUpe2lmKCFlLmh0bWxOb2RlKXJldHVybiAwO3ZhciB0PWUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO3JldHVybiB0Lmxlbmd0aDw9MT8wOiJub25lIiE9dFsxXS5zdHlsZS5kaXNwbGF5PzE6LTF9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLm9uUm93Q2xpY2syPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wYXJlbnRPYmplY3QudHJlZU5vZDtyZXR1cm4gZS5jYWxsRXZlbnQoIm9uRGJsQ2xpY2siLFt0aGlzLnBhcmVudE9iamVjdC5pZCxlXSk/KHRoaXMucGFyZW50T2JqZWN0LmNsb3NlYmxlJiYiMCIhPXRoaXMucGFyZW50T2JqZWN0LmNsb3NlYmxlP2UuX0hpZGVTaG93KHRoaXMucGFyZW50T2JqZWN0KTplLl9IaWRlU2hvdyh0aGlzLnBhcmVudE9iamVjdCwyKSxlLmNoZWNrRXZlbnQoIm9uT3BlbkVuZCIpJiYoZS54bWxzdGF0ZT8oZS5fb2llX29uWExFLnB1c2goZS5vblhMRSksZS5vblhMRT1lLl9lcG5GSGUpOmUuY2FsbEV2ZW50KCJvbk9wZW5FbmQiLFt0aGlzLnBhcmVudE9iamVjdC5pZCxlLl9nZXRPcGVuU3RhdGUodGhpcy5wYXJlbnRPYmplY3QpXSkpLCExKTohMX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUub25Sb3dDbGljaz1mdW5jdGlvbigpe3ZhciBlPXRoaXMucGFyZW50T2JqZWN0LnRyZWVOb2Q7cmV0dXJuIGUuY2FsbEV2ZW50KCJvbk9wZW5TdGFydCIsW3RoaXMucGFyZW50T2JqZWN0LmlkLGUuX2dldE9wZW5TdGF0ZSh0aGlzLnBhcmVudE9iamVjdCldKT8odGhpcy5wYXJlbnRPYmplY3QuY2xvc2VibGUmJiIwIiE9dGhpcy5wYXJlbnRPYmplY3QuY2xvc2VibGU/ZS5fSGlkZVNob3codGhpcy5wYXJlbnRPYmplY3QpOmUuX0hpZGVTaG93KHRoaXMucGFyZW50T2JqZWN0LDIpLHZvaWQoZS5jaGVja0V2ZW50KCJvbk9wZW5FbmQiKSYmKGUueG1sc3RhdGU/KGUuX29pZV9vblhMRS5wdXNoKGUub25YTEUpLGUub25YTEU9ZS5fZXBuRkhlKTplLmNhbGxFdmVudCgib25PcGVuRW5kIixbdGhpcy5wYXJlbnRPYmplY3QuaWQsZS5fZ2V0T3BlblN0YXRlKHRoaXMucGFyZW50T2JqZWN0KV0pKSkpOjB9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmdldFNlbGVjdGVkSXRlbUlkPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPW5ldyBBcnJheSx0PTA7dDx0aGlzLl9zZWxlY3RlZC5sZW5ndGg7dCsrKWVbdF09dGhpcy5fc2VsZWN0ZWRbdF0uaWQ7cmV0dXJuIGUuam9pbih0aGlzLmRsbXRyKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3NlbGVjdEl0ZW09ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmNoZWNrRXZlbnQoIm9uU2VsZWN0IikmJih0aGlzLl9vblNTQ0ZvbGQ9dGhpcy5nZXRTZWxlY3RlZEl0ZW1JZCgpKSx0aGlzLl9hbXNlbCYmdCYmKHQuY3RybEtleXx8dC5tZXRhS2V5fHx0LnNoaWZ0S2V5KXx8dGhpcy5fdW5zZWxlY3RJdGVtcygpLGUuaV9zZWwmJnRoaXMuX2Ftc2VsJiZ0JiYodC5jdHJsS2V5fHx0Lm1ldGFLZXkpKXRoaXMuX3Vuc2VsZWN0SXRlbShlKTtlbHNlIGlmKCEoZS5pX3NlbHx8dGhpcy5fYW1zZWxTJiYwIT10aGlzLl9zZWxlY3RlZC5sZW5ndGgmJnRoaXMuX3NlbGVjdGVkWzBdLnBhcmVudE9iamVjdCE9ZS5wYXJlbnRPYmplY3QpKWlmKHRoaXMuX2Ftc2VsJiZ0JiZ0LnNoaWZ0S2V5JiYwIT10aGlzLl9zZWxlY3RlZC5sZW5ndGgmJnRoaXMuX3NlbGVjdGVkW3RoaXMuX3NlbGVjdGVkLmxlbmd0aC0xXS5wYXJlbnRPYmplY3Q9PWUucGFyZW50T2JqZWN0KXt2YXIgaT10aGlzLl9nZXRJbmRleCh0aGlzLl9zZWxlY3RlZFt0aGlzLl9zZWxlY3RlZC5sZW5ndGgtMV0pLG49dGhpcy5fZ2V0SW5kZXgoZSk7aWYoaT5uKXt2YXIgbz1pO2k9bixuPW99Zm9yKHZhciByPWk7bj49cjtyKyspZS5wYXJlbnRPYmplY3QuY2hpbGROb2Rlc1tyXS5pX3NlbHx8dGhpcy5fbWFya0l0ZW0oZS5wYXJlbnRPYmplY3QuY2hpbGROb2Rlc1tyXSl9ZWxzZSB0aGlzLl9tYXJrSXRlbShlKTtpZih0aGlzLmNoZWNrRXZlbnQoIm9uU2VsZWN0Iikpe3ZhciBsPXRoaXMuZ2V0U2VsZWN0ZWRJdGVtSWQoKTtsIT10aGlzLl9vblNTQ0ZvbGQmJnRoaXMuY2FsbEV2ZW50KCJvblNlbGVjdCIsW2xdKX19LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9tYXJrSXRlbT1mdW5jdGlvbihlKXtlLnNjb2xvciYmKGUuc3Bhbi5zdHlsZS5jb2xvcj1lLnNjb2xvciksZS5zcGFuLmNsYXNzTmFtZT0ic2VsZWN0ZWRUcmVlUm93IixlLnNwYW4ucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTmFtZT0ic2VsZWN0ZWRUcmVlUm93RnVsbCIsZS5pX3NlbD0hMCx0aGlzLl9zZWxlY3RlZFt0aGlzLl9zZWxlY3RlZC5sZW5ndGhdPWV9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmdldEluZGV4QnlJZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUpO3JldHVybiB0P3RoaXMuX2dldEluZGV4KHQpOm51bGx9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9nZXRJbmRleD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5wYXJlbnRPYmplY3QsaT0wO2k8dC5jaGlsZHNDb3VudDtpKyspaWYodC5jaGlsZE5vZGVzW2ldPT1lKXJldHVybiBpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fdW5zZWxlY3RJdGVtPWZ1bmN0aW9uKGUpe2lmKGUmJmUuaV9zZWwpe2Uuc3Bhbi5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZVJvdyIsZS5zcGFuLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc05hbWU9IiIsZS5hY29sb3ImJihlLnNwYW4uc3R5bGUuY29sb3I9ZS5hY29sb3IpLGUuaV9zZWw9ITE7Zm9yKHZhciB0PTA7dDx0aGlzLl9zZWxlY3RlZC5sZW5ndGg7dCsrKWlmKCF0aGlzLl9zZWxlY3RlZFt0XS5pX3NlbCl7dGhpcy5fc2VsZWN0ZWQuc3BsaWNlKHQsMSk7YnJlYWt9fX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3Vuc2VsZWN0SXRlbXM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMuX3NlbGVjdGVkLmxlbmd0aDtlKyspe3ZhciB0PXRoaXMuX3NlbGVjdGVkW2VdO3Quc3Bhbi5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZVJvdyIsdC5zcGFuLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc05hbWU9IiIsdC5hY29sb3ImJih0LnNwYW4uc3R5bGUuY29sb3I9dC5hY29sb3IpLHQuaV9zZWw9ITF9dGhpcy5fc2VsZWN0ZWQ9bmV3IEFycmF5fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5vblJvd1NlbGVjdD1mdW5jdGlvbihlLHQsaSl7ZT1lfHx3aW5kb3cuZXZlbnQ7dmFyIG49dGhpcy5wYXJlbnRPYmplY3Q7dCYmKG49dC5wYXJlbnRPYmplY3QpO3ZhciBvPW4udHJlZU5vZCxyPW8uZ2V0U2VsZWN0ZWRJdGVtSWQoKTtlJiZlLnNraXBVblNlbHx8by5fc2VsZWN0SXRlbShuLGUpLGl8fChuLmFjdGlvbkhhbmRsZXI/bi5hY3Rpb25IYW5kbGVyKG4uaWQscik6by5jYWxsRXZlbnQoIm9uQ2xpY2siLFtuLmlkLHJdKSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9jcmVhdGVJdGVtPWZ1bmN0aW9uKGUsdCxpKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpO24uY2VsbFNwYWNpbmc9MCxuLmNlbGxQYWRkaW5nPTAsbi5ib3JkZXI9MCx0aGlzLmhmTW9kZSYmKG4uc3R5bGUudGFibGVMYXlvdXQ9ImZpeGVkIiksbi5zdHlsZS5tYXJnaW49MCxuLnN0eWxlLnBhZGRpbmc9MDt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpLHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKSxsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7aWYobC5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZUltYWdlIix0aGlzLl90eHRpbWcpe3ZhciBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2wuYXBwZW5kQ2hpbGQocykscy5jbGFzc05hbWU9ImRoeF90cmVlX3RleHRTaWduIn1lbHNle3ZhciBzPXRoaXMuX2dldEltZyh0LmlkKTtzLmJvcmRlcj0iMCIsIklNRyI9PXMudGFnTmFtZSYmKHMuYWxpZ249ImFic21pZGRsZSIpLGwuYXBwZW5kQ2hpbGQocykscy5zdHlsZS5wYWRkaW5nPTAscy5zdHlsZS5tYXJnaW49MCxzLnN0eWxlLndpZHRoPXRoaXMuZGVmX2xpbmVfaW1nX3h9dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKSxkPXRoaXMuX2dldEltZyh0aGlzLmNCUk9mP3RoaXMucm9vdElkOnQuaWQpO2QuY2hlY2tlZD0wLHRoaXMuX3NldFNyYyhkLHRoaXMuaW1QYXRoK3RoaXMuY2hlY2tBcnJheVswXSksZC5zdHlsZS53aWR0aD0iMThweCIsZC5zdHlsZS5oZWlnaHQ9IjE4cHgiLGV8fChhLnN0eWxlLmRpc3BsYXk9Im5vbmUiKSxhLmFwcGVuZENoaWxkKGQpLHRoaXMuY0JST2Z8fCJJTUciIT1kLnRhZ05hbWV8fChkLmFsaWduPSJhYnNtaWRkbGUiKSxkLm9uY2xpY2s9dGhpcy5vbkNoZWNrQm94Q2xpY2ssZC50cmVlTm9kPXRoaXMsZC5wYXJlbnRPYmplY3Q9dCx3aW5kb3cuX0tIVE1McnY/YS53aWR0aD0iMTZweCI6YS53aWR0aD0iMjBweCI7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTtoLmNsYXNzTmFtZT0ic3RhbmRhcnRUcmVlSW1hZ2UiO3ZhciBjPXRoaXMuX2dldEltZyh0aGlzLnRpbWdlbj90LmlkOnRoaXMucm9vdElkKTtjLm9ubW91c2Vkb3duPXRoaXMuX3ByZXZlbnROc0RyYWcsYy5vbmRyYWdzdGFydD10aGlzLl9wcmV2ZW50TnNEcmFnLGMuYm9yZGVyPSIwIix0aGlzLl9haW1ncyYmKGMucGFyZW50T2JqZWN0PXQsCiJJTUciPT1jLnRhZ05hbWUmJihjLmFsaWduPSJhYnNtaWRkbGUiKSxjLm9uY2xpY2s9dGhpcy5vblJvd1NlbGVjdCksaXx8dGhpcy5fc2V0U3JjKGMsdGhpcy5pY29uVVJMK3RoaXMuaW1hZ2VBcnJheVswXSksaC5hcHBlbmRDaGlsZChjKSxjLnN0eWxlLnBhZGRpbmc9MCxjLnN0eWxlLm1hcmdpbj0wLHRoaXMudGltZ2VuPyhoLnN0eWxlLndpZHRoPWMuc3R5bGUud2lkdGg9dGhpcy5kZWZfaW1nX3gsYy5zdHlsZS5oZWlnaHQ9dGhpcy5kZWZfaW1nX3kpOihjLnN0eWxlLndpZHRoPSIwcHgiLGMuc3R5bGUuaGVpZ2h0PSIwcHgiLChfaXNPcGVyYXx8d2luZG93Ll9LSFRNTHJ2KSYmKGguc3R5bGUuZGlzcGxheT0ibm9uZSIpKTt2YXIgdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpO3JldHVybiB1LmNsYXNzTmFtZT0iZGh4VGV4dENlbGwgc3RhbmRhcnRUcmVlUm93Iix0LnNwYW49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpLHQuc3Bhbi5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZVJvdyIsdGhpcy5tbGl0ZW1zPyh0LnNwYW4uc3R5bGUud2lkdGg9dGhpcy5tbGl0ZW1zLHQuc3Bhbi5zdHlsZS5kaXNwbGF5PSJibG9jayIpOnUubm9XcmFwPSEwLGRoeDQuaXNJRTg/dS5zdHlsZS53aWR0aD0iOTk5OTlweCI6d2luZG93Ll9LSFRNTHJ2fHwodS5zdHlsZS53aWR0aD0iMTAwJSIpLHQuc3Bhbi5pbm5lckhUTUw9dC5sYWJlbCx1LmFwcGVuZENoaWxkKHQuc3BhbiksdS5wYXJlbnRPYmplY3Q9dCxsLnBhcmVudE9iamVjdD10LHUub25jbGljaz10aGlzLm9uUm93U2VsZWN0LGwub25jbGljaz10aGlzLm9uUm93Q2xpY2ssdS5vbmRibGNsaWNrPXRoaXMub25Sb3dDbGljazIsdGhpcy5ldHRpcCYmKHIudGl0bGU9dC5sYWJlbCksdGhpcy5kcmFnQW5kRHJvcE9mZiYmKHRoaXMuX2FpbWdzJiYodGhpcy5kcmFnZ2VyLmFkZERyYWdnYWJsZUl0ZW0oaCx0aGlzKSxoLnBhcmVudE9iamVjdD10KSx0aGlzLmRyYWdnZXIuYWRkRHJhZ2dhYmxlSXRlbSh1LHRoaXMpKSx0LnNwYW4uc3R5bGUucGFkZGluZ0xlZnQ9IjVweCIsdC5zcGFuLnN0eWxlLnBhZGRpbmdSaWdodD0iNXB4Iix1LnN0eWxlLnZlcnRpY2FsQWxpZ249IiIsdS5zdHlsZS5mb250U2l6ZT0iMTBwdCIsdS5zdHlsZS5jdXJzb3I9dGhpcy5zdHlsZV9wb2ludGVyLHIuYXBwZW5kQ2hpbGQobCksci5hcHBlbmRDaGlsZChhKSxyLmFwcGVuZENoaWxkKGgpLHIuYXBwZW5kQ2hpbGQodSksby5hcHBlbmRDaGlsZChyKSxuLmFwcGVuZENoaWxkKG8pLCh0aGlzLmVobHR8fHRoaXMuY2hlY2tFdmVudCgib25Nb3VzZUluIil8fHRoaXMuY2hlY2tFdmVudCgib25Nb3VzZU91dCIpKSYmKHIub25tb3VzZW1vdmU9dGhpcy5faXRlbU1vdXNlSW4scltfaXNJRT8ib25tb3VzZWxlYXZlIjoib25tb3VzZW91dCJdPXRoaXMuX2l0ZW1Nb3VzZU91dCksbn0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25SaWdodENsaWNrSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvblJpZ2h0Q2xpY2siLGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRPbkNsaWNrSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvbkNsaWNrIixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25TZWxlY3RTdGF0ZUNoYW5nZT1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvblNlbGVjdCIsZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldFhNTEF1dG9Mb2FkaW5nPWZ1bmN0aW9uKGUpe3RoaXMuWE1Mc291cmNlPWV9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uQ2hlY2tIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuYXR0YWNoRXZlbnQoIm9uQ2hlY2siLGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRPbk9wZW5IYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuYXR0YWNoRXZlbnQoIm9uT3BlblN0YXJ0IixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25PcGVuU3RhcnRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuYXR0YWNoRXZlbnQoIm9uT3BlblN0YXJ0IixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25PcGVuRW5kSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvbk9wZW5FbmQiLGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRPbkRibENsaWNrSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvbkRibENsaWNrIixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUub3BlbkFsbEl0ZW1zPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7cmV0dXJuIHQ/dm9pZCB0aGlzLl94b3BlbkFsbCh0KTowfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5nZXRPcGVuU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlKTtyZXR1cm4gdD90aGlzLl9nZXRPcGVuU3RhdGUodCk6IiJ9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmNsb3NlQWxsSXRlbXM9ZnVuY3Rpb24oZSl7ZT09PXdpbmRvdy51bmRlZmluZWQmJihlPXRoaXMucm9vdElkKTt2YXIgdD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUpO3JldHVybiB0Pyh0aGlzLl94Y2xvc2VBbGwodCksdGhpcy5hbGxUcmVlLmNoaWxkTm9kZXNbMF0uYm9yZGVyPSIxIix2b2lkKHRoaXMuYWxsVHJlZS5jaGlsZE5vZGVzWzBdLmJvcmRlcj0iMCIpKTowfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRVc2VyRGF0YT1mdW5jdGlvbihlLHQsaSl7dmFyIG49dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlLDAsITApO24mJigiaGludCI9PXQmJihuLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS50aXRsZT1pKSwidW5kZWZpbmVkIj09dHlwZW9mIG4udXNlckRhdGFbInRfIit0XSYmKG4uX3VzZXJkYXRhbGlzdD9uLl91c2VyZGF0YWxpc3QrPSIsIit0Om4uX3VzZXJkYXRhbGlzdD10KSxuLnVzZXJEYXRhWyJ0XyIrdF09aSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmdldFVzZXJEYXRhPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlLDAsITApO2lmKGkpcmV0dXJuIGkudXNlckRhdGFbInRfIit0XX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZ2V0SXRlbUNvbG9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7aWYoIXQpcmV0dXJuIDA7dmFyIGk9bmV3IE9iamVjdDtyZXR1cm4gdC5hY29sb3ImJihpLmFjb2xvcj10LmFjb2xvciksdC5zY29sb3ImJihpLnNjb2xvcj10LnNjb2xvciksaX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0SXRlbUNvbG9yPWZ1bmN0aW9uKGUsdCxpKXtpZihlJiZlLnNwYW4pdmFyIG49ZTtlbHNlIHZhciBuPXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7cmV0dXJuIG4/KG4uaV9zZWw/KGl8fHQpJiYobi5zcGFuLnN0eWxlLmNvbG9yPWl8fHQpOnQmJihuLnNwYW4uc3R5bGUuY29sb3I9dCksaSYmKG4uc2NvbG9yPWkpLHQmJihuLmFjb2xvcj10KSx2b2lkIDApOjB9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uTW91c2VJbkhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5laGx0PSEwLHRoaXMuYXR0YWNoRXZlbnQoIm9uTW91c2VJbiIsZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uTW91c2VPdXRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuZWhsdD0hMCx0aGlzLmF0dGFjaEV2ZW50KCJvbk1vdXNlT3V0IixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZW5hYmxlVHJlZUxpbmVzPWZ1bmN0aW9uKGUpe3RoaXMudHJlZUxpbmVzT249ZGh4NC5zMmIoZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLm9wZW5JdGVtPWZ1bmN0aW9uKGUpe3RoaXMuc2tpcExvY2s9ITA7dmFyIHQ9dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlKTtyZXR1cm4gdD90aGlzLl9vcGVuSXRlbSh0KTowfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fb3Blbkl0ZW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0T3BlblN0YXRlKGUpO2lmKDA+dHx8dGhpcy5YTUxzb3VyY2UmJiFlLlhNTGxvYWQpe2lmKCF0aGlzLmNhbGxFdmVudCgib25PcGVuU3RhcnQiLFtlLmlkLHRdKSlyZXR1cm4gMDt0aGlzLl9IaWRlU2hvdyhlLDIpLHRoaXMuY2hlY2tFdmVudCgib25PcGVuRW5kIikmJih0aGlzLm9uWExFPT10aGlzLl9lcG5GSGUmJnRoaXMuX2VwbkZIZSh0aGlzLGUuaWQsITApLHRoaXMueG1sc3RhdGUmJnRoaXMuWE1Mc291cmNlPyh0aGlzLl9vaWVfb25YTEUucHVzaCh0aGlzLm9uWExFKSx0aGlzLm9uWExFPXRoaXMuX2VwbkZIZSk6dGhpcy5jYWxsRXZlbnQoIm9uT3BlbkVuZCIsW2UuaWQsdGhpcy5fZ2V0T3BlblN0YXRlKGUpXSkpfWVsc2UgdGhpcy5fc3JuZCYmdGhpcy5fSGlkZVNob3coZSwyKTtlLnBhcmVudE9iamVjdCYmIXRoaXMuX3NraXBfb3Blbl9wYXJlbnQmJnRoaXMuX29wZW5JdGVtKGUucGFyZW50T2JqZWN0KX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2dldEFsbEZhdEl0ZW1zPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0iIixpPTA7aTxlLmNoaWxkc0NvdW50O2krKylpZihlLmNoaWxkTm9kZXNbaV0udW5QYXJzZWR8fGUuY2hpbGROb2Rlc1tpXS5jaGlsZHNDb3VudD4wKXtpZih0P3QrPXRoaXMuZGxtdHIrZS5jaGlsZE5vZGVzW2ldLmlkOnQ9IiIrZS5jaGlsZE5vZGVzW2ldLmlkLGUuY2hpbGROb2Rlc1tpXS51blBhcnNlZCl2YXIgbj10aGlzLl9nZXRBbGxGYXRJdGVtc1hNTChlLmNoaWxkTm9kZXNbaV0udW5QYXJzZWQsMSk7ZWxzZSB2YXIgbj10aGlzLl9nZXRBbGxGYXRJdGVtcyhlLmNoaWxkTm9kZXNbaV0pO24mJih0Kz10aGlzLmRsbXRyK24pfXJldHVybiB0fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZWxlY3RJdGVtPWZ1bmN0aW9uKGUsdCxpKXt0PWRoeDQuczJiKHQpO3ZhciBuPXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7aWYoIW58fCFuLnBhcmVudE9iamVjdClyZXR1cm4gMDt0aGlzLlhNTGxvYWRpbmdXYXJuaW5nP24ucGFyZW50T2JqZWN0Lm9wZW5NZT0xOnRoaXMuX29wZW5JdGVtKG4ucGFyZW50T2JqZWN0KTt2YXIgbz1udWxsO2kmJihvPW5ldyBPYmplY3Qsby5jdHJsS2V5PSEwLG4uaV9zZWwmJihvLnNraXBVblNlbD0hMCkpLHQ/dGhpcy5vblJvd1NlbGVjdChvLG4uaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbM10sITEpOnRoaXMub25Sb3dTZWxlY3QobyxuLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzNdLCEwKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2NvbXByZXNzQ2hpbGRMaXN0PWZ1bmN0aW9uKGUsdCl7ZS0tO2Zvcih2YXIgaT0wO2U+aTtpKyspMD09dFtpXSYmKHRbaV09dFtpKzFdLHRbaSsxXT0wKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2RlbGV0ZU5vZGU9ZnVuY3Rpb24oZSx0LGkpe2lmKCF0fHwhdC5wYXJlbnRPYmplY3QpcmV0dXJuIDA7dmFyIG49MCxvPTA7dC50ci5uZXh0U2libGluZyYmKG49dC50ci5uZXh0U2libGluZy5ub2RlbSksdC50ci5wcmV2aW91c1NpYmxpbmcmJihvPXQudHIucHJldmlvdXNTaWJsaW5nLm5vZGVtKTtmb3IodmFyIHI9dC5wYXJlbnRPYmplY3QsbD1yLmNoaWxkc0NvdW50LHM9ci5jaGlsZE5vZGVzLGE9MDtsPmE7YSsrKWlmKHNbYV0uaWQ9PWUpe2l8fHIuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5yZW1vdmVDaGlsZChzW2FdLnRyKSxzW2FdPTA7YnJlYWt9dGhpcy5fY29tcHJlc3NDaGlsZExpc3QobCxzKSxpfHxyLmNoaWxkc0NvdW50LS0sbiYmKHRoaXMuX2NvcnJlY3RQbHVzKG4pLHRoaXMuX2NvcnJlY3RMaW5lKG4pKSxvJiYodGhpcy5fY29ycmVjdFBsdXMobyksdGhpcy5fY29ycmVjdExpbmUobykpLHRoaXMudHNjaGVjayYmdGhpcy5fY29ycmVjdENoZWNrU3RhdGVzKHIpLGl8fHRoaXMuX2dsb2JhbElkU3RvcmFnZVJlY1N1Yih0KX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZGVsZXRlQ2hpbGRJdGVtcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUpO2lmKHQpZm9yKHZhciBpPXQuY2hpbGRzQ291bnQsbj0wO2k+bjtuKyspdGhpcy5fZGVsZXRlTm9kZSh0LmNoaWxkTm9kZXNbMF0uaWQsdC5jaGlsZE5vZGVzWzBdKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2dsb2JhbElkU3RvcmFnZVJlY1N1Yj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUuY2hpbGRzQ291bnQ7dCsrKXRoaXMuX2dsb2JhbElkU3RvcmFnZVJlY1N1YihlLmNoaWxkTm9kZXNbdF0pLHRoaXMuX2dsb2JhbElkU3RvcmFnZVN1YihlLmNoaWxkTm9kZXNbdF0uaWQpO3RoaXMuX2dsb2JhbElkU3RvcmFnZVN1YihlLmlkKTt2YXIgaT1lO2kuc3Bhbj1udWxsLGkudHIubm9kZW09bnVsbCxpLnRyPW51bGwsaS5odG1sTm9kZT1udWxsfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fYXV0b1Njcm9sbD1mdW5jdGlvbihlLHQsaSl7dGhpcy5hdXRvU2Nyb2xsJiYoZSYmKHQ9ZGh4NC5hYnNUb3AoZSksaT1kaHg0LmFic1RvcCh0aGlzLmFsbFRyZWUpLXRoaXMuYWxsVHJlZS5zY3JvbGxUb3ApLHQtaS1wYXJzZUludCh0aGlzLmFsbFRyZWUuc2Nyb2xsVG9wKT5wYXJzZUludCh0aGlzLmFsbFRyZWUub2Zmc2V0SGVpZ2h0KS01MCYmKHRoaXMuYWxsVHJlZS5zY3JvbGxUb3A9cGFyc2VJbnQodGhpcy5hbGxUcmVlLnNjcm9sbFRvcCkrMjApLHQtaTxwYXJzZUludCh0aGlzLmFsbFRyZWUuc2Nyb2xsVG9wKSszMCYmKHRoaXMuYWxsVHJlZS5zY3JvbGxUb3A9cGFyc2VJbnQodGhpcy5hbGxUcmVlLnNjcm9sbFRvcCktMjApKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZW5hYmxlVGV4dFNpZ25zPWZ1bmN0aW9uKGUpe3RoaXMuX3R4dGltZz1kaHg0LnMyYihlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUucHJldmVudElFQ2FjaGluZz1mdW5jdGlvbihlKXtkaHg0LmFqYXguY2FjaGU9IWV9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnByZXZlbnRJRUNhc2hpbmc9ZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUucHJldmVudElFQ2FjaGluZyxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRJY29uU2l6ZT1mdW5jdGlvbihlLHQsaSl7aWYoaSl7aWYoaSYmaS5zcGFuKXZhciBuPWk7ZWxzZSB2YXIgbj10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGkpO2lmKCFuKXJldHVybiAwO3ZhciBvPW4uc3Bhbi5wYXJlbnROb2RlLnByZXZpb3VzU2libGluZy5jaGlsZE5vZGVzWzBdO2UmJihvLnN0eWxlLndpZHRoPWUrInB4Iix3aW5kb3cuX0tIVE1McnYmJihvLnBhcmVudE5vZGUuc3R5bGUud2lkdGg9ZSsicHgiKSksdCYmKG8uc3R5bGUuaGVpZ2h0PXQrInB4Iix3aW5kb3cuX0tIVE1McnYmJihvLnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0PXQrInB4IikpfWVsc2UgdGhpcy5kZWZfaW1nX3g9ZSsicHgiLHRoaXMuZGVmX2ltZ195PXQrInB4In0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZW5hYmxlU2luZ2xlUmFkaW9Nb2RlPWZ1bmN0aW9uKGUpe3RoaXMuX2ZyYnRycz1kaHg0LnMyYihlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUub3Blbk9uSXRlbUFkZGVkPWZ1bmN0aW9uKGUpe3RoaXMuX2hBZEk9IWRoeDQuczJiKGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5vcGVuT25JdGVtQWRkaW5nPWZ1bmN0aW9uKGUpe3RoaXMuX2hBZEk9IWRoeDQuczJiKGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5nZXRBbGxJdGVtc1dpdGhLaWRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldEFsbEZhdEl0ZW1zKHRoaXMuaHRtbE5vZGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRTa2luPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyZW50T2JqZWN0LmNsYXNzTmFtZS5yZXBsYWNlKC9kaHh0cmVlX1teIF0qL2dpLCIiKTt0aGlzLnBhcmVudE9iamVjdC5jbGFzc05hbWU9dCsiIGRoeHRyZWVfIitlLCJkaHhfdGVycmFjZSIhPWUmJiJkaHhfd2ViIiE9ZSYmIm1hdGVyaWFsIiE9ZXx8dGhpcy5lbmFibGVUcmVlTGluZXMoITEpLCJtYXRlcmlhbCI9PWUmJnRoaXMuc2V0SWNvblNpemUoIjI1IiwiMjUiKX0sanNvblBvaW50ZXIucHJvdG90eXBlPXt0ZXh0OmZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciBpPVtdLG49MDtuPGUubGVuZ3RoO24rKylpLnB1c2goInsiK3QoZVtuXSkrIn0iKTtyZXR1cm4gaS5qb2luKCIsIil9LHQ9ZnVuY3Rpb24oaSl7dmFyIG49W107Zm9yKHZhciBvIGluIGkpIm9iamVjdCI9PXR5cGVvZiBpW29dP28ubGVuZ3RoP24ucHVzaCgnIicrbysnIjpbJytlKGlbb10pKyJdIik6bi5wdXNoKCciJytvKyciOnsnK3QoaVtvXSkrIn0iKTpuLnB1c2goJyInK28rJyI6IicraVtvXSsnIicpO3JldHVybiBuLmpvaW4oIiwiKX07cmV0dXJuInsiK3QodGhpcy5kKSsifSJ9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kW2VdfSxleGlzdHM6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuZH0sY29udGVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmQuY29udGVudH0sZWFjaDpmdW5jdGlvbihlLHQsaSl7dmFyIG49dGhpcy5kW2VdLG89bmV3IGpzb25Qb2ludGVyO2lmKG4pZm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspby5kPW5bcl0sdC5hcHBseShpLFtvLHJdKX0sZ2V0X2FsbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmR9LHN1YjpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGpzb25Qb2ludGVyKHRoaXMuZFtlXSx0aGlzLmQpfSxzdWJfZXhpc3RzOmZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5kW2VdfSxlYWNoX3g6ZnVuY3Rpb24oZSx0LGksbixvKXt2YXIgcj10aGlzLmRbZV0sbD1uZXcganNvblBvaW50ZXIoMCx0aGlzLmQpO2lmKHIpZm9yKG89b3x8MDtvPHIubGVuZ3RoO28rKylpZihyW29dW3RdJiYobC5kPXJbb10sLTE9PWkuYXBwbHkobixbbCxvXSkpKXJldHVybn0sdXA6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBqc29uUG9pbnRlcih0aGlzLmRwLHRoaXMuZCl9LHNldDpmdW5jdGlvbihlLHQpe3RoaXMuZFtlXT10fSxjbG9uZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGpzb25Qb2ludGVyKHRoaXMuZCx0aGlzLmRwKX0sdGhyb3VnaDpmdW5jdGlvbihlLHQsaSxuLG8pe3ZhciByPXRoaXMuZFtlXTtpZihyLmxlbmd0aClmb3IodmFyIGw9MDtsPHIubGVuZ3RoO2wrKyl7aWYobnVsbCE9cltsXVt0XSYmIiIhPXJbbF1bdF0mJighaXx8cltsXVt0XT09aSkpe3ZhciBzPW5ldyBqc29uUG9pbnRlcihyW2xdLHRoaXMuZCk7bi5hcHBseShvLFtzLGxdKX12YXIgYT10aGlzLmQ7dGhpcy5kPXJbbF0sdGhpcy5zdWJfZXhpc3RzKGUpJiZ0aGlzLnRocm91Z2goZSx0LGksbixvKSx0aGlzLmQ9YX19fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5sb2FkSlNPTk9iamVjdD1mdW5jdGlvbihlLHQpe3JldHVybiB3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUuaW5mbyYmd2luZG93LmNvbnNvbGUuaW5mbygibG9hZEpTT05PYmplY3Qgd2FzIGRlcHJlY2F0ZWQiLCJodHRwOi8vZG9jcy5kaHRtbHguY29tL21pZ3JhdGlvbl9faW5kZXguaHRtbCNtaWdyYXRpb25mcm9tNDN0bzQ0IiksdGhpcy5fbG9hZEpTT05PYmplY3QoZSx0KX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2xvYWRKU09OT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dGhpcy5wYXJzQ291bnR8fHRoaXMuY2FsbEV2ZW50KCJvblhMUyIsW3RoaXMsbnVsbF0pLHRoaXMueG1sc3RhdGU9MTt2YXIgaT1uZXcganNvblBvaW50ZXIoZSk7dGhpcy5fcGFyc2UoaSksdGhpcy5fcD1pLHQmJnQoKX0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXI/d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGRoeF9pbml0X3RyZWVzLCExKTp3aW5kb3cuYXR0YWNoRXZlbnQmJndpbmRvdy5hdHRhY2hFdmVudCgib25sb2FkIixkaHhfaW5pdF90cmVlcyk7dmFyIHN0eWxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7c3R5bGUuaW5uZXJIVE1MPSdAa2V5ZnJhbWVzIGRoeF9sb2FkZXJfcm90YXRlezEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO319QGtleWZyYW1lcyBkaHhfbG9hZGVyX2Rhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowO301MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1cHg7fTEwMCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNHB4O319LmRodG1seE1lbnVfbWF0ZXJpYWxfTWlkZGxle3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoyOHB4O2xpbmUtaGVpZ2h0OjI4cHg7YmFja2dyb3VuZC1jb2xvcjojZjVmNWY1O292ZXJmbG93OmhpZGRlbjtib3JkZXI6bm9uZTtmb250LXNpemU6MTRweDtmb250LWZhbWlseTpSb2JvdG8sQXJpYWwsSGVsdmV0aWNhO2NvbG9yOiM0MDQwNDA7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1raHRtbC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTstby11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX05vcm1hbCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9EaXNhYmxlZCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9TZWxlY3RlZHtwb3NpdGlvbjpyZWxhdGl2ZTtmbG9hdDpsZWZ0O2ZvbnQ6aW5oZXJpdDtoZWlnaHQ6MjhweDtsaW5lLWhlaWdodDoyOHB4O21hcmdpbjowO3BhZGRpbmc6MCA4cHg7Y3Vyc29yOmRlZmF1bHQ7d2hpdGUtc3BhY2U6bm93cmFwOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9Ob3JtYWwgZGl2LnRvcF9sZXZlbF90ZXh0LC5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX0Rpc2FibGVkIGRpdi50b3BfbGV2ZWxfdGV4dCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9TZWxlY3RlZCBkaXYudG9wX2xldmVsX3RleHR7ZmxvYXQ6bGVmdDttYXJnaW46MCAzcHg7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX05vcm1hbCBpLC5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX0Rpc2FibGVkIGksLmRodG1seE1lbnVfbWF0ZXJpYWxfTWlkZGxlIGRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1RvcExldmVsX0l0ZW1fU2VsZWN0ZWQgaXtoZWlnaHQ6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0O2Zsb2F0OmxlZnQ7Y29sb3I6aW5oZXJpdDttYXJnaW46MCA0cHg7Zm9udC1zaXplOjEuMmVtO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9EaXNhYmxlZHtjb2xvcjojYTZhNmE2O30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9TZWxlY3RlZHtiYWNrZ3JvdW5kLWNvbG9yOiNlYmViZWI7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBpbWcuZGh0bWx4TWVudV9Ub3BMZXZlbF9JdGVtX0ljb257ZmxvYXQ6bGVmdDttYXJnaW46NXB4IDNweCAwIDNweDt3aWR0aDoxOHB4O2hlaWdodDoxOHB4O2N1cnNvcjpkZWZhdWx0O30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LnRvcF9zZXB7cG9zaXRpb246cmVsYXRpdmU7ZmxvYXQ6bGVmdDtoZWlnaHQ6MjJweDt3aWR0aDowO2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjZGZkZmRmO21hcmdpbjozcHggOHB4IDAgOHB4O2ZvbnQtc2l6ZToxcHg7b3ZlcmZsb3c6aGlkZGVuO2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfVG9wTGV2ZWxfVGV4dF9yaWdodCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfVG9wTGV2ZWxfVGV4dF9sZWZ0e3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2hlaWdodDoyOHB4O2xpbmUtaGVpZ2h0OjI4cHg7Y3Vyc29yOmRlZmF1bHQ7Zm9udC1zaXplOjE0cHg7Zm9udC1mYW1pbHk6Um9ib3RvLEFyaWFsLEhlbHZldGljYTtjb2xvcjojNDA0MDQwOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfVG9wTGV2ZWxfVGV4dF9yaWdodHtyaWdodDo2cHg7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9Ub3BMZXZlbF9UZXh0X2xlZnR7bGVmdDo2cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29ue3Bvc2l0aW9uOmFic29sdXRlO3BhZGRpbmc6NXB4IDA7YmFja2dyb3VuZC1jb2xvcjojZmFmYWZhO292ZXJmbG93OmhpZGRlbjtjdXJzb3I6ZGVmYXVsdDtsaW5lLWhlaWdodDpub3JtYWw7b3ZlcmZsb3cteTphdXRvOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNoOy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjpyZ2JhKDAsMCwwLDApO2JveC1zaGFkb3c6MCAxcHggM3B4IHJnYmEoMCwwLDAsMC4xMiksMCAxcHggMnB4IHJnYmEoMCwwLDAsMC4yNCk7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1raHRtbC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTstby11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRke3BhZGRpbmc6MDttYXJnaW46MDtsaW5lLWhlaWdodDpub3JtYWw7d2hpdGUtc3BhY2U6bm93cmFwO2ZvbnQtc2l6ZToxNHB4O2ZvbnQtZmFtaWx5OlJvYm90byxBcmlhbCxIZWx2ZXRpY2E7Y29sb3I6IzQwNDA0MDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbnt3aWR0aDoxOHB4O3RleHQtYWxpZ246Y2VudGVyO31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9pY29uIGltZy5zdWJfaWNvbnttYXJnaW46NHB4IDZweCAwIDZweDt3aWR0aDoxOHB4O2hlaWdodDoxOHB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9pY29uIGl7d2lkdGg6MThweDtoZWlnaHQ6MzBweDtsaW5lLWhlaWdodDoyOXB4O21hcmdpbjowIDZweDtmb250LXNpemU6MS4yZW07dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6aW5oZXJpdDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbiBkaXYuc3ViX2ljb257bWFyZ2luOjAgNnB4O3dpZHRoOjE4cHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgNXB4O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLWltYWdlOnVybCgiaW1ncy9kaHhtZW51X21hdGVyaWFsL2RoeG1lbnVfY2hyZC5wbmciKTt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbiBkaXYuc3ViX2ljb24uY2hieF8we2JhY2tncm91bmQtcG9zaXRpb246MCA1cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRkLnN1Yl9pdGVtX2ljb24gZGl2LnN1Yl9pY29uLmNoYnhfMXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xOHB4IDVweDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbiBkaXYuc3ViX2ljb24ucmRidF8we2JhY2tncm91bmQtcG9zaXRpb246LTcycHggNXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9pY29uIGRpdi5zdWJfaWNvbi5yZGJ0XzF7YmFja2dyb3VuZC1wb3NpdGlvbjotOTBweCA1cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRkLnN1Yl9pdGVtX3RleHQgZGl2LnN1Yl9pdGVtX3RleHR7cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtwYWRkaW5nOjAgMjJweCAwIDFweDtvdmVyZmxvdzpoaWRkZW47fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRkLnN1Yl9pdGVtX2hre3BhZGRpbmc6MCAxMHB4IDAgOHB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9oayBkaXYuc3ViX2l0ZW1faGt7Y29sb3I6IzhkOGQ4ZDtmb250LXNpemU6MTJweDt0ZXh0LWFsaWduOnJpZ2h0O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZCBkaXYuY29tcGxleF9hcnJvd3tmbG9hdDpyaWdodDt3aWR0aDoxMHB4O21hcmdpbjowIDFweCAwIDExcHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLWltYWdlOnVybCgiaW1ncy9kaHhtZW51X21hdGVyaWFsL2RoeG1lbnVfc3ViYXIucG5nIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246MCAxMHB4O292ZXJmbG93OmhpZGRlbjtmb250LXNpemU6MXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZCBkaXYuY29tcGxleF9hcnJvd19sb2FkaW5ne3dpZHRoOjE2cHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlciBjZW50ZXI7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtaW1hZ2U6dXJsKCJpbWdzL2RoeG1lbnVfbWF0ZXJpYWwvZGh4bWVudV9sb2FkZXIuZ2lmIik7ZmxvYXQ6cmlnaHQ7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX3NlbGVjdGVkIHRke2JhY2tncm91bmQtY29sb3I6I2ViZWJlYjt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdHIuc3ViX2l0ZW1fc2VsZWN0ZWQgdGQgZGl2LmNvbXBsZXhfYXJyb3d7YmFja2dyb3VuZC1wb3NpdGlvbjotMTBweCAxMHB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQuc3ViX2l0ZW1faGsgZGl2LnN1Yl9pdGVtX2hre2NvbG9yOiNjMGMwYzA7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBkaXYuc3ViX2l0ZW1fdGV4dCxkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQgdGQuc3ViX2l0ZW1faWNvbiBpe2NvbG9yOiNhNmE2YTY7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBkaXYuY29tcGxleF9hcnJvd3tiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMHB4IDEwcHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBkaXYuc3ViX2ljb24uY2hieF8we2JhY2tncm91bmQtcG9zaXRpb246LTM2cHggNXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQgZGl2LnN1Yl9pY29uLmNoYnhfMXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01NHB4IDVweDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdHIuc3ViX2l0ZW1fZGlzIHRkIGRpdi5zdWJfaWNvbi5yZGJ0XzB7YmFja2dyb3VuZC1wb3NpdGlvbjotMTA4cHggNXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQgZGl2LnN1Yl9pY29uLnJkYnRfMXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xMjZweCA1cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBpe2NvbG9yOiNhNmE2YTY7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9zZXAgdGR7cGFkZGluZzo1cHggM3B4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfc2VwIHRkIGRpdi5zdWJfc2Vwe3Bvc2l0aW9uOnJlbGF0aXZlO2ZvbnQtc2l6ZToxcHg7bGluZS1oZWlnaHQ6MXB4O2hlaWdodDowO3dpZHRoOjEwMCU7Ym9yZGVyLXRvcDoxcHggc29saWQgI2RmZGZkZjt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93VXAsZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93VXBfT3ZlcixkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfQXJyb3dVcF9EaXNhYmxlZHtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6MXB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZmRmZGY7YmFja2dyb3VuZC1pbWFnZTp1cmwoImltZ3MvZGh4bWVudV9tYXRlcmlhbC9kaHhtZW51X2Fycm93X3VwLnBuZyIpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlciAycHg7cGFkZGluZzo4cHggMDttYXJnaW4tYm90dG9tOjNweDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93VXBfRGlzYWJsZWR7YmFja2dyb3VuZC1pbWFnZTp1cmwoImltZ3MvZGh4bWVudV9tYXRlcmlhbC9kaHhtZW51X2Fycm93X3VwX2Rpcy5wbmciKTt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93RG93bixkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfQXJyb3dEb3duX092ZXIsZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93RG93bl9EaXNhYmxlZHtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6MXB4O2JvcmRlci10b3A6MXB4IHNvbGlkICNkZmRmZGY7YmFja2dyb3VuZC1pbWFnZTp1cmwoImltZ3MvZGh4bWVudV9tYXRlcmlhbC9kaHhtZW51X2Fycm93X2Rvd24ucG5nIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyIDZweDtwYWRkaW5nOjhweCAwO21hcmdpbi10b3A6M3B4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfQXJyb3dEb3duX0Rpc2FibGVke2JhY2tncm91bmQtaW1hZ2U6dXJsKCJpbWdzL2RoeG1lbnVfbWF0ZXJpYWwvZGh4bWVudV9hcnJvd19kb3duX2Rpcy5wbmciKTt9aWZyYW1lLmRodG1seE1lbnVfSUU2Q292ZXJGaXhfbWF0ZXJpYWx7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOm5vbmU7YmFja2dyb3VuZDojMDAwO2ZpbHRlcjpwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGEob3BhY2l0eT0xMDApO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUuZGlyX2xlZnQgZGl2LmFsaWduX2xlZnR7ZmxvYXQ6bGVmdDt9LmRodG1seE1lbnVfbWF0ZXJpYWxfTWlkZGxlLmRpcl9sZWZ0IGRpdi5hbGlnbl9yaWdodHtmbG9hdDpyaWdodDt9LmRoeG1lbnVfc2tpbl9kZXRlY3R7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDotMTAwcHg7bWFyZ2luOjA7cGFkZGluZzowO2JvcmRlcjowIHNvbGlkIHdoaXRlO3dpZHRoOjQwcHg7aGVpZ2h0OjEwcHg7b3ZlcmZsb3c6aGlkZGVuO31Aa2V5ZnJhbWVzIGRoeF9sb2FkZXJfcm90YXRlezEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO319QGtleWZyYW1lcyBkaHhfbG9hZGVyX2Rhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowO301MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1cHg7fTEwMCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNHB4O319LmRlZmF1bHRUcmVlVGFibGV7bWFyZ2luOjA7cGFkZGluZzowO2JvcmRlcjowO30uY29udGFpbmVyVGFibGVTdHlsZXtvdmVyZmxvdzphdXRvOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNoO3Bvc2l0aW9uOnJlbGF0aXZlO3RvcDowO2ZvbnQtc2l6ZToxMnB4Oy1raHRtbC11c2VyLXNlbGVjdDpub25lO30uY29udGFpbmVyVGFibGVTdHlsZVJUTCBzcGFue2RpcmVjdGlvbjpydGw7dW5pY29kZS1iaWRpOmJpZGktb3ZlcnJpZGU7fS5jb250YWluZXJUYWJsZVN0eWxlUlRMe2RpcmVjdGlvbjpydGw7b3ZlcmZsb3c6YXV0bztwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6MDtmb250LXNpemU6MTJweDt9LnN0YW5kYXJ0VHJlZVJvd3tmb250LWZhbWlseTpSb2JvdG8sQXJpYWwsSGVsdmV0aWNhO2ZvbnQtc2l6ZTo7LW1vei11c2VyLXNlbGVjdDpub25lO2xpbmUtaGVpZ2h0OjI0cHg7fS5zZWxlY3RlZFRyZWVSb3d7Zm9udC1mYW1pbHk6Um9ib3RvLEFyaWFsLEhlbHZldGljYTtmb250LXNpemU6Oy1tb3otdXNlci1zZWxlY3Q6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7Y29sb3I6IzM5Yzt9LmRoeHRyZWVfbWF0ZXJpYWwgLnNlbGVjdGVkVHJlZVJvd0Z1bGwgLmRoeFRleHRDZWxse2JhY2tncm91bmQtY29sb3I6I2VlZTtjb2xvcjojMzljO30uZHJhZ0FuZERyb3BSb3d7Y29sb3I6IzM5Yzt9LnN0YW5kYXJ0VHJlZVJvd19sb3J7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtiYWNrZ3JvdW5kLWNvbG9yOjtmb250LWZhbWlseTpSb2JvdG8sQXJpYWwsSGVsdmV0aWNhO2ZvbnQtc2l6ZTo7LW1vei11c2VyLXNlbGVjdDpub25lO30uc3RhbmRhcnRUcmVlSW1hZ2V7aGVpZ2h0OjI0cHg7b3ZlcmZsb3c6aGlkZGVuO2JvcmRlcjowO3BhZGRpbmc6MDttYXJnaW46MDtmb250LXNpemU6MXB4O30uc3RhbmRhcnRUcmVlSW1hZ2UgaW1ne3dpZHRoOjE4cHg7aGVpZ2h0OjI0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXIgY2VudGVyO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtib3JkZXI6MDtwYWRkaW5nOjA7bWFyZ2luOjA7Zm9udC1zaXplOjFweDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LWtodG1sLXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lOy1vLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTt9LmhpZGRlblJvd3t3aWR0aDoxcHg7b3ZlcmZsb3c6aGlkZGVuO30uZHJhZ1NwYW5EaXYsLmRyYWdTcGFuRGl2IHRke2ZvbnQtZmFtaWx5OlJvYm90byxBcmlhbCxIZWx2ZXRpY2E7Zm9udC1zaXplOjtsaW5lLWhlaWdodDo7dmVydGljYWwtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6d2hpdGU7ei1pbmRleDo5OTk7fS5kcmFnU3BhbkRpdiB0ZHtwYWRkaW5nOjVweDt9LmFfZGh4X2hpZGRlbl9pbnB1dHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTFweDtsZWZ0Oi0xcHg7d2lkdGg6MXB4O2hlaWdodDoxcHg7Ym9yZGVyOm5vbmU7YmFja2dyb3VuZDpub25lO30uYV9kaHhfaGlkZGVuX2lucHV0e3Bvc2l0aW9uOmFic29sdXRlO3RvcDotMXB4O2xlZnQ6LTFweDt3aWR0aDoxcHg7aGVpZ2h0OjFweDtib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOm5vbmU7fS5zZWxlY3Rpb25CYXJ7dG9wOjA7YmFja2dyb3VuZC1jb2xvcjpibGFjaztwb3NpdGlvbjphYnNvbHV0ZTtvdmVyZmxvdzpoaWRkZW47aGVpZ2h0OjJweDt6LWluZGV4OjExO30uaW50cmVlZWRpdFJvd3tmb250LXNpemU6OHB0O2hlaWdodDoxNnB4O2JvcmRlcjoxcHggc29saWQgc2lsdmVyO3BhZGRpbmc6MDttYXJnaW46MDttYXJnaW4tbGVmdDo0cHg7LW1vei11c2VyLXNlbGVjdDp0ZXh0Oy1raHRtbC11c2VyLXNlbGVjdDp0ZXh0O30uZGh4X3RyZWVfdGV4dFNpZ257Zm9udC1zaXplOjhwdDtmb250LWZhbWlseTptb25vc3BhY2U7d2lkdGg6MjFweDtjb2xvcjo7cGFkZGluZzowO21hcmdpbjowO2N1cnNvcjpwb2ludGVyO3RleHQtYWxpZ246Y2VudGVyO30uZGh4X3RyZWVfb3BhY2l0eXtvcGFjaXR5OjA7ZmlsdGVyOnByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYShvcGFjaXR5PTApOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh4X2JnX2ltZ19maXh7d2lkdGg6MThweDtoZWlnaHQ6MjRweDtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7YmFja2dyb3VuZC1wb3NpdGlvbi14OmNlbnRlcjtiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6Y2VudGVyO30uZGh4dHJlZV9za2luX2RldGVjdHtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOi0xMDBweDttYXJnaW46MDtwYWRkaW5nOjA7Ym9yZGVyOjAgc29saWQgd2hpdGU7d2lkdGg6NDBweDtoZWlnaHQ6MTBweDtvdmVyZmxvdzpoaWRkZW47fScsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7dmFyIGxheWFhaXJfZGVidWdfdmlldz17fTt3aW5kb3cubGF5YWFpcl9kZWJ1Z192aWV3PWxheWFhaXJfZGVidWdfdmlldyxsYXlhYWlyX2RlYnVnX3ZpZXcuaW5pdExheWFBaXJEZWJ1Z1ZpZXc9ZnVuY3Rpb24oZSl7ZS5zdHlsZS5ib3JkZXI9IjFweCBzb2xpZCBibGFjayI7dmFyIHQ9TWF0aC5taW4oMjUwLC4zKmUub2Zmc2V0V2lkdGgpLGk9JzxkaXYgY2xhc3M9InRvcC1iYW5uZXIiPlxuPC9kaXY+XG48ZGl2PlxuPGRpdiBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuOyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjNDQ0OyBwYWRkaW5nOjVweCI+XG48ZGl2IHN0eWxlPSJmbG9hdDpsZWZ0Ij5cbjxidXR0b24gaWQ9Im5vZGVfZnVuY3Rpb25hbGl0eV9jb250cm9sIj7lrqHmn6XlhYPntKA8L2J1dHRvbj5cbjxidXR0b24gaWQ9InJlZnJlc2hfY29udHJvbCI+5Yi35pawPC9idXR0b24+XG48L2Rpdj5cbjxkaXYgc3R5bGU9ImZsb2F0OnJpZ2h0Ij5cbjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InNob3dfY3VycmVudF9jYWNoZV9jb250cm9sIj7mmL7npLrlvZPliY1jYWNoZemHjee7mDwvaW5wdXQ+XG48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzaG93X2FsbF9jYWNoZV9jb250cm9sIj7mmL7npLrmiYDmnIljYWNoZeWMuuWfnzwvaW5wdXQ+XG48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzaG93X2F0bGFzX2NvbnRyb2wiPuaYvuekuuWkp+WbvuWQiOmbhjwvaW5wdXQ+XG48L2Rpdj5cbjwvZGl2PlxuPGRpdiBjbGFzcz0iaGdyb3VwIj5cbjxkaXYgc3R5bGU9ImZsb2F0OmxlZnQ7d2lkdGg6Jyt0KydweDsgYm9yZGVyLXJpZ2h0OjFweCBzb2xpZCBibGFjayIgaWQ9InRyZWVfY29udGFpbmVyIj48L2Rpdj5cbjxkaXYgc3R5bGU9Im92ZXJmbG93OmhpZGRlbiI+XG48ZGl2IGlkPSJjb250ZW50X3Rvb2xiYXIiIHN0eWxlPSJ3aWR0aDoxMDAlO21hcmdpbjoxMHB4Ij48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ2aXNpYmlsaXR5X2NvbnRyb2wiPuWPr+ingTwvaW5wdXQ+XG48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzaG93X2JvcmRlcl9jb250cm9sIj7mmL7npLrovrnmoYY8L2lucHV0PlxuPGJ1dHRvbiBpZD0ibG9nX2luZm9fY29udHJvbCI+5omT5Y2w5Yiw5o6n5Yi25Y+wPC9idXR0b24+XG48YnV0dG9uIGlkPSJlbmFibGVkX25vZGVfY2hhaW5fY29udHJvbCI+ZW5hYmxl6ZO+PC9idXR0b24+XG48YnV0dG9uIGlkPSJzaXplX2NoYWluX2NvbnRyb2wiPnNpemXpk748L2J1dHRvbj5cbjwvZGl2PjxkaXYgc3R5bGU9Im92ZXJmbG93OmF1dG8iPjx0YWJsZSBpZD0iY29udGVudF90YWJsZSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2NjY2NjYztib3JkZXItY29sbGFwc2U6Y29sbGFwc2UiPjwvdGFibGU+XG48L2Rpdj48L2Rpdj5cbjwvZGl2PlxuPC9kaXY+JztlLmlubmVySFRNTD1pLHRoaXMuY29udGFpbmVyPWUsdGhpcy50cmVlPW5ldyBkaHRtbFhUcmVlT2JqZWN0KHRyZWVfY29udGFpbmVyLCIxMDAlIiwiMTAwJSIsMCksbm9kZV9mdW5jdGlvbmFsaXR5X2NvbnRyb2wub25jbGljaz1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpLGxheWFhaXJfZGVidWdfdmlldy5vbl9pbnNwZWN0X2VsZW1lbnRfY2FsbGJhY2soKSxub2RlX2Z1bmN0aW9uYWxpdHlfY29udHJvbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9IiNGRkYiLG5vZGVfZnVuY3Rpb25hbGl0eV9jb250cm9sLnN0eWxlLmNvbG9yPSJyZ2IoMTA3LCAxNjMsIDI1NSkifX0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFRyZWU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudHJlZS5nZXRBbGxJdGVtc1dpdGhLaWRzKCkuc3BsaXQoIiwiKSxpPVtdLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIG89dFtuXSxyPXRoaXMudHJlZS5nZXRPcGVuU3RhdGUobyk7MT09ciYmaS5wdXNoKG8pfXRoaXMudHJlZS5kZWxldGVDaGlsZEl0ZW1zKDApLHRoaXMudHJlZS5wYXJzZShlLCJqc29uIik7Zm9yKHZhciBuPTA7bjxpLmxlbmd0aDtuKyspdGhpcy50cmVlLm9wZW5JdGVtKGlbbl0pfSxsYXlhYWlyX2RlYnVnX3ZpZXcucmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5jb250YWluZXIuc3R5bGUud2lkdGg9ZSsicHgiLHRoaXMuY29udGFpbmVyLnN0eWxlLmhlaWdodD10KyJweCI7dmFyIGk9dGhpcy5jb250YWluZXIub2Zmc2V0SGVpZ2h0LXRyZWVfY29udGFpbmVyLm9mZnNldFRvcDt0cmVlX2NvbnRhaW5lci5zdHlsZS5oZWlnaHQ9aSsicHgiLGNvbnRlbnRfdG9vbGJhci5zdHlsZS53aWR0aD1lLXRyZWVfY29udGFpbmVyLm9mZnNldFdpZHRoKyJweCIsY29udGVudF90YWJsZS5wYXJlbnRFbGVtZW50LnN0eWxlLmhlaWdodD1pLWNvbnRlbnRfdG9vbGJhci5vZmZzZXRIZWlnaHQtMjErInB4Iixjb250ZW50X3RhYmxlLnN0eWxlLndpZHRoPWUtdHJlZV9jb250YWluZXIub2Zmc2V0V2lkdGgtMTYrInB4In0sbGF5YWFpcl9kZWJ1Z192aWV3LmJvdW5jZVVwSW5zcGVjdEJ1dHRvbj1mdW5jdGlvbigpe25vZGVfZnVuY3Rpb25hbGl0eV9jb250cm9sLnN0eWxlLmJhY2tncm91bmRDb2xvcj0iYnV0dG9uZmFjZSIsbm9kZV9mdW5jdGlvbmFsaXR5X2NvbnRyb2wuc3R5bGUuY29sb3I9ImJsYWNrIn0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFZhbHVlSW5wdXRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMudmFsdWVfaW5wdXRfY2FsbGJhY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFZhbHVlQ2hhbmdlSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLnZhbHVlX2NoYW5nZV9jYWxsYmFjaz1lfSxsYXlhYWlyX2RlYnVnX3ZpZXcuYWRkQ29udGVudD1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpO3QuaW5uZXJIVE1MPSc8dGQgc3R5bGU9IndpZHRoOjEwMHB4O2ZvbnQtc2l6ZToxM3B4O2JvcmRlcjoxcHggc29saWQgI0NDQztwYWRkaW5nLWxlZnQ6MTBweCI+JytlLmtleSsnPC90ZD5cbjx0ZCBzdHlsZT0id2lkdGg6MjAwcHg7Ym9yZGVyOjFweCBzb2xpZCAjQ0NDOyI+PGlucHV0IHN0eWxlPSJib3JkZXI6bm9uZTt3aWR0aDoxMDAlO2hlaWdodDoyNXB4O3BhZGRpbmctbGVmdDoxMHB4OyIgdmFsdWU9JytlLnZhbHVlKyI+PC90ZD4iLGNvbnRlbnRfdGFibGUuYXBwZW5kQ2hpbGQodCk7dmFyIGk9dC5sYXN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQ7aS5kYXRhPWUsaS5vbmlucHV0PWZ1bmN0aW9uKGUpe3RoaXMudmFsdWVfaW5wdXRfY2FsbGJhY2smJnRoaXMudmFsdWVfaW5wdXRfY2FsbGJhY2soZS50YXJnZXQuZGF0YSxlLnRhcmdldC52YWx1ZSl9LmJpbmQodGhpcyksaS5vbmNoYW5nZT1mdW5jdGlvbihlKXt0aGlzLnZhbHVlX2NoYW5nZV9jYWxsYmFjayYmdGhpcy52YWx1ZV9jaGFuZ2VfY2FsbGJhY2soZS50YXJnZXQuZGF0YSxlLnRhcmdldC52YWx1ZSl9LmJpbmQodGhpcyl9LGxheWFhaXJfZGVidWdfdmlldy5zZXRDb250ZW50cz1mdW5jdGlvbihlKXtjb250ZW50X3RhYmxlLmlubmVySFRNTD0iIjtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIGk9ZVt0XTt0aGlzLmFkZENvbnRlbnQoaSl9fSxsYXlhYWlyX2RlYnVnX3ZpZXcuY2hhbmdlVmFsdWVBdD1mdW5jdGlvbihlLHQpe2NvbnRlbnRfdGFibGUuY2hpbGRyZW5bZV0ubGFzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZT10fSxsYXlhYWlyX2RlYnVnX3ZpZXcuY2hhbmdlVmFsdWVCeUxhYmVsPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPWNvbnRlbnRfdGFibGUuY2hpbGRyZW4ubGVuZ3RoLTE7aT49MDtpLS0paWYoY29udGVudF90YWJsZS5jaGlsZHJlbltpXS5maXJzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQ9PWUpe2NvbnRlbnRfdGFibGUuY2hpbGRyZW5baV0ubGFzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZT10O2JyZWFrfX0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFZpc2liaWxpdHk9ZnVuY3Rpb24oZSl7dmlzaWJpbGl0eV9jb250cm9sLmNoZWNrZWQ9ISFlfSxsYXlhYWlyX2RlYnVnX3ZpZXcuc2V0U2hvd0RlYnVnQm9yZGVyPWZ1bmN0aW9uKGUpe3Nob3dfYm9yZGVyX2NvbnRyb2wuY2hlY2tlZD0hIWV9LGxheWFhaXJfZGVidWdfdmlldy5nZXRWaXNpYmlsaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHZpc2liaWxpdHlfY29udHJvbC5jaGVja2VkfSxsYXlhYWlyX2RlYnVnX3ZpZXcuZ2V0U2hvd0RlYnVnQm9yZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHNob3dfYm9yZGVyX2NvbnRyb2wuY2hlY2tlZH0sbGF5YWFpcl9kZWJ1Z192aWV3LmdldFNob3dDdXJyZW50Q2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd19jdXJyZW50X2NhY2hlX2NvbnRyb2wuY2hlY2tlZH0sbGF5YWFpcl9kZWJ1Z192aWV3LmdldFNob3dBbGxDYWNoZT1mdW5jdGlvbigpe3JldHVybiBzaG93X2FsbF9jYWNoZV9jb250cm9sLmNoZWNrZWR9LGxheWFhaXJfZGVidWdfdmlldy5nZXRTaG93QXRsYXM9ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd19hdGxhc19jb250cm9sLmNoZWNrZWR9LGxheWFhaXJfZGVidWdfdmlldy5vbkluc3BlY3RFbGVtZW50PWZ1bmN0aW9uKGUpe3RoaXMub25faW5zcGVjdF9lbGVtZW50X2NhbGxiYWNrPWV9LGxheWFhaXJfZGVidWdfdmlldy5vbkxvZ0luZm89ZnVuY3Rpb24oZSl7bG9nX2luZm9fY29udHJvbC5vbmNsaWNrPWV9LGxheWFhaXJfZGVidWdfdmlldy5vblJlZnJlc2g9ZnVuY3Rpb24oZSl7cmVmcmVzaF9jb250cm9sLm9uY2xpY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uUHJpbnRFbmFibGVkTm9kZUNoYWluPWZ1bmN0aW9uKGUpe2VuYWJsZWRfbm9kZV9jaGFpbl9jb250cm9sLm9uY2xpY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uUHJpbnRTaXplQ2hhaW49ZnVuY3Rpb24oZSl7c2l6ZV9jaGFpbl9jb250cm9sLm9uY2xpY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uVG9nZ2xlVmlzaWJpbGl0eT1mdW5jdGlvbihlKXt2aXNpYmlsaXR5X2NvbnRyb2wub25jaGFuZ2U9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uVG9nZ2xlRGVidWdCb3JkZXI9ZnVuY3Rpb24oZSl7c2hvd19ib3JkZXJfY29udHJvbC5vbmNoYW5nZT1lfSxsYXlhYWlyX2RlYnVnX3ZpZXcub25Ub2dnbGVTaG93Q3VycmVudENhY2hlPWZ1bmN0aW9uKGUpe3Nob3dfY3VycmVudF9jYWNoZV9jb250cm9sLm9uY2hhbmdlPWV9LGxheWFhaXJfZGVidWdfdmlldy5vblRvZ2dsZVNob3dBbGxDYWNoZT1mdW5jdGlvbihlKXtzaG93X2FsbF9jYWNoZV9jb250cm9sLm9uY2hhbmdlPWV9LGxheWFhaXJfZGVidWdfdmlldy5vblRvZ2dsZVNob3dBdGxhcz1mdW5jdGlvbihlKXtzaG93X2F0bGFzX2NvbnRyb2wub25jaGFuZ2U9ZX07",e}(),AtlasTools=function(){function t(){this.mSprite=null,this.mIndex=0,this.mTextureDic={}}__class(t,"laya.debug.tools.AtlasTools");var e=t.prototype;return e.start=function(){Render.isWebGL&&(null==this.mSprite&&(this.mSprite=new Sprite),Laya.stage.addChild(this.mSprite),this.showNext())},e.end=function(){Render.isWebGL&&this.mSprite&&Laya.stage.removeChild(this.mSprite)},e.showNext=function(){if(Render.isWebGL){var t;null==this.mSprite&&(this.mSprite=new Sprite),Laya.stage.addChild(this.mSprite),this.mIndex++;var e,i=(t=laya.webgl.atlas.AtlasResourceManager.instance).getAtlaserCount();if(this.mIndex>=i&&(this.mIndex=0),this.mTextureDic[this.mIndex])e=this.mTextureDic[this.mIndex];else{var n=t.getAtlaserByIndex(this.mIndex);n&&n.texture&&(e=new Texture(n.texture,null),this.mTextureDic[this.mIndex]=e)}e&&(this.mSprite.graphics.clear(),this.mSprite.graphics.save(),this.mSprite.graphics.alpha(.9),this.mSprite.graphics.drawRect(0,0,1024,1024,"#efefefe"),this.mSprite.graphics.restore(),this.mSprite.graphics.drawTexture(e,0,0,1024,1024),this.mSprite.graphics.fillText((this.mIndex+1).toString()+"/"+i.toString(),25,100,"40px Arial","#ff0000","left"))}},t.getInstance=function(){return t.mInstance=t.mInstance||new t},t.mInstance=null,t}(),Base64Atlas=function(){function t(t,e){this.data=null,this.replaceO=null,this.idKey=null,this._loadedHandler=null,this.data=t,e||(e=Math.random()+"key"),this.idKey=e,this.init()}__class(t,"laya.debug.tools.Base64Atlas");var e=t.prototype;return e.init=function(){var t;for(t in this.replaceO={},this.data)this.replaceO[t]=this.idKey+"/"+t},e.getAdptUrl=function(t){return this.replaceO[t]},e.preLoad=function(t){this._loadedHandler=t,Laya.loader.load(Base64ImageTool.getPreloads(this.data),new Handler(this,this.preloadEnd))},e.preloadEnd=function(){var t;for(t in this.data){var e;e=Laya.loader.getRes(this.data[t]),Loader.cacheRes(this.replaceO[t],e)}this._loadedHandler&&this._loadedHandler.run()},e.replaceRes=function(t){ObjectTools.replaceValue(t,this.replaceO)},t}(),Base64ImageTool=function(){function e(){}return __class(e,"laya.debug.tools.Base64ImageTool"),e.getCanvasPic=function(t){t=t.bitmap;var e=Browser.createElement("canvas"),i=e.getContext("2d");return e.height=t.height,e.width=t.width,i.drawImage(t.source,0,0),e},e.getBase64Pic=function(t){return e.getCanvasPic(t).toDataURL("image/png")},e.getPreloads=function(t){var e,i;for(i in e=[],t)e.push({url:t[i],type:"image"});return e},e}(),Base64Tool=function(){function u(){}return __class(u,"laya.debug.tools.Base64Tool"),u.init=function(){if(!u.lookup){u.lookup=new Uint8Array(256);for(var t=0;t<u.chars.length;t++)u.lookup[u.chars.charCodeAt(t)]=t}},u.encode=function(t){var e=new Uint8Array(t),i=0,n=e.length,s="";for(i=0;i<n;i+=3)s+=u.chars[e[i]>>2],s+=u.chars[(3&e[i])<<4|e[i+1]>>4],s+=u.chars[(15&e[i+1])<<2|e[i+2]>>6],s+=u.chars[63&e[i+2]];return n%3==2?s=s.substring(0,s.length-1)+"=":n%3==1&&(s=s.substring(0,s.length-2)+"=="),s},u.encodeStr=function(t){var e;return(e=new Byte).writeUTFString(t),u.encodeByte(e)},u.encodeStr2=function(t){var e;return(e=new Byte).writeUTFBytes(t),u.encodeByte(e)},u.encodeByte=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=-1),i<0&&(i=t.length),u.encode(t.buffer.slice(e,i))},u.decodeToByte=function(t){return new Byte(u.decode(t))},u.decode=function(t){u.init();var e=.75*t.length,i=t.length,n=0,s=0,o=0,a=0,r=0,l=0;"="===t[t.length-1]&&(e--,"="===t[t.length-2]&&e--);var h=new ArrayBuffer(e),c=new Uint8Array(h);for(n=0;n<i;n+=4)o=u.lookup[t.charCodeAt(n)],a=u.lookup[t.charCodeAt(n+1)],r=u.lookup[t.charCodeAt(n+2)],l=u.lookup[t.charCodeAt(n+3)],c[s++]=o<<2|a>>4,c[s++]=(15&a)<<4|r>>2,c[s++]=(3&r)<<6|63&l;return h},u.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u.lookup=null,u}(),CacheAnalyser=function(){function n(){}__class(n,"laya.debug.tools.CacheAnalyser");var t=n.prototype;return t.renderCanvas=function(t,e){void 0===e&&(e=0),n.showCacheSprite&&(DebugInfoLayer.I.isDebugItem(t)||DebugTool.showDisBoundToSprite(t,DebugInfoLayer.I.cacheViewLayer,DebugConsts.CANVAS_REC_COLOR,4))},t.reCacheCanvas=function(t,e){var i;(void 0===e&&(e=0),n.showRecacheSprite)&&(DebugInfoLayer.I.isDebugItem(t)||((i=n.getNodeInfoByNode(t)).addCount(e),n.counter.addTime(t,e),i.parent||DebugInfoLayer.I.nodeRecInfoLayer.addChild(i)))},n.renderLoopBegin=function(){DebugInfoLayer.I.cacheViewLayer.graphics.clear()},n.getNodeInfoByNode=function(t){IDTools.idObj(t);var e;return e=IDTools.getObjID(t),n._nodeInfoDic[e]||(n._nodeInfoDic[e]=new ReCacheRecInfo),n._nodeInfoDic[e].setTarget(t),n._nodeInfoDic[e]},n._nodeInfoDic={},n.showCacheSprite=!1,n.showRecacheSprite=!0,__static(n,["counter",function(){return this.counter=new ObjTimeCountTool},"I",function(){return this.I=new n}]),n}(),CanvasTools=function(){function _(){}return __class(_,"laya.debug.tools.CanvasTools"),_.createCanvas=function(t,e){var i=new HTMLCanvas("2D");return i.getContext("2d"),i.size(t,e),i},_.renderSpriteToCanvas=function(t,e,i,n){RenderSprite.renders[t._renderType]._fun(t,e.context,i,n)},_.getImageDataFromCanvas=function(t,e,i,n,s){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),n<=0&&(n=t.width),s<=0&&(s=t.height),t.context.getImageData(e,i,n,s)},_.getImageDataFromCanvasByRec=function(t,e){return t.context.getImageData(e.x,e.y,e.width,e.height)},_.getDifferCount=function(t,e){var s=t.data,o=e.data,a=0;return a=0,_.walkImageData(t,function(t,e,i,n){_.isPoinSame(i,s,o)||a++}),a},_.getDifferRate=function(t,e){return _.getDifferCount(t,e)/(t.width*t.height)},_.getCanvasDisRec=function(t){var e,i;e=new Rectangle;var n=0,s=0,o=0,a=0;n=o=0,s=(i=_.getImageDataFromCanvas(t,0,0)).width,a=i.height;var r,l,h,c=0,u=0;r=i.width,l=i.height,h=i.data;var d=0;for(u=0;u<l;u++)for(c=0;c<r;c++)_.isEmptyPoint(h,d)||(c<s&&(s=c),n<c&&(n=c),u<a&&(a=u),o<u&&(o=u)),d+=4;return e.setTo(s,a,n-s+1,o-a+1),e},_.fillCanvasRec=function(t,e,i){var n=t.context;n.fillStyle=i,n.fillRect(e.x,e.y,e.width,e.height)},_.isEmptyPoint=function(t,e){return 0==t[e]&&0==t[e+1]&&0==t[e+2]&&0==t[e+3]},_.isPoinSame=function(t,e,i){return e[t]==i[t]&&e[t+1]==i[t+1]&&e[t+2]==i[t+2]&&e[t+3]==i[t+3]},_.walkImageData=function(t,e){var i,n,s=0,o=0;i=t.width,n=t.height;var a=0,r=t.data;for(s=0;s<i;s++)for(o=0;o<n;o++)e(s,o,a,r),a+=4},_.getSpriteByCanvas=function(t){var e;return(e=new Sprite).graphics.drawTexture(new Texture(t),0,0,t.width,t.height),e},_.renderSpritesToCanvas=function(t,e,i,n,s){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0);var o,a=0;for(o=e.length,a=s;a<o;a++)_.renderSpriteToCanvas(e[a],t,i,n)},_.clearCanvas=function(t){var e,i;e=t.width,i=t.height,t.size(e+1,i),t.size(e,i)},_.getImagePixels=function(t,e,i,n,s){void 0===s&&(s=4);var o;o=(t*i+e)*s;var a,r,l=0;for(r=[],a=s,l=0;l<a;l++)r.push(n[o+l]);return r},_}(),ClassTool=function(){function s(){}return __class(s,"laya.debug.tools.ClassTool"),s.defineProperty=function(t,e,i){Object.defineProperty(t,e,i)},s.getOwnPropertyDescriptor=function(t,e){return Object.getOwnPropertyDescriptor(t,e)},s.getOwnPropertyDescriptors=function(t){return Object.getOwnPropertyDescriptors(t)},s.getOwnPropertyNames=function(t){return Object.getOwnPropertyNames(t)},s.getObjectGetSetKeys=function(t,e){var i,n;for(n in e||(e=[]),i=laya.debug.tools.ClassTool.getOwnPropertyNames(t))0<=(n=i[n]).indexOf("_$get_")&&(n=n.replace("_$get_",""),e.push(n));return t.__proto__&&s.getObjectGetSetKeys(t.__proto__,e),e},s.getObjectDisplayAbleKeys=function(t,e){var i;for(i in e||(e=[]),t)typeof t[i],"_"!=i.charAt(0)&&e.push(i);return s.getObjectGetSetKeys(t,e),e=ObjectTools.getNoSameArr(e)},s.getClassName=function(t){return"function"==typeof t?t.name:t.constructor.name},s.getNodeClassAndName=function(t){return t?t.name?s.getClassName(t)+"("+t.name+")":s.getClassName(t):"null"},s.getClassNameByClz=function(t){return t.name},s.getClassByName=function(t){return Laya._runScript(t)},s.createObjByName=function(t){return new(s.getClassByName(t))},__static(s,["displayTypes",function(){return this.displayTypes={boolean:!0,number:!0,string:!0}}]),s}(),ClickSelectTool=function(){function e(){this.completeHandler=null,this.tSelectTar=null,this._selectTip=new Sprite,this._selectTip.setBounds(new Rectangle(0,0,0,0)),Notice.listen("ItemClicked",this,this.itemClicked)}__class(e,"laya.debug.tools.ClickSelectTool");var t=e.prototype;return t.beginClickSelect=function(t){this.completeHandler=t,e.isClickSelectState=!0,this.clickSelectChange()},t.clickSelectChange=function(){Browser.onPC&&(this.tSelectTar=null,this.clearSelectTip(),e.isClickSelectState?Laya.timer.loop(200,this,this.updateSelectTar,null,!0):Laya.timer.clear(this,this.updateSelectTar))},t.clearSelectTip=function(){this._selectTip.removeSelf()},t.updateSelectTar=function(){var t,e;(this.clearSelectTip(),this.tSelectTar=DisplayHook.instance.getDisUnderMouse(),this.tSelectTar)&&(DebugInfoLayer.I.isDebugItem(this.tSelectTar)||((t=this._selectTip.graphics).clear(),e=NodeUtils.getGRec(this.tSelectTar),DebugInfoLayer.I.popLayer.addChild(this._selectTip),t.drawRect(0,0,e.width,e.height,null,DebugConsts.CLICK_SELECT_COLOR,2),this._selectTip.pos(e.x,e.y)))},t.itemClicked=function(t){e.isClickSelectState&&(e.ignoreDebugTool&&DebugInfoLayer.I.isDebugItem(t)||t instanceof laya.debug.uicomps.ContextMenuItem||t.parent instanceof laya.debug.uicomps.ContextMenuItem||(DebugTool.showDisBound(t),this.completeHandler&&this.completeHandler.runWith(t),e.isClickSelectState=!1,this.clickSelectChange()))},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I}),e._I=null,e.isClickSelectState=!1,e.ignoreDebugTool=!1,e}(),ColorTool=function(){function e(){this.red=NaN,this.green=NaN,this.blue=NaN}return __class(e,"laya.debug.tools.ColorTool"),e.toHexColor=function(t){return Utils.toHexColor(t)},e.getRGBByRGBStr=function(t){"#"==t.charAt(0)&&(t=t.substr(1));var e=parseInt(t,16);t.length;return[(16711680&e)>>16,(65280&e)>>8,255&e]},e.getColorBit=function(t){var e;return e=1<(e=Math.floor(t).toString(16)).length?e:"0"+e},e.getRGBStr=function(t){return"#"+e.getColorBit(t[0])+e.getColorBit(t[1])+e.getColorBit(t[2])},e.traseHSB=function(t){console.log("hsb:",t[0],t[1],t[2])},e.rgb2hsb=function(t,e,i){var n=[t,e,i];n.sort(MathTools.sortNumSmallFirst);var s=n[2],o=n[0],a=0;return s==o?a=1:0==t&&0==e&&0==i||(s==t&&i<=e?a=60*(e-i)/(s-o)+0:s==t&&e<i?a=60*(e-i)/(s-o)+360:s==e?a=60*(i-t)/(s-o)+120:s==i&&(a=60*(t-e)/(s-o)+240)),[a,0==s?0:(s-o)/s,s/255]},e.hsb2rgb=function(t,e,i){var n=0,s=0,o=0,a=Math.floor(t/60%6),r=t/60-a,l=i*(1-e),h=i*(1-r*e),c=i*(1-(1-r)*e);switch(a){case 0:n=i,s=c,o=l;break;case 1:n=h,s=i,o=l;break;case 2:n=l,s=i,o=c;break;case 3:n=l,s=h,o=i;break;case 4:n=c,s=l,o=i;break;case 5:n=i,s=l,o=h}return[Math.floor(255*n),Math.floor(255*s),Math.floor(255*o)]},e}(),CountTool=function(){function t(){this.data={},this.preO={},this.changeO={},this.count=0}__class(t,"laya.debug.tools.CountTool");var e=t.prototype;return e.reset=function(){this.data={},this.count=0},e.add=function(t,e){void 0===e&&(e=1),this.count++,this.data.hasOwnProperty(t)||(this.data[t]=0),this.data[t]=this.data[t]+e},e.getKeyCount=function(t){return this.data.hasOwnProperty(t)||(this.data[t]=0),this.data[t]},e.getKeyChange=function(t){return this.changeO[t]?this.changeO[t]:0},e.record=function(){var t;for(t in this.changeO)this.changeO[t]=0;for(t in this.data)this.preO[t]||(this.preO[t]=0),this.changeO[t]=this.data[t]-this.preO[t],this.preO[t]=this.data[t]},e.getCount=function(t){var e,i=0;for(e in t)i+=t[e];return i},e.traceSelf=function(t){t||(t=this.data);var e;return e=this.getCount(t),console.log("total:"+e),"total:"+e+"\n"+TraceTool.traceObj(t)},e.traceSelfR=function(t){t||(t=this.data);var e;return e=this.getCount(t),console.log("total:"+e),"total:"+e+"\n"+TraceTool.traceObjR(t)},t}(),DebugConsts=function(){function t(){}return __class(t,"laya.debug.tools.DebugConsts"),t.CLICK_SELECT_COLOR="#ff0000",t.CANVAS_REC_COLOR="#FF00FF",t.RECACHE_REC_COLOR="#00ff00",t.SPRITE_REC_COLOR="#ff0000",t.SPRITE_REC_LINEWIDTH=2,t}(),DebugExport=function(){function i(){}return __class(i,"laya.debug.tools.DebugExport"),i.export=function(){var t,e;for(e in t=window,i._exportsDic)t[e]=i._exportsDic[e]},__static(i,["_exportsDic",function(){return this._exportsDic={DebugTool:DebugTool,Watcher:Watcher}}]),i}(),DifferTool=function(){function n(t,e){this.autoTrace=!0,this.sign="",this.obj=null,void 0===t&&(t=""),void 0===e&&(e=!0),this.sign=t,this.autoTrace=e}return __class(n,"laya.debug.tools.DifferTool"),n.prototype.update=function(t,e){e&&console.log(e);var i,n=ObjectTools.copyObj(t);return this.obj||(this.obj={}),i=ObjectTools.differ(this.obj,n),this.obj=n,this.autoTrace&&(console.log(this.sign+" differ:"),ObjectTools.traceDifferObj(i)),i},n.differ=function(t,e,i){return n._differO[t]||(n._differO[t]=new n(t,!0)),n._differO[t].update(e,i)},n._differO={},n}(),DisController=function(){function e(){this.arrowAxis=null,this._target=null,this.recInfo=null,e.init(),this.arrowAxis=new Axis,this.arrowAxis.mouseEnabled=!0}__class(e,"laya.debug.tools.DisController");var t=e.prototype;return t.switchType=function(){this.arrowAxis.switchType()},t.updateMe=function(){this._target&&(this.recInfo=RecInfo.getGlobalRecInfo(this._target,0,0,1,0,0,1),console.log("rotation:",this.recInfo.rotation),console.log("pos:",this.recInfo.x,this.recInfo.y),console.log("scale:",this.recInfo.width,this.recInfo.height),this.arrowAxis.x=this.recInfo.x,this.arrowAxis.y=this.recInfo.y,this.arrowAxis.rotation=this.recInfo.rotation,this.arrowAxis.yAxis.rotation=this.recInfo.rotationV-this.recInfo.rotation)},__getset(0,t,"target",function(){return this._target},function(t){(this._target=t)?(e._container.addChild(this.arrowAxis),Laya.timer.loop(100,this,this.updateMe)):(this.arrowAxis.removeSelf(),Laya.timer.clear(this,this.updateMe)),this.arrowAxis.target=t,this.updateMe()}),__getset(0,t,"type",function(){return this.arrowAxis.type},function(t){this.arrowAxis.type=t}),e.init=function(){e._container?DisControlTool.setTop(e._container):((e._container=new Sprite).mouseEnabled=!0,Laya.stage.addChild(e._container))},e._container=null,__static(e,["I",function(){return this.I=new e}]),e}(),DisControlTool=function(){function l(){}return __class(l,"laya.debug.tools.DisControlTool"),l.getObjectsUnderPoint=function(t,e,i,n,s){if(n=n||[],null!=s&&!s(t))return n;if(t.getBounds().contains(e,i)){n.push(t);var o=new Point;o.setTo(e,i),e=(o=t.fromParentPoint(o)).x,i=o.y;for(var a=t._childs.length-1;-1<a;a--){var r=t._childs[a];r instanceof laya.display.Sprite&&l.getObjectsUnderPoint(r,e,i,n,s)}}return n},l.getObjectsUnderGlobalPoint=function(t,e){var i=new Point;return i.setTo(Laya.stage.mouseX,Laya.stage.mouseY),t.parent&&(i=t.parent.globalToLocal(i)),l.getObjectsUnderPoint(t,i.x,i.y,null,e)},l.findFirstObjectsUnderGlobalPoint=function(){var t;if(!(t=l.getObjectsUnderGlobalPoint(Laya.stage)))return null;var e,i=0;for(i=t.length-1;0<=i;i--)if((e=t[i])&&e.numChildren<1)return e;return e},l.visibleAndEnableObjFun=function(t){return t.visible&&t.mouseEnabled},l.visibleObjFun=function(t){return t.visible},l.getMousePoint=function(t){var e=new Point;return e.setTo(Laya.stage.mouseX,Laya.stage.mouseY),e=t.globalToLocal(e)},l.isChildE=function(t,e){if(!t)return!1;for(;e;){if(e.parent==t)return!0;e=e.parent}return!1},l.isInTree=function(t,e){return t==e||l.isChildE(t,e)},l.setTop=function(t){var e;t&&t.parent&&(e=t.parent).setChildIndex(t,e.numChildren-1)},l.clearItemRelativeInfo=function(t){var e="NaN";t.getLayout().left=e,t.getLayout().right=e,t.getLayout().top=e,t.getLayout().bottom=e},l.swap=function(t,e){if(t!=e){var i;i=t.parent.getChildIndex(t);var n,s;n=e.parent.getChildIndex(e),s=e.parent,t.parent.addChildAt(e,i),s.addChildAt(t,n)}},l.insertToTarParent=function(t,e,i){void 0===i&&(i=!1);var n,s=0;t&&(n=t.parent)&&(s=n.getChildIndex(t),i&&s++,l.insertToParent(n,e,s))},l.insertToParent=function(t,e,i){if(void 0===i&&(i=-1),t){i<0&&(i=t.numChildren);var n,s=0;for(n=e.length,s=0;s<n;s++)l.transParent(e[s],t),t.addChildAt(e[s],i)}},l.transParent=function(t,e){var i,n;t&&e&&(t.parent&&(i=t.parent,n=new Point(t.x,t.y),n=i.localToGlobal(n),n=e.globalToLocal(n),t.pos(n.x,n.y)))},l.transPoint=function(t,e,i){return i=t.localToGlobal(i),i=e.globalToLocal(i)},l.removeItems=function(t){var e,i=0;for(e=t.length,i=0;i<e;i++)t[i].removeSelf()},l.addItems=function(t,e){var i,n=0;for(i=t.length,n=0;n<i;n++)e.addChild(t[n])},l.getAllChild=function(t){if(!t)return[];var e,i=0,n=[];for(e=t.numChildren,i=0;i<e;i++)n.push(t.getChildAt(i));return n},l.upDis=function(t){if(t&&t.parent){var e,i=0;(i=(e=t.parent).getChildIndex(t)+1)>=e.numChildren&&(i=e.numChildren-1),console.log("setChildIndex:"+i),e.setChildIndex(t,i)}},l.downDis=function(t){if(t&&t.parent){var e,i=0;(i=(e=t.parent).getChildIndex(t)-1)<0&&(i=0),console.log("setChildIndex:"+i),e.setChildIndex(t,i)}},l.setResizeAbleEx=function(t){var e;(e=t.getChildByName("resizeBtn"))&&SimpleResizer.setResizeAble(e,t)},l.setResizeAble=function(t){t.on("click",null,l.resizeHandler,[t])},l.resizeHandler=function(t){DisResizer.setUp(t)},l.setDragingItem=function(t,e){t.on("mousedown",null,l.dragingHandler,[e]),e.on("dragend",null,l.dragingEnd,[e])},l.dragingHandler=function(t){t&&t.startDrag()},l.dragingEnd=function(t){l.intFyDisPos(t),console.log(t.x,t.y)},l.showToStage=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=t.getBounds();t.x=Laya.stage.mouseX+e,t.y=Laya.stage.mouseY+i,t.x+n.width>Laya.stage.width&&(t.x-=n.width+e),t.y+n.height>Laya.stage.height&&(t.y-=n.height+i),l.intFyDisPos(t)},l.intFyDisPos=function(t){t&&(t.x=Math.round(t.x),t.y=Math.round(t.y))},l.showOnly=function(t,e){var i,n=0;for(i=t.length,n=0;n<i;n++)t[n].visible=t[n]==e},l.showOnlyByIndex=function(t,e){l.showOnly(t,t[e])},l.addOnly=function(t,e,i){var n,s=0;for(n=t.length,s=0;s<n;s++)t[s]!=e?t[s].removeSelf():i.addChild(t[s])},l.addOnlyByIndex=function(t,e,i){l.addOnly(t,t[e],i)},__static(l,["tempP",function(){return this.tempP=new Point}]),l}(),DisplayHook=function(){function u(){this.mouseX=NaN,this.mouseY=NaN,this._stage=null,this._target=null,this.isGetting=!1,this._matrix=new Matrix,this._point=new Point,this._rect=new Rectangle,this._event=Event.EMPTY,this._stage=Laya.stage,this.init(Render.context.canvas)}__class(u,"laya.debug.tools.DisplayHook");var t=u.prototype;return t.init=function(t){var s=this;Browser.window.navigator.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none");var o=this;function a(t,e){o._event._stoped=!1,o._event.nativeEvent=e||t,o._target=null,t.offsetX?(o.mouseX=t.offsetX,o.mouseY=t.offsetY):(o.mouseX=t.clientX-Laya.stage.offset.x,o.mouseY=t.clientY-Laya.stage.offset.y)}Browser.document.addEventListener("mousedown",function(t){s._event._stoped=!1,u.isFirst=!0,o.check(o._stage,t.offsetX,t.offsetY,o.onMouseDown,!0,!1)},!0),Browser.document.addEventListener("touchstart",function(t){s._event._stoped=!1,u.isFirst=!0;for(var e=t.changedTouches,i=0,n=e.length;i<n;i++){a(e[i],t),o.check(o._stage,o.mouseX,o.mouseY,o.onMouseDown,!0,!1)}},!0)},t.onMouseMove=function(t,e){this.sendEvent(t,"mousemove")},t.onMouseUp=function(t,e){e&&this.sendEvent(t,"mouseup")},t.onMouseDown=function(t,e){e&&(t.$_MOUSEDOWN=!0,this.sendEvent(t,"mousedown"))},t.sendEvent=function(t,e){this._event._stoped||(t.event(e,this._event.setTo(e,t,t)),"mouseup"===e&&t.$_MOUSEDOWN&&(t.$_MOUSEDOWN=!1,t.event("click",this._event.setTo("click",t,t))))},t.selectDisUnderMouse=function(){u.isFirst=!0,this.check(Laya.stage,Laya.stage.mouseX,Laya.stage.mouseY,null,!0,!1),SelectInfosView.I.setSelectTarget(DebugTool.target)},t.getDisUnderMouse=function(){return this.isGetting=!0,u.isFirst=!0,DebugTool.target=null,this.check(Laya.stage,Laya.stage.mouseX,Laya.stage.mouseY,null,!0,!1),this.isGetting=!1,DebugTool.target},t.check=function(t,e,i,n,s,o){if(t==DebugTool.debugLayer)return!1;if(t==DebugInfoLayer.I)return!1;if(this.isGetting&&t==DebugInfoLayer.I)return!1;if(!t.visible||t.getSelfBounds().width<=0)return!1;var a=!1,r=!!0;if(s&&(this._rect=t.getBounds(),a=this._rect.contains(e,i),this._point.setTo(e,i),t.fromParentPoint(this._point),e=this._point.x,i=this._point.y),a){for(var l=!1,h=t._childs.length-1;-1<h;h--){var c=t._childs[h];if(l=this.check(c,e,i,n,s,!0))break}r=t.getGraphicBounds().contains(e,i),(a=l||r)&&!l&&u.isFirst&&(u.isFirst=!1,t instanceof laya.debug.tools.debugUI.DButton||(DebugTool.target=t,this.isGetting||(DebugTool.autoWork(),Notice.notify("ItemClicked",t))))}return a},u.initMe=function(){u.instance||(u.instance=new u)},u.ITEM_CLICKED="ItemClicked",u.instance=null,u.isFirst=!1,u}(),DTrace=function(){function i(){}return __class(i,"laya.debug.tools.DTrace"),i.getArgArr=function(t){var e;e=[];var i=0,n=t.length;for(i=0;i<n;i++)e.push(t[i]);return e},i.dTrace=function(t){var e=arguments;(e=i.getArgArr(e)).push(TraceTool.getCallLoc(2)),console.log.apply(console,e),e.join(" ")},i.timeStart=function(t){console.time(t)},i.timeEnd=function(t){console.timeEnd(t)},i.traceTable=function(t){console.table(t)},i}(),ClassCreateHook=function(){function o(){this.createInfo={}}__class(o,"laya.debug.tools.enginehook.ClassCreateHook");var t=o.prototype;return t.hookClass=function(e){var i=this;if(!o.isInited){o.isInited=!0;FunHook.hook(e,"call",function(t){i.classCreated(t,e)})}},t.classCreated=function(t,e){var i;i=ClassTool.getNodeClassAndName(t);var n,s=0;for(n=t;n&&n!=e;)n=n.__super,s++;o.I.createInfo[i]||(o.I.createInfo[i]=0),o.I.createInfo[i]=o.I.createInfo[i]+1,RunProfile.run(i,s+6)},t.getClassCreateInfo=function(t){var e;return e=ClassTool.getClassName(t),RunProfile.getRunInfo(e)},o.isInited=!1,__static(o,["I",function(){return this.I=new o}]),o}(),RenderSpriteHook=function(){function n(){}__class(n,"laya.debug.tools.enginehook.RenderSpriteHook");var t=n.prototype;return t.createRenderSprite=function(t,e){var i;return i=n._preCreateFun(t,e),16==t&&(i._oldCanvas=i._fun,i._fun=n.I._canvas),i},t._canvas=function(t,e,i,n){if(SpriteRenderForVisibleAnalyse.allowRendering){var s=t._$P.cacheCanvas,o=this._next;if(s&&!SpriteRenderForVisibleAnalyse.isVisibleTesting){var a;a=Browser.now();var r=s.ctx,l=t._needRepaint()||!r;this._oldCanvas(t,e,i,n),Config.showCanvasMark,l?CacheAnalyser.I.reCacheCanvas(t,Browser.now()-a):CacheAnalyser.I.renderCanvas(t,Browser.now()-a)}else o._fun.call(o,t,e,i,n)}},n.init=function(){n.I||(n.I=new n,n._preCreateFun=RunDriver.createRenderSprite,RunDriver.createRenderSprite=n.I.createRenderSprite)},n.IMAGE=1,n.FILTERS=2,n.ALPHA=4,n.TRANSFORM=8,n.CANVAS=16,n.BLEND=32,n.CLIP=64,n.STYLE=128,n.GRAPHICS=256,n.CUSTOM=512,n.ENABLERENDERMERGE=1024,n.CHILDS=2048,n.INIT=69905,n.renders=[],n.I=null,n._preCreateFun=null,n}(),SpriteRenderForVisibleAnalyse=function(){function s(){this._repaint=1,this._renderType=1,this._x=0,this._y=0,this.target=null,this.isTargetRenderd=!1,this.preFun=null,this._next=null,this.pgraphic=RenderSprite.prototype._graphics,this.pimage=RenderSprite.prototype._image,this.pimage2=RenderSprite.prototype._image2}__class(s,"laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse");var t=s.prototype;return t.setRenderHook=function(){Sprite.prototype.render=s.I.render},t.render=function(t,e,i){if(this,!DebugInfoLayer.I.isDebugItem(this))if(this==laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.target&&(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering=!0,laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.isTargetRenderd=!0,CanvasTools.clearCanvas(s.mainCanvas)),RenderSprite.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this==laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.target)s.tarRec=CanvasTools.getCanvasDisRec(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.mainCanvas),console.log("rec",s.tarRec.toString()),0<s.tarRec.width&&0<s.tarRec.height?(s.isTarRecOK=!0,s.preImageData=CanvasTools.getImageDataFromCanvasByRec(s.mainCanvas,s.tarRec),s.tarImageData=CanvasTools.getImageDataFromCanvasByRec(s.mainCanvas,s.tarRec)):console.log("tarRec Not OK:",s.tarRec);else if(s.isTarRecOK){s.tImageData=CanvasTools.getImageDataFromCanvasByRec(s.mainCanvas,s.tarRec);var n;n=CanvasTools.getDifferRate(s.preImageData,s.tImageData),s.preImageData=s.tImageData,0<n&&VisibleAnalyser.addCoverNode(this,n)}},t.analyseNode=function(t){VisibleAnalyser.resetCoverList(),Sprite.prototype.render!=s.I.render&&(this.preFun=Sprite.prototype.render),this.target=t,Sprite.prototype.render=this.render,s.tarCanvas||(s.tarCanvas=CanvasTools.createCanvas(Laya.stage.width,Laya.stage.height)),s.mainCanvas||(s.mainCanvas=CanvasTools.createCanvas(Laya.stage.width,Laya.stage.height)),this.isTargetRenderd=!1,s.isVisibleTesting=!0,s.allowRendering=!1,CanvasTools.clearCanvas(s.mainCanvas),CanvasTools.clearCanvas(s.tarCanvas),s.isTarRecOK=!1;var e=new RenderContext(s.mainCanvas.width,s.mainCanvas.height,s.mainCanvas);s.mainCanvas=e.canvas,this.render.call(Laya.stage,e,0,0),s.coverRate=s.isTarRecOK?CanvasTools.getDifferRate(s.preImageData,s.tarImageData):0,VisibleAnalyser.coverRate=s.coverRate,VisibleAnalyser.isTarRecOK=s.isTarRecOK,console.log("coverRate:",s.coverRate),this.isTargetRenderd=!1,s.isVisibleTesting=!1,s.allowRendering=!0,Sprite.prototype.render=this.preFun},t.noRenderMode=function(){},t.normalMode=function(){RenderSprite.prototype._graphics=this.pgraphic,RenderSprite.prototype._image=this.pimage,RenderSprite.prototype._image2=this.pimage2},t.inits=function(){this.noRenderMode()},t.m_graphics=function(t,e,i,n){if(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){var s=t._style._tf;t._graphics&&t._graphics._render(t,e,i-s.translateX,n-s.translateY)}var o=this._next;o._fun.call(o,t,e,i,n)},t.m_image=function(t,e,i,n){if(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){var s=t._style;e.ctx.drawTexture2(i,n,s._tf.translateX,s._tf.translateY,t.transform,s.alpha,s.blendMode,t._graphics._one)}},t.m_image2=function(t,e,i,n){if(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){var s=t._style._tf;e.ctx.drawTexture2(i,n,s.translateX,s.translateY,t.transform,1,null,t._graphics._one)}},s.tarCanvas=null,s.mainCanvas=null,s.preImageData=null,s.tImageData=null,s.tarImageData=null,s.tarRec=null,s.isTarRecOK=!1,s.isVisibleTesting=!1,s.allowRendering=!0,s.coverRate=NaN,__static(s,["I",function(){return this.I=new s}]),s}(),SpriteRenderHook=function(){function t(){this._repaint=1,this._renderType=1,this._x=0,this._y=0}return __class(t,"laya.debug.tools.enginehook.SpriteRenderHook"),t.prototype.render=function(t,e,i){this==Laya.stage&&CacheAnalyser.renderLoopBegin();var n;n=Browser.now(),Stat.spriteCount++,this.ShowBorderSign&&DebugTool.showDisBoundToSprite(this,DebugInfoLayer.I.cacheViewLayer,DebugConsts.SPRITE_REC_COLOR,DebugConsts.SPRITE_REC_LINEWIDTH),RenderSprite.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this._repaint=0,RenderAnalyser.I.render(this,Browser.now()-n)},t.init=function(){t.I||(t.I=new t,t.setRenderHook())},t.setRenderHook=function(){Sprite.prototype.render=t.I.render},t.showDisplayBorder=function(t,e){void 0===e&&(e=!0),t.ShowBorderSign=e},t.isDisplayShowBorder=function(t){return t.ShowBorderSign},t.I=null,t.ShowBorderSign="ShowBorderSign",t}(),FunHook=function(){function s(){}return __class(s,"laya.debug.tools.hook.FunHook"),s.hook=function(t,e,i,n){s.hookFuns(t,e,[i,t[e],n],1)},s.hookAllFun=function(t){var e,i;for(e in i=ClassTool.getOwnPropertyNames(t))e=i[e],s.special[e]||(console.log("try hook:",e),"function"==typeof t[e]&&(console.log("hook:",e),s.hookFuns(t,e,[s.getTraceMsg("call:"+e),t[e]],1)));t.__proto__?s.hookAllFun(t.__proto__):console.log("end:",t)},s.getTraceMsg=function(t){return function(){console.log(t)}},s.hookFuns=function(t,e,o,a){void 0===a&&(a=-1);var i,n=t[e];(i=function(t){var e,i,n=arguments,s=0;for(i=o.length,s=0;s<i;s++)o[s]&&(s==a?e=o[s].apply(this,n):o[s].apply(this,n));return e}).pre=n,t[e]=i},s.removeHook=function(t,e){null!=t[e].pre&&(t[e]=t[e].pre)},s.debugHere=function(){},s.traceLoc=function(t,e){void 0===t&&(t=0),void 0===e&&(e=""),console.log(e,"fun loc:",TraceTool.getCallLoc(3+t))},s.getLocFun=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=""),t+=1,function(){s.traceLoc(t,e)}},__static(s,["special",function(){return this.special={length:!0,name:!0,arguments:!0,caller:!0,prototype:!0,is:!0,isExtensible:!0,isFrozen:!0,isSealed:!0,preventExtensions:!0,seal:!0,unobserve:!0,apply:!0,call:!0,bind:!0,freeze:!0,unobserve:!0}}]),s}(),VarHook=function(){function t(){}return __class(t,"laya.debug.tools.hook.VarHook"),t.hookVar=function(t,e,i,n){i||(i=[]),n||(n=[]);var s,o=t,a=t[e],r={},l=function(t){console.log("var hook set "+e+":",t),a=t},h=function(){return console.log("var hook get"+e+":",a),a};if(s=ClassTool.getOwnPropertyDescriptor(t,e))return r.set=l,r.get=h,r.enumerable=s.enumerable,i.push(r.set),n.push(r.get),FunHook.hookFuns(r,"set",i),FunHook.hookFuns(r,"get",n,n.length-1),void ClassTool.defineProperty(t,e,r);for(;!s&&t.__proto__;)t=t.__proto__,s=ClassTool.getOwnPropertyDescriptor(t,e);s&&(r.set=s.set?s.set:l,r.get=s.get?s.get:h,r.enumerable=s.enumerable,i.push(r.set),n.push(r.get),FunHook.hookFuns(r,"set",i),FunHook.hookFuns(r,"get",n,n.length-1),ClassTool.defineProperty(o,e,r)),s||(console.log("get des fail add directly"),r.set=l,r.get=h,i.push(r.set),n.push(r.get),FunHook.hookFuns(r,"set",i),FunHook.hookFuns(r,"get",n,n.length-1),ClassTool.defineProperty(t,e,r))},t.getLocFun=function(t,e){return void 0===t&&(t=""),void 0===e&&(e=0),e+=1,function(){FunHook.traceLoc(e,t)}},t}(),IDTools=function(){function i(){this.tID=1}return __class(i,"laya.debug.tools.IDTools"),i.prototype.getID=function(){return this.tID++},i.getAID=function(){return i._ID.getID()},i.idObjE=function(t,e){return void 0===e&&(e="default"),t._M_id_||(e||(e="default"),i._idDic[e]||(i._idDic[e]=new i),t._M_id_=i._idDic[e].getAID()),t},i.setObjID=function(t,e){return t._M_id_=e,t},i.idObj=function(t){return t._M_id_||(t._M_id_=i.getAID()),t},i.getObjID=function(t){return t?t._M_id_:-1},i.idSign="_M_id_",__static(i,["_ID",function(){return this._ID=new i},"_idDic",function(){return this._idDic={default:new i}}]),i}(),JsonTool=function(){function f(){}return __class(f,"laya.debug.tools.JsonTool"),f.getJsonString=function(t,e,i,n,s){void 0===e&&(e=!0),void 0===i&&(i="\n"),void 0===n&&(n=0),void 0===s&&(s=4);var o,a,r,l,h="";for(a in h=f.getEmptyStr(n*s),o={},l=[],t)l.push(a),r=t[a],f.singleLineKey[a]?o[a]=f.getValueStr(r,!0,i,n+1,s):o[a]=f.getValueStr(r,e,i,n+1,s);var c,u,d,_=0;for(c=l.length,l.sort(),l=l.reverse(),u=f.getEmptyStr((n+1)*s),e&&(u=h=i=""),d=[],_=0;_<c;_++)a=l[_],d.push(u+f.wrapValue(a)+":"+o[a]);return"{"+i+d.join(","+i)+i+h+"}"},f.wrapValue=function(t,e){return void 0===e&&(e='"'),e+t+e},f.getArrStr=function(t,e,i,n,s){void 0===e&&(e=!0),void 0===i&&(i="\n"),void 0===n&&(n=0),void 0===s&&(s=4);var o,a,r=0;for(o=t.length,a=[],r=0;r<o;r++)a.push(f.getValueStr(t[r],e,i,n+1,s));var l="";return l=f.getEmptyStr((n+1)*s),e&&(l=i=""),"["+i+l+a.join(","+i+l)+"]"},f.quote=function(t){return f.escapable.lastIndex=0,f.escapable.test(t)?'"'+t.replace(f.escapable,function(t){var e=f.meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'},f.getValueStr=function(t,e,i,n,s){return void 0===e&&(e=!0),void 0===i&&(i="\n"),void 0===n&&(n=0),void 0===s&&(s=0),"string"==typeof t?f.quote(t):null==t?"null":"number"==typeof t||"number"==typeof t&&Math.floor(t)==t||"boolean"==typeof t?t:t instanceof Array?f.getArrStr(t,e,i,n,s):"object"==typeof t?f.getJsonString(t,e,i,n,s):t},f.getEmptyStr=function(t){if(!f.emptyDic.hasOwnProperty(t)){var e,i,n=0;for(e=t,i="",n=0;n<e;n++)i+=" ";f.emptyDic[t]=i}return f.emptyDic[t]},f.emptyDic={},__static(f,["singleLineKey",function(){return this.singleLineKey={props:!0}},"escapable",function(){return this.escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g},"meta",function(){return this.meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}}]),f}(),JSTools=function(){function o(){}return __class(o,"laya.debug.tools.JSTools"),o.showToBody=function(t,e,i){var n;void 0===e&&(e=0),void 0===i&&(i=0),Browser.document.body.appendChild(t),(n=t.style).position="absolute",n.top=i+"px",n.left=e+"px"},o.showToParent=function(t,e,i,n){var s;void 0===e&&(e=0),void 0===i&&(i=0),n.appendChild(t),(s=t.style).position="absolute",s.top=i+"px",s.left=e+"px"},o.addToBody=function(t){Browser.document.body.appendChild(t)},o.setPos=function(t,e,i){var n;(n=t.style).top=i+"px",n.left=e+"px"},o.setSize=function(t,e,i){var n;(n=t.style).width=e+"px",n.height=i+"px"},o.setTransform=function(t,e){var i;(i=t.style).transformOrigin=i.webkitTransformOrigin=i.msTransformOrigin=i.mozTransformOrigin=i.oTransformOrigin="0px 0px 0px",i.transform=i.webkitTransform=i.msTransform=i.mozTransform=i.oTransform="matrix("+e.toString()+")"},o.noMouseEvent=function(t){t.style["pointer-events"]="none"},o.setMouseEnable=function(t,e){t.style["pointer-events"]=e?"auto":"none"},o.setZIndex=function(t,e){t.style["z-index"]=e},o.showAboveSprite=function(t,e,i,n){var s;void 0===i&&(i=0),void 0===n&&(n=0),s=new Point,(s=e.localToGlobal(s)).x+=i,s.y+=n,s.x+=Laya.stage.offset.x,s.y+=Laya.stage.offset.y,o.showToBody(t,s.x,s.y)},o.removeElement=function(t){Browser.removeElement(t)},o.isElementInDom=function(t){return t&&t.parentNode},o.getImageSpriteByFile=function(t,i,n){var s,o;return void 0===i&&(i=0),void 0===n&&(n=0),(s=new FileReader).readAsDataURL(t),o=new Sprite,s.onload=function(t){var e;(e=new Texture).load(s.result),o.graphics.drawTexture(e,0,0,i,n)},o},o.getPixelRatio=function(){if(0<o._pixelRatio)return o._pixelRatio;var t=Browser.createElement("canvas").getContext("2d"),e=(Browser.window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);return console.log("pixelRatioc:",e),o._pixelRatio=e},o._pixelRatio=-1,o}(),MathTools=function(){function s(){}return __class(s,"laya.debug.tools.MathTools"),s.sortBigFirst=function(t,e){return t==e?0:t<e?1:-1},s.sortSmallFirst=function(t,e){return t==e?0:t<e?-1:1},s.sortNumBigFirst=function(t,e){return parseFloat(e)-parseFloat(t)},s.sortNumSmallFirst=function(t,e){return parseFloat(t)-parseFloat(e)},s.sortByKey=function(i,t,e){var n;return void 0===t&&(t=!1),void 0===e&&(e=!0),n=t?e?s.sortNumBigFirst:s.sortBigFirst:e?s.sortNumSmallFirst:s.sortSmallFirst,function(t,e){return n(t[i],e[i])}},s}(),MouseEventAnalyser=function(){function g(){}return __class(g,"laya.debug.tools.MouseEventAnalyser"),g.analyseNode=function(t){var e,i,n;for(DebugTool.showDisBound(t,!0),e=t,ObjectTools.clearObj(g.infoO),ObjectTools.clearObj(g.nodeO),ObjectTools.clearObj(g.hitO),i=[];t;)IDTools.idObj(t),g.nodeO[IDTools.getObjID(t)]=t,i.push(t),t=t.parent;g.check(Laya.stage,Laya.stage.mouseX,Laya.stage.mouseY,null),n=g.hitO[IDTools.getObjID(e)]?(console.log("can hit"),"can hit"):(console.log("can't hit"),"can't hit");var s,o,a,r=0;for(s=(i=i.reverse()).length,o=["[分析对象]:"+ClassTool.getNodeClassAndName(e)+":"+n],r=0;r<s;r++)t=i[r],g.hitO[IDTools.getObjID(t)]?(console.log("can hit:",ClassTool.getNodeClassAndName(t)),console.log("原因:",g.infoO[IDTools.getObjID(t)]),o.push("can hit: "+ClassTool.getNodeClassAndName(t)),o.push("原因: "+g.infoO[IDTools.getObjID(t)])):(console.log("can't hit:"+ClassTool.getNodeClassAndName(t)),console.log("原因:",g.infoO[IDTools.getObjID(t)]?g.infoO[IDTools.getObjID(t)]:"鼠标事件在父级已停止派发"),o.push("can't hit: "+ClassTool.getNodeClassAndName(t)),o.push("原因: "+(g.infoO[IDTools.getObjID(t)]?g.infoO[IDTools.getObjID(t)]:"鼠标事件在父级已停止派发")));a=o.join("\n"),ToolPanel.I.showTxtInfo(a)},g.check=function(t,e,i,n){IDTools.idObj(t);var s;s=g.nodeO[IDTools.getObjID(t)],g._point.setTo(e,i),t.fromParentPoint(g._point),e=g._point.x,i=g._point.y;var o=t.scrollRect;if(o){g._rect.setTo(o.x,o.y,o.width,o.height);var a=g._rect.contains(e,i);if(!a)return s&&(g.infoO[IDTools.getObjID(t)]="scrollRect没有包含鼠标"+g._rect.toString()+":"+e+","+i),!1}var r,l,h,c,u=0;for(r=(l=t._childs).length,c=null,u=0;u<r;u++)if(h=l[u],IDTools.idObj(h),g.nodeO[IDTools.getObjID(h)]){c=h;break}var d=!1;d=!!c;if(t.hitTestPrior&&!t.mouseThrough&&!g.hitTest(t,e,i))return g.infoO[IDTools.getObjID(t)]="hitTestPrior=true，宽高区域不包含鼠标::"+e+","+i+" size:"+t.width+","+t.height,!1;for(u=t._childs.length-1;-1<u;u--)if((h=t._childs[u])==c&&(c.mouseEnabled||(g.infoO[IDTools.getObjID(c)]="mouseEnabled=false"),c.visible||(g.infoO[IDTools.getObjID(c)]="visible=false"),d=!1),h.mouseEnabled&&h.visible){if(g.check(h,e,i,n))return g.hitO[IDTools.getObjID(t)]=!0,g.infoO[IDTools.getObjID(t)]="子对象被击中",h==c?g.infoO[IDTools.getObjID(t)]="子对象被击中,击中对象在分析链中":(g.infoO[IDTools.getObjID(t)]="子对象被击中,击中对象不在分析链中",d&&(g.infoO[IDTools.getObjID(c)]="被兄弟节点挡住,兄弟节点信息:"+ClassTool.getNodeClassAndName(h)+","+h.getBounds().toString(),DebugTool.showDisBound(h,!1,"#ffff00"))),!0;h==c&&(d=!1)}var _,f=new Rectangle;if(_=t.getGraphicBounds().contains(e,i),0<t.width&&0<t.height){var p=g._rect;t.mouseThrough?(a=_,f.copyFrom(t.getGraphicBounds())):(t.hitArea?p=t.hitArea:p.setTo(0,0,t.width,t.height),f.copyFrom(p),a=p.contains(e,i)),a&&(g.hitO[IDTools.getObjID(t)]=!0)}return g.infoO[IDTools.getObjID(t)]=a?"自身区域被击中":_?"子对象未包含鼠标，实际绘图区域包含鼠标，设置的宽高区域不包含鼠标::"+e+","+i+" hitRec:"+f.toString()+" graphicBounds:"+t.getGraphicBounds().toString()+"，设置mouseThrough=true或将宽高设置到实际绘图区域可解决问题":"子对象未包含鼠标，实际绘图区域不包含鼠标，设置的宽高区域不包含鼠标::"+e+","+i+" hitRec:"+f.toString()+" graphicBounds:"+t.getGraphicBounds().toString(),a},g.hitTest=function(t,e,i){var n=!1;if(t.hitArea instanceof laya.utils.HitArea)return t.hitArea.isHit(e,i);if(0<t.width&&0<t.height||t.mouseThrough||t.hitArea){var s=g._rect;n=t.mouseThrough?t.getGraphicBounds().contains(e,i):(t.hitArea?s=t.hitArea:s.setTo(0,0,t.width,t.height),s.contains(e,i))}return n},g.infoO={},g.nodeO={},g.hitO={},__static(g,["_matrix",function(){return this._matrix=new Matrix},"_point",function(){return this._point=new Point},"_rect",function(){return this._rect=new Rectangle}]),g}(),ObjectTools=function(){function o(){}return __class(o,"laya.debug.tools.ObjectTools"),o.getFlatKey=function(t,e){return""==t?e:t+o.sign+e},o.flatObj=function(t,e,i){var n;for(n in void 0===i&&(i=""),e=e||{},t)"object"==typeof t[n]?o.flatObj(t[n],e,o.getFlatKey(i,n)):(t[n],e[o.getFlatKey(i,n)]=t[n]);return e},o.recoverObj=function(t){var e,i={};for(e in t)o.setKeyValue(i,e,t[e]);return i},o.differ=function(t,e){var i;t=o.flatObj(t),e=o.flatObj(e);var n={};for(i in t)e.hasOwnProperty(i)||(n[i]="被删除");for(i in e)e[i]!=t[i]&&(n[i]={pre:t[i],now:e[i]});return n},o.traceDifferObj=function(t){var e,i;for(e in t)"string"==typeof t[e]?console.log(e+":",t[e]):(i=t[e],console.log(e+":","now:",i.now,"pre:",i.pre))},o.setKeyValue=function(t,e,i){if(0<=e.indexOf(o.sign)){for(var n,s=e.split(o.sign);1<s.length;)if(t[n=s.shift()]||(t[n]={},console.log("addKeyObj:",n)),!(t=t[n]))return void console.log("wrong flatKey:",e);t[s.shift()]=i}else t[e]=i},o.clearObj=function(t){var e;for(e in t)delete t[e]},o.copyObjFast=function(t){var e;return e=laya.debug.tools.ObjectTools.getJsonString(t),laya.debug.tools.ObjectTools.getObj(e)},o.copyObj=function(t){if(t instanceof Array)return o.copyArr(t);var e,i={};for(e in t)null===t[e]||void 0===t[e]?i[e]=t[e]:t[e]instanceof Array?i[e]=o.copyArr(t[e]):"object"==typeof t[e]?i[e]=o.copyObj(t[e]):i[e]=t[e];return i},o.copyArr=function(t){var e;e=[];var i,n=0;for(i=t.length,n=0;n<i;n++)e.push(o.copyObj(t[n]));return e},o.concatArr=function(t,e){if(!e)return t;if(!t)return e;var i=0,n=e.length;for(i=0;i<n;i++)t.push(e[i]);return t},o.insertArrToArr=function(t,e,i){void 0===i&&(i=0),i<0&&(i=0),i>t.length&&(i=t.length);t.length;var n,s=0;t.length+=e.length;var o;for(o=e.length,s=t.length-1;i<=s;s--)t[s]=t[s-o];for(n=e.length,s=0;s<n;s++)t[i+s]=e[s];return t},o.clearArr=function(t){return t&&(t.length=0),t},o.removeFromArr=function(t,e){var i,n=0;for(i=t.length,n=0;n<i;n++)if(t[n]==e)return void t[n].splice(n,1)},o.setValueArr=function(t,e){return t||(t=[]),t.length=0,o.concatArr(t,e)},o.getFrom=function(t,e,i){var n=0;for(n=0;n<i;n++)t.push(e[n]);return t},o.getFromR=function(t,e,i){var n=0;for(n=0;n<i;n++)t.push(e.pop());return t},o.enableDisplayTree=function(t){for(;t;)t.mouseEnabled=!0,t=t.parent},o.getJsonString=function(t){return JSON.stringify(t)},o.getObj=function(t){return JSON.parse(t)},o.getKeyArr=function(t){var e,i;for(i in e=[],t)e.push(i);return e},o.getObjValues=function(t,e){var i,n,s=0;for(n=t.length,i=[],s=0;s<n;s++)i.push(t[s][e]);return i},o.hasKeys=function(t,e){var i,n=0;for(i=e.length,n=0;n<i;n++)if(!t.hasOwnProperty(e[n]))return!1;return!0},o.copyValueByArr=function(t,e,i){var n=0,s=i.length;for(n=0;n<s;n++)null!==e[i[n]]&&(t[i[n]]=e[i[n]])},o.getNoSameArr=function(t){var e,i,n,s=0;for(i=[],e=t.length,s=0;s<e;s++)n=t[s],i.indexOf(n)<0&&i.push(n);return i},o.insertValue=function(t,e){var i;for(i in e)t[i]=e[i]},o.replaceValue=function(t,e){var i;for(i in t)e.hasOwnProperty(t[i])&&(t[i]=e[t[i]]),"object"==typeof t[i]&&o.replaceValue(t[i],e)},o.setKeyValues=function(t,e,i){var n,s=0;for(n=t.length,s=0;s<n;s++)t[s][e]=i},o.findItemPos=function(t,e,i){var n,s=0;for(n=t.length,s=0;s<n;s++)if(t[s][e]==i)return s;return-1},o.setObjValue=function(t,e,i){return t[e]=i,t},o.setAutoTypeValue=function(t,e,i){return t.hasOwnProperty(e)&&o.isNumber(t[e])?t[e]=parseFloat(i):t[e]=i,t},o.getAutoValue=function(t){var e=parseFloat(t);return"string"==typeof t&&e+""===StringTool.trimSide(t)?e:t},o.isNumber=function(t){return parseFloat(t)==t},o.isNaNS=function(t){return"NaN"==t.toString()},o.isNaN=function(t){return"number"!=typeof t&&("string"!=typeof t||"NaN"==parseFloat(t).toString()||parseFloat(t)!=t)},o.getStrTypedValue=function(t){return"false"!=t&&("true"==t||("null"==t?null:"undefined"==t?null:o.getAutoValue(t)))},o.createKeyValueDic=function(t,e){var i;i={};var n,s,o=0;for(n=t.length,o=0;o<n;o++)i[(s=t[o])[e]]=s;return i},o.sign="_",o}(),ObjTimeCountTool=function(){function t(){this.timeDic={},this.resultDic={},this.countDic={},this.resultCountDic={},this.nodeDic={},this.resultNodeDic={}}__class(t,"laya.debug.tools.ObjTimeCountTool");var e=t.prototype;return e.addTime=function(t,e){IDTools.idObj(t);var i;i=IDTools.getObjID(t),this.timeDic.hasOwnProperty(i)||(this.timeDic[i]=0),this.timeDic[i]=this.timeDic[i]+e,this.countDic.hasOwnProperty(i)||(this.countDic[i]=0),this.countDic[i]=this.countDic[i]+1,this.nodeDic[i]=t},e.getTime=function(t){IDTools.idObj(t);var e;return e=IDTools.getObjID(t),this.resultDic[e]?this.resultDic[e]:0},e.getCount=function(t){IDTools.idObj(t);var e;return e=IDTools.getObjID(t),this.resultCountDic[e]},e.reset=function(){var t;for(t in this.timeDic)this.timeDic[t]=0,this.countDic[t]=0;ObjectTools.clearObj(this.nodeDic)},e.updates=function(){ObjectTools.clearObj(this.resultDic),ObjectTools.insertValue(this.resultDic,this.timeDic),ObjectTools.clearObj(this.resultCountDic),ObjectTools.insertValue(this.resultCountDic,this.countDic),ObjectTools.insertValue(this.resultNodeDic,this.nodeDic),this.reset()},t}(),RecInfo=function(){function r(){this.oX=0,this.oY=0,this.hX=1,this.hY=0,this.vX=0,this.vY=1}__class(r,"laya.debug.tools.RecInfo");var t=r.prototype;return t.initByPoints=function(t,e,i){this.oX=t.x,this.oY=t.y,this.hX=e.x,this.hY=e.y,this.vX=i.x,this.vY=i.y},__getset(0,t,"rotation",function(){return this.rotationRad/Math.PI*180}),__getset(0,t,"width",function(){return Math.sqrt((this.hX-this.oX)*(this.hX-this.oX)+(this.hY-this.oY)*(this.hY-this.oY))}),__getset(0,t,"x",function(){return this.oX}),__getset(0,t,"rotationRadV",function(){var t=this.vX-this.oX,e=this.vY-this.oY;return Math.atan2(e,t)}),__getset(0,t,"y",function(){return this.oY}),__getset(0,t,"rotationRad",function(){var t=this.hX-this.oX,e=this.hY-this.oY;return Math.atan2(e,t)}),__getset(0,t,"height",function(){return Math.sqrt((this.vX-this.oX)*(this.vX-this.oX)+(this.vY-this.oY)*(this.vY-this.oY))}),__getset(0,t,"rotationV",function(){return this.rotationRadV/Math.PI*180}),r.createByPoints=function(t,e,i){var n;return(n=new r).initByPoints(t,e,i),n},r.getGlobalPoints=function(t,e,i){return t.localToGlobal(new Point(e,i))},r.getGlobalRecInfo=function(t,e,i,n,s,o,a){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=1),r.createByPoints(r.getGlobalPoints(t,e,i),r.getGlobalPoints(t,n,s),r.getGlobalPoints(t,o,a))},r}(),RenderAnalyser=function(){function t(){this.timeDic={},this.resultDic={},this.countDic={},this.resultCountDic={},this.nodeDic={},this.isWorking=!1,this.working=!0}__class(t,"laya.debug.tools.RenderAnalyser");var e=t.prototype;return e.render=function(t,e){this.addTime(t,e)},e.addTime=function(t,e){IDTools.idObj(t);var i;i=IDTools.getObjID(t),this.timeDic.hasOwnProperty(i)||(this.timeDic[i]=0),this.timeDic[i]=this.timeDic[i]+e,this.countDic.hasOwnProperty(i)||(this.countDic[i]=0),this.countDic[i]=this.countDic[i]+1,this.nodeDic[i]=t},e.getTime=function(t){IDTools.idObj(t);var e;return e=IDTools.getObjID(t),this.resultDic[e]?this.resultDic[e]:0},e.getCount=function(t){IDTools.idObj(t);var e;return e=IDTools.getObjID(t),this.resultCountDic[e]},e.reset=function(){var t;for(t in this.timeDic)this.timeDic[t]=0,this.countDic[t]=0;ObjectTools.clearObj(this.nodeDic)},e.updates=function(){ObjectTools.clearObj(this.resultDic),ObjectTools.insertValue(this.resultDic,this.timeDic),ObjectTools.clearObj(this.resultCountDic),ObjectTools.insertValue(this.resultCountDic,this.countDic),this.reset()},__getset(0,e,"working",null,function(t){(this.isWorking=t)?Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.updates):Laya.timer.clear(this,this.updates)}),__static(t,["I",function(){return this.I=new t}]),t}(),DisResizer=function(){function i(){}return __class(i,"laya.debug.tools.resizer.DisResizer"),i.init=function(){i._up||((i._up=new AutoFillRec("T")).height=2,i._up.type=0,(i._down=new AutoFillRec("T")).height=2,i._down.type=0,(i._left=new AutoFillRec("R")).width=2,i._left.type=1,(i._right=new AutoFillRec("R")).width=2,i._right.type=1,i._barList=[i._up,i._down,i._left,i._right],i.addEvent())},i.stageDown=function(t){var e;e=t.target,i._tar&&DisControlTool.isInTree(i._tar,e)||i.clear()},i.clear=function(){i._tar=null,Laya.stage.off("mouseup",null,i.stageDown),DisControlTool.removeItems(i._barList),i.clearDragEvents()},i.addEvent=function(){var t,e=0;for(t=i._barList.length,e=0;e<t;e++)i._barList[e].on("mousedown",null,i.barDown)},i.barDown=function(t){var e;(i.clearDragEvents(),i.tBar=t.target)&&(e=new Rectangle,0==i.tBar.type?(e.x=i.tBar.x,e.width=0,e.y=i.tBar.y-200,e.height=400):(e.x=i.tBar.x-200,e.width=400,e.y=0,e.height=0),i.tBar.record(),i.tBar.startDrag(e),i.tBar.on("dragmove",null,i.draging),i.tBar.on("dragend",null,i.dragEnd))},i.draging=function(t){if(console.log("draging"),i.tBar&&i._tar){switch(i.tBar){case i._left:i._tar.x+=i.tBar.getDx(),i._tar.width-=i.tBar.getDx(),i._up.width-=i.tBar.getDx(),i._down.width-=i.tBar.getDx(),i._right.x-=i.tBar.getDx(),i.tBar.x-=i.tBar.getDx();break;case i._right:i._tar.width+=i.tBar.getDx(),i._up.width+=i.tBar.getDx(),i._down.width+=i.tBar.getDx();break;case i._up:i._tar.y+=i.tBar.getDy(),i._tar.height-=i.tBar.getDy(),i._right.height-=i.tBar.getDy(),i._left.height-=i.tBar.getDy(),i._down.y-=i.tBar.getDy(),i.tBar.y-=i.tBar.getDy();break;case i._down:i._tar.height+=i.tBar.getDy(),i._right.height+=i.tBar.getDy(),i._left.height+=i.tBar.getDy()}i.tBar.record()}},i.dragEnd=function(t){console.log("dragEnd"),i.clearDragEvents(),i.updates()},i.clearDragEvents=function(){i.tBar&&(i.tBar.off("dragmove",null,i.draging),i.tBar.off("dragend",null,i.dragEnd))},i.setUp=function(t,e){void 0===e&&(e=!1),e&&t==i._tar||(DisControlTool.removeItems(i._barList),(i._tar!=t||(i._tar=null,i.clearDragEvents(),e))&&(i._tar=t,i.updates(),DisControlTool.addItems(i._barList,t),Laya.stage.off("mouseup",null,i.stageDown),Laya.stage.on("mouseup",null,i.stageDown)))},i.updates=function(){var t,e;(t=i._tar)&&(e=new Rectangle(0,0,t.width,t.height),i._up.x=e.x,i._up.y=e.y,i._up.width=e.width,i._down.x=e.x,i._down.y=e.y+e.height-2,i._down.width=e.width,i._left.x=e.x,i._left.y=e.y,i._left.height=e.height,i._right.x=e.x+e.width-2,i._right.y=e.y,i._right.height=e.height)},i.Side=2,i.Vertical=1,i.Horizon=0,i._up=null,i._down=null,i._left=null,i._right=null,i._barList=null,i._tar=null,i.barWidth=2,i.useGetBounds=!1,i.tBar=null,i}(),SimpleResizer=function(){function a(){}return __class(a,"laya.debug.tools.resizer.SimpleResizer"),a.setResizeAble=function(t,e,i,n){void 0===i&&(i=150),void 0===n&&(n=150),t.on("mousedown",null,a.onMouseDown,[e,i,n])},a.onMouseDown=function(t,e,i,n){if(a.clearEvents(),t){var s;for(a.preMousePoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY),a.preTarSize.setTo(t.width,t.height),a.preScale.setTo(1,1),s=t;s&&s!=Laya.stage;)a.preScale.x*=s.scaleX,a.preScale.y*=s.scaleY,s=s.parent;Laya.stage.on("mouseup",null,a.onMouseMoveEnd),Laya.timer.loop(100,null,a.onMouseMoving,[t,e,i])}},a.onMouseMoving=function(t,e,i,n){var s=(Laya.stage.mouseX-a.preMousePoint.x)/a.preScale.x+a.preTarSize.x,o=(Laya.stage.mouseY-a.preMousePoint.y)/a.preScale.y+a.preTarSize.y;t.width=e<s?s:e,t.height=i<o?o:i},a.onMouseMoveEnd=function(t){a.clearEvents()},a.clearEvents=function(){Laya.timer.clear(null,a.onMouseMoving),Laya.stage.off("mouseup",null,a.onMouseMoveEnd)},__static(a,["preMousePoint",function(){return this.preMousePoint=new Point},"preTarSize",function(){return this.preTarSize=new Point},"preScale",function(){return this.preScale=new Point}]),a}(),ResTools=function(){function i(){}return __class(i,"laya.debug.tools.ResTools"),i.getCachedResList=function(){return Render.isWebGL?i.getWebGlResList():i.getCanvasResList()},i.getWebGlResList=function(){var t,e,i;t=[],i=ResourceManager.currentResourceManager._resources;for(var n=0;n<i.length;n++)if(e=i[n],"WebGLImage"==ClassTool.getClassName(e)){var s=e.src;s&&s.indexOf("data:image/png;base64")<0&&t.push(s)}return t},i.getCanvasResList=function(){var t,e;return t={},e=Loader.loadedMap,i.collectPics(e,t),i.getArrFromDic(t)},i.getArrFromDic=function(t){var e,i;for(e in i=[],t)i.push(e);return i},i.collectPics=function(t,e){var i,n;if(t)for(i in t){if(n=t[i])if(n.bitmap&&n.bitmap.src)n.bitmap.src.indexOf("data:image/png;base64")<0&&(e[n.bitmap.src]=!0)}},i}(),RunProfile=function(){function s(){}return __class(s,"laya.debug.tools.RunProfile"),s.run=function(t,e){var i,n;void 0===e&&(e=3),s.infoDic.hasOwnProperty(t)||(s.infoDic[t]=new CountTool),i=s.infoDic[t],n=TraceTool.getCallLoc(e)+"\n"+TraceTool.getCallStack(1,e-3),i.add(n),s._runShowDic[t]&&(console.log("Create:"+t),console.log(n))},s.showClassCreate=function(t){s._runShowDic[t]=!0},s.hideClassCreate=function(t){s._runShowDic[t]=!1},s.getRunInfo=function(t){return s.infoDic[t],s.infoDic[t]},s.runTest=function(t,e,i){void 0===i&&(i="runTest"),DTrace.timeStart(i);var n=0;for(n=0;n<e;n++)t();DTrace.timeEnd(i)},s.runTest2=function(t,e,i){void 0===i&&(i="runTest");var n;n=Browser.now();var s=0;for(s=0;s<e;s++)t();return Browser.now()-n},s.infoDic={},s._runShowDic={},s}(),StringTool=function(){function h(){}return __class(h,"laya.debug.tools.StringTool"),h.toUpCase=function(t){return t.toUpperCase()},h.toLowCase=function(t){return t.toLowerCase()},h.toUpHead=function(t){return t.length<=1?t.toUpperCase():t.charAt(0).toUpperCase()+t.substr(1)},h.toLowHead=function(t){return t.length<=1?t.toLowerCase():t.charAt(0).toLowerCase()+t.substr(1)},h.packageToFolderPath=function(t){return t.replace(".","/")},h.insert=function(t,e,i){return t.substring(0,i)+e+t.substr(i)},h.insertAfter=function(t,e,i,n){void 0===n&&(n=!1);var s=0;return 0<=(s=n?t.lastIndexOf(i):t.indexOf(i))?h.insert(t,e,s+i.length):t},h.insertBefore=function(t,e,i,n){void 0===n&&(n=!1);var s=0;return 0<=(s=n?t.lastIndexOf(i):t.indexOf(i))?h.insert(t,e,s):t},h.insertParamToFun=function(t,e){var i,n;return i=h.getParamArr(t),n=e.join(","),0<i.length&&(n=","+n),h.insertBefore(t,n,")",!0)},h.trim=function(t,e){var i;e||(e=[" ","\r","\n","\t",String.fromCharCode(65279)]);var n,s=0;for(i=t,n=e.length,s=0;s<n;s++)i=h.getReplace(i,e[s],"");return i},h.isEmpty=function(t){return t.length<1||h.emptyStrDic.hasOwnProperty(t)},h.trimLeft=function(t){var e=0,i=e=0;for(i=t.length;h.isEmpty(t.charAt(e))&&e<i;)e++;return e<i?t.substr(e):""},h.trimRight=function(t){var e=0;for(e=t.length-1;h.isEmpty(t.charAt(e))&&0<=e;)e--;return t.substring(0,e),0<=e?t.substring(0,e+1):""},h.trimSide=function(t){var e;return e=h.trimLeft(t),e=h.trimRight(e)},h.isOkFileName=function(t){if(""==laya.debug.tools.StringTool.trimSide(t))return!1;var e,i=0;for(e=t.length,i=0;i<e;i++)if(h.specialChars[t.charAt(i)])return!1;return!0},h.trimButEmpty=function(t){return h.trim(t,["\r","\n","\t"])},h.removeEmptyStr=function(t){var e,i=0;for(i=i=t.length-1;0<=i;i--)e=t[i],e=laya.debug.tools.StringTool.trimSide(e),h.isEmpty(e)?t.splice(i,1):t[i]=e;return t},h.ifNoAddToTail=function(t,e){return 0<=t.indexOf(e)?t:t+e},h.trimEmptyLine=function(t){var e,i,n=0;for(n=(e=t.split("\n")).length-1;0<=n;n--)i=e[n],h.isEmptyLine(i)&&e.splice(n,1);return e.join("\n")},h.isEmptyLine=function(t){return""==(t=laya.debug.tools.StringTool.trim(t))},h.removeCommentLine=function(t){var e;e=[];var i,n,s=0,o=s=0,a=0;for(o=t.length;s<o;){if(n=i=t[s],0<=(a=i.indexOf("/**")))for(n=i.substring(0,a-1),h.addIfNotEmpty(e,n);s<o;){if(0<=(a=(i=t[s]).indexOf("*/"))){n=i.substring(a+2),h.addIfNotEmpty(e,n);break}s++}else 0<=i.indexOf("//")&&0==laya.debug.tools.StringTool.trim(i).indexOf("//")||h.addIfNotEmpty(e,n);s++}return e},h.addIfNotEmpty=function(t,e){e&&(""!=h.trim(e)&&t.push(e))},h.trimExt=function(t,e){var i;i=h.trim(t);var n,s=0;for(n=e.length,s=0;s<n;s++)i=h.getReplace(i,e[s],"");return i},h.getBetween=function(t,e,i,n){if(void 0===n&&(n=!1),!t)return"";if(!e)return"";if(!i)return"";var s,o=0;if((s=t.indexOf(e))<0)return"";if(n){if((o=t.lastIndexOf(i))<s)return""}else o=t.indexOf(i,s+1);return o<0?"":t.substring(s+e.length,o)},h.getSplitLine=function(t,e){return void 0===e&&(e=" "),t.split(e)},h.getLeft=function(t,e){var i;return i=t.indexOf(e),t.substr(0,i)},h.getRight=function(t,e){var i;return i=t.indexOf(e),t.substr(i+1)},h.delelteItem=function(t){for(;0<t.length&&""==t[0];)t.shift()},h.getWords=function(t){var e=h.getSplitLine(t);return h.delelteItem(e),e},h.getLinesI=function(t,e,i){var n=0,s=[];for(n=t;n<=e;n++)s.push(i[n]);return s},h.structfy=function(t,e,i){var n;void 0===e&&(e=4),void 0===i&&(i=!0),i&&(t=laya.debug.tools.StringTool.trimEmptyLine(t));var s,o=0;s=h.getEmptyStr(o=0);var a,r,l=0;for(a=(n=t.split("\n")).length,l=0;l<a;l++)r=n[l],r=laya.debug.tools.StringTool.trimLeft(r),r=laya.debug.tools.StringTool.trimRight(r),o+=h.getPariCount(r),0<=r.indexOf("}")&&(s=h.getEmptyStr(o*e)),r=s+r,n[l]=r,s=h.getEmptyStr(o*e);return n.join("\n")},h.getEmptyStr=function(t){if(!h.emptyDic.hasOwnProperty(t)){var e,i,n=0;for(e=t,i="",n=0;n<e;n++)i+=" ";h.emptyDic[t]=i}return h.emptyDic[t]},h.getPariCount=function(t,e,i){var n;void 0===e&&(e="{"),void 0===i&&(i="}"),(n={})[e]=1,n[i]=-1;var s,o,a=0;s=t.length;var r=0;for(a=r=0;a<s;a++)o=t.charAt(a),n.hasOwnProperty(o)&&(r+=n[o]);return r},h.readInt=function(t,e){void 0===e&&(e=0);var i,n=NaN,s=(n=0,0),o=!1;o=!1;var a;for(a=t.length,s=e;s<a;s++)if(i=t.charAt(s),0<Number(i)||"0"==i)0<(n=10*n+Number(i))&&(o=!0);else if(o)return n;return n},h.getReplace=function(t,e,i){return t?t.replace(new RegExp(e,"g"),i):""},h.getWordCount=function(t,e){var i=new RegExp(e,"g");return t.match(i).length},h.getResolvePath=function(t,e){if(h.isAbsPath(t))return t;var i,n,s;i="\\",0<=e.indexOf("/")&&(i="/"),e.charAt(e.length-1)==i&&(e=e.substr(0,e.length-1)),s="."+i;var o;o=h.getWordCount(t,n=".."+i),t=laya.debug.tools.StringTool.getReplace(t,n,""),t=laya.debug.tools.StringTool.getReplace(t,s,"");var a,r=0;a=o;for(r=0;r<a;r++)e=h.removeLastSign(t,i);return e+i+t},h.isAbsPath=function(t){return 0<=t.indexOf(":")},h.removeLastSign=function(t,e){var i;return i=t.lastIndexOf(e),t=t.substring(0,i)},h.getParamArr=function(t){var e;return e=laya.debug.tools.StringTool.getBetween(t,"(",")",!0),h.trim(e).length<1?[]:e.split(",")},h.copyStr=function(t){return t.substring()},h.ArrayToString=function(t){return"[{items}]".replace(new RegExp("\\{items\\}","g"),h.getArrayItems(t))},h.getArrayItems=function(t){var e;if(t.length<1)return"";e=h.parseItem(t[0]);var i,n=0;for(i=t.length,n=1;n<i;n++)e+=","+h.parseItem(t[n]);return e},h.parseItem=function(t){return'"'+t+'"',""},h.initAlphaSign=function(){h.alphaSigns||(h.addSign("a","z",h.alphaSigns={}),h.addSign("A","Z",h.alphaSigns),h.addSign("0","9",h.alphaSigns))},h.addSign=function(t,e,i){var n,s,o=0;for(s=t.charCodeAt(0),n=e.charCodeAt(0),o=s;o<=n;o++)i[String.fromCharCode(o)]=!0,console.log("add :"+String.fromCharCode(o))},h.isPureAlphaNum=function(t){if(h.initAlphaSign(),!t)return!0;var e,i=0;for(e=t.length,i=0;i<e;i++)if(!h.alphaSigns[t.charAt(i)])return!1;return!0},h.emptyDic={},h.alphaSigns=null,__static(h,["emptyStrDic",function(){return this.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"\t":!0}},"specialChars",function(){return this.specialChars={"*":!0,"&":!0,"%":!0,"#":!0,"?":!0}}]),h}(),TraceTool=function(){function o(){}return __class(o,"laya.debug.tools.TraceTool"),o.closeAllLog=function(){var t;t=o.emptyLog,Browser.window.console.log=t},o.emptyLog=function(){},o.traceObj=function(t){var e,i;for(e in o.tempArr.length=0,t)o.tempArr.push(e+":"+t[e]);return i=o.tempArr.join("\n"),console.log(i),i},o.traceObjR=function(t){var e,i;for(e in o.tempArr.length=0,t)o.tempArr.push(t[e]+":"+e);return i=o.tempArr.join("\n"),console.log(i),i},o.traceSize=function(t){DebugTool.dTrace("Size: x:"+t.x+" y:"+t.y+" w:"+t.width+" h:"+t.height+" scaleX:"+t.scaleX+" scaleY:"+t.scaleY)},o.traceSplit=function(t){console.log("---------------------"+t+"---------------------------")},o.group=function(t){console.group(t)},o.groupEnd=function(){console.groupEnd()},o.getCallStack=function(t,e){var i,n;for(void 0===t&&(t=1),void 0===e&&(e=1),i=(i=o.getCallStack).caller.caller,n="";i&&0<t;)e<=0&&(n+=i+"<-",t--),i=i.caller,e--;return n},o.getCallLoc=function(e){var i;void 0===e&&(e=2);try{o.Erroer.i++}catch(t){var n;i=(n=t.stack.replace(/Error\n/).split(/\n/))[e]?n[e].replace(/^\s+|\s+$/,""):"unknow"}return i},o.traceCallStack=function(){var e;try{o.Erroer.i++}catch(t){e=t.stack}return console.log(e),e},o.getPlaceHolder=function(t){if(!o.holderDic.hasOwnProperty(t)){var e;e="";var i=0;for(i=0;i<t;i++)e+="-";o.holderDic[t]=e}return o.holderDic[t]},o.traceTree=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=!0),i&&console.log("traceTree"),t){var n,s=0;if(t.numChildren<1)console.log(t);else{for(o.group(t),n=t.numChildren,e++,s=0;s<n;s++)o.traceTree(t.getChildAt(s),e,!1);o.groupEnd()}}},o.getClassName=function(t){return t.constructor.name},o.traceSpriteInfo=function(t,e,i,n){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),t instanceof laya.display.Sprite?t?(o.traceSplit("traceSpriteInfo"),DebugTool.dTrace(laya.debug.tools.TraceTool.getClassName(t)+":"+t.name),n?o.traceTree(t):console.log(t),i&&o.traceSize(t),e&&console.log("bounds:"+t.getBounds())):console.log("null Sprite"):console.log("not Sprite")},o.tempArr=[],o.Erroer=null,o.holderDic={},o}(),ValueChanger=function(){function n(){this.target=null,this.key=null,this._tValue=NaN,this.preValue=0}__class(n,"laya.debug.tools.ValueChanger");var t=n.prototype;return t.record=function(){this.preValue=this.value},t.showValueByAdd=function(t){this.value=this.preValue+t},t.showValueByScale=function(t){this.value=this.preValue*t},t.recover=function(){this.value=this.preValue},t.dispose=function(){this.target=null},__getset(0,t,"value",function(){return this.target&&(this._tValue=this.target[this.key]),this._tValue},function(t){this._tValue=t,this.target&&(this.target[this.key]=t)}),__getset(0,t,"dValue",function(){return this.value-this.preValue}),__getset(0,t,"scaleValue",function(){return this.value/this.preValue}),n.create=function(t,e){var i;return(i=new n).target=t,i.key=e,i},n}(),VisibleAnalyser=function(){function h(){}return __class(h,"laya.debug.tools.VisibleAnalyser"),h.analyseTarget=function(t){var e,i;e=t.displayedInStage,i=NodeUtils.getGRec(t);var n=new Rectangle;n.setTo(0,0,Laya.stage.width,Laya.stage.height);var s,o=!1;o=0<(s=n.intersection(i)).width&&0<s.height;var a;a=NodeUtils.getGAlpha(t);var r,l;l="",l+="isInstage:"+e+"\n",l+="isInVisibleRec:"+o+"\n",l+="gVisible:"+(r=NodeUtils.getGVisible(t))+"\n",l+="gAlpha:"+a+"\n",e&&o&&r&&0<a&&(Render.isWebGL?h.anlyseRecVisible(t):SpriteRenderForVisibleAnalyse.I.analyseNode(t),l+="coverRate:"+h.coverRate+"\n",0<h._coverList.length&&Laya.timer.once(1e3,null,h.showListLater)),console.log(l),OutPutView.I.showTxt(l)},h.showListLater=function(){NodeListPanelView.I.showList(h._coverList)},h.isCoverByBrother=function(t){var e=t.parent;if(e){if(!(e._childs.indexOf(t)<0)){var i;(i=e.getSelfBounds()).width<=0||i.height}}},h.anlyseRecVisible=function(t){h.isNodeWalked=!1,h._analyseTarget=t,h.mainCanvas||(h.mainCanvas=CanvasTools.createCanvas(Laya.stage.width,Laya.stage.height)),CanvasTools.clearCanvas(h.mainCanvas),h.tColor=1,h.resetCoverList(),WalkTools.walkTargetEX(Laya.stage,h.recVisibleWalker,null,h.filterFun),h.coverRate=h.isTarRecOK?CanvasTools.getDifferRate(h.preImageData,h.tarImageData):0,console.log("coverRate:",h.coverRate)},h.getRecArea=function(t){return t.width*t.height},h.addCoverNode=function(t,e){var i;(i={}).path=t,i.label=ClassTool.getNodeClassAndName(t)+":"+e,i.coverRate=e,h._coverList.push(i),console.log("coverByNode:",t,e)},h.resetCoverList=function(){h._coverList.length=0},h.recVisibleWalker=function(t){var e;if(t==h._analyseTarget)h.isNodeWalked=!0,h.tarRec.copyFrom(NodeUtils.getGRec(t)),console.log("tarRec:",h.tarRec.toString()),0<h.tarRec.width&&0<h.tarRec.height?(h.isTarRecOK=!0,h.tColor++,CanvasTools.fillCanvasRec(h.mainCanvas,h.tarRec,ColorTool.toHexColor(h.tColor)),h.preImageData=CanvasTools.getImageDataFromCanvasByRec(h.mainCanvas,h.tarRec),h.tarImageData=CanvasTools.getImageDataFromCanvasByRec(h.mainCanvas,h.tarRec)):console.log("tarRec Not OK:",h.tarRec);else if(h.isTarRecOK&&(e=NodeUtils.getGRec(t),(h.interRec=h.tarRec.intersection(e,h.interRec))&&0<h.interRec.width&&0<h.interRec.height)){h.tColor++,CanvasTools.fillCanvasRec(h.mainCanvas,e,ColorTool.toHexColor(h.tColor)),h.tImageData=CanvasTools.getImageDataFromCanvasByRec(h.mainCanvas,h.tarRec);var i;i=CanvasTools.getDifferRate(h.preImageData,h.tImageData),h.preImageData=h.tImageData,h.addCoverNode(t,i)}},h.filterFun=function(t){return 0!=t.visible&&(!(t.alpha<0)&&!DebugInfoLayer.I.isDebugItem(t))},h.isNodeWalked=!1,h._analyseTarget=null,h.isTarRecOK=!1,h.mainCanvas=null,h.preImageData=null,h.tImageData=null,h.tarImageData=null,h.coverRate=NaN,h.tColor=0,h._coverList=[],__static(h,["tarRec",function(){return this.tarRec=new Rectangle},"interRec",function(){return this.interRec=new Rectangle}]),h}(),WalkTools=function(){function l(){}return __class(l,"laya.debug.tools.WalkTools"),l.walkTarget=function(t,e,i){e.apply(i,[t]);var n,s,o=0;for(n=t.numChildren,o=0;o<n;o++)s=t.getChildAt(o),l.walkTarget(s,e,s)},l.walkTargetEX=function(t,e,i,n){if(null==n||n(t)){e.apply(i,[t]);var s,o,a,r=0;for(s=(a=t._childs).length,r=0;r<s;r++)o=a[r],l.walkTarget(o,e,o)}},l.walkChildren=function(t,e,i){!t||t.numChildren<1||l.walkArr(DisControlTool.getAllChild(t),e,i)},l.walkArr=function(t,e,i){if(t){var n,s=0;for(n=t.length,s=0;s<n;s++)e.apply(i,[t[s],s])}},l}(),Watcher=function(){function s(){}return __class(s,"laya.debug.tools.Watcher"),s.watch=function(t,e,i){VarHook.hookVar(t,e,i)},s.traceChange=function(t,e,i){void 0===i&&(i="var changed:"),VarHook.hookVar(t,e,[s.getTraceValueFun(e),VarHook.getLocFun(i)])},s.debugChange=function(t,e){VarHook.hookVar(t,e,[VarHook.getLocFun("debug loc"),FunHook.debugHere])},s.differChange=function(t,e,i,n){void 0===n&&(n=""),VarHook.hookVar(t,e,[s.getDifferFun(t,e,i,n)])},s.getDifferFun=function(t,e,i,n){return void 0===n&&(n=""),function(){DifferTool.differ(i,t[e],n)}},s.traceValue=function(t){console.log("value:",t)},s.getTraceValueFun=function(e){return function(t){console.log("set "+e+" :",t)}},s}(),NodeMenu=function(){function t(){this._tar=null,this._menu=null,this._shareBtns=["信息面板","边框","进入节点","树定位","Enable链","Size链","节点工具","可见分析","输出到控制台"],this._menuItems=["隐藏节点"],this._menuHide=null,this._menuItemsHide=["显示节点"],this._menu1=null,this._menuItems1=["输出到控制台"]}__class(t,"laya.debug.view.nodeInfo.menus.NodeMenu");var e=t.prototype;return e.showNodeMenu=function(t){t._style?(this._tar=t,this._menu||(this._menuItems=this._menuItems.concat(this._shareBtns),this._menu=ContextMenu.createMenuByArray(this._menuItems),this._menu.on("select",this,this.onEmunSelect),this._menuItemsHide=this._menuItemsHide.concat(this._shareBtns),this._menuHide=ContextMenu.createMenuByArray(this._menuItemsHide),this._menuHide.on("select",this,this.onEmunSelect)),t.visible?this._menu.show():this._menuHide.show()):DebugTool.log("该节点已不存在，请刷新列表")},e.nodeDoubleClick=function(t){NodeToolView.I.showByNode(t)},e.setNodeListDoubleClickAction=function(t){Browser.onMobile||t.on("doubleclick",this,this.onListDoubleClick,[t])},e.onListDoubleClick=function(t){var e;t.selectedItem&&(e=t.selectedItem.path,laya.debug.view.nodeInfo.menus.NodeMenu.I.nodeDoubleClick(e))},e.setNodeListAction=function(t){t.on(DebugTool.getMenuShowEvent(),this,this.onListRightClick,[t])},e.onListRightClick=function(t){var e;t.selectedItem&&(e=t.selectedItem.path,laya.debug.view.nodeInfo.menus.NodeMenu.I.objRightClick(e))},e.objRightClick=function(t){t instanceof laya.display.Sprite?laya.debug.view.nodeInfo.menus.NodeMenu.I.showNodeMenu(t):"object"==typeof t&&laya.debug.view.nodeInfo.menus.NodeMenu.I.showObjectMenu(t)},e.showObjectMenu=function(t){this._tar=t,this._menu1||(this._menu1=ContextMenu.createMenuByArray(this._menuItems1),this._menu1.on("select",this,this.onEmunSelect)),this._menu1.show()},e.onEmunSelect=function(t){var e=t.target.data;if("string"==typeof e)switch(e){case"信息面板":ObjectInfoView.showObject(this._tar);break;case"边框":DebugTool.showDisBound(this._tar);break;case"输出到控制台":console.log(this._tar);break;case"树节点":case"进入节点":ToolPanel.I.showNodeTree(this._tar);break;case"树定位":ToolPanel.I.showSelectInStage(this._tar);break;case"Enable链":OutPutView.I.dTrace(DebugTool.traceDisMouseEnable(this._tar)),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"Size链":OutPutView.I.dTrace(DebugTool.traceDisSizeChain(this._tar)),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"节点工具":NodeToolView.I.showByNode(this._tar);break;case"显示节点":this._tar.visible=!0;break;case"隐藏节点":this._tar.visible=!1;break;case"可见分析":this._tar&&VisibleAnalyser.analyseTarget(this._tar)}},__getset(1,t,"I",function(){return t._I||(t._I=new t),t._I}),t._I=null,t}(),NodeConsts=function(){function t(){}return __class(t,"laya.debug.view.nodeInfo.NodeConsts"),t.defaultFitlerStr="x,y,width,height,scaleX,scaleY,alpha,renderCost",t.RenderCostMaxTime=3e3,t}(),NodeUtils=function(){function h(){}return __class(h,"laya.debug.view.nodeInfo.NodeUtils"),h.getFilterdTree=function(t,e){var i,n;e||(e=h.defaultKeys),i={};var s,o,a,r=0,l=0;for(l=e.length,r=0;r<l;r++)i[n=e[r]]=t[n];for(l=(s=t._childs).length,a=[],r=0;r<l;r++)o=s[r],a.push(h.getFilterdTree(o,e));return i.childs=a,i},h.getPropertyDesO=function(t,e){e||(e=h.defaultKeys);var i,n={};n.label="object"==typeof t?""+ClassTool.getNodeClassAndName(t):""+t,n.type="",n.path=t,n.childs=[],n.isDirectory=!1;var s,o=0,a=0;if(t instanceof laya.display.Node){for(n.des=ClassTool.getNodeClassAndName(t),n.isDirectory=!0,a=e.length,o=0;o<a;o++)i=e[o],s=h.getPropertyDesO(t[i],e),t.hasOwnProperty(i)?s.label=i+":"+s.des:s.label=i+":"+ObjectInfoView.getNodeValue(t,i),n.childs.push(s);(s=h.getPropertyDesO(t[i="_childs"],e)).label=i+":"+s.des,s.isChilds=!0,n.childs.push(s)}else if(t instanceof Array){var r;for(n.des="Array["+t.length+"]",n.isDirectory=!0,a=(r=t).length,o=0;o<a;o++)(s=h.getPropertyDesO(r[o],e)).label=o+":"+s.des,n.childs.push(s)}else if("object"==typeof t)for(i in n.des=ClassTool.getNodeClassAndName(t),n.isDirectory=!0,t)(s=h.getPropertyDesO(t[i],e)).label=i+":"+s.des,n.childs.push(s);else n.des=""+t;return n.hasChild=0<n.childs.length,n},h.adptShowKeys=function(t){var e=0;for(e=t.length-1;0<=e;e--)t[e]=StringTool.trimSide(t[e]),t[e].length<1&&t.splice(e,1);return t},h.getNodeTreeData=function(t,e){var i,n;return h.adptShowKeys(e),i=h.getPropertyDesO(t,e),h.getTreeArr(i,n=[]),n},h.getTreeArr=function(t,e,i){void 0===i&&(i=!0),i&&e.push(t);var n=t.childs,s=0,o=n.length;for(s=0;s<o;s++)n[s].nodeParent=i?t:null,n[s].isDirectory?h.getTreeArr(n[s],e):e.push(n[s])},h.traceStage=function(){console.log(h.getFilterdTree(Laya.stage,null)),console.log("treeArr:",h.getNodeTreeData(Laya.stage,null))},h.getNodeCount=function(t,e){if(void 0===e&&(e=!1),e&&!t.visible)return 0;var i=0;i=1;var n,s,o=0;for(n=(s=t._childs).length,o=0;o<n;o++)i+=h.getNodeCount(s[o],e);return i},h.getGVisible=function(t){for(;t;){if(!t.visible)return!1;t=t.parent}return!0},h.getGAlpha=function(t){var e=NaN;for(e=1;t;)e*=t.alpha,t=t.parent;return e},h.getGPos=function(t){var e;return e=new Point,t.localToGlobal(e),e},h.getGRec=function(t){var e,i;return!(e=t._getBoundPointsM(!0))||e.length<1?Rectangle.TEMP.setTo(0,0,0,0):(e=GrahamScan.pListToPointList(e,!0),WalkTools.walkArr(e,t.localToGlobal,t),e=GrahamScan.pointListToPlist(e),i=Rectangle._getWrapRec(e,i))},h.getGGraphicRec=function(t){var e,i;return!(e=t.getGraphicBounds()._getBoundPoints())||e.length<1?Rectangle.TEMP.setTo(0,0,0,0):(e=GrahamScan.pListToPointList(e,!0),WalkTools.walkArr(e,t.localToGlobal,t),e=GrahamScan.pointListToPlist(e),i=Rectangle._getWrapRec(e,i))},h.getNodeCmdCount=function(t){return t.graphics?t.graphics.cmds?t.graphics.cmds.length:t.graphics._one?1:0:0},h.getNodeCmdTotalCount=function(t){var e,i,n=0,s=0;for(e=(i=t._childs).length,n=h.getNodeCmdCount(t),s=0;s<e;s++)n+=h.getNodeCmdTotalCount(i[s]);return n},h.getRenderNodeCount=function(t){if("none"!=t.cacheAs)return 1;var e,i,n=0,s=0;for(e=(i=t._childs).length,n=1,s=0;s<e;s++)n+=h.getRenderNodeCount(i[s]);return n},h.getReFreshRenderNodeCount=function(t){var e,i,n=0,s=0;for(e=(i=t._childs).length,n=1,s=0;s<e;s++)n+=h.getRenderNodeCount(i[s]);return n},h.showCachedSpriteRecs=function(){(h.g=DebugInfoLayer.I.graphicLayer.graphics).clear(),WalkTools.walkTarget(Laya.stage,h.drawCachedBounds,null)},h.drawCachedBounds=function(t){var e;"none"!=t.cacheAs&&(DebugInfoLayer.I.isDebugItem(t)||(e=h.getGRec(t),h.g.drawRect(e.x,e.y,e.width,e.height,null,"#0000ff",2)))},h.g=null,__static(h,["defaultKeys",function(){return this.defaultKeys=["x","y","width","height"]}]),h}(),StyleConsts=function(){function e(){}return __class(e,"laya.debug.view.StyleConsts"),e.setViewScale=function(t){t.scaleX=t.scaleY=e.PanelScale},__static(e,["PanelScale",function(){return this.PanelScale=Browser.onPC?1:Browser.pixelRatio}]),e}(),BitmapFont=function(){function t(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}__class(t,"laya.display.BitmapFont");var e=t.prototype;return e.loadFont=function(t,e){this._path=t,this._complete=e,Laya.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],Handler.create(this,this.onLoaded))},e.onLoaded=function(){this.parseFont(Loader.getRes(this._path),Loader.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},e.parseFont=function(t,e){if(null!=t&&null!=e){this._texture=e;var i=t.getElementsByTagName("info");if(!i[0].getAttributeNode)return this.parseFont2(t,e);this.fontSize=parseInt(i[0].getAttributeNode("size").nodeValue);var n,s=i[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3])],n=t.getElementsByTagName("char");var o=0;for(o=0;o<n.length;o++){var a=n[o],r=parseInt(a.getAttributeNode("id").nodeValue),l=parseInt(a.getAttributeNode("xoffset").nodeValue)/1,h=parseInt(a.getAttributeNode("yoffset").nodeValue)/1,c=parseInt(a.getAttributeNode("xadvance").nodeValue)/1,u=new Rectangle;u.x=parseInt(a.getAttributeNode("x").nodeValue),u.y=parseInt(a.getAttributeNode("y").nodeValue),u.width=parseInt(a.getAttributeNode("width").nodeValue),u.height=parseInt(a.getAttributeNode("height").nodeValue);var d=Texture.create(e,u.x,u.y,u.width,u.height,l,h);this._maxWidth=Math.max(this._maxWidth,c+this.letterSpacing),this._fontCharDic[r]=d,this._fontWidthMap[r]=c}}},e.parseFont2=function(t,e){if(null!=t&&null!=e){this._texture=e;var i=t.getElementsByTagName("info");this.fontSize=parseInt(i[0].attributes.size.nodeValue);var n=i[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];var s=t.getElementsByTagName("char"),o=0;for(o=0;o<s.length;o++){var a=s[o].attributes,r=parseInt(a.id.nodeValue),l=parseInt(a.xoffset.nodeValue)/1,h=parseInt(a.yoffset.nodeValue)/1,c=parseInt(a.xadvance.nodeValue)/1,u=new Rectangle;u.x=parseInt(a.x.nodeValue),u.y=parseInt(a.y.nodeValue),u.width=parseInt(a.width.nodeValue),u.height=parseInt(a.height.nodeValue);var d=Texture.create(e,u.x,u.y,u.width,u.height,l,h);this._maxWidth=Math.max(this._maxWidth,c+this.letterSpacing),this._fontCharDic[r]=d,this._fontWidthMap[r]=c}}},e.getCharTexture=function(t){return this._fontCharDic[t.charCodeAt(0)]},e.destroy=function(){if(this._texture){for(var t in this._fontCharDic){var e=this._fontCharDic[t];e&&e.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},e.setSpaceWidth=function(t){this._spaceWidth=t},e.getCharWidth=function(t){var e=t.charCodeAt(0);return this._fontWidthMap[e]?this._fontWidthMap[e]+this.letterSpacing:" "==t?this._spaceWidth+this.letterSpacing:0},e.getTextWidth=function(t){for(var e=0,i=0,n=t.length;i<n;i++)e+=this.getCharWidth(t.charAt(i));return e},e.getMaxWidth=function(){return this._maxWidth},e.getMaxHeight=function(){return this.fontSize},e.drawText=function(t,e,i,n,s,o){var a,r=this.getTextWidth(t),l=0;"center"===s&&(l=(o-r)/2),"right"===s&&(l=o-r);for(var h=0,c=0,u=t.length;c<u;c++)(a=this.getCharTexture(t.charAt(c)))&&(e.graphics.drawTexture(a,i+h+l,n),h+=this.getCharWidth(t.charAt(c)))},t}(),Style=function(){function i(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=i._TF_EMPTY}__class(i,"laya.display.css.Style");var t=i.prototype;return t.getTransform=function(){return this._tf},t.setTransform=function(t){this._tf="none"!==t&&t?t:i._TF_EMPTY},t.setTranslateX=function(t){this._tf===i._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateX=t},t.setTranslateY=function(t){this._tf===i._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateY=t},t.setScaleX=function(t){this._tf===i._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=t},t.setScale=function(t,e){this._tf===i._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=t,this._tf.scaleY=e},t.setScaleY=function(t){this._tf===i._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleY=t},t.setRotate=function(t){this._tf===i._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.rotate=t},t.setSkewX=function(t){this._tf===i._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.skewX=t},t.setSkewY=function(t){this._tf===i._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.skewY=t},t.destroy=function(){this.scrollRect=null},t.render=function(t,e,i,n){},t.getCSSStyle=function(){return CSSStyle.EMPTY},t._enableLayout=function(){return!1},__getset(0,t,"scaleX",function(){return this._tf.scaleX},function(t){this.setScaleX(t)}),__getset(0,t,"transform",function(){return this.getTransform()},function(t){this.setTransform(t)}),__getset(0,t,"translateX",function(){return this._tf.translateX},function(t){this.setTranslateX(t)}),__getset(0,t,"translateY",function(){return this._tf.translateY},function(t){this.setTranslateY(t)}),__getset(0,t,"scaleY",function(){return this._tf.scaleY},function(t){this.setScaleY(t)}),__getset(0,t,"block",function(){return 0!=(1&this._type)}),__getset(0,t,"skewY",function(){return this._tf.skewY},function(t){this.setSkewY(t)}),__getset(0,t,"rotate",function(){return this._tf.rotate},function(t){this.setRotate(t)}),__getset(0,t,"skewX",function(){return this._tf.skewX},function(t){this.setSkewX(t)}),__getset(0,t,"paddingLeft",function(){return 0}),__getset(0,t,"paddingTop",function(){return 0}),__getset(0,t,"absolute",function(){return!0}),i.__init__=function(){i._TF_EMPTY=new TransformInfo,i.EMPTY=new i},i.EMPTY=null,i._TF_EMPTY=null,i}(),Font=function(){function e(t){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=Color.create(e.defaultColor),this.family=e.defaultFamily,this.stroke=e._STROKE,this.size=e.defaultSize,t&&t!==e.EMPTY&&t.copyTo(this)}__class(e,"laya.display.css.Font");var t=e.prototype;return t.set=function(t){this._text=null;for(var e=t.split(" "),i=0,n=e.length;i<n;i++){var s=e[i];switch(s){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<s.indexOf("px")&&(this.size=parseInt(s),this.family=e[i+1],i++)}},t.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},t.copyTo=function(t){t._type=this._type,t._text=this._text,t._weight=this._weight,t._color=this._color,t.family=this.family,t.stroke=this.stroke!=e._STROKE?this.stroke.slice():e._STROKE,t.indent=this.indent,t.size=this.size},__getset(0,t,"password",function(){return 0!=(1024&this._type)},function(t){t?this._type|=1024:this._type&=-1025}),__getset(0,t,"color",function(){return this._color.strColor},function(t){this._color=Color.create(t)}),__getset(0,t,"italic",function(){return 0!=(512&this._type)},function(t){t?this._type|=512:this._type&=-513}),__getset(0,t,"bold",function(){return 0!=(2048&this._type)},function(t){t?this._type|=2048:this._type&=-2049}),__getset(0,t,"weight",function(){return""+this._weight},function(t){var e=0;switch(t){case"normal":break;case"bold":this.bold=!0,e=700;break;case"bolder":e=800;break;case"lighter":e=100;break;default:e=parseInt(t)}this._weight=e,this._text=null}),__getset(0,t,"decoration",function(){return this._decoration?this._decoration.value:null},function(t){var e=t.split(" ");switch(this._decoration||(this._decoration={}),e[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=e[0]}e[1]&&(this._decoration.color=Color.create(e)),this._decoration.value=t}),e.__init__=function(){e.EMPTY=new e(null)},e.EMPTY=null,e.defaultColor="#000000",e.defaultSize=12,e.defaultFamily="Arial",e.defaultFont="12px Arial",e._STROKE=[0,"#000000"],e._ITALIC=512,e._PASSWORD=1024,e._BOLD=2048,e}(),TransformInfo=function(){function t(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return __class(t,"laya.display.css.TransformInfo"),t}(),GraphicsBounds=function(){function y(){this._cacheBoundsType=!1}__class(y,"laya.display.GraphicsBounds");var t=y.prototype;return t.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},t.reset=function(){this._temp&&(this._temp.length=0)},t.getBounds=function(t){return void 0===t&&(t=!1),(!this._bounds||!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._bounds=Rectangle._getWrapRec(this.getBoundPoints(t),this._bounds)),this._cacheBoundsType=t,this._bounds},t.getBoundPoints=function(t){return void 0===t&&(t=!1),(!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(t)),this._cacheBoundsType=t,this._rstBoundPoints=Utils.copyArray(this._rstBoundPoints,this._temp)},t._getCmdPoints=function(t){void 0===t&&(t=!1);var e,i,n=Render._context,s=this._graphics.cmds;if((e=this._temp||(this._temp=[])).length=0,s||null==this._graphics._one||(y._tempCmds.length=0,y._tempCmds.push(this._graphics._one),s=y._tempCmds),!s)return e;(i=y._tempMatrixArrays).length=0;var o=y._initMatrix;o.identity();for(var a,r,l=y._tempMatrix,h=NaN,c=NaN,u=NaN,d=NaN,_=NaN,f=NaN,p=0,g=s.length;p<g;p++)if((a=s[p]).callee)switch(a.callee){case n._save:case 7:i.push(o),o=o.clone();break;case n._restore:case 8:o=i.pop();break;case n._scale:case 5:l.identity(),l.translate(-a[2],-a[3]),l.scale(a[0],a[1]),l.translate(a[2],a[3]),this._switchMatrix(o,l);break;case n._rotate:case 3:l.identity(),l.translate(-a[1],-a[2]),l.rotate(a[0]),l.translate(a[1],a[2]),this._switchMatrix(o,l);break;case n._translate:case 6:l.identity(),l.translate(a[0],a[1]),this._switchMatrix(o,l);break;case n._transform:case 4:l.identity(),l.translate(-a[1],-a[2]),l.concat(a[0]),l.translate(a[1],a[2]),this._switchMatrix(o,l);break;case 16:case 24:y._addPointArrToRst(e,Rectangle._getBoundPointS(a[0],a[1],a[2],a[3]),o);break;case 17:o.copyTo(l),l.concat(a[4]),y._addPointArrToRst(e,Rectangle._getBoundPointS(a[0],a[1],a[2],a[3]),l);break;case n._drawTexture:r=a[0],t?a[3]&&a[4]?y._addPointArrToRst(e,Rectangle._getBoundPointS(a[1],a[2],a[3],a[4]),o):(r=a[0],y._addPointArrToRst(e,Rectangle._getBoundPointS(a[1],a[2],r.width,r.height),o)):(h=(a[3]||r.sourceWidth)/r.width,c=(a[4]||r.sourceHeight)/r.height,u=h*r.sourceWidth,d=c*r.sourceHeight,_=0<r.offsetX?r.offsetX:0,f=0<r.offsetY?r.offsetY:0,_*=h,f*=c,y._addPointArrToRst(e,Rectangle._getBoundPointS(a[1]-_,a[2]-f,u,d),o));break;case n._fillTexture:a[3]&&a[4]?y._addPointArrToRst(e,Rectangle._getBoundPointS(a[1],a[2],a[3],a[4]),o):(r=a[0],y._addPointArrToRst(e,Rectangle._getBoundPointS(a[1],a[2],r.width,r.height),o));break;case n._drawTextureWithTransform:var m;m=a[5]?(o.copyTo(l),l.concat(a[5]),l):o,t?a[3]&&a[4]?y._addPointArrToRst(e,Rectangle._getBoundPointS(a[1],a[2],a[3],a[4]),m):(r=a[0],y._addPointArrToRst(e,Rectangle._getBoundPointS(a[1],a[2],r.width,r.height),m)):(r=a[0],h=(a[3]||r.sourceWidth)/r.width,c=(a[4]||r.sourceHeight)/r.height,u=h*r.sourceWidth,d=c*r.sourceHeight,_=0<r.offsetX?r.offsetX:0,f=0<r.offsetY?r.offsetY:0,_*=h,f*=c,y._addPointArrToRst(e,Rectangle._getBoundPointS(a[1]-_,a[2]-f,u,d),m));break;case n._drawRect:case 13:y._addPointArrToRst(e,Rectangle._getBoundPointS(a[0],a[1],a[2],a[3]),o);break;case n._drawCircle:case n._fillCircle:case 14:y._addPointArrToRst(e,Rectangle._getBoundPointS(a[0]-a[2],a[1]-a[2],a[2]+a[2],a[2]+a[2]),o);break;case n._drawLine:case 20:y._tempPoints.length=0;var b;b=.5*a[5],a[0]==a[2]?y._tempPoints.push(a[0]+b,a[1],a[2]+b,a[3],a[0]-b,a[1],a[2]-b,a[3]):a[1]==a[3]?y._tempPoints.push(a[0],a[1]+b,a[2],a[3]+b,a[0],a[1]-b,a[2],a[3]-b):y._tempPoints.push(a[0],a[1],a[2],a[3]),y._addPointArrToRst(e,y._tempPoints,o);break;case n._drawCurves:case 22:y._addPointArrToRst(e,Bezier$1.I.getBezierPoints(a[2]),o,a[0],a[1]);break;case n._drawPoly:case n._drawLines:case 18:y._addPointArrToRst(e,a[2],o,a[0],a[1]);break;case n._drawPath:case 19:y._addPointArrToRst(e,this._getPathPoints(a[2]),o,a[0],a[1]);break;case n._drawPie:case 15:y._addPointArrToRst(e,this._getPiePoints(a[0],a[1],a[2],a[3],a[4]),o)}return 200<e.length?e=Utils.copyArray(e,Rectangle._getWrapRec(e)._getBoundPoints()):8<e.length&&(e=GrahamScan.scanPList(e)),e},t._switchMatrix=function(t,e){e.concat(t),e.copyTo(t)},t._getPiePoints=function(t,e,i,n,s){var o=y._tempPoints;y._tempPoints.length=0,o.push(t,e);var a=(s-n)%(2*Math.PI)/10,r=NaN,l=n;for(r=0;r<=10;r++)o.push(t+i*Math.cos(l),e+i*Math.sin(l)),l+=a;return o},t._getPathPoints=function(t){var e,i,n=0,s=y._tempPoints;for(s.length=0,e=t.length,n=0;n<e;n++)1<(i=t[n]).length&&(s.push(i[1],i[2]),3<i.length&&s.push(i[3],i[4]));return s},y._addPointArrToRst=function(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=0);var o,a=0;for(o=e.length,a=0;a<o;a+=2)y._addPointToRst(t,e[a]+n,e[a+1]+s,i)},y._addPointToRst=function(t,e,i,n){var s=Point.TEMP;s.setTo(e||0,i||0),n.transformPoint(s),t.push(s.x,s.y)},y._tempPoints=[],y._tempMatrixArrays=[],y._tempCmds=[],__static(y,["_tempMatrix",function(){return this._tempMatrix=new Matrix},"_initMatrix",function(){return this._initMatrix=new Matrix}]),y}(),Event=function(){function t(){}__class(t,"laya.events.Event");var e=t.prototype;return e.setTo=function(t,e,i){return this.type=t,this.currentTarget=e,this.target=i,this},e.stopPropagation=function(){this._stoped=!0},__getset(0,e,"stageY",function(){return Laya.stage.mouseY}),__getset(0,e,"charCode",function(){return this.nativeEvent.charCode}),__getset(0,e,"touches",function(){var t=this.nativeEvent.touches;if(t)for(var e=Laya.stage,i=0,n=t.length;i<n;i++){var s=t[i],o=Point.TEMP;o.setTo(s.clientX,s.clientY),e._canvasTransform.invertTransformPoint(o),e.transform.invertTransformPoint(o),s.stageX=o.x,s.stageY=o.y}return t}),__getset(0,e,"keyLocation",function(){return this.nativeEvent.keyLocation}),__getset(0,e,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),__getset(0,e,"altKey",function(){return this.nativeEvent.altKey}),__getset(0,e,"shiftKey",function(){return this.nativeEvent.shiftKey}),__getset(0,e,"stageX",function(){return Laya.stage.mouseX}),t.EMPTY=new t,t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.CLICK="click",t.RIGHT_MOUSE_DOWN="rightmousedown",t.RIGHT_MOUSE_UP="rightmouseup",t.RIGHT_CLICK="rightclick",t.MOUSE_MOVE="mousemove",t.MOUSE_OVER="mouseover",t.MOUSE_OUT="mouseout",t.MOUSE_WHEEL="mousewheel",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t.DOUBLE_CLICK="doubleclick",t.CHANGE="change",t.CHANGED="changed",t.RESIZE="resize",t.ADDED="added",t.REMOVED="removed",t.DISPLAY="display",t.UNDISPLAY="undisplay",t.ERROR="error",t.COMPLETE="complete",t.LOADED="loaded",t.PROGRESS="progress",t.INPUT="input",t.RENDER="render",t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.KEY_DOWN="keydown",t.KEY_PRESS="keypress",t.KEY_UP="keyup",t.FRAME="enterframe",t.DRAG_START="dragstart",t.DRAG_MOVE="dragmove",t.DRAG_END="dragend",t.ENTER="enter",t.SELECT="select",t.BLUR="blur",t.FOCUS="focus",t.VISIBILITY_CHANGE="visibilitychange",t.FOCUS_CHANGE="focuschange",t.PLAYED="played",t.PAUSED="paused",t.STOPPED="stopped",t.START="start",t.END="end",t.ENABLE_CHANGED="enablechanged",t.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",t.COMPONENT_ADDED="componentadded",t.COMPONENT_REMOVED="componentremoved",t.LAYER_CHANGED="layerchanged",t.HIERARCHY_LOADED="hierarchyloaded",t.RECOVERED="recovered",t.RELEASED="released",t.LINK="link",t.LABEL="label",t.FULL_SCREEN_CHANGE="fullscreenchange",t.DEVICE_LOST="devicelost",t.MESH_CHANGED="meshchanged",t.MATERIAL_CHANGED="materialchanged",t.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",t.ANIMATION_CHANGED="animationchanged",t.TRIGGER_ENTER="triggerenter",t.TRIGGER_STAY="triggerstay",t.TRIGGER_EXIT="triggerexit",t.TRAIL_FILTER_CHANGE="trailfilterchange",t.DOMINO_FILTER_CHANGE="dominofilterchange",t.COMPOSITION_START="compositionstart",t.COMPOSITION_END="compositionend",t}(),Keyboard=function(){function t(){}return __class(t,"laya.events.Keyboard"),t.NUMBER_0=48,t.NUMBER_1=49,t.NUMBER_2=50,t.NUMBER_3=51,t.NUMBER_4=52,t.NUMBER_5=53,t.NUMBER_6=54,t.NUMBER_7=55,t.NUMBER_8=56,t.NUMBER_9=57,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t.F13=124,t.F14=125,t.F15=126,t.NUMPAD=21,t.NUMPAD_0=96,t.NUMPAD_1=97,t.NUMPAD_2=98,t.NUMPAD_3=99,t.NUMPAD_4=100,t.NUMPAD_5=101,t.NUMPAD_6=102,t.NUMPAD_7=103,t.NUMPAD_8=104,t.NUMPAD_9=105,t.NUMPAD_ADD=107,t.NUMPAD_DECIMAL=110,t.NUMPAD_DIVIDE=111,t.NUMPAD_ENTER=108,t.NUMPAD_MULTIPLY=106,t.NUMPAD_SUBTRACT=109,t.SEMICOLON=186,t.EQUAL=187,t.COMMA=188,t.MINUS=189,t.PERIOD=190,t.SLASH=191,t.BACKQUOTE=192,t.LEFTBRACKET=219,t.BACKSLASH=220,t.RIGHTBRACKET=221,t.QUOTE=222,t.ALTERNATE=18,t.BACKSPACE=8,t.CAPS_LOCK=20,t.COMMAND=15,t.CONTROL=17,t.DELETE=46,t.ENTER=13,t.ESCAPE=27,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.SHIFT=16,t.SPACE=32,t.TAB=9,t.INSERT=45,t}(),KeyBoardManager=function(){function s(){}return __class(s,"laya.events.KeyBoardManager"),s.__init__=function(){s._addEvent("keydown"),s._addEvent("keypress"),s._addEvent("keyup")},s._addEvent=function(e){Browser.document.addEventListener(e,function(t){laya.events.KeyBoardManager._dispatch(t,e)},!0)},s._dispatch=function(t,e){if(s.enabled){s._event._stoped=!1,s._event.nativeEvent=t,s._event.keyCode=t.keyCode||t.which||t.charCode,"keydown"===e?s._pressKeys[s._event.keyCode]=!0:"keyup"===e&&(s._pressKeys[s._event.keyCode]=null);for(var i=Laya.stage.focus&&null!=Laya.stage.focus.event&&Laya.stage.focus.displayedInStage?Laya.stage.focus:Laya.stage,n=i;n;)n.event(e,s._event.setTo(e,n,i)),n=n.parent}},s.hasKeyDown=function(t){return s._pressKeys[t]},s._pressKeys={},s.enabled=!0,__static(s,["_event",function(){return this._event=new Event}]),s}(),MouseManager=function(){function c(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new Event,this._matrix=new Matrix,this._point=new Point,this._rect=new Rectangle,this._prePoint=new Point,this._curTouchID=NaN}__class(c,"laya.events.MouseManager");var t=c.prototype;return t.__init__=function(t,e){var i=this;this._stage=t;var n=this,s=this._eventList;e.oncontextmenu=function(t){if(c.enabled)return!1},e.addEventListener("mousedown",function(t){c.enabled&&(Browser.onIE||t.preventDefault(),s.push(t),n.mouseDownTime=Browser.now())}),e.addEventListener("mouseup",function(t){c.enabled&&(t.preventDefault(),s.push(t),n.mouseDownTime=-Browser.now())},!0),e.addEventListener("mousemove",function(t){if(c.enabled){t.preventDefault();var e=Browser.now();if(e-n._lastMoveTimer<10)return;n._lastMoveTimer=e,s.push(t)}},!0),e.addEventListener("mouseout",function(t){c.enabled&&s.push(t)}),e.addEventListener("mouseover",function(t){c.enabled&&s.push(t)}),e.addEventListener("touchstart",function(t){c.enabled&&(s.push(t),c._isFirstTouch||Input.isInputting||t.preventDefault(),n.mouseDownTime=Browser.now())}),e.addEventListener("touchend",function(t){c.enabled?(c._isFirstTouch||Input.isInputting||t.preventDefault(),c._isFirstTouch=!1,s.push(t),n.mouseDownTime=-Browser.now()):i._curTouchID=NaN},!0),e.addEventListener("touchmove",function(t){c.enabled&&(t.preventDefault(),s.push(t))},!0),e.addEventListener("touchcancel",function(t){c.enabled?(t.preventDefault(),s.push(t)):i._curTouchID=NaN},!0),e.addEventListener("mousewheel",function(t){c.enabled&&s.push(t)}),e.addEventListener("DOMMouseScroll",function(t){c.enabled&&s.push(t)})},t.initEvent=function(t,e){var i,n=this;n._event._stoped=!1,n._event.nativeEvent=e||t,n._target=null,this._point.setTo(t.pageX||t.clientX,t.pageY||t.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),n.mouseX=this._point.x,n.mouseY=this._point.y,n._event.touchId=t.identifier||0,this._tTouchID=n._event.touchId,(i=TouchManager.I._event)._stoped=!1,i.nativeEvent=n._event.nativeEvent,i.touchId=n._event.touchId},t.checkMouseWheel=function(t){this._event.delta=t.wheelDelta?.025*t.wheelDelta:-t.detail;for(var e=TouchManager.I.getLastOvers(),i=0,n=e.length;i<n;i++){var s=e[i];s.event("mousewheel",this._event.setTo("mousewheel",s,this._target))}},t.onMouseMove=function(t){TouchManager.I.onMouseMove(t,this._tTouchID)},t.onMouseDown=function(t){if(Input.isInputting&&Laya.stage.focus&&Laya.stage.focus.focus&&!Laya.stage.focus.contains(this._target)){var e=Laya.stage.focus._tf||Laya.stage.focus,i=t._tf||t;i instanceof laya.display.Input&&i.multiline==e.multiline?e._focusOut():e.focus=!1}TouchManager.I.onMouseDown(t,this._tTouchID,this._isLeftMouse)},t.onMouseUp=function(t){TouchManager.I.onMouseUp(t,this._tTouchID,this._isLeftMouse)},t.check=function(t,e,i,n){this._point.setTo(e,i),t.fromParentPoint(this._point),e=this._point.x,i=this._point.y;var s=t.scrollRect;if(s&&(this._rect.setTo(s.x,s.y,s.width,s.height),!this._rect.contains(e,i)))return!1;if(!this.disableMouseEvent){if(t.hitTestPrior&&!t.mouseThrough&&!this.hitTest(t,e,i))return!1;for(var o=t._childs.length-1;-1<o;o--){var a=t._childs[o];if(!a.destroyed&&a.mouseEnabled&&a.visible&&this.check(a,e,i,n))return!0}}var r=!(!t.hitTestPrior||t.mouseThrough||this.disableMouseEvent)||this.hitTest(t,e,i);return r?(this._target=t,n.call(this,t)):n===this.onMouseUp&&t===this._stage&&(this._target=this._stage,n.call(this,this._target)),r},t.hitTest=function(t,e,i){var n=!1;if(t.scrollRect&&(e-=t.scrollRect.x,i-=t.scrollRect.y),t.hitArea instanceof laya.utils.HitArea)return t.hitArea.isHit(e,i);if(0<t.width&&0<t.height||t.mouseThrough||t.hitArea)if(t.mouseThrough)n=t.getGraphicBounds().contains(e,i);else{var s=this._rect;t.hitArea?s=t.hitArea:s.setTo(0,0,t.width,t.height),n=s.contains(e,i)}return n},t.runEvent=function(){var t=this._eventList.length;if(t){for(var e,i=this,n=0,s=0,o=0;n<t;){var a=this._eventList[n];switch("mousemove"!==a.type&&(this._prePoint.x=this._prePoint.y=-1e6),a.type){case"mousedown":this._touchIDs[0]=this._id++,c._isTouchRespond?c._isTouchRespond=!1:(i._isLeftMouse=0===a.button,i.initEvent(a),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseDown));break;case"mouseup":i._isLeftMouse=0===a.button,i.initEvent(a),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-a.clientX)+Math.abs(this._prePoint.y-a.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=a.clientX,this._prePoint.y=a.clientY,i.initEvent(a),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseMove));break;case"touchstart":c._isTouchRespond=!0,i._isLeftMouse=!0;var r=a.changedTouches;for(s=0,o=r.length;s<o;s++)e=r[s],(c.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=e.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[e.identifier]=this._id++,i.initEvent(e,a),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseDown));break;case"touchend":case"touchcancel":c._isTouchRespond=!0,i._isLeftMouse=!0;var l=a.changedTouches;for(s=0,o=l.length;s<o;s++)if(e=l[s],c.multiTouchEnabled||e.identifier==this._curTouchID){this._curTouchID=NaN,i.initEvent(e,a);i.check(i._stage,i.mouseX,i.mouseY,i.onMouseUp)||i.onMouseUp(null)}break;case"touchmove":var h=a.changedTouches;for(s=0,o=h.length;s<o;s++)e=h[s],(c.multiTouchEnabled||e.identifier==this._curTouchID)&&(i.initEvent(e,a),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":i.checkMouseWheel(a);break;case"mouseout":TouchManager.I.stageMouseOut();break;case"mouseover":i._stage.event("mouseover",i._event.setTo("mouseover",i._stage,i._stage))}n++}this._eventList.length=0}},c.enabled=!0,c.multiTouchEnabled=!0,c._isTouchRespond=!1,c._isFirstTouch=!0,__static(c,["instance",function(){return this.instance=new c}]),c}(),TouchManager=function(){function f(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new Event}__class(f,"laya.events.TouchManager");var t=f.prototype;return t._clearTempArrs=function(){f._oldArr.length=0,f._newArr.length=0,f._tEleArr.length=0},t.getTouchFromArr=function(t,e){var i,n,s=0;for(i=e.length,s=0;s<i;s++)if((n=e[s]).id==t)return n;return null},t.removeTouchFromArr=function(t,e){var i=0;for(i=e.length-1;0<=i;i--)e[i].id==t&&e.splice(i,1)},t.createTouchO=function(t,e){var i;return(i=Pool.getItem("TouchData")||{}).id=e,i.tar=t,i},t.onMouseDown=function(t,e,i){var n,s,o,a;(void 0===i&&(i=!1),this.enable)&&(n=this.getTouchFromArr(e,this.preOvers),o=this.getEles(t,null,f._tEleArr),n?n.tar=t:(s=this.createTouchO(t,e),this.preOvers.push(s)),Browser.onMobile&&this.sendEvents(o,"mouseover"),a=i?this.preDowns:this.preRightDowns,(n=this.getTouchFromArr(e,a))?n.tar=t:(s=this.createTouchO(t,e),a.push(s)),this.sendEvents(o,i?"mousedown":"rightmousedown"),this._clearTempArrs())},t.sendEvents=function(t,e){var i,n,s,o=0;for(i=t.length,this._event._stoped=!1,n=t[0],o=0;o<i;o++){if((s=t[o]).destroyed)return;if(s.event(e,this._event.setTo(e,s,n)),this._event._stoped)break}},t.getEles=function(t,e,i){for(i?i.length=0:i=[];t&&t!=e;)i.push(t),t=t.parent;return i},t.checkMouseOutAndOverOfMove=function(t,e,i){if(void 0===i&&(i=0),e!=t){var n,s,o=0,a=0;if(e.contains(t))s=this.getEles(t,e,f._tEleArr),this.sendEvents(s,"mouseover");else if(t.contains(e))s=this.getEles(e,t,f._tEleArr),this.sendEvents(s,"mouseout");else{var r,l;(s=f._tEleArr).length=0,r=this.getEles(e,null,f._oldArr),l=this.getEles(t,null,f._newArr),a=r.length;var h=0;for(o=0;o<a;o++){if(n=r[o],0<=(h=l.indexOf(n))){l.splice(h,l.length-h);break}s.push(n)}0<s.length&&this.sendEvents(s,"mouseout"),0<l.length&&this.sendEvents(l,"mouseover")}}},t.onMouseMove=function(t,e){var i,n;this.enable&&((i=this.getTouchFromArr(e,this.preOvers))?(this.checkMouseOutAndOverOfMove(t,i.tar),i.tar=t,n=this.getEles(t,null,f._tEleArr)):(n=this.getEles(t,null,f._tEleArr),this.sendEvents(n,"mouseover"),this.preOvers.push(this.createTouchO(t,e))),this.sendEvents(n,"mousemove"),this._clearTempArrs())},t.getLastOvers=function(){return(f._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,f._tEleArr):(f._tEleArr.push(Laya.stage),f._tEleArr)},t.stageMouseOut=function(){var t;t=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(t,"mouseout")},t.onMouseUp=function(t,e,i){if(void 0===i&&(i=!1),this.enable){var n,s,o,a,r,l,h=0,c=0,u=Browser.onMobile;if(s=this.getEles(t,null,f._tEleArr),this.sendEvents(s,i?"mouseup":"rightmouseup"),l=i?this.preDowns:this.preRightDowns,n=this.getTouchFromArr(e,l)){var d,_=Browser.now();if(d=_-this._lastClickTime<300,this._lastClickTime=_,t==n.tar)r=s;else for(o=this.getEles(n.tar,null,f._oldArr),(r=f._newArr).length=0,c=o.length,h=0;h<c;h++)a=o[h],0<=s.indexOf(a)&&r.push(a);0<r.length&&this.sendEvents(r,i?"click":"rightclick"),i&&d&&this.sendEvents(r,"doubleclick"),this.removeTouchFromArr(e,l),n.tar=null,Pool.recover("TouchData",n)}else;(n=this.getTouchFromArr(e,this.preOvers))&&u&&((r=this.getEles(n.tar,null,r))&&0<r.length&&this.sendEvents(r,"mouseout"),this.removeTouchFromArr(e,this.preOvers),n.tar=null,Pool.recover("TouchData",n)),this._clearTempArrs()}},f._oldArr=[],f._newArr=[],f._tEleArr=[],__static(f,["I",function(){return this.I=new f}]),f}(),Filter=function(){function t(){this._action=null}__class(t,"laya.filters.Filter");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilter":!0}),e.callNative=function(t){},__getset(0,e,"type",function(){return-1}),__getset(0,e,"action",function(){return this._action}),t.BLUR=16,t.COLOR=32,t.GLOW=8,t._filterStart=null,t._filterEnd=null,t._EndTarget=null,t._recycleScope=null,t._filter=null,t._useSrc=null,t._endSrc=null,t._useOut=null,t._endOut=null,t}(),ColorFilterAction=function(){function t(){this.data=null}__class(t,"laya.filters.ColorFilterAction");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(t){var e=t.ctx.ctx,i=t.ctx.ctx.canvas;if(0==i.width||0==i.height)return i;for(var n,s=e.getImageData(0,0,i.width,i.height),o=s.data,a=0,r=o.length;a<r;a+=4)n=this.getColor(o[a],o[a+1],o[a+2],o[a+3]),0!=o[a+3]&&(o[a]=n[0],o[a+1]=n[1],o[a+2]=n[2],o[a+3]=n[3]);return e.putImageData(s,0,0),t},e.getColor=function(t,e,i,n){var s=[];if(this.data._mat&&this.data._alpha){var o=this.data._mat,a=this.data._alpha;s[0]=o[0]*t+o[1]*e+o[2]*i+o[3]*n+a[0],s[1]=o[4]*t+o[5]*e+o[6]*i+o[7]*n+a[1],s[2]=o[8]*t+o[9]*e+o[10]*i+o[11]*n+a[2],s[3]=o[12]*t+o[13]*e+o[14]*i+o[15]*n+a[3]}return s},t}(),FilterAction=function(){function t(){this.data=null}__class(t,"laya.filters.FilterAction");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(t){return null},t}(),FilterActionGL=function(){function t(){}__class(t,"laya.filters.webgl.FilterActionGL");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilterActionGL":!0}),e.setValue=function(t){},e.setValueMix=function(t){},e.apply3d=function(t,e,i,n,s){return null},e.apply=function(t){return null},__getset(0,e,"typeMix",function(){return 0}),t}(),WebGLFilter=function(){function t(){}return __class(t,"laya.filters.WebGLFilter"),t.enable=function(){t.isInit||(t.isInit=!0,Render.isWebGL&&(RunDriver.createFilterAction=function(t){var e;switch(t){case 32:e=new ColorFilterActionGL;break;case 16:e=new BlurFilterActionGL;break;case 8:e=new GlowFilterActionGL}return e}))},t.isInit=!1,t.__init$=function(){RunDriver.createFilterAction=function(t){var e;switch(t){case 16:case 8:e=new FilterAction;break;case 32:e=new ColorFilterAction}return e}},t}(),HTMLParse=function(){function _(){}return __class(_,"laya.html.utils.HTMLParse"),_.parse=function(t,e,i){e=(e="<root>"+(e=e.replace(/<br>/g,"<br/>"))+"</root>").replace(_.spacePattern,_.char255);var n=Utils.parseXMLFromString(e);_._parseXML(t,n.childNodes[0].childNodes,i)},_._parseXML=function(t,e,i,n){var s=0,o=0;if(e.join||e.item)for(s=0,o=e.length;s<o;++s)_._parseXML(t,e[s],i,n);else{var a,r,l;if(3==e.nodeType)return void(t instanceof laya.html.dom.HTMLDivElement?(null==e.nodeName&&(e.nodeName="#text"),r=e.nodeName.toLowerCase(),0<(l=e.textContent.replace(/^\s+|\s+$/g,"")).length&&(a=ClassUtils.getInstance(r))&&(t.addChild(a),a.innerTEXT=l.replace(_.char255AndOneSpacePattern," "))):0<(l=e.textContent.replace(/^\s+|\s+$/g,"")).length&&(t.innerTEXT=l.replace(_.char255AndOneSpacePattern," ")));if("#comment"==(r=e.nodeName.toLowerCase()))return;if("u"!=r&&(a=ClassUtils.getInstance(r)),a){(a=t.addChild(a)).URI=i,a.href=n;var h=e.attributes;if(h&&0<h.length)for(s=0,o=h.length;s<o;++s){var c=h[s],u=c.nodeName,d=c.value;a._setAttributes(u,d)}_._parseXML(a,e.childNodes,i,a.href)}else _._parseXML(t,e.childNodes,i,n)}},_.char255=String.fromCharCode(255),_.spacePattern=/&nbsp;|&#160;/g,_.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),_}(),Layout=function(){function W(){}return __class(W,"laya.html.utils.Layout"),W.later=function(t){null==W._will&&(W._will=[],Laya.stage.frameLoop(1,null,function(){if(!(W._will.length<1)){for(var t=0;t<W._will.length;t++)laya.html.utils.Layout.layout(W._will[t]);W._will.length=0}})),W._will.push(t)},W.layout=function(t){if(!t||!t._style)return null;if(0==(512&t._style._type))return null;t.getStyle()._type&=-513;var e=W._multiLineLayout(t);return Render.isConchApp&&t.layaoutCallNative&&t.layaoutCallNative(),e},W._multiLineLayout=function(t){if(Text.RightToLeft)return W._multiLineLayout2(t);var e=new Array;t._addChildsToLayout(e);var i,n,s,o,a,r=0,l=e.length,h=t._getCSSStyle(),c=h.letterSpacing,u=h.leading,d=h.lineHeight,_=h._widthAuto()||!h.wordWrap,f=_?999999:t.width,p=(t.height,0),g=h.italic?h.fontSize/3:0,m=h._getAlign(),b=h._getValign(),y=0!==b||0!==m||0!=d,v=0,w=0,x=0,C=0,S=new Array,T=S[0]=new LayoutLine,L=!1,R=!1;T.h=0,h.italic&&(f-=h.fontSize/3);var I=0,G=!0;function M(){T.y=w,w+=T.h+u,0==T.h&&(w+=d),T.mWidth=I,I=0,T=new LayoutLine,S.push(T),T.h=0,L=!(G=!(v=0))}for(r=0;r<l;r++)if(null!=(i=e[r]))if(G=!1,i instanceof laya.html.dom.HTMLBrElement)M(),T.y=w;else{if(i._isChar()){if((o=i).isWord)L=R||"\n"===o.char,T.wordStartIndex=T.elements.length;else{if(0<S.length&&f<v+x&&0<T.wordStartIndex){var A;A=T.elements.length-T.wordStartIndex+1,T.elements.length=T.wordStartIndex,r-=A,M();continue}L=!1,I+=o.width}x=o.width+c,C=o.height,R=!1,(L=L||f<v+x)&&M(),T.minTextHeight=Math.min(T.minTextHeight,i.height)}else n=i._getCSSStyle(),a=i,s=n.padding,0===n._getCssFloat()||(y=!0),L=R||n.lineElement,x=a.width*a._style._tf.scaleX+s[1]+s[3]+c,C=a.height*a._style._tf.scaleY+s[0]+s[2],R=n.lineElement,(L=L||f<v+x&&n.wordWrap)&&M();T.elements.push(i),T.h=Math.max(T.h,C),i.x=v,i.y=w,v+=x,T.w=v-c,T.y=w,p=Math.max(v+g,p)}else G||(v+=W.DIV_ELEMENT_PADDING),T.wordStartIndex=T.elements.length;if(w=T.y+T.h,y){var k=0,B=f;for(_&&0<t.width&&(B=t.width),r=0,l=S.length;r<l;r++)S[r].updatePos(0,B,r,k,m,b,d),k+=Math.max(d,S[r].h+u);w=k}return _&&(t.width=p),w>t.height&&(t.height=w),[p,w]},W._multiLineLayout2=function(t){var e=new Array;t._addChildsToLayout(e);var i,n,s,o,a,r=0,l=e.length,h=t._getCSSStyle(),c=h.letterSpacing,u=h.leading,d=h.lineHeight,_=h._widthAuto()||!h.wordWrap,f=_?999999:t.width,p=(t.height,0),g=h.italic?h.fontSize/3:0,m=2-h._getAlign(),b=h._getValign(),y=0!==b||0!=m||0!=d,v=0,w=0,x=0,C=0,S=new Array,T=S[0]=new LayoutLine,L=!1,R=!1;T.h=0,h.italic&&(f-=h.fontSize/3);var I=0,G=!0;function M(){T.y=w,w+=T.h+u,0==T.h&&(w+=d),T.mWidth=I,I=0,T=new LayoutLine,S.push(T),T.h=0,L=!(G=!(v=0))}for(r=0;r<l;r++)if(null!=(i=e[r]))if(G=!1,i instanceof laya.html.dom.HTMLBrElement)M(),T.y=w;else{if(i._isChar()){if((o=i).isWord)L=R||"\n"===o.char,T.wordStartIndex=T.elements.length;else{if(0<S.length&&f<v+x&&0<T.wordStartIndex){var A;A=T.elements.length-T.wordStartIndex+1,T.elements.length=T.wordStartIndex,r-=A,M();continue}L=!1,I+=o.width}x=o.width+c,C=o.height,R=!1,(L=L||f<v+x)&&M(),T.minTextHeight=Math.min(T.minTextHeight,i.height)}else n=i._getCSSStyle(),a=i,s=n.padding,0===n._getCssFloat()||(y=!0),L=R||n.lineElement,x=a.width*a._style._tf.scaleX+s[1]+s[3]+c,C=a.height*a._style._tf.scaleY+s[0]+s[2],R=n.lineElement,(L=L||f<v+x&&n.wordWrap)&&M();T.elements.push(i),T.h=Math.max(T.h,C),i.x=v,i.y=w,v+=x,T.w=v-c,T.y=w,p=Math.max(v+g,p)}else G||(v+=W.DIV_ELEMENT_PADDING),T.wordStartIndex=T.elements.length;if(w=T.y+T.h,y){var k=0,B=f;for(r=0,l=S.length;r<l;r++)S[r].updatePos(0,B,r,k,m,b,d),k+=Math.max(d,S[r].h+u);w=k}for(_&&(t.width=p),w>t.height&&(t.height=w),r=0,l=S.length;r<l;r++)S[r].revertOrder(f);return[p,w]},W._will=null,W.DIV_ELEMENT_PADDING=0,W}(),LayoutLine=function(){function t(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}__class(t,"laya.html.utils.LayoutLine");var e=t.prototype;return e.updatePos=function(t,e,i,n,s,o,a){var r,l=0;0<this.elements.length&&(l=(r=this.elements[this.elements.length-1]).x+r.width-this.elements[0].x);var h=0,c=NaN;1===s&&(h=(e-l)/2),2===s&&(h=e-l),0===a||0!=o||(o=1);for(var u=0,d=this.elements.length;u<d;u++){var _=(r=this.elements[u])._getCSSStyle();switch(0!==h&&(r.x+=h),_._getValign()){case 0:r.y=n;break;case 1:var f=0;99999!=this.minTextHeight&&(f=this.minTextHeight);var p=(f+a)/2;p=Math.max(p,this.h),c=(laya.html.dom.HTMLImageElement,n+p-r.height),r.y=c;break;case 2:r.y=n+(a-r.height)}}},e.revertOrder=function(t){var e;if(0<this.elements.length){var i,n=0;for(i=this.elements.length,n=0;n<i;n++)(e=this.elements[n]).x=t-e.x-e.width}},t}(),Arith=function(){function t(){}return __class(t,"laya.maths.Arith"),t.formatR=function(t){return t>Math.PI&&(t-=2*Math.PI),t<-Math.PI&&(t+=2*Math.PI),t},t.isPOT=function(t,e){return 0<t&&0==(t&t-1)&&0<e&&0==(e&e-1)},t.setMatToArray=function(t,e){t.a,t.b,t.c,t.d,t.tx,t.ty,e[0]=t.a,e[1]=t.b,e[4]=t.c,e[5]=t.d,e[12]=t.tx,e[13]=t.ty},t}(),Bezier$1=function(){function t(){this._controlPoints=[new Point,new Point,new Point],this._calFun=this.getPoint2}__class(t,"laya.maths.Bezier",null,"Bezier$1");var e=t.prototype;return e._switchPoint=function(t,e){var i=this._controlPoints.shift();i.setTo(t,e),this._controlPoints.push(i)},e.getPoint2=function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],s=this._controlPoints[2],o=Math.pow(1-t,2)*i.x+2*t*(1-t)*n.x+Math.pow(t,2)*s.x,a=Math.pow(1-t,2)*i.y+2*t*(1-t)*n.y+Math.pow(t,2)*s.y;e.push(o,a)},e.getPoint3=function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],s=this._controlPoints[2],o=this._controlPoints[3],a=Math.pow(1-t,3)*i.x+3*n.x*t*(1-t)*(1-t)+3*s.x*t*t*(1-t)+o.x*Math.pow(t,3),r=Math.pow(1-t,3)*i.y+3*n.y*t*(1-t)*(1-t)+3*s.y*t*t*(1-t)+o.y*Math.pow(t,3);e.push(a,r)},e.insertPoints=function(t,e){var i,n=NaN;for(i=1/(t=0<t?t:5),n=0;n<=1;n+=i)this._calFun(n,e)},e.getBezierPoints=function(t,e,i){void 0===e&&(e=5),void 0===i&&(i=2);var n,s,o=0;if((n=t.length)<2*(i+1))return[];switch(s=[],i){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=i;)this._controlPoints.push(new Point);for(o=0;o<2*i;o+=2)this._switchPoint(t[o],t[o+1]);for(o=2*i;o<n;o+=2)this._switchPoint(t[o],t[o+1]),o/2%i==0&&this.insertPoints(e,s);return s},__static(t,["I",function(){return this.I=new t}]),t}(),GrahamScan=function(){function h(){}return __class(h,"laya.maths.GrahamScan"),h.multiply=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},h.dis=function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},h._getPoints=function(t,e,i){for(void 0===e&&(e=!1),h._mPointList||(h._mPointList=[]);h._mPointList.length<t;)h._mPointList.push(new Point);return i||(i=[]),i.length=0,e?h.getFrom(i,h._mPointList,t):h.getFromR(i,h._mPointList,t),i},h.getFrom=function(t,e,i){var n=0;for(n=0;n<i;n++)t.push(e[n]);return t},h.getFromR=function(t,e,i){var n=0;for(n=0;n<i;n++)t.push(e.pop());return t},h.pListToPointList=function(t,e){void 0===e&&(e=!1);var i=0,n=t.length/2,s=h._getPoints(n,e,h._tempPointList);for(i=0;i<n;i++)s[i].setTo(t[i+i],t[i+i+1]);return s},h.pointListToPlist=function(t){var e,i=0,n=t.length,s=h._temPList;for(i=s.length=0;i<n;i++)e=t[i],s.push(e.x,e.y);return s},h.scanPList=function(t){return Utils.copyArray(t,h.pointListToPlist(h.scan(h.pListToPointList(t,!0))))},h.scan=function(t){var e,i,n,s=0,o=0,a=0,r=t.length,l={};for((i=h._temArr).length=0,s=(r=t.length)-1;0<=s;s--)n=(e=t[s]).x+"_"+e.y,l.hasOwnProperty(n)||(l[n]=!0,i.push(e));for(r=i.length,Utils.copyArray(t,i),s=1;s<r;s++)(t[s].y<t[a].y||t[s].y==t[a].y&&t[s].x<t[a].x)&&(a=s);for(e=t[0],t[0]=t[a],t[a]=e,s=1;s<r-1;s++){for(o=(a=s)+1;o<r;o++)(0<h.multiply(t[o],t[a],t[0])||0==h.multiply(t[o],t[a],t[0])&&h.dis(t[0],t[o])<h.dis(t[0],t[a]))&&(a=o);e=t[s],t[s]=t[a],t[a]=e}if((i=h._temArr).length=0,t.length<3)return Utils.copyArray(i,t);for(i.push(t[0],t[1],t[2]),s=3;s<r;s++){for(;2<=i.length&&0<=h.multiply(t[s],i[i.length-1],i[i.length-2]);)i.pop();t[s]&&i.push(t[s])}return i},h._mPointList=null,h._tempPointList=[],h._temPList=[],h._temArr=[],h}(),MathUtil=function(){function s(){}return __class(s,"laya.maths.MathUtil"),s.subtractVector3=function(t,e,i){i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2]},s.lerp=function(t,e,i){return t*(1-i)+e*i},s.scaleVector3=function(t,e,i){i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e},s.lerpVector3=function(t,e,i,n){var s=t[0],o=t[1],a=t[2];n[0]=s+i*(e[0]-s),n[1]=o+i*(e[1]-o),n[2]=a+i*(e[2]-a)},s.lerpVector4=function(t,e,i,n){var s=t[0],o=t[1],a=t[2],r=t[3];n[0]=s+i*(e[0]-s),n[1]=o+i*(e[1]-o),n[2]=a+i*(e[2]-a),n[3]=r+i*(e[3]-r)},s.slerpQuaternionArray=function(t,e,i,n,s,o,a){var r,l,h,c,u,d=t[e+0],_=t[e+1],f=t[e+2],p=t[e+3],g=i[n+0],m=i[n+1],b=i[n+2],y=i[n+3];return(l=d*g+_*m+f*b+p*y)<0&&(l=-l,g=-g,m=-m,b=-b,y=-y),u=1e-6<1-l?(r=Math.acos(l),h=Math.sin(r),c=Math.sin((1-s)*r)/h,Math.sin(s*r)/h):(c=1-s,s),o[a+0]=c*d+u*g,o[a+1]=c*_+u*m,o[a+2]=c*f+u*b,o[a+3]=c*p+u*y,o},s.getRotation=function(t,e,i,n){return Math.atan2(n-e,i-t)/Math.PI*180},s.sortBigFirst=function(t,e){return t==e?0:t<e?1:-1},s.sortSmallFirst=function(t,e){return t==e?0:t<e?-1:1},s.sortNumBigFirst=function(t,e){return parseFloat(e)-parseFloat(t)},s.sortNumSmallFirst=function(t,e){return parseFloat(t)-parseFloat(e)},s.sortByKey=function(i,t,e){var n;return void 0===t&&(t=!1),void 0===e&&(e=!0),n=t?e?s.sortNumBigFirst:s.sortBigFirst:e?s.sortNumSmallFirst:s.sortSmallFirst,function(t,e){return n(t[i],e[i])}},s}(),Matrix=function(){function i(t,e,i,n,s,o){this.inPool=!1,this.bTransform=!1,void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===o&&(o=0),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=o,this._checkTransform()}__class(i,"laya.maths.Matrix");var t=i.prototype;return t.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},t._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},t.setTranslate=function(t,e){return this.tx=t,this.ty=e,this},t.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.scale=function(t,e){this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this.bTransform=!0},t.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,o=this.tx;this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this.bTransform=!0},t.skew=function(t,e){var i=Math.tan(t),n=Math.tan(e),s=this.a,o=this.b;return this.a+=n*this.c,this.b+=n*this.d,this.c+=i*s,this.d+=i*o,this},t.invertTransformPoint=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,o=this.tx,a=e*s-i*n,r=s/a,l=-i/a,h=-n/a,c=e/a,u=(n*this.ty-s*o)/a,d=-(e*this.ty-i*o)/a;return t.setTo(r*t.x+h*t.y+u,l*t.x+c*t.y+d)},t.transformPoint=function(t){return t.setTo(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty)},t.transformPointN=function(t){return t.setTo(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y)},t.transformPointArray=function(t,e){for(var i=t.length,n=0;n<i;n+=2){var s=t[n],o=t[n+1];e[n]=this.a*s+this.c*o+this.tx,e[n+1]=this.b*s+this.d*o+this.ty}return e},t.transformPointArrayScale=function(t,e){for(var i=t.length,n=0;n<i;n+=2){var s=t[n],o=t[n+1];e[n]=this.a*s+this.c*o,e[n+1]=this.b*s+this.d*o}return e},t.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},t.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},t.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*s)/o,this.ty=-(t*this.ty-e*s)/o,this},t.setTo=function(t,e,i,n,s,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=o,this},t.concat=function(t){var e=this.a,i=this.c,n=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d,this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this},t.scaleEx=function(t,e){var i=this.a,n=this.b,s=this.c,o=this.d;0!==n||0!==s?(this.a=t*i,this.b=t*n,this.c=e*s):(this.a=t*i,this.b=0*o,this.c=0*i),this.d=e*o,this.bTransform=!0},t.rotateEx=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.b,o=this.c,a=this.d;0!==s||0!==o?(this.a=e*n+i*o,this.b=e*s+i*a,this.c=-i*n+e*o,this.d=-i*s+e*a):(this.a=e*n,this.b=i*a,this.c=-i*n,this.d=e*a),this.bTransform=!0},t.clone=function(){var t=i.create();return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t.bTransform=this.bTransform,t},t.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t.bTransform=this.bTransform,t},t.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},t.destroy=function(){if(!this.inPool){var t=i._cache;this.inPool=!0,t._length||(t._length=0),(t[t._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},i.mul=function(t,e,i){var n=t.a,s=t.b,o=t.c,a=t.d,r=t.tx,l=t.ty,h=e.a,c=e.b,u=e.c,d=e.d,_=e.tx,f=e.ty;return 0!==c||0!==u?(i.a=n*h+s*u,i.b=n*c+s*d,i.c=o*h+a*u,i.d=o*c+a*d,i.tx=h*r+u*l+_,i.ty=c*r+d*l+f):(i.a=n*h,i.b=s*d,i.c=o*h,i.d=a*d,i.tx=h*r+_,i.ty=d*l+f),i},i.mul16=function(t,e,i){var n=t.a,s=t.b,o=t.c,a=t.d,r=t.tx,l=t.ty,h=e.a,c=e.b,u=e.c,d=e.d,_=e.tx,f=e.ty;return 0!==c||0!==u?(i[0]=n*h+s*u,i[1]=n*c+s*d,i[4]=o*h+a*u,i[5]=o*c+a*d,i[12]=h*r+u*l+_,i[13]=c*r+d*l+f):(i[0]=n*h,i[1]=s*d,i[4]=o*h,i[5]=a*d,i[12]=h*r+_,i[13]=d*l+f),i},i.mulPre=function(t,e,i,n,s,o,a,r){var l=t.a,h=t.b,c=t.c,u=t.d,d=t.tx,_=t.ty;return 0!==i||0!==n?(r.a=l*e+h*n,r.b=l*i+h*s,r.c=c*e+u*n,r.d=c*i+u*s,r.tx=e*d+n*_+o,r.ty=i*d+s*_+a):(r.a=l*e,r.b=h*s,r.c=c*e,r.d=u*s,r.tx=e*d+o,r.ty=s*_+a),r},i.mulPos=function(t,e,i,n,s,o,a,r){var l=t.a,h=t.b,c=t.c,u=t.d,d=t.tx,_=t.ty;return 0!==h||0!==c?(r.a=e*l+i*c,r.b=e*h+i*u,r.c=n*l+s*c,r.d=n*h+s*u,r.tx=l*o+c*a+d,r.ty=h*o+u*a+_):(r.a=e*l,r.b=i*u,r.c=n*l,r.d=s*u,r.tx=l*o+d,r.ty=u*a+_),r},i.preMul=function(t,e,i){var n=t.a,s=t.b,o=t.c,a=t.d,r=e.a,l=e.b,h=e.c,c=e.d,u=e.tx,d=e.ty;return i.a=r*n,i.b=i.c=0,i.d=c*a,i.tx=u*n+t.tx,i.ty=d*a+t.ty,0===l&&0===h&&0===s&&0===o||(i.a+=l*o,i.d+=h*s,i.b+=r*s+l*a,i.c+=h*n+c*o,i.tx+=d*o,i.ty+=u*s),i},i.preMulXY=function(t,e,i,n){var s=t.a,o=t.b,a=t.c,r=t.d;return n.a=s,n.b=o,n.c=a,n.d=r,n.tx=e*s+t.tx+i*a,n.ty=i*r+t.ty+e*o,n},i.create=function(){var t=i._cache,e=t._length?t[--t._length]:new i;return e.inPool=!1,e},i.EMPTY=new i,i.TEMP=new i,i._cache=[],i}(),Point=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}__class(t,"laya.maths.Point");var e=t.prototype;return e.setTo=function(t,e){return this.x=t,this.y=e,this},e.distance=function(t,e){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-e)*(this.y-e))},e.toString=function(){return this.x+","+this.y},e.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(0<t){var e=1/t;this.x*=e,this.y*=e}},t.TEMP=new t,t.EMPTY=new t,t}(),Rectangle=function(){function h(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n}__class(h,"laya.maths.Rectangle");var t=h.prototype;return t.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},t.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.right&&e>=this.y&&e<this.bottom)},t.intersects=function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y)},t.intersection=function(t,e){return this.intersects(t)?(e||(e=new h),e.x=Math.max(this.x,t.x),e.y=Math.max(this.y,t.y),e.width=Math.min(this.right,t.right)-e.x,e.height=Math.min(this.bottom,t.bottom)-e.y,e):null},t.union=function(t,e){return e||(e=new h),this.clone(e),t.width<=0||t.height<=0?e:(e.addPoint(t.x,t.y),e.addPoint(t.right,t.bottom),this)},t.clone=function(t){return t||(t=new h),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},t.equals=function(t){return!(!t||t.x!==this.x||t.y!==this.y||t.width!==this.width||t.height!==this.height)},t.addPoint=function(t,e){return this.x>t&&(this.width+=this.x-t,this.x=t),this.y>e&&(this.height+=this.y-e,this.y=e),this.width<t-this.x&&(this.width=t-this.x),this.height<e-this.y&&(this.height=e-this.y),this},t._getBoundPoints=function(){var t=h._temB;return(t.length=0)==this.width||0==this.height||t.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),t},t.isEmpty=function(){return this.width<=0||this.height<=0},__getset(0,t,"right",function(){return this.x+this.width}),__getset(0,t,"bottom",function(){return this.y+this.height}),h._getBoundPointS=function(t,e,i,n){var s=h._temA;return(s.length=0)==i||0==n||s.push(t,e,t+i,e,t,e+n,t+i,e+n),s},h._getWrapRec=function(t,e){if(!t||t.length<1)return e?e.setTo(0,0,0,0):h.TEMP.setTo(0,0,0,0);e=e||new h;var i,n,s,o,a,r=t.length,l=Point.TEMP;for(s=a=-(n=o=99999),i=0;i<r;i+=2)l.x=t[i],l.y=t[i+1],n=n<l.x?n:l.x,o=o<l.y?o:l.y,s=s>l.x?s:l.x,a=a>l.y?a:l.y;return e.setTo(n,o,s-n,a-o)},h.EMPTY=new h,h.TEMP=new h,h._temB=[],h._temA=[],h}(),SoundManager=function(){function l(){}return __class(l,"laya.media.SoundManager"),__getset(1,l,"useAudioMusic",function(){return l._useAudioMusic},function(t){l._useAudioMusic=t,l._musicClass=t?AudioSound:null}),__getset(1,l,"autoStopMusic",function(){return l._autoStopMusic},function(t){Laya.stage.off("blur",null,l._stageOnBlur),Laya.stage.off("focus",null,l._stageOnFocus),Laya.stage.off("visibilitychange",null,l._visibilityChange),(l._autoStopMusic=t)&&(Laya.stage.on("blur",null,l._stageOnBlur),Laya.stage.on("focus",null,l._stageOnFocus),Laya.stage.on("visibilitychange",null,l._visibilityChange))}),__getset(1,l,"muted",function(){return l._muted},function(t){t!=l._muted&&(t&&l.stopAllSound(),l.musicMuted=t,l._muted=t)}),__getset(1,l,"musicMuted",function(){return l._musicMuted},function(t){t!=l._musicMuted&&(t?(l._tMusic&&l._musicChannel&&!l._musicChannel.isStopped?Render.isConchApp?l._musicChannel._audio&&(l._musicChannel._audio.muted=!0):l._musicChannel.pause():l._musicChannel=null,l._musicMuted=t):(l._musicMuted=t,l._tMusic&&l._musicChannel&&(Render.isConchApp?l._musicChannel._audio&&(l._musicChannel._audio.muted=!1):l._musicChannel.resume())))}),__getset(1,l,"soundMuted",function(){return l._soundMuted},function(t){l._soundMuted=t}),l.addChannel=function(t){0<=l._channels.indexOf(t)||l._channels.push(t)},l.removeChannel=function(t){var e=0;for(e=l._channels.length-1;0<=e;e--)l._channels[e]==t&&l._channels.splice(e,1)},l.disposeSoundIfNotUsed=function(t){var e=0;for(e=l._channels.length-1;0<=e;e--)if(l._channels[e].url==t)return;l.destroySound(t)},l._visibilityChange=function(){Laya.stage.isVisibility?l._stageOnFocus():l._stageOnBlur()},l._stageOnBlur=function(){l._isActive=!1,l._musicChannel&&(l._musicChannel.isStopped||(l._blurPaused=!0,l._musicChannel.pause())),l.stopAllSound(),Laya.stage.once("mousedown",null,l._stageOnFocus)},l._recoverWebAudio=function(){WebAudioSound.ctx&&"running"!=WebAudioSound.ctx.state&&WebAudioSound.ctx.resume&&WebAudioSound.ctx.resume()},l._stageOnFocus=function(){l._isActive=!0,l._recoverWebAudio(),Laya.stage.off("mousedown",null,l._stageOnFocus),l._blurPaused&&l._musicChannel&&l._musicChannel.isStopped&&(l._blurPaused=!1,l._musicChannel.resume())},l.playSound=function(t,e,i,n,s){if(void 0===e&&(e=1),void 0===s&&(s=0),!l._isActive||!t)return null;if(l._muted)return null;if(l._recoverWebAudio(),(t=URL.formatURL(t))==l._tMusic){if(l._musicMuted)return null}else{if(Render.isConchApp){var o=Utils.getFileExtension(t);if("wav"!=o&&"ogg"!=o)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null}if(l._soundMuted)return null}var a,r;return Browser.onMiniGame||(a=Laya.loader.getRes(t)),n||(n=l._soundClass),a||((a=new n).load(t),Browser.onMiniGame||Loader.cacheRes(t,a)),(r=a.play(s,e))?(r.url=t,r.volume=t==l._tMusic?l.musicVolume:l.soundVolume,r.completeHandler=i,r):null},l.destroySound=function(t){var e=Laya.loader.getRes(t);e&&(Loader.clearRes(t),e.dispose())},l.playMusic=function(t,e,i,n){return void 0===e&&(e=0),void 0===n&&(n=0),t=URL.formatURL(t),l._tMusic=t,l._musicChannel&&l._musicChannel.stop(),l._musicChannel=l.playSound(t,e,i,l._musicClass,n)},l.stopSound=function(t){t=URL.formatURL(t);var e,i=0;for(i=l._channels.length-1;0<=i;i--)(e=l._channels[i]).url==t&&e.stop()},l.stopAll=function(){l._tMusic=null;var t=0;for(t=l._channels.length-1;0<=t;t--)l._channels[t].stop()},l.stopAllSound=function(){var t,e=0;for(e=l._channels.length-1;0<=e;e--)(t=l._channels[e]).url!=l._tMusic&&t.stop()},l.stopMusic=function(){l._musicChannel&&l._musicChannel.stop(),l._tMusic=null},l.setSoundVolume=function(t,e){if(e)e=URL.formatURL(e),l._setVolume(e,t);else{l.soundVolume=t;var i,n=0;for(n=l._channels.length-1;0<=n;n--)(i=l._channels[n]).url!=l._tMusic&&(i.volume=t)}},l.setMusicVolume=function(t){l.musicVolume=t,l._setVolume(l._tMusic,t)},l._setVolume=function(t,e){t=URL.formatURL(t);var i,n=0;for(n=l._channels.length-1;0<=n;n--)(i=l._channels[n]).url==t&&(i.volume=e)},l.musicVolume=1,l.soundVolume=1,l.playbackRate=1,l._useAudioMusic=!0,l._muted=!1,l._soundMuted=!1,l._musicMuted=!1,l._tMusic=null,l._musicChannel=null,l._channels=[],l._autoStopMusic=!1,l._blurPaused=!1,l._isActive=!0,l._soundClass=null,l._musicClass=null,l.autoReleaseSound=!0,l}(),LocalStorage=function(){var t;function i(){}return __class(i,"laya.net.LocalStorage"),i.__init__=function(){i._baseClass||(i._baseClass=t).init(),i.items=i._baseClass.items,i.support=i._baseClass.support},i.setItem=function(t,e){i._baseClass.setItem(t,e)},i.getItem=function(t){return i._baseClass.getItem(t)},i.setJSON=function(t,e){i._baseClass.setJSON(t,e)},i.getJSON=function(t){return i._baseClass.getJSON(t)},i.removeItem=function(t){i._baseClass.removeItem(t)},i.clear=function(){i._baseClass.clear()},i._baseClass=null,i.items=null,i.support=!1,i.__init$=function(){t=function(){function i(){}return __class(i,""),i.init=function(){try{i.support=!0,i.items=window.localStorage,i.setItem("laya","1"),i.removeItem("laya")}catch(t){i.support=!1}i.support||console.log("LocalStorage is not supprot or browser is private mode.")},i.setItem=function(t,e){try{i.support&&i.items.setItem(t,e)}catch(t){console.warn("set localStorage failed",t)}},i.getItem=function(t){return i.support?i.items.getItem(t):null},i.setJSON=function(t,e){try{i.support&&i.items.setItem(t,JSON.stringify(e))}catch(t){console.warn("set localStorage failed",t)}},i.getJSON=function(t){return JSON.parse(i.support?i.items.getItem(t):null)},i.removeItem=function(t){i.support&&i.items.removeItem(t)},i.clear=function(){i.support&&i.items.clear()},i.items=null,i.support=!1,i}()},i}(),TTFLoader=function(){function t(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}__class(t,"laya.net.TTFLoader");var e=t.prototype;return e.load=function(t){var e=(this._url=t).split(".ttf")[0].split("/");this.fontName=e[e.length-1],Browser.window.conch?this._loadConch():Browser.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},e._loadConch=function(){this._http=new HttpRequest,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},e._onHttpLoaded=function(t){Browser.window.conch.setFontFaceFromBuffer(this.fontName,t),this._clearHttp(),this._complete()},e._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},e._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},e._complete=function(){Laya.timer.clear(this,this._complete),Laya.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},e._checkComplete=function(){RunDriver.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},e._loadWithFontFace=function(){var t=new Browser.window.FontFace(this.fontName,"url('"+this._url+"')");Browser.window.document.fonts.add(t);var e=this;t.loaded.then(function(){e._complete()}),t.load()},e._createDiv=function(){this._div=Browser.createElement("div"),this._div.innerHTML="laya";var t=this._div.style;t.fontFamily=this.fontName,t.position="absolute",t.left="-100px",t.top="-100px",Browser.document.body.appendChild(this._div)},e._loadWithCSS=function(){var t=this,e=Browser.createElement("style");e.type="text/css",Browser.document.body.appendChild(e),e.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=RunDriver.measureText("LayaTTFFont",this._fontTxt).width;var i=this;e.onload=function(){Laya.timer.once(1e4,i,t._complete)},Laya.timer.loop(20,this,this._checkComplete),this._createDiv()},t._testString="LayaTTFFont",t}(),URL=function(){function n(t){this._url=null,this._path=null,this._url=n.formatURL(t),this._path=n.getPath(t)}__class(n,"laya.net.URL");var t=n.prototype;return __getset(0,t,"path",function(){return this._path}),__getset(0,t,"url",function(){return this._url}),n.formatURL=function(t,e){if(!t)return"null path";if(0<t.indexOf(":"))return t;null!=n.customFormat&&(t=n.customFormat(t,e));var i=t.charAt(0);if("."===i)return n.formatRelativePath((e||n.basePath)+t);if("~"===i)return n.rootPath+t.substring(1);if("d"===i){if(0===t.indexOf("data:image"))return t}else if("/"===i)return t;return(e||n.basePath)+t},n.formatRelativePath=function(t){for(var e=t.split("/"),i=0,n=e.length;i<n;i++)".."==e[i]&&(e.splice(i-1,2),i-=2);return e.join("/")},n.isAbsolute=function(t){return 0<t.indexOf(":")||"/"==t.charAt(0)},n.getPath=function(t){var e=t.lastIndexOf("/");return 0<e?t.substr(0,e+1):""},n.getFileName=function(t){var e=t.lastIndexOf("/");return 0<e?t.substr(e+1):t},n.version={},n.basePath="",n.rootPath="",n.customFormat=function(t){var e=n.version[t];return!Render.isConchApp&&e&&(t+="?v="+e),t},n}(),ShaderValue=function(){function t(){}return __class(t,"laya.webgl.shader.ShaderValue"),t}(),Render=function(){function s(t,e){this._timeId=0;var i=s._mainCanvas.source.style;i.position="absolute",i.top=i.left="0px",i.background="#000000",s._mainCanvas.source.id="layaCanvas";var n=laya.renders.Render.isWebGL;s._mainCanvas.source.width=t,s._mainCanvas.source.height=e,n&&s.WebGL.init(s._mainCanvas,t,e),Browser.container.appendChild(s._mainCanvas.source),(s._context=new RenderContext(t,e,n?null:s._mainCanvas)).ctx.setIsMainContext(),Browser.window.requestAnimationFrame(function t(e){Laya.stage._loop();Browser.window.requestAnimationFrame(t)}),Laya.stage.on("visibilitychange",this,this._onVisibilitychange)}__class(s,"laya.renders.Render");var t=s.prototype;return t._onVisibilitychange=function(){Laya.stage.isVisibility?0!=this._timeId&&Browser.window.clearInterval(this._timeId):this._timeId=Browser.window.setInterval(this._enterFrame,1e3)},t._enterFrame=function(t){Laya.stage._loop()},__getset(1,s,"context",function(){return s._context}),__getset(1,s,"canvas",function(){return s._mainCanvas.source}),s._context=null,s._mainCanvas=null,s.WebGL=null,s.isConchNode=!1,s.isConchApp=!1,s.isConchWebGL=!1,s.isWebGL=!1,s.is3DMode=!1,s.optimizeTextureMemory=function(t,e){return!0},s.__init$=function(){window.ConchRenderType=window.ConchRenderType||1,window.ConchRenderType|=window.conch?4:0,s.isConchNode=5==(5&window.ConchRenderType),s.isConchApp=4==(4&window.ConchRenderType),s.isConchWebGL=6==window.ConchRenderType},s}(),RenderContext=function(){function a(t,e,i){this.x=0,this.y=0,this._drawTexture=function(t,e,i){i[0].loaded&&this.ctx.drawTexture(i[0],i[1],i[2],i[3],i[4],t,e)},this._fillTexture=function(t,e,i){i[0].loaded&&this.ctx.fillTexture(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6],i[7])},this._drawTextureWithTransform=function(t,e,i){i[0].loaded&&this.ctx.drawTextureWithTransform(i[0],i[1],i[2],i[3],i[4],i[5],t,e,i[6])},this._fillQuadrangle=function(t,e,i){this.ctx.fillQuadrangle(i[0],i[1],i[2],i[3],i[4])},this._drawRect=function(t,e,i){var n=this.ctx;null!=i[4]&&(n.fillStyle=i[4],n.fillRect(t+i[0],e+i[1],i[2],i[3],null)),null!=i[5]&&(n.strokeStyle=i[5],n.lineWidth=i[6],n.strokeRect(t+i[0],e+i[1],i[2],i[3],i[6]))},this._drawPie=function(t,e,i){var n=this.ctx;Render.isWebGL&&n.setPathId(i[8]),n.beginPath(),Render.isWebGL?(n.movePath(i[0]+t,i[1]+e),n.moveTo(0,0)):n.moveTo(t+i[0],e+i[1]),n.arc(t+i[0],e+i[1],i[2],i[3],i[4]),n.closePath(),this._fillAndStroke(i[5],i[6],i[7],!0)},this._clipRect=function(t,e,i){this.ctx.clipRect(t+i[0],e+i[1],i[2],i[3])},this._fillRect=function(t,e,i){this.ctx.fillRect(t+i[0],e+i[1],i[2],i[3],i[4])},this._drawCircle=function(t,e,i){var n=this.ctx;Render.isWebGL&&n.setPathId(i[6]),Stat.drawCall++,n.beginPath(),Render.isWebGL&&n.movePath(i[0]+t,i[1]+e),n.arc(i[0]+t,i[1]+e,i[2],0,a.PI2),n.closePath(),this._fillAndStroke(i[3],i[4],i[5],!0)},this._fillCircle=function(t,e,i){Stat.drawCall++;var n=this.ctx;n.beginPath(),n.fillStyle=i[3],n.arc(i[0]+t,i[1]+e,i[2],0,a.PI2),n.fill()},this._setShader=function(t,e,i){this.ctx.setShader(i[0])},this._drawLine=function(t,e,i){var n=this.ctx;Render.isWebGL&&n.setPathId(i[6]),n.beginPath(),n.strokeStyle=i[4],n.lineWidth=i[5],Render.isWebGL?(n.movePath(t,e),n.moveTo(i[0],i[1]),n.lineTo(i[2],i[3])):(n.moveTo(t+i[0],e+i[1]),n.lineTo(t+i[2],e+i[3])),n.stroke()},this._drawLines=function(t,e,i){var n=this.ctx;Render.isWebGL&&n.setPathId(i[5]),n.beginPath(),t+=i[0],e+=i[1],Render.isWebGL&&n.movePath(t,e),n.strokeStyle=i[3],n.lineWidth=i[4];var s=i[2],o=2,a=s.length;if(Render.isWebGL)for(n.moveTo(s[0],s[1]);o<a;)n.lineTo(s[o++],s[o++]);else for(n.moveTo(t+s[0],e+s[1]);o<a;)n.lineTo(t+s[o++],e+s[o++]);n.stroke()},this._drawLinesWebGL=function(t,e,i){this.ctx.drawLines(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4])},this._drawCurves=function(t,e,i){this.ctx.drawCurves(t,e,i)},this._draw=function(t,e,i){i[0].call(null,this,t,e)},this._transformByMatrix=function(t,e,i){this.ctx.transformByMatrix(i[0])},this._setTransform=function(t,e,i){this.ctx.setTransform(i[0],i[1],i[2],i[3],i[4],i[5])},this._setTransformByMatrix=function(t,e,i){this.ctx.setTransformByMatrix(i[0])},this._save=function(t,e,i){this.ctx.save()},this._restore=function(t,e,i){this.ctx.restore()},this._translate=function(t,e,i){this.ctx.translate(i[0],i[1])},this._transform=function(t,e,i){this.ctx.translate(i[1]+t,i[2]+e);var n=i[0];this.ctx.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),this.ctx.translate(-t-i[1],-e-i[2])},this._rotate=function(t,e,i){this.ctx.translate(i[1]+t,i[2]+e),this.ctx.rotate(i[0]),this.ctx.translate(-t-i[1],-e-i[2])},this._scale=function(t,e,i){this.ctx.translate(i[2]+t,i[3]+e),this.ctx.scale(i[0],i[1]),this.ctx.translate(-t-i[2],-e-i[3])},this._alpha=function(t,e,i){this.ctx.globalAlpha*=i[0]},this._setAlpha=function(t,e,i){this.ctx.globalAlpha=i[0]},this._fillText=function(t,e,i){this.ctx.fillText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5])},this._strokeText=function(t,e,i){this.ctx.strokeText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6])},this._fillBorderText=function(t,e,i){this.ctx.fillBorderText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6],i[7])},this._blendMode=function(t,e,i){this.ctx.globalCompositeOperation=i[0]},this._beginClip=function(t,e,i){this.ctx.beginClip&&this.ctx.beginClip(t+i[0],e+i[1],i[2],i[3])},this._setIBVB=function(t,e,i){this.ctx.setIBVB(i[0]+t,i[1]+e,i[2],i[3],i[4],i[5],i[6],i[7])},this._fillTrangles=function(t,e,i){this.ctx.fillTrangles(i[0],i[1]+t,i[2]+e,i[3],i[4])},this._drawPath=function(t,e,i){var n=this.ctx;Render.isWebGL&&n.setPathId(-1),n.beginPath(),t+=i[0],e+=i[1],Render.isWebGL&&n.movePath(t,e);for(var s=i[2],o=0,a=s.length;o<a;o++){var r=s[o];switch(r[0]){case"moveTo":Render.isWebGL?n.moveTo(r[1],r[2]):n.moveTo(t+r[1],e+r[2]);break;case"lineTo":Render.isWebGL?n.lineTo(r[1],r[2]):n.lineTo(t+r[1],e+r[2]);break;case"arcTo":Render.isWebGL?n.arcTo(r[1],r[2],r[3],r[4],r[5]):n.arcTo(t+r[1],e+r[2],t+r[3],e+r[4],r[5]);break;case"closePath":n.closePath()}}var l=i[3];null!=l&&(n.fillStyle=l.fillStyle,n.fill());var h=i[4];null!=h&&(n.strokeStyle=h.strokeStyle,n.lineWidth=h.lineWidth||1,n.lineJoin=h.lineJoin,n.lineCap=h.lineCap,n.miterLimit=h.miterLimit,n.stroke())},this.drawPoly=function(t,e,i){this.ctx.drawPoly(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4],i[5],i[6])},this._drawPoly=function(t,e,i){var n=this.ctx,s=i[2],o=2,a=s.length;if(Render.isWebGL)for(n.setPathId(i[6]),n.beginPath(),t+=i[0],e+=i[1],n.movePath(t,e),n.moveTo(s[0],s[1]);o<a;)n.lineTo(s[o++],s[o++]);else for(n.beginPath(),t+=i[0],e+=i[1],n.moveTo(t+s[0],e+s[1]);o<a;)n.lineTo(t+s[o++],e+s[o++]);n.closePath(),this._fillAndStroke(i[3],i[4],i[5],i[7])},this._drawSkin=function(t,e,i){var n=i[0];if(n){var s=this.ctx;n.render(s,t,e)}},this._drawParticle=function(t,e,i){this.ctx.drawParticle(t+this.x,e+this.y,i[0])},this._setFilters=function(t,e,i){this.ctx.setFilters(i)},i?this.ctx=i.getContext("2d"):(i=HTMLCanvas.create("3D"),this.ctx=RunDriver.createWebGLContext2D(i),i._setContext(this.ctx)),i.size(t,e),this.canvas=i}__class(a,"laya.renders.RenderContext");var t=a.prototype;return t.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},t.drawTexture=function(t,e,i,n,s){t.loaded&&this.ctx.drawTexture(t,e,i,n,s,this.x,this.y)},t._drawTextures=function(t,e,i){i[0].loaded&&this.ctx.drawTextures(i[0],i[1],t+this.x,e+this.y)},t.drawTextureWithTransform=function(t,e,i,n,s,o,a){t.loaded&&this.ctx.drawTextureWithTransform(t,e,i,n,s,o,this.x,this.y,a)},t.fillQuadrangle=function(t,e,i,n,s){this.ctx.fillQuadrangle(t,e,i,n,s)},t.drawCanvas=function(t,e,i,n,s){this.ctx.drawCanvas(t,e+this.x,i+this.y,n,s)},t.drawRect=function(t,e,i,n,s,o){void 0===o&&(o=1);var a=this.ctx;a.strokeStyle=s,a.lineWidth=o,a.strokeRect(t+this.x,e+this.y,i,n,o)},t._fillAndStroke=function(t,e,i,n){void 0===n&&(n=!1);var s=this.ctx;null!=t&&(s.fillStyle=t,Render.isWebGL?s.fill(n):s.fill()),null!=e&&0<i&&(s.strokeStyle=e,s.lineWidth=i,s.stroke())},t.clipRect=function(t,e,i,n){this.ctx.clipRect(t+this.x,e+this.y,i,n)},t.fillRect=function(t,e,i,n,s){this.ctx.fillRect(t+this.x,e+this.y,i,n,s)},t.drawCircle=function(t,e,i,n,s){void 0===s&&(s=1),Stat.drawCall++;var o=this.ctx;o.beginPath(),o.strokeStyle=n,o.lineWidth=s,o.arc(t+this.x,e+this.y,i,0,a.PI2),o.stroke()},t.drawTriangles=function(t,e,i){if(Render.isWebGL)this.ctx.drawTriangles(i[0],t+i[1],e+i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9]);else{var n=i[5],s=0,o=n.length,a=this.ctx;for(s=0;s<o;s+=3){var r=2*n[s],l=2*n[s+1],h=2*n[s+2];a.drawTriangle(i[0],i[3],i[4],r,l,h,i[6],!0)}}},t.fillCircle=function(t,e,i,n){Stat.drawCall++;var s=this.ctx;s.beginPath(),s.fillStyle=n,s.arc(t+this.x,e+this.y,i,0,a.PI2),s.fill()},t.setShader=function(t){this.ctx.setShader(t)},t.drawLine=function(t,e,i,n,s,o){void 0===o&&(o=1);var a=this.ctx;a.beginPath(),a.strokeStyle=s,a.lineWidth=o,a.moveTo(this.x+t,this.y+e),a.lineTo(this.x+i,this.y+n),a.stroke()},t.clear=function(){this.ctx.clear()},t.transformByMatrix=function(t){this.ctx.transformByMatrix(t)},t.setTransform=function(t,e,i,n,s,o){this.ctx.setTransform(t,e,i,n,s,o)},t.setTransformByMatrix=function(t){this.ctx.setTransformByMatrix(t)},t.save=function(){this.ctx.save()},t.restore=function(){this.ctx.restore()},t.translate=function(t,e){this.ctx.translate(t,e)},t.transform=function(t,e,i,n,s,o){this.ctx.transform(t,e,i,n,s,o)},t.rotate=function(t){this.ctx.rotate(t)},t.scale=function(t,e){this.ctx.scale(t,e)},t.alpha=function(t){this.ctx.globalAlpha*=t},t.setAlpha=function(t){this.ctx.globalAlpha=t},t.fillWords=function(t,e,i,n,s,o){void 0===o&&(o=0),this.ctx.fillWords(t,e,i,n,s,o)},t.fillBorderWords=function(t,e,i,n,s,o,a){this.ctx.fillBorderWords(t,e,i,n,s,o,a)},t.fillText=function(t,e,i,n,s,o){this.ctx.fillText(t,e+this.x,i+this.y,n,s,o)},t.strokeText=function(t,e,i,n,s,o,a){this.ctx.strokeText(t,e+this.x,i+this.y,n,s,o,a)},t.blendMode=function(t){this.ctx.globalCompositeOperation=t},t.flush=function(){this.ctx.flush&&this.ctx.flush()},t.addRenderObject=function(t){this.ctx.addRenderObject(t)},t.beginClip=function(t,e,i,n){this.ctx.beginClip&&this.ctx.beginClip(t,e,i,n)},t.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},t.fillTrangles=function(t,e,i){this.ctx.fillTrangles(i[0],i[1],i[2],i[3],4<i.length?i[4]:null)},a.PI2=2*Math.PI,a}(),RenderSprite=function(){function a(t,e){switch(this._next=e||a.NORENDER,t){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=Filter._filter);case 69905:return void(this._fun=a._initRenderFun)}this.onCreate(t)}__class(a,"laya.renders.RenderSprite");var t=a.prototype;return t.onCreate=function(t){},t._style=function(t,e,i,n){t._style.render(t,e,i,n);var s=this._next;s._fun.call(s,t,e,i,n)},t._no=function(t,e,i,n){},t._custom=function(t,e,i,n){t.customRender(e,i,n);var s=t._style._tf;this._next._fun.call(this._next,t,e,i-s.translateX,n-s.translateY)},t._clip=function(t,e,i,n){var s=this._next;if(s!=a.NORENDER){var o=t._style.scrollRect;e.ctx.save(),e.ctx.clipRect(i,n,o.width,o.height),s._fun.call(s,t,e,i-o.x,n-o.y),e.ctx.restore()}},t._blend=function(t,e,i,n){var s=t._style;s.blendMode&&(e.ctx.globalCompositeOperation=s.blendMode);var o=this._next;o._fun.call(o,t,e,i,n),e.ctx.globalCompositeOperation="source-over"},t._mask=function(t,e,i,n){var s=this._next;s._fun.call(s,t,e,i,n);var o=t.mask;o&&(e.ctx.globalCompositeOperation="destination-in",(0<o.numChildren||!o.graphics._isOnlyOne())&&(o.cacheAsBitmap=!0),o.render(e,i-t.pivotX,n-t.pivotY)),e.ctx.globalCompositeOperation="source-over"},t._graphics=function(t,e,i,n){var s=t._style._tf;t._graphics&&t._graphics._render(t,e,i-s.translateX,n-s.translateY);var o=this._next;o._fun.call(o,t,e,i,n)},t._image=function(t,e,i,n){var s=t._style;e.ctx.drawTexture2(i,n,s._tf.translateX,s._tf.translateY,t.transform,s.alpha,s.blendMode,t._graphics._one)},t._image2=function(t,e,i,n){var s=t._style._tf;e.ctx.drawTexture2(i,n,s.translateX,s.translateY,t.transform,1,null,t._graphics._one)},t._alpha=function(t,e,i,n){var s;if(.01<(s=t._style.alpha)||t._needRepaint()){var o=e.ctx.globalAlpha;e.ctx.globalAlpha*=s;var a=this._next;a._fun.call(a,t,e,i,n),e.ctx.globalAlpha=o}},t._transform=function(t,e,i,n){var s=t.transform,o=this._next;s&&o!=a.NORENDER?(e.save(),e.transform(s.a,s.b,s.c,s.d,s.tx+i,s.ty+n),o._fun.call(o,t,e,0,0),e.restore()):o._fun.call(o,t,e,i,n)},t._childs=function(t,e,i,n){var s=t._style,o=s._tf;if(i=i-o.translateX+s.paddingLeft,n=n-o.translateY+s.paddingTop,s._calculation){var a=t._getWords();if(a){var r=s;r&&(r.stroke?e.fillBorderWords(a,i,n,r.font,r.color,r.strokeColor,r.stroke):e.fillWords(a,i,n,r.font,r.color,"none"!=r.textDecoration&&r.underLine?1:0))}}var l,h=t._childs,c=h.length;if(t.viewport||t.optimizeScrollRect&&t._style.scrollRect){var u=t.viewport||t._style.scrollRect,d=u.x,_=u.y,f=u.right,p=u.bottom,g=NaN,m=NaN;for(b=0;b<c;++b)(l=h[b]).visible&&(g=l._x)<f&&g+l.width>d&&(m=l._y)<p&&m+l.height>_&&l.render(e,i,n)}else for(var b=0;b<c;++b)(l=h[b])._style.visible&&l.render(e,i,n)},t._canvas=function(t,e,i,n){var s=t._$P.cacheCanvas;if(s){"bitmap"===s.type?Stat.canvasBitmap++:Stat.canvasNormal++;var o=s.ctx;if(t._needRepaint()||!o)this._canvas_repaint(t,e,i,n);else{var a=s._cacheRec;e.drawCanvas(o.canvas,i+a.x,n+a.y,a.width,a.height)}}else this._next._fun.call(this._next,t,e,i,n)},t._canvas_repaint=function(t,e,i,n){var s=t._$P.cacheCanvas,o=this._next;if(s){var a,r,l,h,c=s.ctx,u=t._needRepaint()||!c,d=s.type;if("bitmap"===d?Stat.canvasBitmap++:Stat.canvasNormal++,u){var _,f;s._cacheRec||(s._cacheRec=new Rectangle),Render.isWebGL&&"bitmap"!==d?s._cacheRec.setTo(-t.pivotX,-t.pivotY,1,1):((h=t.getSelfBounds()).x=h.x-t.pivotX,h.y=h.y-t.pivotY,h.x=h.x-16,h.y=h.y-16,h.width=h.width+32,h.height=h.height+32,h.x=Math.floor(h.x+i)-i,h.y=Math.floor(h.y+n)-n,h.width=Math.floor(h.width),h.height=Math.floor(h.height),s._cacheRec.copyFrom(h)),h=s._cacheRec;var p,g=Render.isWebGL?1:Browser.pixelRatio*Laya.stage.clientScaleX,m=Render.isWebGL?1:Browser.pixelRatio*Laya.stage.clientScaleY;if(!Render.isWebGL){var b,y=1,v=1;for(b=t;b&&b!=Laya.stage;)y*=b.scaleX,v*=b.scaleY,b=b.parent;Render.isWebGL?(y<1&&(g*=y),v<1&&(m*=v)):(1<y&&(g*=y),1<v&&(m*=v))}if(t.scrollRect){var w=t.scrollRect;h.x-=w.x,h.y-=w.y}if(_=h.width*g,f=h.height*m,r=h.x,l=h.y,Render.isWebGL&&"bitmap"===d&&(2048<_||2048<f))return console.warn("cache bitmap size larger than 2048,cache ignored"),s.ctx&&(Pool.recover("RenderContext",s.ctx),s.ctx.canvas.size(0,0),s.ctx=null),void o._fun.call(o,t,e,i,n);if(c||(c=s.ctx=Pool.getItem("RenderContext")||new RenderContext(_,f,HTMLCanvas.create("AUTO"))),c.ctx.sprite=t,(a=c.canvas).clear(),(a.width!=_||a.height!=f)&&a.size(_,f),"bitmap"===d?a.context.asBitmap=!0:"normal"===d&&(a.context.asBitmap=!1),1!=g||1!=m){var x=c.ctx;x.save(),x.scale(g,m),!Render.isConchWebGL&&Render.isConchApp&&(p=t._$P.cf)&&x.setFilterMatrix&&x.setFilterMatrix(p._mat,p._alpha),o._fun.call(o,t,c,-r,-l),x.restore(),Render.isConchApp&&!Render.isConchWebGL||t._applyFilters()}else x=c.ctx,!Render.isConchWebGL&&Render.isConchApp&&(p=t._$P.cf)&&x.setFilterMatrix&&x.setFilterMatrix(p._mat,p._alpha),o._fun.call(o,t,c,-r,-l),Render.isConchApp&&!Render.isConchWebGL||t._applyFilters();t._$P.staticCache&&(s.reCache=!1),Stat.canvasReCache++}else r=(h=s._cacheRec).x,l=h.y,a=c.canvas;e.drawCanvas(a,i+r,n+l,h.width,h.height)}else o._fun.call(o,t,c,i,n)},a.__init__=function(){var t,e,i=0;for(e=RunDriver.createRenderSprite(69905,null),t=a.renders.length=4096,i=0;i<t;i++)a.renders[i]=e;a.renders[0]=RunDriver.createRenderSprite(0,null),function(t,e){for(var i=0,n=0;n<t.length;n++)i|=t[n],a.renders[i]=e}([1,512,4,2],new a(1,null)),a.renders[513]=RunDriver.createRenderSprite(513,null),a.renders[517]=new a(517,null)},a._initRenderFun=function(t,e,i,n){var s=t._renderType;(a.renders[s]=a._getTypeRender(s))._fun(t,e,i,n)},a._getTypeRender=function(t){for(var e=null,i=2048;1<i;)i&t&&(e=RunDriver.createRenderSprite(i,e)),i>>=1;return e},a.IMAGE=1,a.ALPHA=2,a.TRANSFORM=4,a.BLEND=8,a.CANVAS=16,a.FILTERS=32,a.MASK=64,a.CLIP=128,a.STYLE=256,a.GRAPHICS=512,a.CUSTOM=1024,a.CHILDS=2048,a.INIT=69905,a.renders=[],a.NORENDER=new a(0,null),a}(),Context=function(){function r(){this._repaint=!1}__class(r,"laya.resource.Context");var t=r.prototype;return t.replaceReset=function(){var t,e,i=0;for(t=r.replaceKeys.length,i=0;i<t;i++)e=r.replaceKeys[i],this[r.newKeys[i]]=this[e]},t.replaceResotre=function(){this.__restore(),this.__reset()},t.setIsMainContext=function(){},t.drawTextures=function(t,e,i,n){Stat.drawCall+=e.length/2;for(var s=t.width,o=t.height,a=0,r=e.length;a<r;a+=2)this.drawTexture(t,e[a],e[a+1],s,o,i,n)},t.drawCanvas=function(t,e,i,n,s){Stat.drawCall++,this.drawImage(t.source,e,i,n,s)},t.fillRect=function(t,e,i,n,s){Stat.drawCall++,s&&(this.fillStyle=s),this.__fillRect(t,e,i,n)},t.fillText=function(t,e,i,n,s,o){Stat.drawCall++,3<arguments.length&&null!=n&&(this.font=n,this.fillStyle=s,this.textAlign=o,this.textBaseline="top"),this.__fillText(t,e,i)},t.fillBorderText=function(t,e,i,n,s,o,a,r){Stat.drawCall++,this.font=n,this.fillStyle=s,this.textBaseline="top",this.strokeStyle=o,this.lineWidth=a,this.textAlign=r,this.__strokeText(t,e,i),this.__fillText(t,e,i)},t.strokeText=function(t,e,i,n,s,o,a){Stat.drawCall++,3<arguments.length&&null!=n&&(this.font=n,this.strokeStyle=s,this.lineWidth=o,this.textAlign=a,this.textBaseline="top"),this.__strokeText(t,e,i)},t.transformByMatrix=function(t){this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.setTransformByMatrix=function(t){this.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.clipRect=function(t,e,i,n){Stat.drawCall++,this.beginPath(),this.rect(t,e,i,n),this.clip()},t.drawTexture=function(t,e,i,n,s,o,a){Stat.drawCall++;var r=t.uv,l=t.bitmap.width,h=t.bitmap.height;this.drawImage(t.source,r[0]*l,r[1]*h,(r[2]-r[0])*l,(r[5]-r[3])*h,e+o,i+a,n,s)},t.drawTextureWithTransform=function(t,e,i,n,s,o,a,r,l){Stat.drawCall++;var h=t.uv,c=t.bitmap.width,u=t.bitmap.height;this.save(),1!=l&&(this.globalAlpha*=l),o?(this.transform(o.a,o.b,o.c,o.d,o.tx+a,o.ty+r),this.drawImage(t.source,h[0]*c,h[1]*u,(h[2]-h[0])*c,(h[5]-h[3])*u,e,i,n,s)):this.drawImage(t.source,h[0]*c,h[1]*u,(h[2]-h[0])*c,(h[5]-h[3])*u,e+a,i+r,n,s),this.restore()},t.drawTexture2=function(t,e,i,n,s,o,a,r){var l=r[0];if(l.loaded&&l.bitmap&&l.source){Stat.drawCall++;var h=1!==o;if(h){var c=this.globalAlpha;this.globalAlpha*=o}var u=l.uv,d=l.bitmap.width,_=l.bitmap.height;s?(this.save(),this.transform(s.a,s.b,s.c,s.d,s.tx+t,s.ty+e),this.drawImage(l.source,u[0]*d,u[1]*_,(u[2]-u[0])*d,(u[5]-u[3])*_,r[1]-i,r[2]-n,r[3],r[4]),this.restore()):this.drawImage(l.source,u[0]*d,u[1]*_,(u[2]-u[0])*d,(u[5]-u[3])*_,r[1]-i+t,r[2]-n+e,r[3],r[4]),h&&(this.globalAlpha=c)}},t.fillTexture=function(t,e,i,n,s,o,a,r){if(!r.pat){if(t.uv!=Texture.DEF_UV){var l=new HTMLCanvas("2D");l.getContext("2d"),l.size(t.width,t.height),l.context.drawTexture(t,0,0,t.width,t.height,0,0),t=new Texture(l)}r.pat=this.createPattern(t.bitmap.source,o)}var h=e,c=i,u=0,d=0;a&&(h+=a.x%t.width,c+=a.y%t.height,u-=a.x%t.width,d-=a.y%t.height),this.translate(h,c),this.fillRect(u,d,n,s,r.pat),this.translate(-h,-c)},t.drawTriangle=function(t,e,i,n,s,o,a,r){var l=t.bitmap,h=l.source,c=t.width,u=t.height,d=l.width,_=l.height,f=i[n]*d,p=i[s]*d,g=i[o]*d,m=i[n+1]*_,b=i[s+1]*_,y=i[o+1]*_,v=e[n],w=e[s],x=e[o],C=e[n+1],S=e[s+1],T=e[o+1];if(r){var L=(v+w+x)/3,R=(C+S+T)/3,I=v-L,G=C-R,M=Math.sqrt(I*I+G*G);v=L+I/M*(M+1),C=R+G/M*(M+1),G=S-R,w=L+(I=w-L)/(M=Math.sqrt(I*I+G*G))*(M+1),S=R+G/M*(M+1),G=T-R,x=L+(I=x-L)/(M=Math.sqrt(I*I+G*G))*(M+1),T=R+G/M*(M+1)}this.save(),a&&this.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),this.beginPath(),this.moveTo(v,C),this.lineTo(w,S),this.lineTo(x,T),this.closePath(),this.clip();var A=1/(f*b+m*g+p*y-b*g-m*p-f*y),k=v*b+m*x+w*y-b*x-m*w-v*y,B=f*w+v*g+p*x-w*g-v*p-f*x,W=f*b*x+m*w*g+v*p*y-v*b*g-m*p*x-f*w*y,N=C*b+m*T+S*y-b*T-m*S-C*y,V=f*S+C*g+p*T-S*g-C*p-f*T,E=f*b*T+m*S*g+C*p*y-C*b*g-m*p*T-f*S*y;this.transform(k*A,N*A,B*A,V*A,W*A,E*A),this.drawImage(h,t.uv[0]*d,t.uv[1]*_,c,u,t.uv[0]*d,t.uv[1]*_,c,u),this.restore()},t.flush=function(){return 0},t.fillWords=function(t,e,i,n,s,o){n&&(this.font=n),s&&(this.fillStyle=s);this.textBaseline="top",this.textAlign="left";for(var a=0,r=t.length;a<r;a++){var l=t[a];if(this.__fillText(l.char,l.x+e,l.y+i),1===o){var h=l.height,c=.5*l.style.letterSpacing;c||(c=0),this.beginPath(),this.strokeStyle=s,this.lineWidth=1,this.moveTo(e+l.x-c+.5,i+l.y+h+.5),this.lineTo(e+l.x+l.width+c+.5,i+l.y+h+.5),this.stroke()}}},t.fillBorderWords=function(t,e,i,n,s,o,a){n&&(this.font=n),s&&(this.fillStyle=s),this.textBaseline="top",this.lineWidth=a,this.textAlign="left",this.strokeStyle=o;for(var r=0,l=t.length;r<l;r++){var h=t[r];this.__strokeText(h.char,h.x+e,h.y+i),this.__fillText(h.char,h.x+e,h.y+i)}},t.destroy=function(){this.canvas.width=this.canvas.height=0},t.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},t.drawCurves=function(t,e,i){this.beginPath(),this.strokeStyle=i[3],this.lineWidth=i[4];var n=i[2];t+=i[0],e+=i[1],this.moveTo(t+n[0],e+n[1]);for(var s=2,o=n.length;s<o;)this.quadraticCurveTo(t+n[s++],e+n[s++],t+n[s++],e+n[s++]);this.stroke()},r.__init__=function(e){var i=laya.resource.Context.prototype;if(!(e=e||CanvasRenderingContext2D.prototype).inited){e.inited=!0,e.__fillText=e.fillText,e.__fillRect=e.fillRect,e.__strokeText=e.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(t){e[t]=i[t]})}},r.replaceCanvasGetSet=function(t,e){var i=Object.getOwnPropertyDescriptor(t,e);if(!i||!i.configurable)return!1;var n,s={};for(n in i)"set"!=n&&(s[n]=i[n]);var o=i.set;return s.set=function(t){o.call(this,t);var e=this.getContext("2d");e&&"__reset"in e&&e.__reset()},Object.defineProperty(t,e,s),!0},r.replaceGetSet=function(t,e){var i=Object.getOwnPropertyDescriptor(t,e);if(!i||!i.configurable)return!1;var n,s={};for(n in i)"set"!=n&&(s[n]=i[n]);var o=i.set,a="___"+e+"__";return r.newKeys.push(a),s.set=function(t){t!=this[a]&&(this[a]=t,o.call(this,t))},Object.defineProperty(t,e,s),!0},r._default=new r,r.newKeys=[],__static(r,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),r}(),ResourceManager=function(){function o(t){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++o._uniqueIDCounter,this._name=t||"Content Manager",o._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,o._resourceManagers.push(this),this._resources=[]}__class(o,"laya.resource.ResourceManager");var t=o.prototype;return Laya.imps(t,{"laya.resource.IDispose":!0}),t.getResourceByIndex=function(t){return this._resources[t]},t.getResourcesLength=function(){return this._resources.length},t.addResource=function(t){return t.resourceManager&&t.resourceManager.removeResource(t),-1===this._resources.indexOf(t)&&((t._resourceManager=this)._resources.push(t),this.addSize(t.memorySize),!0)},t.removeResource=function(t){var e=this._resources.indexOf(t);return-1!==e&&(this._resources.splice(e,1),t._resourceManager=null,this._memorySize-=t.memorySize,!0)},t.unload=function(){for(var t=this._resources.slice(0,this._resources.length),e=0;e<t.length;e++){t[e].destroy()}t.length=0},t.dispose=function(){if(this===o._systemResourceManager)throw new Error("systemResourceManager不能被释放！");o._resourceManagers.splice(o._resourceManagers.indexOf(this),1),o._isResourceManagersSorted=!1;for(var t=this._resources.slice(0,this._resources.length),e=0;e<t.length;e++){var i=t[e];i.resourceManager.removeResource(i),i.destroy()}t.length=0},t.addSize=function(t){t&&(this.autoRelease&&0<t&&this._memorySize+t>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=t)},t.garbageCollection=function(t){var e=this._resources;(e=e.slice()).sort(function(t,e){if(!t||!e)throw new Error("a或b不能为空！");return t.released&&e.released?0:t.released?1:e.released?-1:t._lastUseFrameCount-e._lastUseFrameCount});for(var i=Stat.loopCount,n=0,s=e.length;n<s;n++){var o=e[n];if(!(1<i-o._lastUseFrameCount))return void(this._memorySize>=t&&(this._isOverflow=!0));if(o.releaseResource(),this._memorySize<t)return void(this._isOverflow=!1)}},__getset(0,t,"id",function(){return this._id}),__getset(0,t,"name",function(){return this._name},function(t){!t&&""===t||this._name===t||(this._name=t,o._isResourceManagersSorted=!1)}),__getset(0,t,"memorySize",function(){return this._memorySize}),__getset(1,o,"systemResourceManager",function(){return o._systemResourceManager}),o.__init__=function(){o.currentResourceManager=o.systemResourceManager},o.getLoadedResourceManagerByIndex=function(t){return o._resourceManagers[t]},o.getLoadedResourceManagersCount=function(){return o._resourceManagers.length},o.recreateContentManagers=function(t){void 0===t&&(t=!1);for(var e=o.currentResourceManager,i=0;i<o._resourceManagers.length;i++){o.currentResourceManager=o._resourceManagers[i];for(var n=0;n<o.currentResourceManager._resources.length;n++)o.currentResourceManager._resources[n].releaseResource(t),o.currentResourceManager._resources[n].activeResource(t)}o.currentResourceManager=e},o.releaseContentManagers=function(t){void 0===t&&(t=!1);for(var e=o.currentResourceManager,i=0;i<o._resourceManagers.length;i++){o.currentResourceManager=o._resourceManagers[i];for(var n=0;n<o.currentResourceManager._resources.length;n++){var s=o.currentResourceManager._resources[n];!s.released&&s.releaseResource(t)}}o.currentResourceManager=e},o._uniqueIDCounter=0,o._isResourceManagersSorted=!1,o._resourceManagers=[],__static(o,["_systemResourceManager",function(){return this._systemResourceManager=new o("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=o._systemResourceManager}]),o}(),System=function(){function t(){}return __class(t,"laya.system.System"),t.changeDefinition=function(t,e){Laya[t]=e;var i=t+"=classObj";Laya._runScript(i)},t.__init__=function(){Render.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())},t}(),LayoutStyle=function(){function t(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return __class(t,"laya.ui.LayoutStyle"),__static(t,["EMPTY",function(){return this.EMPTY=new t}]),t}(),Styles=function(){function t(){}return __class(t,"laya.ui.Styles"),t.labelColor="#000000",t.buttonStateNum=3,t.scrollBarMinNum=15,t.scrollBarDelayTime=500,__static(t,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),t}(),UIUtils=function(){function s(){}return __class(s,"laya.ui.UIUtils"),s.fillArray=function(t,e,i){var n=t.concat();if(e)for(var s=e.split(","),o=0,a=Math.min(n.length,s.length);o<a;o++){var r=s[o];n[o]="true"==r||"false"!=r&&r,null!=i&&(n[o]=i(r))}return n},s.toColor=function(t){return Utils.toHexColor(t)},s.gray=function(t,e){void 0===e&&(e=!0),e?s.addFilter(t,s.grayFilter):s.clearFilter(t,ColorFilter)},s.grayDeepper=function(t,e){void 0===e&&(e=!0),e?s.addFilter(t,s.grayDeep):s.clearFilter(t,ColorFilter)},s.addFilter=function(t,e){var i=t.filters||[];i.push(e),t.filters=i},s.clearFilter=function(t,e){var i=t.filters;if(null!=i&&0<i.length){for(var n=i.length-1;-1<n;n--){var s=i[n];Laya.__typeof(s,e)&&i.splice(n,1)}t.filters=i}},s._getReplaceStr=function(t){return s.escapeSequence[t]},s.adptString=function(t){return t.replace(/\\(\w)/g,s._getReplaceStr)},s.getBindFun=function(t){var e=s._funMap.get(t);if(null==e){var i='"'+t+'"',n="(function(data){if(data==null)return;with(data){try{\nreturn "+(i=i.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";e=Laya._runScript(n),s._funMap.set(t,e)}return e},__static(s,["grayDeep",function(){return this.grayDeep=new ColorFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"grayFilter",function(){return this.grayFilter=new ColorFilter([.51602,.42658,.0574,0,0,.21602,.72658,.0574,0,0,.21602,.42658,.3574,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new WeakObject}]),s}(),Browser=function(){function i(){}return __class(i,"laya.utils.Browser"),__getset(1,i,"pixelRatio",function(){return i.__init__(),-1<i.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:RunDriver.getPixelRatio()}),__getset(1,i,"height",function(){return i.__init__(),(Laya.stage&&Laya.stage.canvasRotation?i.clientWidth:i.clientHeight)*i.pixelRatio}),__getset(1,i,"clientWidth",function(){return i.__init__(),i.window.innerWidth||i.document.body.clientWidth}),__getset(1,i,"window",function(){return i.__init__(),i._window}),__getset(1,i,"clientHeight",function(){return i.__init__(),i.window.innerHeight||i.document.body.clientHeight||i.document.documentElement.clientHeight}),__getset(1,i,"width",function(){return i.__init__(),(Laya.stage&&Laya.stage.canvasRotation?i.clientHeight:i.clientWidth)*i.pixelRatio}),__getset(1,i,"container",function(){return i.__init__(),i._container||((i._container=i.createElement("div")).id="layaContainer",i.document.body.appendChild(i._container)),i._container},function(t){i._container=t}),__getset(1,i,"document",function(){return i.__init__(),i._document}),i.__init__=function(){if(!i._window){i._window=RunDriver.getWindow(),i._document=i.window.document,i._window.addEventListener("message",function(t){laya.utils.Browser._onMessage(t)},!1),i.document.__createElement=i.document.createElement,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};var t=window.document.body.style;t["-webkit-user-select"]="none",t["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",i.userAgent=i.window.navigator.userAgent,i.onIOS=!!(i.u=i.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),i.onMobile=-1<i.u.indexOf("Mobile"),i.onIPhone=-1<i.u.indexOf("iPhone"),i.onMac=-1<i.u.indexOf("Mac OS X"),i.onIPad=-1<i.u.indexOf("iPad"),i.onAndroid=-1<i.u.indexOf("Android")||-1<i.u.indexOf("Adr"),i.onWP=-1<i.u.indexOf("Windows Phone"),i.onQQBrowser=-1<i.u.indexOf("QQBrowser"),i.onMQQBrowser=-1<i.u.indexOf("MQQBrowser")||-1<i.u.indexOf("Mobile")&&-1<i.u.indexOf("QQ"),i.onIE=!!i.window.ActiveXObject||"ActiveXObject"in i.window,i.onWeiXin=-1<i.u.indexOf("MicroMessenger"),i.onPC=!i.onMobile,i.onSafari=-1<i.u.indexOf("Safari"),i.onFirefox=-1<i.u.indexOf("Firefox"),i.onEdge=-1<i.u.indexOf("Edge"),i.onMiniGame=-1<i.u.indexOf("MiniGame"),i.onBDMiniGame=-1<i.u.indexOf("SwanGame"),i.onLimixiu=-1<i.u.indexOf("limixiu"),i.httpProtocol="http:"==i.window.location.protocol,i.onMiniGame&&null==i.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),i.webAudioEnabled=!!(i.window.AudioContext||i.window.webkitAudioContext||i.window.mozAudioContext),i.soundType=i.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",Sound=i.webAudioEnabled?WebAudioSound:AudioSound,i.webAudioEnabled&&WebAudioSound.initWebAudio(),AudioSound._initMusicAudio(),i.enableTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,window.focus(),SoundManager._soundClass=Sound,SoundManager._musicClass=AudioSound,Render._mainCanvas=Render._mainCanvas||HTMLCanvas.create("2D"),i.canvas||(i.canvas=HTMLCanvas.create("2D"),i.context=i.canvas.getContext("2d"))}},i._onMessage=function(t){if(t.data&&"size"==t.data.name){if(i.window.innerWidth=t.data.width,i.window.innerHeight=t.data.height,i.window.__innerHeight=t.data.clientHeight,!i.document.createEvent)return void console.warn("no document.createEvent");var e=i.document.createEvent("HTMLEvents");return e.initEvent("resize",!1,!1),void i.window.dispatchEvent(e)}},i.createElement=function(t){return i.__init__(),i.document.__createElement(t)},i.getElementById=function(t){return i.__init__(),i.document.getElementById(t)},i.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},i.now=function(){return RunDriver.now()},i._window=null,i._document=null,i._container=null,i.userAgent=null,i.u=null,i.onIOS=!1,i.onMac=!1,i.onMobile=!1,i.onIPhone=!1,i.onIPad=!1,i.onAndroid=!1,i.onWP=!1,i.onQQBrowser=!1,i.onMQQBrowser=!1,i.onSafari=!1,i.onFirefox=!1,i.onEdge=!1,i.onIE=!1,i.onWeiXin=!1,i.onMiniGame=!1,i.onBDMiniGame=!1,i.onLimixiu=!1,i.onPC=!1,i.httpProtocol=!1,i.webAudioEnabled=!1,i.soundType=null,i.enableTouch=!1,i.canvas=null,i.context=null,i.__init$=function(){},i}(),Byte=function(){function e(t){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,t?(this._u8d_=new Uint8Array(t),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}__class(e,"laya.utils.Byte");var t=e.prototype;return t.___resizeBuffer=function(e){try{var t=new Uint8Array(e);null!=this._u8d_&&(this._u8d_.length<=e?t.set(this._u8d_):t.set(this._u8d_.subarray(0,e))),this._u8d_=t,this._d_=new DataView(t.buffer)}catch(t){throw"___resizeBuffer err:"+e}},t.getString=function(){var t=this.rUTF(this.getUint16());return t.charCodeAt(),t},t.getFloat32Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Float32Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},t.getUint8Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Uint8Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},t.getInt16Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Int16Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},t.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var t=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,t},t.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var t=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,t},t.writeFloat32=function(t){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,t,this._xd_),this._pos_+=4},t.writeFloat64=function(t){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,t,this._xd_),this._pos_+=8},t.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var t=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,t},t.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var t=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,t},t.writeInt32=function(t){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,t,this._xd_),this._pos_+=4},t.writeUint32=function(t){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,t,this._xd_),this._pos_+=4},t.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var t=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,t},t.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var t=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,t},t.writeUint16=function(t){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,t,this._xd_),this._pos_+=2},t.writeInt16=function(t){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,t,this._xd_),this._pos_+=2},t.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},t.writeUint8=function(t){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,t),this._pos_++},t._getUInt8=function(t){return this._d_.getUint8(t)},t._getUint16=function(t){return this._d_.getUint16(t,this._xd_)},t._getMatrix=function(){return new Matrix(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},t.rUTF=function(t){for(var e="",i=this._pos_+t,n=0,s=String.fromCharCode,o=this._u8d_;this._pos_<i;)(n=o[this._pos_++])<128?0!=n&&(e+=s(n)):e+=s(n<224?(63&n)<<6|127&o[this._pos_++]:n<240?(31&n)<<12|(127&o[this._pos_++])<<6|127&o[this._pos_++]:(15&n)<<18|(127&o[this._pos_++])<<12|o[this._pos_++]<<6&127|127&o[this._pos_++]),0;return e.charCodeAt(),e},t.getCustomString=function(t){for(var e="",i=0,n=0,s=String.fromCharCode,o=this._u8d_;0<t;)if((n=o[this._pos_])<128)e+=s(n),this._pos_++,t--;else for(i=n-128,this._pos_++,t-=i;0<i;)n=o[this._pos_++],e+=s(o[this._pos_++]<<8|n),i--;return e},t.clear=function(){this._pos_=0,this.length=0},t.__getBuffer=function(){return this._d_.buffer},t.writeUTFBytes=function(t){for(var e=0,i=(t+="").length;e<i;e++){var n=t.charCodeAt(e);n<=127?this.writeByte(n):n<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|n>>6,128|63&n],this._pos_),this._pos_+=2):n<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|n>>12,128|n>>6&63,128|63&n],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n],this._pos_),this._pos_+=4)}},t.writeUTFString=function(t){var e=this.pos;this.writeUint16(1),this.writeUTFBytes(t);var i=this.pos-e-2;if(65536<=i)throw"writeUTFString byte len more than 65536";this._d_.setUint16(e,i,this._xd_)},t.readUTFString=function(){return this.readUTFBytes(this.getUint16())},t.getUTFString=function(){return this.readUTFString()},t.readUTFBytes=function(t){if(void 0===t&&(t=-1),0==t)return"";var e=this.bytesAvailable;if(e<t)throw"readUTFBytes error - Out of bounds";t=0<t?t:e;var i=this.rUTF(t);return i.charCodeAt(),i},t.getUTFBytes=function(t){return void 0===t&&(t=-1),this.readUTFBytes(t)},t.writeByte=function(t){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,t),this._pos_+=1},t.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},t.getByte=function(){return this.readByte()},t.ensureWrite=function(t){this._length<t&&(this._length=t),this._allocated_<t&&(this.length=t)},t.writeArrayBuffer=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),e<0||i<0)throw"writeArrayBuffer error - Out of bounds";0==i&&(i=t.byteLength-e),this.ensureWrite(this._pos_+i);var n=new Uint8Array(t);this._u8d_.set(n.subarray(e,e+i),this._pos_),this._pos_+=i},t.readArrayBuffer=function(t){var e;return e=this._u8d_.buffer.slice(this._pos_,this._pos_+t),this._pos_=this._pos_+t,e},__getset(0,t,"buffer",function(){var t=this._d_.buffer;return t.byteLength==this.length?t:t.slice(0,this.length)}),__getset(0,t,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(t){this._xd_="littleEndian"==t}),__getset(0,t,"length",function(){return this._length},function(t){this._allocated_<t?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(t,2*this._allocated_))):this._allocated_>t&&this.___resizeBuffer(this._allocated_=t),this._length=t}),__getset(0,t,"pos",function(){return this._pos_},function(t){this._pos_=t}),__getset(0,t,"bytesAvailable",function(){return this._length-this._pos_}),e.getSystemEndian=function(){if(!e._sysEndian){var t=new ArrayBuffer(2);new DataView(t).setInt16(0,256,!0),e._sysEndian=256===new Int16Array(t)[0]?"littleEndian":"bigEndian"}return e._sysEndian},e.BIG_ENDIAN="bigEndian",e.LITTLE_ENDIAN="littleEndian",e._sysEndian=null,e}(),CacheManager=function(){function s(){}return __class(s,"laya.utils.CacheManager"),s.regCacheByFunction=function(t,e){var i;s.unRegCacheByFunction(t,e),i={tryDispose:t,getCacheList:e},s._cacheList.push(i)},s.unRegCacheByFunction=function(t,e){var i,n=0;for(i=s._cacheList.length,n=0;n<i;n++)if(s._cacheList[n].tryDispose==t&&s._cacheList[n].getCacheList==e)return void s._cacheList.splice(n,1)},s.forceDispose=function(){var t=0,e=s._cacheList.length;for(t=0;t<e;t++)s._cacheList[t].tryDispose(!0)},s.beginCheck=function(t){void 0===t&&(t=15e3),Laya.timer.loop(t,null,s._checkLoop)},s.stopCheck=function(){Laya.timer.clear(null,s._checkLoop)},s._checkLoop=function(){var t=s._cacheList;if(!(t.length<1)){var e,i=Browser.now(),n=0;for(e=n=t.length;0<n&&(t[s._index=++s._index%e].tryDispose(!1),!(Browser.now()-i>s.loopTimeLimit));)n--}},s.loopTimeLimit=2,s._cacheList=[],s._index=0,s}(),ClassUtils=function(){function _(){}return __class(_,"laya.utils.ClassUtils"),_.regClass=function(t,e){_._classMap[t]=e},_.getRegClass=function(t){return _._classMap[t]},_.getInstance=function(t){var e=_.getClass(t);return e?new e:(console.warn("[error] Undefined class:",t),null)},_.createByJson=function(t,e,i,n,s){"string"==typeof t&&(t=JSON.parse(t));var o=t.props;if(!e&&!(e=s?s.runWith(t):_.getInstance(o.runtime||t.type)))return null;var a=t.child;if(a)for(var r=0,l=a.length;r<l;r++){var h=a[r];if("render"!==h.props.name&&"render"!==h.props.renderType||!e._$set_itemRender)if("Graphic"==h.type)_.addGraphicsToSprite(h,e);else if(_.isDrawType(h.type))_.addGraphicToSprite(h,e,!0);else{var c=_.createByJson(h,null,i,n,s);"Script"==h.type?c.hasOwnProperty("owner")?c.owner=e:c.hasOwnProperty("target")&&(c.target=e):"mask"==h.props.renderType?e.mask=c:e.addChild(c)}else e.itemRender=h}if(o)for(var u in o){var d=o[u];"var"===u&&i?i[d]=e:d instanceof Array&&"function"==typeof e[u]?e[u].apply(e,d):e[u]=d}return n&&t.customProps&&n.runWith([e,t]),e.created&&e.created(),e},_.addGraphicsToSprite=function(t,e){var i;if((i=t.child)&&!(i.length<1)){var n;n=_._getGraphicsFromSprite(t,e);var s=0,o=0;t.props&&(s=_._getObjVar(t.props,"x",0),o=_._getObjVar(t.props,"y",0)),0!=s&&0!=o&&n.translate(s,o);var a,r=0;for(a=i.length,r=0;r<a;r++)_._addGraphicToGraphics(i[r],n);0!=s&&0!=o&&n.translate(-s,-o)}},_.addGraphicToSprite=function(t,e,i){var n;void 0===i&&(i=!1),n=i?_._getGraphicsFromSprite(t,e):e.graphics,_._addGraphicToGraphics(t,n)},_._getGraphicsFromSprite=function(t,e){var i,n;if(!t||!t.props)return e.graphics;switch(n=t.props.renderType){case"hit":case"unHit":var s;e.hitArea||(e.hitArea=new HitArea),(s=e.hitArea)[n]||(s[n]=new Graphics),i=s[n]}return i||(i=e.graphics),i},_._getTransformData=function(t){var e;(t.hasOwnProperty("pivotX")||t.hasOwnProperty("pivotY"))&&(e=e||new Matrix).translate(-_._getObjVar(t,"pivotX",0),-_._getObjVar(t,"pivotY",0));var i=_._getObjVar(t,"scaleX",1),n=_._getObjVar(t,"scaleY",1),s=_._getObjVar(t,"rotation",0);_._getObjVar(t,"skewX",0),_._getObjVar(t,"skewY",0);return 1==i&&1==n&&0==s||((e=e||new Matrix).scale(i,n),e.rotate(.0174532922222222*s)),e},_._addGraphicToGraphics=function(t,e){var i,n;if((i=t.props)&&(n=_.DrawTypeDic[t.type])){var s,o;s=e;var a=_._getParams(i,n[1],n[2],n[3]);((o=_._tM)||1!=_._alpha)&&(s.save(),o&&s.transform(o),1!=_._alpha&&s.alpha(_._alpha)),s[n[0]].apply(s,a),(o||1!=_._alpha)&&s.restore()}},_._adptLineData=function(t){return t[2]=parseFloat(t[0])+parseFloat(t[2]),t[3]=parseFloat(t[1])+parseFloat(t[3]),t},_._adptTextureData=function(t){return t[0]=Loader.getRes(t[0]),t},_._adptLinesData=function(t){return t[2]=_._getPointListByStr(t[2]),t},_.isDrawType=function(t){return"Image"!=t&&_.DrawTypeDic.hasOwnProperty(t)},_._getParams=function(t,e,i,n){var s;void 0===i&&(i=0),(s=_._temParam).length=e.length;var o,a,r=0;for(o=e.length,r=0;r<o;r++)s[r]=_._getObjVar(t,e[r][0],e[r][1]);return _._alpha=_._getObjVar(t,"alpha",1),a=_._getTransformData(t),_._tM=a?(i||(i=0),a.translate(s[i],s[i+1]),s[i]=s[i+1]=0,a):null,n&&_[n]&&(s=_[n](s)),s},_._getPointListByStr=function(t){var e,i,n=0;for(i=(e=t.split(",")).length,n=0;n<i;n++)e[n]=parseFloat(e[n]);return e},_._getObjVar=function(t,e,i){return t.hasOwnProperty(e)?t[e]:i},_._temParam=[],_._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},_.getClass=function(t){var e=_._classMap[t]||t;return"string"==typeof e?Laya.__classmap[e]:e},_._tM=null,_._alpha=NaN,__static(_,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),_}(),Color=function(){function o(t){if(this._color=[],"string"==typeof t){null===(this.strColor=t)&&(t="#000000"),"#"==t.charAt(0)&&(t=t.substr(1));var e=t.length;if(3==e||4==e){for(var i="",n=0;n<e;n++)i+=t[n]+t[n];t=i}var s=this.numColor=parseInt(t,16);if(8==t.length)return void(this._color=[parseInt(t.substr(0,2),16)/255,((16711680&s)>>16)/255,((65280&s)>>8)/255,(255&s)/255])}else s=this.numColor=t,this.strColor=Utils.toHexColor(s);this._color=[((16711680&s)>>16)/255,((65280&s)>>8)/255,(255&s)/255,1],this._color.__id=++o._COLODID}return __class(o,"laya.utils.Color"),o._initDefault=function(){for(var t in o._DEFAULT={},o._COLOR_MAP)o._SAVE[t]=o._DEFAULT[t]=new o(o._COLOR_MAP[t]);return o._DEFAULT},o._initSaveMap=function(){for(var t in o._SAVE_SIZE=0,o._SAVE={},o._DEFAULT)o._SAVE[t]=o._DEFAULT[t]},o.create=function(t){var e=o._SAVE[t+""];return null!=e?e:(o._SAVE_SIZE<1e3||o._initSaveMap(),o._SAVE[t+""]=new o(t))},o._SAVE={},o._SAVE_SIZE=0,o._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},o._DEFAULT=o._initDefault(),o._COLODID=1,o}(),Dictionary=function(){function t(){this._values=[],this._keys=[]}__class(t,"laya.utils.Dictionary");var e=t.prototype;return e.set=function(t,e){var i=this.indexOf(t);0<=i?this._values[i]=e:(this._keys.push(t),this._values.push(e))},e.indexOf=function(t){var e=this._keys.indexOf(t);return 0<=e?e:(t="string"==typeof t?Number(t):"number"==typeof t?t.toString():t,this._keys.indexOf(t))},e.get=function(t){var e=this.indexOf(t);return e<0?null:this._values[e]},e.remove=function(t){var e=this.indexOf(t);return 0<=e&&(this._keys.splice(e,1),this._values.splice(e,1),!0)},e.clear=function(){this._values.length=0,this._keys.length=0},__getset(0,e,"values",function(){return this._values}),__getset(0,e,"keys",function(){return this._keys}),t}(),Dragging=function(){function t(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}__class(t,"laya.utils.Dragging");var e=t.prototype;return e.start=function(t,e,i,n,s,o,a,r){void 0===r&&(r=.92),this.clearTimer(),this.target=t,this.area=e,this.hasInertia=i,this.elasticDistance=e?n:0,this.elasticBackTime=s,this.data=o,this._disableMouseEvent=a,this.ratio=r,this._parent=t.parent,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,Laya.stage.on("mouseup",this,this.onStageMouseUp),Laya.stage.on("mouseout",this,this.onStageMouseUp),Laya.timer.frameLoop(1,this,this.loop)},e.clearTimer=function(){Laya.timer.clear(this,this.loop),Laya.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},e.stop=function(){this._dragging&&(MouseManager.instance.disableMouseEvent=!1,Laya.stage.off("mouseup",this,this.onStageMouseUp),Laya.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},e.loop=function(){var t=this._parent.getMousePoint(),e=t.x,i=t.y,n=e-this._lastX,s=i-this._lastY;if(this._clickOnly){if(!(1<Math.abs(n*Laya.stage._canvasTransform.getScaleX())||1<Math.abs(s*Laya.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),MouseManager.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(n,s);0==n&&0==s||(this._lastX=e,this._lastY=i,this.target.x+=n*this._elasticRateX,this.target.y+=s*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},e.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var t=this.area.x-this.target.x;else t=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t/this.elasticDistance),this.target.y<this.area.y)var e=this.area.y-this.target.y;else e=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e/this.elasticDistance)}},e.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},e.onStageMouseUp=function(t){if(MouseManager.instance.disableMouseEvent=!1,Laya.stage.off("mouseup",this,this.onStageMouseUp),Laya.stage.off("mouseout",this,this.onStageMouseUp),Laya.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var e=this._offsets.length,i=Math.min(e,6),n=this._offsets.length-i,s=e-1;n<s;s--)this._offsetY+=this._offsets[s--],this._offsetX+=this._offsets[s];this._offsetX=this._offsetX/i*2,this._offsetY=this._offsetY/i*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),Laya.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},e.checkElastic=function(){var t=NaN,e=NaN;if(this.target.x<this.area.x?t=this.area.x:this.target.x>this.area.x+this.area.width&&(t=this.area.x+this.area.width),this.target.y<this.area.y?e=this.area.y:this.target.y>this.area.y+this.area.height&&(e=this.area.y+this.area.height),isNaN(t)&&isNaN(e))this.clear();else{var i={};isNaN(t)||(i.x=t),isNaN(e)||(i.y=e),this._tween=Tween.to(this.target,i,this.elasticBackTime,Ease.sineOut,Handler.create(this,this.clear),0,!1,!1)}},e.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(Laya.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},e.clear=function(){if(this.target){this.clearTimer();var t=this.target;this.target=null,this._parent=null,t.event("dragend",this.data)}},t}(),Ease=function(){function r(){}return __class(r,"laya.utils.Ease"),r.linearNone=function(t,e,i,n){return i*t/n+e},r.linearIn=function(t,e,i,n){return i*t/n+e},r.linearInOut=function(t,e,i,n){return i*t/n+e},r.linearOut=function(t,e,i,n){return i*t/n+e},r.bounceIn=function(t,e,i,n){return i-r.bounceOut(n-t,0,i,n)+e},r.bounceInOut=function(t,e,i,n){return t<.5*n?.5*r.bounceIn(2*t,0,i,n)+e:.5*r.bounceOut(2*t-n,0,i,n)+.5*i+e},r.bounceOut=function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},r.backIn=function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},r.backInOut=function(t,e,i,n,s){return void 0===s&&(s=1.70158),(t/=.5*n)<1?.5*i*(t*t*((1+(s*=1.525))*t-s))+e:i/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+e},r.backOut=function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},r.elasticIn=function(t,e,i,n,s,o){var a;return void 0===s&&(s=0),void 0===o&&(o=0),0==t?e:1==(t/=n)?e+i:(o||(o=.3*n),a=!s||0<i&&s<i||i<0&&s<-i?(s=i,o/4):o/r.PI2*Math.asin(i/s),-s*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*r.PI2/o)+e)},r.elasticInOut=function(t,e,i,n,s,o){var a;return void 0===s&&(s=0),void 0===o&&(o=0),0==t?e:2==(t/=.5*n)?e+i:(o||(o=n*(.3*1.5)),a=!s||0<i&&s<i||i<0&&s<-i?(s=i,o/4):o/r.PI2*Math.asin(i/s),t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*r.PI2/o)*-.5+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*r.PI2/o)*.5+i+e)},r.elasticOut=function(t,e,i,n,s,o){var a;return void 0===s&&(s=0),void 0===o&&(o=0),0==t?e:1==(t/=n)?e+i:(o||(o=.3*n),a=!s||0<i&&s<i||i<0&&s<-i?(s=i,o/4):o/r.PI2*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*n-a)*r.PI2/o)+i+e)},r.strongIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},r.strongInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},r.strongOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},r.sineInOut=function(t,e,i,n){return.5*-i*(Math.cos(Math.PI*t/n)-1)+e},r.sineIn=function(t,e,i,n){return-i*Math.cos(t/n*r.HALF_PI)+i+e},r.sineOut=function(t,e,i,n){return i*Math.sin(t/n*r.HALF_PI)+e},r.quintIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},r.quintInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},r.quintOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},r.quartIn=function(t,e,i,n){return i*(t/=n)*t*t*t+e},r.quartInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t+e:.5*-i*((t-=2)*t*t*t-2)+e},r.quartOut=function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},r.cubicIn=function(t,e,i,n){return i*(t/=n)*t*t+e},r.cubicInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t+e:.5*i*((t-=2)*t*t+2)+e},r.cubicOut=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},r.quadIn=function(t,e,i,n){return i*(t/=n)*t+e},r.quadInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t+e:.5*-i*(--t*(t-2)-1)+e},r.quadOut=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},r.expoIn=function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e-.001*i},r.expoInOut=function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=.5*n)<1?.5*i*Math.pow(2,10*(t-1))+e:.5*i*(2-Math.pow(2,-10*--t))+e},r.expoOut=function(t,e,i,n){return t==n?e+i:i*(1-Math.pow(2,-10*t/n))+e},r.circIn=function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},r.circInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*-i*(Math.sqrt(1-t*t)-1)+e:.5*i*(Math.sqrt(1-(t-=2)*t)+1)+e},r.circOut=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},r.HALF_PI=.5*Math.PI,r.PI2=2*Math.PI,r}(),HitArea=function(){function u(){this._hit=null,this._unHit=null}__class(u,"laya.utils.HitArea");var t=u.prototype;return t.isHit=function(t,e){return!!u.isHitGraphic(t,e,this.hit)&&!u.isHitGraphic(t,e,this.unHit)},t.contains=function(t,e){return this.isHit(t,e)},__getset(0,t,"hit",function(){return this._hit||(this._hit=new Graphics),this._hit},function(t){this._hit=t}),__getset(0,t,"unHit",function(){return this._unHit||(this._unHit=new Graphics),this._unHit},function(t){this._unHit=t}),u.isHitGraphic=function(t,e,i){if(!i)return!1;var n;if(!(n=i.cmds)&&i._one&&((n=u._cmds).length=1,n[0]=i._one),!n)return!1;var s,o,a=0;for(s=n.length,a=0;a<s;a++)if(o=n[a]){var r=Render._context;switch(o.callee){case r._translate:case 6:t-=o[0],e-=o[1]}if(u.isHitCmd(t,e,o))return!0}return!1},u.isHitCmd=function(t,e,i){if(!i)return!1;var n=Render._context,s=!1;switch(i.callee){case n._drawRect:case 13:u._rec.setTo(i[0],i[1],i[2],i[3]),s=u._rec.contains(t,e);break;case n._drawCircle:case n._fillCircle:case 14:s=(t-=i[0])*t+(e-=i[1])*e<i[2]*i[2];break;case n._drawPoly:case 18:t-=i[0],e-=i[1],s=u.ptInPolygon(t,e,i[2])}return s},u.ptInPolygon=function(t,e,i){var n;(n=u._ptPoint).setTo(t,e);var s,o=0,a=NaN,r=NaN,l=NaN,h=NaN;s=i.length;for(var c=0;c<s;c+=2){if(a=i[c],r=i[c+1],l=i[(c+2)%s],r!=(h=i[(c+3)%s]))if(!(n.y<Math.min(r,h)))if(!(n.y>=Math.max(r,h)))(n.y-r)*(l-a)/(h-r)+a>n.x&&o++}return o%2==1},u._cmds=[],__static(u,["_rec",function(){return this._rec=new Rectangle},"_ptPoint",function(){return this._ptPoint=new Point}]),u}(),HTMLChar=function(){function s(t,e,i,n){this.char=t,this.charNum=t.charCodeAt(0),this._x=this._y=0,this.width=e,this.height=i,this.style=n,this.isWord=!s._isWordRegExp.test(t)}__class(s,"laya.utils.HTMLChar");var t=s.prototype;return Laya.imps(t,{"laya.display.ILayout":!0}),t.setSprite=function(t){this._sprite=t},t.getSprite=function(){return this._sprite},t._isChar=function(){return!0},t._getCSSStyle=function(){return this.style},__getset(0,t,"width",function(){return this._w},function(t){this._w=t}),__getset(0,t,"x",function(){return this._x},function(t){this._sprite&&(this._sprite.x=t),this._x=t}),__getset(0,t,"y",function(){return this._y},function(t){this._sprite&&(this._sprite.y=t),this._y=t}),__getset(0,t,"height",function(){return this._h},function(t){this._h=t}),s._isWordRegExp=new RegExp("[\\w.]",""),s}(),Pool=function(){function o(){}return __class(o,"laya.utils.Pool"),o.getPoolBySign=function(t){return o._poolDic[t]||(o._poolDic[t]=[])},o.clearBySign=function(t){o._poolDic[t]&&(o._poolDic[t].length=0)},o.recover=function(t,e){e.__InPool||(e.__InPool=!0,o.getPoolBySign(t).push(e))},o.getItemByClass=function(t,e){var i=o.getPoolBySign(t),n=i.length?i.pop():new e;return n.__InPool=!1,n},o.getItemByCreateFun=function(t,e,i){var n=o.getPoolBySign(t),s=n.length?n.pop():e.call(i);return s.__InPool=!1,s},o.getItem=function(t){var e=o.getPoolBySign(t),i=e.length?e.pop():null;return i&&(i.__InPool=!1),i},o._poolDic={},o.InPoolSign="__InPool",o}(),Stat=function(){function l(){}return __class(l,"laya.utils.Stat"),__getset(1,l,"onclick",null,function(t){l._sp&&l._sp.on("click",l._sp,t),l._canvas&&(l._canvas.source.onclick=t,l._canvas.source.style.pointerEvents="")}),l.show=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),!Render.isConchApp||Render.isConchWebGL?(Render.isConchWebGL||Browser.onMiniGame||Browser.onLimixiu||(l._useCanvas=!0),l._show=!0,l._fpsData.length=60,l._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},l._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},l._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},l._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},Render.isWebGL?(l._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"},Render.is3DMode?(l._view[0].title="FPS(3D)",l._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},l._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},l._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"}):(l._view[0].title="FPS(WebGL)",l._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"})):l._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"},l._useCanvas?l.createUIPre(t,e):l.createUI(t,e),l.enable()):Browser.window.conch.showFPS&&Browser.window.conch.showFPS(t,e)},l.createUIPre=function(t,e){var i=Browser.pixelRatio;l._width=130*i,l._vx=75*i,l._height=i*(12*l._view.length+3*i)+4,l._fontSize=12*i;for(var n=0;n<l._view.length;n++)l._view[n].x=4,l._view[n].y=n*l._fontSize+2*i;l._canvas||((l._canvas=new HTMLCanvas("2D")).size(l._width,l._height),(l._ctx=l._canvas.getContext("2d")).textBaseline="top",l._ctx.font=l._fontSize+"px Sans-serif",l._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+t+"px;top:"+e+"px;width:"+l._width/i+"px;height:"+l._height/i+"px;"),l._first=!0,l.loop(),l._first=!1,Browser.container.appendChild(l._canvas.source)},l.createUI=function(t,e){var i=l._sp,n=Browser.pixelRatio;i||(i=new Sprite,(l._leftText=new Text).pos(5,5),l._leftText.color="#ffffff",i.addChild(l._leftText),(l._txt=new Text).pos(80*n,5),l._txt.color="#ffffff",i.addChild(l._txt),l._sp=i),i.pos(t,e);for(var s="",o=0;o<l._view.length;o++){s+=l._view[o].title+"\n"}l._leftText.text=s;var a=138*n,r=n*(12*l._view.length+3*n)+4;l._txt.fontSize=l._fontSize*n,l._leftText.fontSize=l._fontSize*n,i.size(a,r),i.graphics.clear(),i.graphics.setAlpha(.5),i.graphics.drawRect(0,0,a,r,"#999999"),i.graphics.setAlpha(1),l.loop()},l.enable=function(){Laya.timer.frameLoop(1,l,l.loop)},l.hide=function(){l._show=!1,Laya.timer.clear(l,l.loop),l._canvas&&Browser.removeElement(l._canvas.source)},l.clear=function(){l.trianglesFaces=l.drawCall=l.shaderCall=l.spriteCount=l.spriteRenderUseCacheCount=l.treeNodeCollision=l.treeSpriteCollision=l.canvasNormal=l.canvasBitmap=l.canvasReCache=0},l.loop=function(){l._count++;var t=Browser.now();if(!(t-l._timer<1e3)){var e=l._count;if(l.FPS=Math.round(1e3*e/(t-l._timer)),l._show){l.trianglesFaces=Math.round(l.trianglesFaces/e),l.spriteCount=l._useCanvas?(l.drawCall=Math.round(l.drawCall/e)-2,l.shaderCall=Math.round(l.shaderCall/e),Math.round(l.spriteCount/e)-1):(l.drawCall=Math.round(l.drawCall/e)-2,l.shaderCall=Math.round(l.shaderCall/e)-4,Math.round(l.spriteCount/e)-4),l.spriteRenderUseCacheCount=Math.round(l.spriteRenderUseCacheCount/e),l.canvasNormal=Math.round(l.canvasNormal/e),l.canvasBitmap=Math.round(l.canvasBitmap/e),l.canvasReCache=Math.ceil(l.canvasReCache/e),l.treeNodeCollision=Math.round(l.treeNodeCollision/e),l.treeSpriteCollision=Math.round(l.treeSpriteCollision/e);var i=0<l.FPS?Math.floor(1e3/l.FPS).toString():" ";l._fpsStr=l.FPS+(l.renderSlow?" slow":"")+" "+i,l._spriteStr=l.spriteCount+(l.spriteRenderUseCacheCount?"/"+l.spriteRenderUseCacheCount:""),l._canvasStr=l.canvasReCache+"/"+l.canvasNormal+"/"+l.canvasBitmap,l.currentMemorySize=ResourceManager.systemResourceManager.memorySize,l._useCanvas?l.renderInfoPre():l.renderInfo(),l.clear()}l._count=0,l._timer=t}},l.renderInfoPre=function(){if(l._canvas){var t=l._ctx;t.clearRect(l._first?0:l._vx,0,l._width,l._height);for(var e=0;e<l._view.length;e++){var i=l._view[e];l._first&&(t.fillStyle="white",t.fillText(i.title,i.x,i.y,null,null,null)),t.fillStyle=i.color;var n=l[i.value];"M"==i.units&&(n=Math.floor(n/1048576*100)/100+" M"),t.fillText(n+"",i.x+l._vx,i.y,null,null,null)}}},l.renderInfo=function(){for(var t="",e=0;e<l._view.length;e++){var i=l._view[e],n=l[i.value];"M"==i.units&&(n=Math.floor(n/1048576*100)/100+" M"),"K"==i.units&&(n=Math.floor(n/1024*100)/100+" K"),t+=n+"\n"}l._txt.text=t},l.FPS=0,l.loopCount=0,l.shaderCall=0,l.drawCall=0,l.trianglesFaces=0,l.spriteCount=0,l.spriteRenderUseCacheCount=0,l.treeNodeCollision=0,l.treeSpriteCollision=0,l.canvasNormal=0,l.canvasBitmap=0,l.canvasReCache=0,l.renderSlow=!1,l.currentMemorySize=0,l._fpsStr=null,l._canvasStr=null,l._spriteStr=null,l._fpsData=[],l._timer=0,l._count=0,l._view=[],l._fontSize=12,l._txt=null,l._leftText=null,l._sp=null,l._show=!1,l._useCanvas=!1,l._canvas=null,l._ctx=null,l._first=!1,l._vx=NaN,l._width=0,l._height=100,l}(),StringKey=function(){function t(){this._strsToID={},this._idToStrs=[],this._length=0}__class(t,"laya.utils.StringKey");var e=t.prototype;return e.add=function(t){var e=this._strsToID[t];return null!=e?e:(this._idToStrs[this._length]=t,this._strsToID[t]=this._length++)},e.getID=function(t){var e=this._strsToID[t];return null==e?-1:e},e.getName=function(t){var e=this._idToStrs[t];return null==e?void 0:e},t}(),Timer=function(){var l;function h(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map=[],this._laters=[],this._handlers=[],this._temp=[],this._count=0,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}__class(h,"laya.utils.Timer");var t=h.prototype;return t._init=function(){Laya.timer&&Laya.timer.frameLoop(1,this,this._update)},t._now=function(){return Date.now()},t._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var t=this.currFrame=this.currFrame+this.scale,e=this._now();this._delta=(e-this._lastTimer)*this.scale;var i=this.currTimer=this.currTimer+this._delta;this._lastTimer=e;var n=this._handlers;for(a=this._count=0,r=n.length;a<r;a++)if(null!==(l=n[a]).method){var s=l.userFrame?t:i;if(s>=l.exeTime)if(l.repeat)if(l.jumpFrame)for(;s>=l.exeTime;)l.exeTime+=l.delay,l.run(!1);else l.exeTime+=l.delay,l.run(!1),s>l.exeTime&&(l.exeTime+=Math.ceil((s-l.exeTime)/l.delay)*l.delay);else l.run(!0)}else this._count++;(30<this._count||t%200==0)&&this._clearHandlers();for(var o=this._laters,a=0,r=o.length-1;a<=r;a++){var l=o[a];null!==l.method&&(this._map[l.key]=null,delete this._map[l.key],l.run(!1)),this._recoverHandler(l),a===r&&(r=o.length-1)}o.length=0}},t._clearHandlers=function(){for(var t=this._handlers,e=0,i=t.length;e<i;e++){var n=t[e];null!==n.method?this._temp.push(n):this._recoverHandler(n)}this._handlers=this._temp,this._temp=t,this._temp.length=0},t._recoverHandler=function(t){this._map[t.key]==t&&(this._map[t.key]=null),delete this._map[t.key],t.clear(),h._pool.push(t)},t._create=function(t,e,i,n,s,o,a){if(!i)return s.apply(n,o),null;if(a){var r=this._getHandler(n,s);if(r)return r.repeat=e,r.userFrame=t,r.delay=i,r.caller=n,r.method=s,r.args=o,r.exeTime=i+(t?this.currFrame:this.currTimer+this._now()-this._lastTimer),r}return(r=0<h._pool.length?h._pool.pop():new l).repeat=e,r.userFrame=t,r.delay=i,r.caller=n,r.method=s,r.args=o,r.exeTime=i+(t?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(r),this._handlers.push(r),r},t._indexHandler=function(t){var e=t.caller,i=t.method,n=e?e.$_GID||(e.$_GID=Utils.getGID()):0,s=i.$_TID||(i.$_TID=1e5*this._mid++);t.key=n+s,this._map[t.key]=t},t.once=function(t,e,i,n,s){void 0===s&&(s=!0),this._create(!1,!1,t,e,i,n,s)},t.loop=function(t,e,i,n,s,o){void 0===s&&(s=!0),void 0===o&&(o=!1);var a=this._create(!1,!0,t,e,i,n,s);a&&(a.jumpFrame=o)},t.frameOnce=function(t,e,i,n,s){void 0===s&&(s=!0),this._create(!0,!1,t,e,i,n,s)},t.frameLoop=function(t,e,i,n,s){void 0===s&&(s=!0),this._create(!0,!0,t,e,i,n,s)},t.toString=function(){var t=0,e="";for(var i in this._map)t++,e+=i;var n=new Byte;n.writeUTFBytes(e);var s=n.length;n.clear();var o="callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+h._pool.length;return o+="_map->keys:"+t+",_map->size:"+s/1024+"/kb,_map->length:"+(this._map.hasOwnProperty("length")?this._map.length:"--")},t.clear=function(t,e){var i=this._getHandler(t,e);i&&(this._map[i.key]=null,delete this._map[i.key],i.key=0,i.clear())},t.clearAll=function(t){if(t)for(var e=0,i=this._handlers.length;e<i;e++){var n=this._handlers[e];n.caller===t&&(this._map[n.key]=null,delete this._map[n.key],n.key=0,n.clear())}},t._getHandler=function(t,e){var i=t?t.$_GID||(t.$_GID=Utils.getGID()):0,n=e.$_TID||(e.$_TID=1e5*this._mid++);return this._map[i+n]},t.callLater=function(t,e,i){if(null==this._getHandler(t,e)){if(h._pool.length)var n=h._pool.pop();else n=new l;n.caller=t,n.method=e,n.args=i,this._indexHandler(n),this._laters.push(n)}},t.runCallLater=function(t,e){var i=this._getHandler(t,e);i&&null!=i.method&&(this._map[i.key]=null,delete this._map[i.key],i.run(!0))},t.runTimer=function(t,e){this.runCallLater(t,e)},__getset(0,t,"delta",function(){return this._delta}),h._pool=[],h.__init$=function(){l=function(){function t(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}__class(t,"");var e=t.prototype;return e.clear=function(){this.caller=null,this.method=null,this.args=null},e.run=function(t){var e=this.caller;if(e&&e.destroyed)return this.clear();var i=this.method,n=this.args;t&&this.clear(),null!=i&&(n?i.apply(e,n):i.call(e))},t}()},h}(),Tween=function(){function u(){this.gid=0}__class(u,"laya.utils.Tween");var t=u.prototype;return t.to=function(t,e,i,n,s,o,a){return void 0===o&&(o=0),void 0===a&&(a=!1),this._create(t,e,i,n,s,o,a,!0,!1,!0)},t.from=function(t,e,i,n,s,o,a){return void 0===o&&(o=0),void 0===a&&(a=!1),this._create(t,e,i,n,s,o,a,!1,!1,!0)},t._create=function(t,e,i,n,s,o,a,r,l,h){if(!t)throw new Error("Tween:target is null");this._target=t,this._duration=i,this._ease=n||e.ease||u.easeNone,this._complete=s||e.complete,this._delay=o,this._props=[],this._usedTimer=0,this._startTimer=Browser.now(),this._usedPool=l,this._delayParam=null,this.update=e.update;var c=t.$_GID||(t.$_GID=Utils.getGID());return u.tweenMap[c]?(a&&u.clearTween(t),u.tweenMap[c].push(this)):u.tweenMap[c]=[this],h?o<=0?this.firstStart(t,e,r):(this._delayParam=[t,e,r],Laya.scaleTimer.once(o,this,this.firstStart,this._delayParam)):this._initProps(t,e,r),this},t.firstStart=function(t,e,i){this._delayParam=null,t.destroyed?this.clear():(this._initProps(t,e,i),this._beginLoop())},t._initProps=function(t,e,i){for(var n in e)if("number"==typeof t[n]){var s=i?t[n]:e[n],o=i?e[n]:t[n];this._props.push([n,s,o-s]),i||(t[n]=s)}},t._beginLoop=function(){Laya.scaleTimer.frameLoop(1,this,this._doEase)},t._doEase=function(){this._updateEase(Browser.now())},t._updateEase=function(t){var e=this._target;if(e){if(e.destroyed)return u.clearTween(e);var i=this._usedTimer=t-this._startTimer-this._delay;if(!(i<0)){if(i>=this._duration)return this.complete();for(var n=0<i?this._ease(i,0,1,this._duration):0,s=this._props,o=0,a=s.length;o<a;o++){var r=s[o];e[r[0]]=r[1]+n*r[2]}this.update&&this.update.run()}}},t.complete=function(){if(this._target){Laya.scaleTimer.runTimer(this,this.firstStart);for(var t=this._target,e=this._props,i=this._complete,n=0,s=e.length;n<s;n++){var o=e[n];t[o[0]]=o[1]+o[2]}this.update&&this.update.run(),this.clear(),i&&i.run()}},t.pause=function(){Laya.scaleTimer.clear(this,this._beginLoop),Laya.scaleTimer.clear(this,this._doEase),Laya.scaleTimer.clear(this,this.firstStart);var t;(t=Browser.now()-this._startTimer-this._delay)<0&&(this._usedTimer=t)},t.setStartTime=function(t){this._startTimer=t},t.clear=function(){this._target&&(this._remove(),this._clear())},t._clear=function(){this.pause(),Laya.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,Pool.recover("tween",this))},t.recover=function(){this._usedPool=!0,this._clear()},t._remove=function(){var t=u.tweenMap[this._target.$_GID];if(t)for(var e=0,i=t.length;e<i;e++)if(t[e]===this){t.splice(e,1);break}},t.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=Browser.now(),this._delayParam)Laya.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var t=this._props,e=0,i=t.length;e<i;e++){var n=t[e];this._target[n[0]]=n[1]}Laya.scaleTimer.once(this._delay,this,this._beginLoop)}},t.resume=function(){this._usedTimer>=this._duration||(this._startTimer=Browser.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?Laya.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},__getset(0,t,"progress",null,function(t){var e=t*this._duration;this._startTimer=Browser.now()-this._delay-e}),u.to=function(t,e,i,n,s,o,a,r){return void 0===o&&(o=0),void 0===a&&(a=!1),void 0===r&&(r=!0),Pool.getItemByClass("tween",u)._create(t,e,i,n,s,o,a,!0,r,!0)},u.from=function(t,e,i,n,s,o,a,r){return void 0===o&&(o=0),void 0===a&&(a=!1),void 0===r&&(r=!0),Pool.getItemByClass("tween",u)._create(t,e,i,n,s,o,a,!1,r,!0)},u.clearAll=function(t){if(t&&t.$_GID){var e=u.tweenMap[t.$_GID];if(e){for(var i=0,n=e.length;i<n;i++)e[i]._clear();e.length=0}}},u.clear=function(t){t.clear()},u.clearTween=function(t){u.clearAll(t)},u.easeNone=function(t,e,i,n){return i*t/n+e},u.tweenMap={},u}(),Utils=function(){function r(){}return __class(r,"laya.utils.Utils"),r.toRadian=function(t){return t*r._pi2},r.toAngle=function(t){return t*r._pi},r.toHexColor=function(t){if(t<0||isNaN(t))return null;for(var e=t.toString(16);e.length<6;)e="0"+e;return"#"+e},r.getGID=function(){return r._gid++},r.concatArray=function(t,e){if(!e)return t;if(!t)return e;var i=0,n=e.length;for(i=0;i<n;i++)t.push(e[i]);return t},r.clearArray=function(t){return t&&(t.length=0),t},r.copyArray=function(t,e){if(t||(t=[]),!e)return t;t.length=e.length;var i=0,n=e.length;for(i=0;i<n;i++)t[i]=e[i];return t},r.getGlobalRecByPoints=function(t,e,i,n,s){var o,a;return o=new Point(e,i),o=t.localToGlobal(o),a=new Point(n,s),a=t.localToGlobal(a),Rectangle._getWrapRec([o.x,o.y,a.x,a.y])},r.getGlobalPosAndScale=function(t){return r.getGlobalRecByPoints(t,0,0,1,1)},r.bind=function(t,e){return t.bind(e)},r.measureText=function(t,e){return RunDriver.measureText(t,e)},r.updateOrder=function(t){if(!t||t.length<2)return!1;for(var e,i=1,n=0,s=t.length,o=NaN;i<s;){for(e=t[n=i],o=t[n]._zOrder;-1<--n&&t[n]._zOrder>o;)t[n+1]=t[n];t[n+1]=e,i++}var a=e.parent.conchModel;if(a)if(null!=a.updateZOrder)a.updateZOrder();else{for(i=0;i<s;i++)a.removeChild(t[i].conchModel);for(i=0;i<s;i++)a.addChildAt(t[i].conchModel,i)}return!0},r.transPointList=function(t,e,i){var n=0,s=t.length;for(n=0;n<s;n+=2)t[n]+=e,t[n+1]+=i},r.parseInt=function(t,e){void 0===e&&(e=0);var i=Browser.window.parseInt(t,e);return isNaN(i)?0:i},r.getFileExtension=function(t){r._extReg.lastIndex=t.lastIndexOf(".");var e=r._extReg.exec(t);return e&&1<e.length?e[1].toLowerCase():null},r.getTransformRelativeToWindow=function(t,e,i){var n=Laya.stage,s=laya.utils.Utils.getGlobalPosAndScale(t),o=n._canvasTransform.clone(),a=o.tx,r=o.ty;o.rotate(-Math.PI/180*Laya.stage.canvasDegree),o.scale(Laya.stage.clientScaleX,Laya.stage.clientScaleY);var l=Laya.stage.canvasDegree%180!=0,h=NaN,c=NaN;l?(h=i+s.y,c=e+s.x,h*=o.d,c*=o.a,90==Laya.stage.canvasDegree?(h=a-h,c+=r):(h+=a,c=r-c)):(h=e+s.x,c=i+s.y,h*=o.a,c*=o.d,h+=a,c+=r);var u=NaN,d=NaN;return d=l?(u=o.d*s.height,o.a*s.width):(u=o.a*s.width,o.d*s.height),{x:h,y:c,scaleX:u,scaleY:d}},r.fitDOMElementInArea=function(t,e,i,n,s,o){t._fitLayaAirInitialized||(t._fitLayaAirInitialized=!0,t.style.transformOrigin=t.style.webKittransformOrigin="left top",t.style.position="absolute");var a=r.getTransformRelativeToWindow(e,i,n);t.style.transform=t.style.webkitTransform="scale("+a.scaleX+","+a.scaleY+") rotate("+Laya.stage.canvasDegree+"deg)",t.style.width=s+"px",t.style.height=o+"px",t.style.left=a.x+"px",t.style.top=a.y+"px"},r.isOkTextureList=function(t){if(!t)return!1;var e,i=0,n=t.length;for(i=0;i<n;i++)if(!(e=t[i])||!e.source)return!1;return!0},r.isOKCmdList=function(t){if(!t)return!1;var e,i,n=0,s=t.length,o=Render._context;for(n=0;n<s;n++)switch((e=t[n]).callee){case o._drawTexture:case o._fillTexture:case o._drawTextureWithTransform:if(!(i=e[0])||!i.source)return!1}return!0},r._gid=1,r._pi=180/Math.PI,r._pi2=Math.PI/180,r._extReg=/\.(\w+)\??/g,r.parseXMLFromString=function(t){var e;if(t=t.replace(/>\s+</g,"><"),-1<(e=(new DOMParser).parseFromString(t,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(e.firstChild.firstChild.textContent);return e},r}(),VectorGraphManager=function(){function t(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],Render.isWebGL&&CacheManager.regCacheByFunction(Utils.bind(this.startDispose,this),Utils.bind(this.getCacheList,this))}__class(t,"laya.utils.VectorGraphManager");var e=t.prototype;return e.getId=function(){return this._id++},e.addShape=function(t,e){this.shapeDic[t]=e,this.useDic[t]||(this.useDic[t]=!0)},e.addLine=function(t,e){this.shapeLineDic[t]=e,this.shapeLineDic[t]||(this.shapeLineDic[t]=!0)},e.getShape=function(t){this._checkKey&&null!=this.useDic[t]&&(this.useDic[t]=!0)},e.deleteShape=function(t){this.shapeDic[t]&&(this.shapeDic[t]=null,delete this.shapeDic[t]),this.shapeLineDic[t]&&(this.shapeLineDic[t]=null,delete this.shapeLineDic[t]),null!=this.useDic[t]&&delete this.useDic[t]},e.getCacheList=function(){var t,e=[];for(t in this.shapeDic)e.push(this.shapeDic[t]);for(t in this.shapeLineDic)e.push(this.shapeLineDic[t]);return e},e.startDispose=function(t){var e;for(e in this.useDic)this.useDic[e]=!1;this._checkKey=!0},e.endDispose=function(){if(this._checkKey){var t;for(t in this.useDic)this.useDic[t]||this.deleteShape(t);this._checkKey=!1}},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),WeakObject=function(){function n(){this._obj=null,this._obj=n.supportWeakMap?new Browser.window.WeakMap:{},n.supportWeakMap||n._maps.push(this)}__class(n,"laya.utils.WeakObject");var t=n.prototype;return t.set=function(t,e){if(null!=t)if(n.supportWeakMap){var i=t;"string"!=typeof t&&"number"!=typeof t||(i=n._keys[t])||(i=n._keys[t]={k:t}),this._obj.set(i,e)}else"string"==typeof t||"number"==typeof t?this._obj[t]=e:(t.$_GID||(t.$_GID=Utils.getGID()),this._obj[t.$_GID]=e)},t.get=function(t){if(null==t)return null;if(n.supportWeakMap){var e="string"==typeof t||"number"==typeof t?n._keys[t]:t;return e?this._obj.get(e):null}return"string"==typeof t||"number"==typeof t?this._obj[t]:this._obj[t.$_GID]},t.del=function(t){if(null!=t)if(n.supportWeakMap){var e="string"==typeof t||"number"==typeof t?n._keys[t]:t;if(!e)return;this._obj.delete(e)}else"string"==typeof t||"number"==typeof t?delete this._obj[t]:delete this._obj[this._obj.$_GID]},t.has=function(t){if(null==t)return!1;if(n.supportWeakMap){var e="string"==typeof t||"number"==typeof t?n._keys[t]:t;return this._obj.has(e)}return"string"==typeof t||"number"==typeof t?null!=this._obj[t]:null!=this._obj[this._obj.$_GID]},n.__init__=function(){(n.supportWeakMap=null!=Browser.window.WeakMap)||Laya.timer.loop(n.delInterval,null,n.clearCache)},n.clearCache=function(){for(var t=0,e=n._maps.length;t<e;t++){n._maps[t]._obj={}}},n.supportWeakMap=!1,n.delInterval=3e5,n._keys={},n._maps=[],__static(n,["I",function(){return this.I=new n}]),n}(),WordText=function(){function t(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}__class(t,"laya.utils.WordText");var e=t.prototype;return e.setText=function(t){this.changed=!0,this._text=t},e.toString=function(){return this._text},e.charCodeAt=function(t){return this._text?this._text.charCodeAt(t):NaN},e.charAt=function(t){return this._text?this._text.charAt(t):null},__getset(0,e,"length",function(){return this._text?this._text.length:0}),t}(),AtlasGrid=function(){var n,s;function t(t,e,i){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new s,void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._cells=null,this._rowInfo=null,this._init(t,e),this._atlasID=i}__class(t,"laya.webgl.atlas.AtlasGrid");var e=t.prototype;return e.getAltasID=function(){return this._atlasID},e.setAltasID=function(t){0<=t&&(this._atlasID=t)},e.addTex=function(t,e,i){var n=this._get(e,i);return 0==n.ret||(this._fill(n.x,n.y,e,i,t),this._texCount++),n},e._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},e._init=function(t,e){if(this._width=t,this._height=e,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=__newvec(this._height);for(var i=0;i<this._height;i++)this._rowInfo[i]=new n;return this._clear(),!0},e._get=function(t,e){var i=new MergeFillInfo;if(t>=this._failSize.width&&e>=this._failSize.height)return i;for(var n=-1,s=-1,o=this._width,a=this._height,r=this._cells,l=0;l<a;l++)if(!(this._rowInfo[l].spaceCount<t))for(var h=0;h<o;){var c=3*(l*o+h);if(0!=r[c]||r[1+c]<t||r[2+c]<e)h+=r[1+c];else{n=h,s=l;for(var u=0;u<t;u++)if(r[3*u+c+2]<e){n=-1;break}if(!(n<0))return i.ret=!0,i.x=n,i.y=s,i;h+=r[1+c]}}return i},e._fill=function(t,e,i,n,s){var o=this._width,a=this._height;this._check(t+i<=o&&e+n<=a);for(var r=e;r<n+e;++r){this._check(this._rowInfo[r].spaceCount>=i),this._rowInfo[r].spaceCount-=i;for(var l=0;l<i;l++){var h=3*(t+r*o+l);this._check(0==this._cells[h]),this._cells[h]=s,this._cells[1+h]=i,this._cells[2+h]=n}}if(0<t)for(r=0;r<n;++r){var c=0;for(l=t-1;0<=l&&0==this._cells[3*((e+r)*o+l)];--l,++c);for(l=c;0<l;--l)this._cells[3*((e+r)*o+t-l)+1]=l,this._check(0<l)}if(0<e)for(l=t;l<t+i;++l){for(c=0,r=e-1;0<=r&&0==this._cells[3*(l+r*o)];--r,c++);for(r=c;0<r;--r)this._cells[3*(l+(e-r)*o)+2]=r,this._check(0<r)}},e._check=function(t){0==t&&console.log("xtexMerger 错误啦")},e._clear=function(){for(var t=this._texCount=0;t<this._height;t++)this._rowInfo[t].spaceCount=this._width;for(var e=0;e<this._height;e++)for(var i=0;i<this._width;i++){var n=3*(e*this._width+i);this._cells[n]=0,this._cells[1+n]=this._width-i,this._cells[2+n]=this._width-e}this._failSize.width=this._width+1,this._failSize.height=this._height+1},t.__init$=function(){n=function(){function t(){this.spaceCount=0}return __class(t,""),t}(),s=function(){function t(){this.width=0,this.height=0}return __class(t,""),t}()},t}(),AtlasResourceManager=function(){function m(t,e,i,n){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this.disposeTime=0,this._setAtlasParam=!0,this._width=t,this._height=e,this._gridSize=i,this._maxAtlaserCount=n,this._gridNumX=t/i,this._gridNumY=e/i,this._curAtlasIndex=0,this._atlaserArray=[]}__class(m,"laya.webgl.atlas.AtlasResourceManager");var t=m.prototype;return t.setAtlasParam=function(t,e,i,n){if(1==this._setAtlasParam)return m._sid_=0,this._width=t,this._height=e,this._gridSize=i,this._maxAtlaserCount=n,this._gridNumX=t/i,this._gridNumY=e/i,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},t.pushData=function(t){var e,i=t.bitmap,n=-1,s=null,o=0,a=0;for(o=0,e=this._atlaserArray.length;o<e&&(a=(this._curAtlasIndex+o)%e,-1==(n=(s=this._atlaserArray[a]).findBitmapIsExist(i)));o++);if(-1!=n){var r=s.InAtlasWebGLImagesOffsetValue[n];return f=r[0],p=r[1],s.addToAtlas(t,f,p),!0}this._setAtlasParam=!1;for(var l=Math.ceil((t.bitmap.width+2)/this._gridSize),h=Math.ceil((t.bitmap.height+2)/this._gridSize),c=!1,u=0;u<2;u++){var d=this._maxAtlaserCount;for(o=0;o<d;o++){a=(this._curAtlasIndex+o)%d,this._atlaserArray.length-1>=a||this._atlaserArray.push(new Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,m._sid_++));var _=this._atlaserArray[a],f=0,p=0,g=_.addTex(1,l,h);if(g.ret){f=g.x*this._gridSize+1,p=g.y*this._gridSize+1,i.lock=!0,_.addToAtlasTexture(i,f,p),_.addToAtlas(t,f,p),c=!0,this._curAtlasIndex=a;break}}if(c)break;this._atlaserArray.push(new Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,m._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return c||console.log(">>>AtlasManager pushData error"),c},t.addToAtlas=function(t){laya.webgl.atlas.AtlasResourceManager.instance.pushData(t)},t.garbageCollection=function(){if(!0===this._needGC){for(var t=this._atlaserArray.length-this._maxAtlaserCount,e=0;e<t;e++)this._atlaserArray[e].dispose();this._atlaserArray.splice(0,t),this._needGC=!1,0<t&&(this.disposeTime=Browser.now())}return!0},t.freeAll=function(){for(var t=0,e=this._atlaserArray.length;t<e;t++)this._atlaserArray[t].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},t.getAtlaserCount=function(){return this._atlaserArray.length},t.getAtlaserByIndex=function(t){return this._atlaserArray[t]},__getset(1,m,"instance",function(){return m._Instance||(m._Instance=new m(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),m._Instance}),__getset(1,m,"enabled",function(){return Config.atlasEnable}),__getset(1,m,"atlasLimitWidth",function(){return m._atlasLimitWidth},function(t){m._atlasLimitWidth=t}),__getset(1,m,"atlasLimitHeight",function(){return m._atlasLimitHeight},function(t){m._atlasLimitHeight=t}),m._enable=function(){Config.atlasEnable=!0},m._disable=function(){Config.atlasEnable=!1},m.__init__=function(){m.atlasTextureWidth=1024,m.atlasTextureHeight=1024,m.maxTextureCount=8,m.atlasLimitWidth=512,m.atlasLimitHeight=512},m._atlasLimitWidth=0,m._atlasLimitHeight=0,m.gridSize=16,m.atlasTextureWidth=0,m.atlasTextureHeight=0,m.maxTextureCount=0,m._atlasRestore=0,m.BOARDER_TYPE_NO=0,m.BOARDER_TYPE_RIGHT=1,m.BOARDER_TYPE_LEFT=2,m.BOARDER_TYPE_BOTTOM=4,m.BOARDER_TYPE_TOP=8,m.BOARDER_TYPE_ALL=15,m._sid_=0,m._Instance=null,m}(),MergeFillInfo=function(){function t(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return __class(t,"laya.webgl.atlas.MergeFillInfo"),t}(),BlendMode=function(){function e(){}return __class(e,"laya.webgl.canvas.BlendMode"),e._init_=function(t){e.fns=[e.BlendNormal,e.BlendAdd,e.BlendMultiply,e.BlendScreen,e.BlendOverlay,e.BlendLight,e.BlendMask,e.BlendDestinationOut],e.targetFns=[e.BlendNormalTarget,e.BlendAddTarget,e.BlendMultiplyTarget,e.BlendScreenTarget,e.BlendOverlayTarget,e.BlendLightTarget,e.BlendMask,e.BlendDestinationOut]},e.BlendNormal=function(t){t.blendFunc(1,771)},e.BlendAdd=function(t){t.blendFunc(1,772)},e.BlendMultiply=function(t){t.blendFunc(774,771)},e.BlendScreen=function(t){t.blendFunc(1,1)},e.BlendOverlay=function(t){t.blendFunc(1,769)},e.BlendLight=function(t){t.blendFunc(1,1)},e.BlendNormalTarget=function(t){t.blendFunc(1,771)},e.BlendAddTarget=function(t){t.blendFunc(1,772)},e.BlendMultiplyTarget=function(t){t.blendFunc(774,771)},e.BlendScreenTarget=function(t){t.blendFunc(1,1)},e.BlendOverlayTarget=function(t){t.blendFunc(1,769)},e.BlendLightTarget=function(t){t.blendFunc(1,1)},e.BlendMask=function(t){t.blendFunc(0,770)},e.BlendDestinationOut=function(t){t.blendFunc(0,0)},e.activeBlendFunction=null,e.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],e.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},e.NORMAL="normal",e.ADD="add",e.MULTIPLY="multiply",e.SCREEN="screen",e.LIGHT="light",e.OVERLAY="overlay",e.DESTINATIONOUT="destination-out",e.fns=[],e.targetFns=[],e}(),DrawStyle=function(){function i(t){this._color=Color.create("black"),this.setValue(t)}__class(i,"laya.webgl.canvas.DrawStyle");var t=i.prototype;return t.setValue=function(t){if(t){if("string"==typeof t)return void(this._color=Color.create(t));if(t instanceof laya.utils.Color)return void(this._color=t)}},t.reset=function(){this._color=Color.create("black")},t.equal=function(t){return"string"==typeof t?this._color.strColor===t:t instanceof laya.utils.Color&&this._color.numColor===t.numColor},t.toColorStr=function(){return this._color.strColor},i.create=function(t){var e;if(t&&("string"==typeof t?e=Color.create(t):t instanceof laya.utils.Color&&(e=t),e))return e._drawStyle||(e._drawStyle=new i(t));return laya.webgl.canvas.DrawStyle.DEFAULT},__static(i,["DEFAULT",function(){return this.DEFAULT=new i("#000000")}]),i}(),Path=function(){function t(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];WebGL.mainContext;this.ib=IndexBuffer2D.create(35048),this.vb=VertexBuffer2D.create(5)}__class(t,"laya.webgl.canvas.Path");var e=t.prototype;return e.addPoint=function(t,e){this.tempArray.push(t,e)},e.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},e.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},e.polygon=function(t,e,i,n,s,o){var a;return this.geomatrys.push(this._curGeomatry=a=new Polygon(t,e,i,n,s,o)),n||(a.fill=!1),null==o&&(a.borderWidth=0),a},e.setGeomtry=function(t){this.geomatrys.push(this._curGeomatry=t)},e.drawLine=function(t,e,i,n,s){var o;return this.closePath?this.geomatrys.push(this._curGeomatry=o=new LoopLine(t,e,i,n,s)):this.geomatrys.push(this._curGeomatry=o=new Line(t,e,i,n,s)),o.fill=!1,o},e.update=function(){var t=this.ib._byteLength,e=this.geomatrys.length;this.offset=t;for(var i=this.geoStart;i<e;i++)this.geomatrys[i].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=e,this.count=(this.ib._byteLength-t)/CONST3D2D.BYTES_PIDX},e.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},e.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},t}(),SaveBase=function(){function r(){}__class(r,"laya.webgl.canvas.save.SaveBase");var t=r.prototype;return Laya.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!1},t.restore=function(t){this._dataObj[this._valueName]=this._value,(r._cache[r._cache._length++]=this)._newSubmit&&(t._curSubmit=Submit.RENDERBASE,t._renderKey=0)},r._createArray=function(){var t=[];return t._length=0,t},r._init=function(){var t=r._namemap={};return t[1]="ALPHA",t[2]="fillStyle",t[8]="font",t[256]="lineWidth",t[512]="strokeStyle",t[8192]="_mergeID",t[1024]=t[2048]=t[4096]=[],t[16384]="textBaseline",t[32768]="textAlign",t[65536]="_nBlendType",t[1048576]="shader",t[2097152]="filters",t},r.save=function(t,e,i,n){if((t._saveMark._saveuse&e)!==e){t._saveMark._saveuse|=e;var s=r._cache,o=0<s._length?s[--s._length]:new r;o._value=i[o._valueName=r._namemap[e]],o._dataObj=i,o._newSubmit=n;var a=t._save;a[a._length++]=o}},r._cache=laya.webgl.canvas.save.SaveBase._createArray(),r._namemap=r._init(),r}(),SaveClipRect=function(){function o(){this._clipRect=new Rectangle}__class(o,"laya.webgl.canvas.save.SaveClipRect");var t=o.prototype;return Laya.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!1},t.restore=function(t){t._clipRect=this._clipSaveRect,(o._cache[o._cache._length++]=this)._submitScissor.submitLength=t._submits._length-this._submitScissor.submitIndex,t._curSubmit=Submit.RENDERBASE,t._renderKey=0},o.save=function(t,e){if(131072!=(131072&t._saveMark._saveuse)){t._saveMark._saveuse|=131072;var i=o._cache,n=0<i._length?i[--i._length]:new o;n._clipSaveRect=t._clipRect,t._clipRect=n._clipRect.copyFrom(t._clipRect),n._submitScissor=e;var s=t._save;s[s._length++]=n}},__static(o,["_cache",function(){return this._cache=SaveBase._createArray()}]),o}(),SaveClipRectStencil=function(){function _(){this._contextX=0,this._contextY=0,this._clipRect=new Rectangle,this._rect=new Rectangle,this._matrix=new Matrix}__class(_,"laya.webgl.canvas.save.SaveClipRectStencil");var t=_.prototype;return Laya.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!1},t.restore=function(t){SubmitStencil.restore(t,this._rect,this._saveMatrix,this._contextX,this._contextY),t._clipRect=this._clipSaveRect,t._curMat=this._saveMatrix,t._x=this._contextX,t._y=this._contextY,_._cache[_._cache._length++]=this,t._curSubmit=Submit.RENDERBASE},_.save=function(t,e,i,n,s,o,a,r,l,h){if(262144!=(262144&t._saveMark._saveuse)){t._saveMark._saveuse|=262144;var c=_._cache,u=0<c._length?c[--c._length]:new _;u._clipSaveRect=t._clipRect,u._clipRect.setTo(a,r,l,h),t._clipRect=u._clipRect,u._rect.x=i,u._rect.y=n,u._rect.width=s,u._rect.height=o,u._contextX=t._x,u._contextY=t._y,u._saveMatrix=t._curMat,t._curMat.copyTo(u._matrix),t._curMat=u._matrix,u._submitStencil=e;var d=t._save;d[d._length++]=u}},__static(_,["_cache",function(){return this._cache=SaveBase._createArray()}]),_}(),SaveMark=function(){function n(){this._saveuse=0}__class(n,"laya.webgl.canvas.save.SaveMark");var t=n.prototype;return Laya.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!0},t.restore=function(t){t._saveMark=this._preSaveMark,n._no[n._no._length++]=this},n.Create=function(t){var e=n._no,i=0<e._length?e[--e._length]:new n;return i._saveuse=0,i._preSaveMark=t._saveMark,t._saveMark=i},__static(n,["_no",function(){return this._no=SaveBase._createArray()}]),n}(),SaveTransform=function(){function o(){this._matrix=new Matrix}__class(o,"laya.webgl.canvas.save.SaveTransform");var t=o.prototype;return Laya.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!1},t.restore=function(t){t._curMat=this._savematrix,o._no[o._no._length++]=this},o.save=function(t){var e=t._saveMark;if(2048!=(2048&e._saveuse)){e._saveuse|=2048;var i=o._no,n=0<i._length?i[--i._length]:new o;n._savematrix=t._curMat,t._curMat=t._curMat.copyTo(n._matrix);var s=t._save;s[s._length++]=n}},__static(o,["_no",function(){return this._no=SaveBase._createArray()}]),o}(),SaveTranslate=function(){function s(){}__class(s,"laya.webgl.canvas.save.SaveTranslate");var t=s.prototype;return Laya.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!1},t.restore=function(t){t._curMat;t._x=this._x,t._y=this._y,s._no[s._no._length++]=this},s.save=function(t){var e=s._no,i=0<e._length?e[--e._length]:new s;i._x=t._x,i._y=t._y;var n=t._save;n[n._length++]=i},__static(s,["_no",function(){return this._no=SaveBase._createArray()}]),s}(),RenderTargetMAX=function(){function t(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new Rectangle}__class(t,"laya.webgl.resource.RenderTargetMAX");var e=t.prototype;return e.setSP=function(t){this._sp=t},e.size=function(t,e){var i=this;this._width!==t||this._height!==e?(this.repaint=!0,this._width=t,this._height=e,this.target?this.target.size(t,e):this.target=RenderTarget2D.create(t,e),this.target.hasListener("recovered")||this.target.on("recovered",this,function(t){Laya.timer.callLater(i._sp,i._sp.repaint)})):this.target.size(t,e)},e._flushToTarget=function(t,e){if(!e._destroy){var i=RenderState2D.worldScissorTest,n=RenderState2D.worldClipRect;RenderState2D.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,RenderState2D.worldScissorTest=!1,WebGL.mainContext.disable(3089);var s=RenderState2D.worldAlpha,o=RenderState2D.worldMatrix4,a=RenderState2D.worldMatrix,r=RenderState2D.worldFilters,l=RenderState2D.worldShaderDefines;if(RenderState2D.worldMatrix=Matrix.EMPTY,RenderState2D.restoreTempArray(),RenderState2D.worldMatrix4=RenderState2D.TEMPMAT4_ARRAY,RenderState2D.worldAlpha=1,RenderState2D.worldFilters=null,RenderState2D.worldShaderDefines=null,BaseShader.activeShader=null,e.start(),Config.showCanvasMark?e.clear(0,1,0,.3):e.clear(0,0,0,0),t.flush(),e.end(),BaseShader.activeShader=null,RenderState2D.worldAlpha=s,RenderState2D.worldMatrix4=o,RenderState2D.worldMatrix=a,RenderState2D.worldFilters=r,RenderState2D.worldShaderDefines=l,RenderState2D.worldScissorTest=i){var h=RenderState2D.height-n.y-n.height;WebGL.mainContext.scissor(n.x,h,n.width,n.height),WebGL.mainContext.enable(3089)}RenderState2D.worldClipRect=n}},e.flush=function(t){this.repaint&&(this._flushToTarget(t,this.target),this.repaint=!1)},e.drawTo=function(t,e,i,n,s){t.drawTexture(this.target.getTexture(),e,i,n,s,0,0)},e.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},t}(),Shader2D=function(){function t(){this.ALPHA=1,this.shaderType=0,this.defines=new ShaderDefines2D}return __class(t,"laya.webgl.shader.d2.Shader2D"),t.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},t.__init__=function(){var t,e;Shader.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),Shader.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),Shader.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),Shader.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4Color += texture2D(texture, v_texcoord + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),Shader.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),Shader.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),Shader.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),Shader.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),t="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",e='precision mediump float;\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',Shader.preCompile2D(0,1,t,e,null),t="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",e='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',Shader.preCompile2D(0,2,t,e,null),t="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",e="precision mediump float;\n//precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",Shader.preCompile2D(0,4,t,e,null),t="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",e='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',Shader.preCompile2D(0,256,t,e,null),t="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",e="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",Shader.preCompile2D(0,512,t,e,null)},t}(),ShaderDefines=function(){function e(t,e,i){this._value=0,this._name2int=t,this._int2name=e,this._int2nameMap=i}__class(e,"laya.webgl.shader.ShaderDefines");var t=e.prototype;return t.add=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value|=t,this._value},t.addInt=function(t){return this._value|=t,this._value},t.remove=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value&=~t,this._value},t.isDefine=function(t){return(this._value&t)===t},t.getValue=function(){return this._value},t.setValue=function(t){this._value=t},t.toNameDic=function(){var t=this._int2nameMap[this._value];return t||e._toText(this._value,this._int2name,this._int2nameMap)},e._reg=function(t,e,i,n){n[i[t]=e]=t},e._toText=function(t,e,i){var n=i[t];if(n)return n;for(var s={},o=1,a=0;a<32&&!(t<(o=1<<a));a++)if(t&o){var r=e[o];r&&(s[r]="")}return i[t]=s},e._toInt=function(t,e){for(var i=t.split("."),n=0,s=0,o=i.length;s<o;s++){var a=e[i[s]];if(!a)throw new Error("Defines to int err:"+t+"/"+i[s]);n|=a}return n},e}(),SkinMesh=function(){function a(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new Matrix}__class(a,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var t=a.prototype;return t.init=function(t,e,i){if(e)this._vs=e;else{this._vs=[];var n=t.width,s=t.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(n,0,1,0,1,1,1,1),this._vs.push(n,s,1,1,1,1,1,1),this._vs.push(0,s,0,1,1,1,1,1)}i?this._ps=i:(a._defaultPS||(a._defaultPS=[]).push(0,1,3,3,1,2),this._ps=a._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=t},t.init2=function(t,e,i,n,s){this.transform&&(this.transform=null),i?this._ps=i:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=n,this._uvs=s,this.mEleNum=this._ps.length,this.mTexture=t,(Render.isConchNode||Render.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},t._initMyData=function(){var t=0,e=0,i=4*this._verticles.length;this._vs=a._tempVS;var n=!1;if(Render.isConchNode||Render.isConchApp?(this._vs.length=i,n=!0):this._vs.length<i&&(this._vs.length=i,n=!0),a._tVSLen=i,n)for(;t<i;)this._vs[t]=this._verticles[e],this._vs[t+1]=this._verticles[e+1],this._vs[t+2]=this._uvs[e],this._vs[t+3]=this._uvs[e+1],this._vs[t+4]=1,this._vs[t+5]=1,this._vs[t+6]=1,this._vs[t+7]=1,t+=8,e+=2;else for(;t<i;)this._vs[t]=this._verticles[e],this._vs[t+1]=this._verticles[e+1],this._vs[t+2]=this._uvs[e],this._vs[t+3]=this._uvs[e+1],t+=8,e+=2},t.getData2=function(t,e,i){var n;this.mVBBuffer=t,this.mIBBuffer=e,this._initMyData(),t.appendEx2(this._vs,Float32Array,a._tVSLen,4),this._indexStart=e._byteLength,(n=a._tempIB).length<this._ps.length&&(n.length=this._ps.length);for(var s=0,o=this._ps.length;s<o;s++)n[s]=this._ps[s]+i;e.appendEx2(n,Uint16Array,this._ps.length,2)},t.getData=function(t,e,i){if(this.mVBBuffer=t,this.mIBBuffer=e,t.append(this.mVBData),this._indexStart=e._byteLength,this.mIBData.start!=i){for(var n=0,s=this._ps.length;n<s;n++)this.mIBData[n]=this._ps[n]+i;this.mIBData.start=i}e.append(this.mIBData)},t.render=function(t,e,i){if(Render.isWebGL&&this.mTexture){t._renderKey=0,t._shader2D.glTexture=null,SkinMeshBuffer.getInstance().addSkinMesh(this);var n=Submit.createShape(t,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,Value2D.create(512,0));this.transform||(this.transform=Matrix.EMPTY),this.transform.translate(e,i),Matrix.mul(this.transform,t._curMat,this._tempMatrix),this.transform.translate(-e,-i);var s=n.shaderValue,o=s.u_mmat2||RenderState2D.getMatrArray();RenderState2D.mat2MatArray(this._tempMatrix,o),s.textureHost=this.mTexture,s.offsetX=0,s.offsetY=0,s.u_mmat2=o,s.ALPHA=t._shader2D.ALPHA,t._submits[t._submits._length++]=n}else Render.isConchApp&&this.mTexture&&(this.transform||(this.transform=Matrix.EMPTY),t.setSkinMesh&&t.setSkinMesh(e,i,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},a._tempVS=[],a._tempIB=[],a._defaultPS=null,a._tVSLen=0,a}(),SkinMeshBuffer=function(){function t(){this.ib=null,this.vb=null;WebGL.mainContext;this.ib=IndexBuffer2D.create(35048),this.vb=VertexBuffer2D.create(8)}__class(t,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var e=t.prototype;return e.addSkinMesh=function(t){t.getData2(this.vb,this.ib,this.vb._byteLength/32)},e.reset=function(){this.vb.clear(),this.ib.clear()},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),BasePoly=function(){function t(t,e,i,n,s,o,a,r,l){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===l&&(l=0),this.x=t,this.y=e,this.width=i,this.height=n,this.edges=s,this.color=o,this.borderWidth=a,this.borderColor=r}__class(t,"laya.webgl.shapes.BasePoly");var e=t.prototype;return Laya.imps(e,{"laya.webgl.shapes.IShape":!0}),e.getData=function(t,e,i){},e.rebuild=function(t){},e.setMatrix=function(t){},e.needUpdate=function(t){return!0},e.sector=function(t,e,i){var n=this.x,s=this.y,o=this.edges,a=(this.r1-this.r0)/o,r=this.width,l=this.height,h=this.color,c=(h>>16&255)/255,u=(h>>8&255)/255,d=(255&h)/255;t.push(n,s,c,u,d);for(var _=0;_<o+1;_++)t.push(n+Math.sin(a*_+this.r0)*r,s+Math.cos(a*_+this.r0)*l),t.push(c,u,d);for(_=0;_<o;_++)e.push(i,i+_+1,i+_+2)},e.createLine2=function(t,e,i,n,s,o){var a,r,l,h,c,u,d,_,f,p,g,m,b,y,v,w,x,C,S,T,L=t.concat(),R=s,I=this.borderColor,G=(I>>16&255)/255,M=(I>>8&255)/255,A=(255&I)/255,k=L.length/2,B=n,W=i/2;l=L[0],h=L[1],p=l-(c=L[2]),f=(f=-(h-(u=L[3])))/(T=Math.sqrt(f*f+p*p))*W,p=p/T*W,R.push(l-f+this.x,h-p+this.y,G,M,A,l+f+this.x,h+p+this.y,G,M,A);for(var N=1;N<k-1;N++)l=L[2*(N-1)],h=L[2*(N-1)+1],c=L[2*N],u=L[2*N+1],d=L[2*(N+1)],_=L[2*(N+1)+1],p=l-c,m=c-d,v=(-(f=(f=-(h-u))/(T=Math.sqrt(f*f+p*p))*W)+l)*(-(p=p/T*W)+u)-(-f+c)*(-p+h),C=(-(g=(g=-(u-_))/(T=Math.sqrt(g*g+m*m))*W)+d)*(-(m=m/T*W)+u)-(-g+c)*(-m+_),S=(b=-p+h-(-p+u))*(x=-g+c-(-g+d))-(w=-m+_-(-m+u))*(y=-f+c-(-f+l)),Math.abs(S)<.1?(S+=10.1,R.push(c-f+this.x,u-p+this.y,G,M,A,c+f+this.x,u+p+this.y,G,M,A)):(((a=(y*C-x*v)/S)-c)*(a-c)+((r=(w*v-b*C)/S)-u)+(r-u),R.push(a+this.x,r+this.y,G,M,A,c-(a-c)+this.x,u-(r-u)+this.y,G,M,A));l=L[L.length-4],h=L[L.length-3],p=l-(c=L[L.length-2]),f=(f=-(h-(u=L[L.length-1])))/(T=Math.sqrt(f*f+p*p))*W,p=p/T*W,R.push(c-f+this.x,u-p+this.y,G,M,A,c+f+this.x,u+p+this.y,G,M,A);var V=o;for(N=1;N<V;N++)e.push(B+2*(N-1),B+2*(N-1)+1,B+2*N+1,B+2*N+1,B+2*N,B+2*(N-1));return R},e.createLine=function(t,e,i,n){var s=t.concat(),o=t,a=this.borderColor,r=(a>>16&255)/255,l=(a>>8&255)/255,h=(255&a)/255;s.splice(0,5);var c,u,d,_,f,p,g,m,b,y,v,w,x,C,S,T,L,R,I,G,M=s.length/5,A=n,k=i/2;d=s[0],_=s[1],y=d-(f=s[5]),b=(b=-(_-(p=s[6])))/(G=Math.sqrt(b*b+y*y))*k,y=y/G*k,o.push(d-b,_-y,r,l,h,d+b,_+y,r,l,h);for(var B=1;B<M-1;B++)d=s[5*(B-1)],_=s[5*(B-1)+1],f=s[5*B],p=s[5*B+1],g=s[5*(B+1)],m=s[5*(B+1)+1],y=d-f,w=f-g,S=(-(b=(b=-(_-p))/(G=Math.sqrt(b*b+y*y))*k)+d)*(-(y=y/G*k)+p)-(-b+f)*(-y+_),R=(-(v=(v=-(p-m))/(G=Math.sqrt(v*v+w*w))*k)+g)*(-(w=w/G*k)+p)-(-v+f)*(-w+m),I=(x=-y+_-(-y+p))*(L=-v+f-(-v+g))-(T=-w+m-(-w+p))*(C=-b+f-(-b+d)),Math.abs(I)<.1?(I+=10.1,o.push(f-b,p-y,r,l,h,f+b,p+y,r,l,h)):(((c=(C*R-L*S)/I)-f)*(c-f)+((u=(T*S-x*R)/I)-p)+(u-p),o.push(c,u,r,l,h,f-(c-f),p-(u-p),r,l,h));d=s[s.length-10],_=s[s.length-9],y=d-(f=s[s.length-5]),b=(b=-(_-(p=s[s.length-4])))/(G=Math.sqrt(b*b+y*y))*k,y=y/G*k,o.push(f-b,p-y,r,l,h,f+b,p+y,r,l,h);var W=this.edges+1;for(B=1;B<W;B++)e.push(A+2*(B-1),A+2*(B-1)+1,A+2*B+1,A+2*B+1,A+2*B,A+2*(B-1));return o},e.createLoopLine=function(t,e,i,n,s,o){var a=t.concat(),r=s||t,l=this.borderColor,h=(l>>16&255)/255,c=(l>>8&255)/255,u=(255&l)/255;a.splice(0,5);var d=[a[0],a[1]],_=[a[a.length-5],a[a.length-4]],f=_[0]+.5*(d[0]-_[0]),p=_[1]+.5*(d[1]-_[1]);a.unshift(f,p,0,0,0),a.push(f,p,0,0,0);var g,m,b,y,v,w,x,C,S,T,L,R,I,G,M,A,k,B,W,N,V=a.length/5,E=n,F=i/2;b=a[0],y=a[1],T=b-(v=a[5]),S=(S=-(y-(w=a[6])))/(N=Math.sqrt(S*S+T*T))*F,T=T/N*F,r.push(b-S,y-T,h,c,u,b+S,y+T,h,c,u);for(var Z=1;Z<V-1;Z++)b=a[5*(Z-1)],y=a[5*(Z-1)+1],v=a[5*Z],w=a[5*Z+1],x=a[5*(Z+1)],C=a[5*(Z+1)+1],T=b-v,R=v-x,M=(-(S=(S=-(y-w))/(N=Math.sqrt(S*S+T*T))*F)+b)*(-(T=T/N*F)+w)-(-S+v)*(-T+y),B=(-(L=(L=-(w-C))/(N=Math.sqrt(L*L+R*R))*F)+x)*(-(R=R/N*F)+w)-(-L+v)*(-R+C),W=(I=-T+y-(-T+w))*(k=-L+v-(-L+x))-(A=-R+C-(-R+w))*(G=-S+v-(-S+b)),Math.abs(W)<.1?(W+=10.1,r.push(v-S,w-T,h,c,u,v+S,w+T,h,c,u)):(((g=(G*B-k*M)/W)-v)*(g-v)+((m=(A*M-I*B)/W)-w)+(m-w),r.push(g,m,h,c,u,v-(g-v),w-(m-w),h,c,u));o&&(e=o);var D=this.edges+1;for(Z=1;Z<D;Z++)e.push(E+2*(Z-1),E+2*(Z-1)+1,E+2*Z+1,E+2*Z+1,E+2*Z,E+2*(Z-1));return e.push(E+2*(Z-1),E+2*(Z-1)+1,E+1,E+1,E,E+2*(Z-1)),r},t}(),Earcut=function(){function p(){}return __class(p,"laya.webgl.shapes.Earcut"),p.earcut=function(t,e,i){i=i||2;var n,s,o,a,r,l,h,c=e&&e.length,u=c?e[0]*i:t.length,d=p.linkedList(t,0,u,i,!0),_=[];if(!d)return _;if(c&&(d=p.eliminateHoles(t,e,d,i)),t.length>80*i){n=o=t[0],s=a=t[1];for(var f=i;f<u;f+=i)(r=t[f])<n&&(n=r),(l=t[f+1])<s&&(s=l),o<r&&(o=r),a<l&&(a=l);h=0!==(h=Math.max(o-n,a-s))?1/h:0}return p.earcutLinked(d,_,i,n,s,h),_},p.linkedList=function(t,e,i,n,s){var o,a;if(s===0<p.signedArea(t,e,i,n))for(o=e;o<i;o+=n)a=p.insertNode(o,t[o],t[o+1],a);else for(o=i-n;e<=o;o-=n)a=p.insertNode(o,t[o],t[o+1],a);return a&&p.equals(a,a.next)&&(p.removeNode(a),a=a.next),a},p.filterPoints=function(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!p.equals(n,n.next)&&0!==p.area(n.prev,n,n.next))n=n.next;else{if(p.removeNode(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e},p.earcutLinked=function(t,e,i,n,s,o,a){if(t){!a&&o&&p.indexCurve(t,n,s,o);for(var r,l,h=t;t.prev!==t.next;)if(r=t.prev,l=t.next,o?p.isEarHashed(t,n,s,o):p.isEar(t))e.push(r.i/i),e.push(t.i/i),e.push(l.i/i),p.removeNode(t),t=l.next,h=l.next;else if((t=l)===h){a?1===a?(t=p.cureLocalIntersections(t,e,i),p.earcutLinked(t,e,i,n,s,o,2)):2===a&&p.splitEarcut(t,e,i,n,s,o):p.earcutLinked(p.filterPoints(t,null),e,i,n,s,o,1);break}}},p.isEar=function(t){var e=t.prev,i=t,n=t.next;if(0<=p.area(e,i,n))return!1;for(var s=t.next.next;s!==t.prev;){if(p.pointInTriangle(e.x,e.y,i.x,i.y,n.x,n.y,s.x,s.y)&&0<=p.area(s.prev,s,s.next))return!1;s=s.next}return!0},p.isEarHashed=function(t,e,i,n){var s=t.prev,o=t,a=t.next;if(0<=p.area(s,o,a))return!1;for(var r=s.x<o.x?s.x<a.x?s.x:a.x:o.x<a.x?o.x:a.x,l=s.y<o.y?s.y<a.y?s.y:a.y:o.y<a.y?o.y:a.y,h=s.x>o.x?s.x>a.x?s.x:a.x:o.x>a.x?o.x:a.x,c=s.y>o.y?s.y>a.y?s.y:a.y:o.y>a.y?o.y:a.y,u=p.zOrder(r,l,e,i,n),d=p.zOrder(h,c,e,i,n),_=t.nextZ;_&&_.z<=d;){if(_!==t.prev&&_!==t.next&&p.pointInTriangle(s.x,s.y,o.x,o.y,a.x,a.y,_.x,_.y)&&0<=p.area(_.prev,_,_.next))return!1;_=_.nextZ}for(_=t.prevZ;_&&_.z>=u;){if(_!==t.prev&&_!==t.next&&p.pointInTriangle(s.x,s.y,o.x,o.y,a.x,a.y,_.x,_.y)&&0<=p.area(_.prev,_,_.next))return!1;_=_.prevZ}return!0},p.cureLocalIntersections=function(t,e,i){var n=t;do{var s=n.prev,o=n.next.next;!p.equals(s,o)&&p.intersects(s,n,n.next,o)&&p.locallyInside(s,o)&&p.locallyInside(o,s)&&(e.push(s.i/i),e.push(n.i/i),e.push(o.i/i),p.removeNode(n),p.removeNode(n.next),n=t=o),n=n.next}while(n!==t);return n},p.splitEarcut=function(t,e,i,n,s,o){var a=t;do{for(var r=a.next.next;r!==a.prev;){if(a.i!==r.i&&p.isValidDiagonal(a,r)){var l=p.splitPolygon(a,r);return a=p.filterPoints(a,a.next),l=p.filterPoints(l,l.next),p.earcutLinked(a,e,i,n,s,o),void p.earcutLinked(l,e,i,n,s,o)}r=r.next}a=a.next}while(a!==t)},p.eliminateHoles=function(t,e,i,n){var s,o,a,r,l,h=[];for(s=0,o=e.length;s<o;s++)a=e[s]*n,r=s<o-1?e[s+1]*n:t.length,(l=p.linkedList(t,a,r,n,!1))===l.next&&(l.steiner=!0),h.push(p.getLeftmost(l));for(h.sort(p.compareX),s=0;s<h.length;s++)p.eliminateHole(h[s],i),i=p.filterPoints(i,i.next);return i},p.compareX=function(t,e){return t.x-e.x},p.eliminateHole=function(t,e){if(e=p.findHoleBridge(t,e)){var i=p.splitPolygon(e,t);p.filterPoints(i,i.next)}},p.findHoleBridge=function(t,e){var i,n=e,s=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var r=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(r<=s&&a<r){if((a=r)===s){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(s===a)return i.prev;var l,h=i,c=i.x,u=i.y,d=1/0;for(n=i.next;n!==h;)s>=n.x&&n.x>=c&&s!==n.x&&p.pointInTriangle(o<u?s:a,o,c,u,o<u?a:s,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(s-n.x))<d||l===d&&n.x>i.x)&&p.locallyInside(n,t)&&(i=n,d=l),n=n.next;return i},p.indexCurve=function(t,e,i,n){for(var s=t;null===s.z&&(s.z=p.zOrder(s.x,s.y,e,i,n)),s.prevZ=s.prev,s.nextZ=s.next,(s=s.next)!==t;);s.prevZ.nextZ=null,s.prevZ=null,p.sortLinked(s)},p.sortLinked=function(t){var e,i,n,s,o,a,r,l,h=1;do{for(i=t,o=t=null,a=0;i;){for(a++,n=i,e=r=0;e<h&&(r++,n=n.nextZ);e++);for(l=h;0<r||0<l&&n;)0!==r&&(0===l||!n||i.z<=n.z)?(i=(s=i).nextZ,r--):(n=(s=n).nextZ,l--),o?o.nextZ=s:t=s,s.prevZ=o,o=s;i=n}o.nextZ=null,h*=2}while(1<a);return t},p.zOrder=function(t,e,i,n,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*s)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*s)|e<<8))|e<<4))|e<<2))|e<<1))<<1},p.getLeftmost=function(t){for(var e=t,i=t;e.x<i.x&&(i=e),(e=e.next)!==t;);return i},p.pointInTriangle=function(t,e,i,n,s,o,a,r){return 0<=(s-a)*(e-r)-(t-a)*(o-r)&&0<=(t-a)*(n-r)-(i-a)*(e-r)&&0<=(i-a)*(o-r)-(s-a)*(n-r)},p.isValidDiagonal=function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!p.intersectsPolygon(t,e)&&p.locallyInside(t,e)&&p.locallyInside(e,t)&&p.middleInside(t,e)},p.area=function(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)},p.equals=function(t,e){return t.x===e.x&&t.y===e.y},p.intersects=function(t,e,i,n){return!!(p.equals(t,e)&&p.equals(i,n)||p.equals(t,n)&&p.equals(i,e))||0<p.area(t,e,i)!=0<p.area(t,e,n)&&0<p.area(i,n,t)!=0<p.area(i,n,e)},p.intersectsPolygon=function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&p.intersects(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1},p.locallyInside=function(t,e){return p.area(t.prev,t,t.next)<0?0<=p.area(t,e,t.next)&&0<=p.area(t,t.prev,e):p.area(t,e,t.prev)<0||p.area(t,t.next,e)<0},p.middleInside=function(t,e){for(var i=t,n=!1,s=(t.x+e.x)/2,o=(t.y+e.y)/2;i.y>o!=i.next.y>o&&i.next.y!==i.y&&s<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==t;);return n},p.splitPolygon=function(t,e){var i=new EarcutNode(t.i,t.x,t.y),n=new EarcutNode(e.i,e.x,e.y),s=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=s).prev=i,(n.next=i).prev=n,(o.next=n).prev=o,n},p.insertNode=function(t,e,i,n){var s=new EarcutNode(t,e,i);return n?(s.next=n.next,(s.prev=n).next.prev=s,n.next=s):(s.prev=s).next=s,s},p.removeNode=function(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)},p.signedArea=function(t,e,i,n){for(var s=0,o=e,a=i-n;o<i;o+=n)s+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return s},p}(),EarcutNode=function(){function t(t,e,i){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return __class(t,"laya.webgl.shapes.EarcutNode"),t}(),Submit=function(){function l(t){void 0===t&&(t=1e4),this._renderType=t}__class(l,"laya.webgl.submit.Submit");var t=l.prototype;return Laya.imps(t,{"laya.webgl.submit.ISubmit":!0}),t.releaseRender=function(){var t=l._cache;(t[t._length++]=this).shaderValue.release(),this._vb=null},t.getRenderType=function(){return this._renderType},t.renderSubmit=function(){if(0===this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var e=t.source;if(!t.bitmap||!e)return 1;this.shaderValue.texture=e}this._vb.bind_upload(this._ib);var i=WebGL.mainContext;return this.shaderValue.upload(),BlendMode.activeBlendFunction!==this._blendFn&&(i.enable(3042),this._blendFn(i),BlendMode.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,i.drawElements(4,this._numEle,5123,this._startIdx),1},l.__init__=function(){var t=l.RENDERBASE=new l(-1);t.shaderValue=new Value2D(0,0),t.shaderValue.ALPHA=-1234},l.createSubmit=function(t,e,i,n,s){var o=l._cache._length?l._cache[--l._cache._length]:new l;null==i&&((i=o._selfVb||(o._selfVb=VertexBuffer2D.create(-1))).clear(),n=0),o._ib=e,o._vb=i,o._startIdx=n*CONST3D2D.BYTES_PIDX,o._numEle=0;var a=t._nBlendType;o._blendFn=t._targets?BlendMode.targetFns[a]:BlendMode.fns[a],o.shaderValue=s,o.shaderValue.setValue(t._shader2D);var r=t._shader2D.filters;return r&&o.shaderValue.setFilters(r),o},l.createShape=function(t,e,i,n,s,o){var a=l._cache._length?l._cache[--l._cache._length]:new l;a._ib=e,a._vb=i,a._numEle=n,a._startIdx=s,a.shaderValue=o,a.shaderValue.setValue(t._shader2D);var r=t._nBlendType;return a._blendFn=t._targets?BlendMode.targetFns[r]:BlendMode.fns[r],a},l.TYPE_2D=1e4,l.TYPE_CANVAS=10003,l.TYPE_CMDSETRT=10004,l.TYPE_CUSTOM=10005,l.TYPE_BLURRT=10006,l.TYPE_CMDDESTORYPRERT=10007,l.TYPE_DISABLESTENCIL=10008,l.TYPE_OTHERIBVB=10009,l.TYPE_PRIMITIVE=10010,l.TYPE_RT=10011,l.TYPE_BLUR_RT=10012,l.TYPE_TARGET=10013,l.TYPE_CHANGE_VALUE=10014,l.TYPE_SHAPE=10015,l.TYPE_TEXTURE=10016,l.TYPE_FILLTEXTURE=10017,l.RENDERBASE=null,l._cache=((l._cache=[])._length=0,l._cache),l}(),SubmitCMD=function(){function n(){this.fun=null,this.args=null}__class(n,"laya.webgl.submit.SubmitCMD");var t=n.prototype;return Laya.imps(t,{"laya.webgl.submit.ISubmit":!0}),t.renderSubmit=function(){return this.fun.apply(null,this.args),1},t.getRenderType=function(){return 0},t.releaseRender=function(){var t=n._cache;t[t._length++]=this},n.create=function(t,e){var i=n._cache._length?n._cache[--n._cache._length]:new n;return i.fun=e,i.args=t,i},n._cache=((n._cache=[])._length=0,n._cache),n}(),SubmitCMDScope=function(){function e(){this.variables={}}__class(e,"laya.webgl.submit.SubmitCMDScope");var t=e.prototype;return t.getValue=function(t){return this.variables[t]},t.addValue=function(t,e){return this.variables[t]=e},t.setValue=function(t,e){return this.variables.hasOwnProperty(t)?this.variables[t]=e:null},t.clear=function(){for(var t in this.variables)delete this.variables[t]},t.recycle=function(){this.clear(),e.POOL.push(this)},e.create=function(){var t=e.POOL.pop();return t||(t=new e),t},e.POOL=[],e}(),SubmitOtherIBVB=function(){function u(){this.offset=0,this.startIndex=0,this._mat=Matrix.create()}__class(u,"laya.webgl.submit.SubmitOtherIBVB");var t=u.prototype;return Laya.imps(t,{"laya.webgl.submit.ISubmit":!0}),t.releaseRender=function(){var t=u._cache;t[t._length++]=this},t.getRenderType=function(){return 10009},t.renderSubmit=function(){var t=this._shaderValue.textureHost;if(t){var e=t.source;if(!t.bitmap||!e)return 1;this._shaderValue.texture=e}this._vb.bind_upload(this._ib);var i=RenderState2D.worldMatrix4,n=Matrix.TEMP;Matrix.mulPre(this._mat,i[0],i[1],i[4],i[5],i[12],i[13],n);var s=RenderState2D.worldMatrix4=u.tempMatrix4;s[0]=n.a,s[1]=n.b,s[4]=n.c,s[5]=n.d,s[12]=n.tx,s[13]=n.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var o=WebGL.mainContext;return BlendMode.activeBlendFunction!==this._blendFn&&(o.enable(3042),this._blendFn(o),BlendMode.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,o.drawElements(4,this._numEle,5123,this.startIndex),RenderState2D.worldMatrix4=i,BaseShader.activeShader=null,1},u.create=function(t,e,i,n,s,o,a,r,l){void 0===l&&(l=0);var h=u._cache._length?u._cache[--u._cache._length]:new u;h._ib=i,h._vb=e,h._numEle=n,h._shader=s,h._shaderValue=o;var c=t._nBlendType;switch(h._blendFn=t._targets?BlendMode.targetFns[c]:BlendMode.fns[c],l){case 0:h.offset=0,h.startIndex=r/(CONST3D2D.BYTES_PE*e.vertexStride)*1.5,h.startIndex*=CONST3D2D.BYTES_PIDX;break;case 1:h.startIndex=a,h.offset=r}return h},u._cache=((u._cache=[])._length=0,u._cache),u.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],u}(),SubmitScissor=function(){function i(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new Rectangle,this.screenRect=new Rectangle}__class(i,"laya.webgl.submit.SubmitScissor");var t=i.prototype;return Laya.imps(t,{"laya.webgl.submit.ISubmit":!0}),t._scissor=function(t,e,i,n){var s=RenderState2D.worldMatrix4,o=s[0],a=s[5],r=s[12],l=s[13];if(n*=a,(i*=o)<1||n<1)return!1;var h=(t=t*o+r)+i,c=(e=e*a+l)+n;t<0&&(i=h-(t=0)),e<0&&(n=c-(e=0));var u=RenderState2D.worldClipRect;if(t=Math.max(t,u.x),e=Math.max(e,u.y),i=Math.min(h,u.right)-t,n=Math.min(c,u.bottom)-e,i<1||n<1)return!1;var d=RenderState2D.worldScissorTest;return this.screenRect.copyFrom(u),u.x=t,u.y=e,u.width=i,u.height=n,RenderState2D.worldScissorTest=!0,e=RenderState2D.height-e-n,WebGL.mainContext.scissor(t,e,i,n),WebGL.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),d?(e=RenderState2D.height-this.screenRect.y-this.screenRect.height,WebGL.mainContext.scissor(this.screenRect.x,e,this.screenRect.width,this.screenRect.height),WebGL.mainContext.enable(3089)):(WebGL.mainContext.disable(3089),RenderState2D.worldScissorTest=!1),u.copyFrom(this.screenRect),!0},t._scissorWithTagart=function(t,e,i,n){if(i<1||n<1)return!1;var s=t+i,o=e+n;t<0&&(i=s-(t=0)),e<0&&(n=o-(e=0));var a=RenderState2D.worldClipRect;if(t=Math.max(t,a.x),e=Math.max(e,a.y),i=Math.min(s,a.right)-t,n=Math.min(o,a.bottom)-e,i<1||n<1)return!1;var r=RenderState2D.worldScissorTest;return this.screenRect.copyFrom(a),RenderState2D.worldScissorTest=!0,a.x=t,a.y=e,a.width=i,a.height=n,e=RenderState2D.height-e-n,WebGL.mainContext.scissor(t,e,i,n),WebGL.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),r?(e=RenderState2D.height-this.screenRect.y-this.screenRect.height,WebGL.mainContext.scissor(this.screenRect.x,e,this.screenRect.width,this.screenRect.height),WebGL.mainContext.enable(3089)):(WebGL.mainContext.disable(3089),RenderState2D.worldScissorTest=!1),a.copyFrom(this.screenRect),!0},t.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},t.getRenderType=function(){return 0},t.releaseRender=function(){var t=i._cache;(t[t._length++]=this).context=null},i.create=function(t){var e=i._cache._length?i._cache[--i._cache._length]:new i;return e.context=t,e},i._cache=((i._cache=[])._length=0,i._cache),i}(),SubmitStencil=function(){function l(){this.step=0,this.blendMode=null,this.level=0}__class(l,"laya.webgl.submit.SubmitStencil");var t=l.prototype;return Laya.imps(t,{"laya.webgl.submit.ISubmit":!0}),t.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},t.getRenderType=function(){return 0},t.releaseRender=function(){var t=l._cache;t[t._length++]=this},t.do1=function(){var t=WebGL.mainContext;t.enable(2960),t.clear(1024),t.colorMask(!1,!1,!1,!1),t.stencilFunc(514,this.level,255),t.stencilOp(7680,7680,7682)},t.do2=function(){var t=WebGL.mainContext;t.stencilFunc(514,this.level+1,255),t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680)},t.do3=function(){var t=WebGL.mainContext;t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680),t.clear(1024),t.disable(2960)},t.do4=function(){var t=WebGL.mainContext;0==this.level&&(t.enable(2960),t.clear(1024)),t.colorMask(!1,!1,!1,!1),t.stencilFunc(519,0,255),t.stencilOp(7680,7680,7682)},t.do5=function(){var t=WebGL.mainContext;t.stencilFunc(514,this.level,255),t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680)},t.do6=function(){var t=WebGL.mainContext;BlendMode.targetFns[BlendMode.TOINT[this.blendMode]](t)},t.do7=function(){var t=WebGL.mainContext;t.colorMask(!1,!1,!1,!1),t.stencilOp(7680,7680,7683)},t.do8=function(){var t=WebGL.mainContext;t.colorMask(!0,!0,!0,!0),t.stencilFunc(514,this.level,255),t.stencilOp(7680,7680,7680)},l.restore=function(t,e,i,n,s){var o;if((t._renderKey=0)<l._mask&&l._mask--,0==l._mask)o=laya.webgl.submit.SubmitStencil.create(3),t.addRenderObject(o),t._curSubmit=Submit.RENDERBASE;else{o=laya.webgl.submit.SubmitStencil.create(7),t.addRenderObject(o);var a=t._vb;a._byteLength;if(GlUtils.fillRectImgVb(a,null,e.x,e.y,e.width,e.height,Texture.DEF_UV,i,n,s,0,0)){t._shader2D.glTexture=null;var r=t._curSubmit=Submit.createSubmit(t,t._ib,a,(a._byteLength-64)/32*3,Value2D.create(2,0));r.shaderValue.ALPHA=1,t._submits[t._submits._length++]=r,t._curSubmit._numEle+=6,t._curSubmit=Submit.RENDERBASE}else alert("clipRect calc stencil rect error");o=laya.webgl.submit.SubmitStencil.create(8),t.addRenderObject(o)}},l.restore2=function(t,e){var i;(t._renderKey=0)<l._mask&&l._mask--,0==l._mask?(i=laya.webgl.submit.SubmitStencil.create(3),t.addRenderObject(i),t._curSubmit=Submit.RENDERBASE):(i=laya.webgl.submit.SubmitStencil.create(7),t.addRenderObject(i),t._submits[t._submits._length++]=e,i=laya.webgl.submit.SubmitStencil.create(8),t.addRenderObject(i))},l.create=function(t){var e=l._cache._length?l._cache[--l._cache._length]:new l;return 5==(e.step=t)&&++l._mask,e.level=l._mask,e},l._cache=((l._cache=[])._length=0,l._cache),l._mask=0,l}(),SubmitTarget=function(){function r(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}__class(r,"laya.webgl.submit.SubmitTarget");var t=r.prototype;return Laya.imps(t,{"laya.webgl.submit.ISubmit":!0}),t.renderSubmit=function(){this._vb.bind_upload(this._ib);var t=this.scope.getValue(this.proName);return t&&(this.shaderValue.texture=t.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[t.width,t.height]),this.shaderValue.upload(),this.blend(),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,WebGL.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},t.blend=function(){if(BlendMode.activeBlendFunction!==BlendMode.fns[this.blendType]){var t=WebGL.mainContext;t.enable(3042),BlendMode.fns[this.blendType](t),BlendMode.activeBlendFunction=BlendMode.fns[this.blendType]}},t.getRenderType=function(){return 0},t.releaseRender=function(){var t=r._cache;t[t._length++]=this},r.create=function(t,e,i,n,s,o){var a=r._cache._length?r._cache[--r._cache._length]:new r;return a._ib=e,a._vb=i,a.proName=o,a._startIdx=n*CONST3D2D.BYTES_PIDX,a._numEle=0,a.blendType=t._nBlendType,a.shaderValue=s,a.shaderValue.setValue(t._shader2D),a},r._cache=((r._cache=[])._length=0,r._cache),r}(),CharSegment=function(){function t(){this._sourceStr=null}__class(t,"laya.webgl.text.CharSegment");var e=t.prototype;return Laya.imps(e,{"laya.webgl.text.ICharSegment":!0}),e.textToSpit=function(t){this._sourceStr=t},e.getChar=function(t){return this._sourceStr.charAt(t)},e.getCharCode=function(t){return this._sourceStr.charCodeAt(t)},e.length=function(){return this._sourceStr.length},t}(),DrawText=function(){var t;function M(){}return __class(M,"laya.webgl.text.DrawText"),M.__init__=function(){M._charsTemp=new Array,M._drawValue=new t,M._charSeg=new CharSegment},M.customCharSeg=function(t){M._charSeg=t},M.getChar=function(t,e,i){var n=WebGLCharImage.createOneChar(t,i);return-1!=e&&(M._charsCache[e]=n),n},M.log=function(){console.log("_textCachesPool=",M._textCachesPool.length);var t=0;for(var e in M._charsCache)t++;for(var e in console.log("_charsCache=",t),t=0,M._textsCache)t++;console.log("_textsCache=",t),M._charsCache={},M._textCachesPool=[],M._textsCache={},M._curPoolIndex=0},M._drawSlow=function(t,e,i,n,s,o,a,r,l,h,c,u,d,_,f){var p,g,m=M._drawValue.value(o,r,l,h,d,_,f),b=0,y=0,v=M._charsTemp,w=0,x=NaN;if(n)for(v.length=n.length,b=0,y=n.length;b<y;b++)x=(g=n[b]).charNum+m.txtID,v[b]=p=M._charsCache[x]||M.getChar(g.char,x,m),p.active();else{var C=i instanceof laya.utils.WordText?i.toString():i;if(Text.CharacterCache){M._charSeg.textToSpit(C);var S=M._charSeg.length();for(b=0,y=v.length=S;b<y;b++)x=M._charSeg.getCharCode(b)+m.txtID,v[b]=p=M._charsCache[x]||M.getChar(M._charSeg.getChar(b),x,m),p.active(),w+=p.cw}else v.length=0,(p=M.getChar(C,-1,m)).active(),w+=p.cw,v[0]=p}var T=0;null!==a&&"left"!==a&&(T=-("center"==a?w/2:w));var L,R,I=NaN,G=0;if(n)for(b=0,y=v.length;b<y;b++)(p=v[b]).isSpace||(g=n[b],I=p.borderSize,L=p.texture,e._drawText(L,c+T+g.x*d-I,u+g.y*_-I,L.width,L.height,s,0,0,0,0));else{for(b=0,y=v.length;b<y;b++)(p=v[b]).isSpace||(I=p.borderSize,L=p.texture,e._drawText(L,c+T-I,u-I,L.width,L.height,s,0,0,0,0),t&&((R=t[G++])||(R=t[G-1]=[]),R[0]=L,R[1]=T-I,R[2]=-I)),T+=p.cw;t&&(t.length=G)}},M._drawFast=function(t,e,i,n,s){for(var o,a,r=0,l=t.length;r<l;r++)(o=(a=t[r])[0]).active(),e._drawText(o,n+a[1],s+a[2],o.width,o.height,i,0,0,0,0)},M.drawText=function(t,e,i,n,s,o,a,r,l,h,c,u){if(void 0===u&&(u=0),!(e&&0===e.length||i&&0===i.length)){var d=n.a,_=n.d;(0!==n.b||0!==n.c)&&(d=_=1);var f=1!==d||1!==_;if(f&&Laya.stage.transform){var p=Laya.stage.transform;f=p.a===d&&p.d===_}else f=!1;if(f){var g=(n=n.copyTo(WebGLContext2D._tmpMatrix)).tx,m=n.ty;n.scale(1/d,1/_),n._checkTransform(),h*=d,c*=_,h+=g-n.tx,c+=m-n.ty}else d=_=1;if(i)M._drawSlow(null,t,e,i,n,s,o,a,r,l,h,c,d,_,u);else{if(null===e.toUpperCase){var b=d+1e5*_,y=e;return void(y.changed||y.id!==b?(y.id=b,y.changed=!1,M._drawSlow(y.save,t,e,i,n,s,o,a,r,l,h,c,d,_,u)):M._drawFast(y.save,t,n,h,c))}var v=e+s.toString()+a+r+l+d+_+o,w=M._textsCache[v];Text.CharacterCache?w?M._drawFast(w,t,n,h,c):(M._textsCache.__length||(M._textsCache.__length=0),M._textsCache.__length>Config.WebGLTextCacheCount&&((M._textsCache={}).__length=0,M._curPoolIndex=0),M._textCachesPool[M._curPoolIndex]?(w=M._textsCache[v]=M._textCachesPool[M._curPoolIndex]).length=0:M._textCachesPool[M._curPoolIndex]=w=M._textsCache[v]=[],M._textsCache.__length++,M._curPoolIndex++,M._drawSlow(w,t,e,i,n,s,o,a,r,l,h,c,d,_,u)):M._drawSlow(w,t,e,i,n,s,o,a,r,l,h,c,d,_,u)}}},M._charsTemp=null,M._textCachesPool=[],M._curPoolIndex=0,M._charsCache={},M._textsCache={},M._drawValue=null,M.d=[],M._charSeg=null,M.__init$=function(){t=function(){function l(){}return __class(l,""),l.prototype.value=function(t,e,i,n,s,o,a){this.font=t,this.fillColor=e,this.borderColor=i,this.lineWidth=n,this.scaleX=s,this.scaleY=o,this.underLine=a;var r=t.toString()+s+o+n+e+i+a;return this.txtID=l._keymap[r],this.txtID||(this.txtID=1e-7*++l._keymapCount,l._keymap[r]=this.txtID),this},l.clear=function(){l._keymap={},l._keymapCount=1},l._keymap={},l._keymapCount=1,l}()},M}(),FontInContext=function(){function s(t){this._index=0,this._size=14,this._italic=-2,s._cache2=s._cache2||[],this.setFont(t||"14px Arial")}__class(s,"laya.webgl.text.FontInContext");var t=s.prototype;return t.setFont=function(t){var e=s._cache2[t];if(e)this._words=e[0],this._size=e[1];else{this._words=t.split(" ");for(var i=0,n=this._words.length;i<n;i++)if(0<this._words[i].indexOf("px")){this._index=i;break}this._size=parseInt(this._words[this._index]),s._cache2[t]=[this._words,this._size]}this._text=null,this._italic=-2},t.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},t.hasType=function(t){for(var e=0,i=this._words.length;e<i;e++)if(this._words[e]===t)return e;return-1},t.removeType=function(t){for(var e=0,i=this._words.length;e<i;e++)if(this._words[e]===t){this._words.splice(e,1),this._index>e&&this._index--;break}this._text=null,this._italic=-2},t.copyTo=function(t){return t._text=this._text,t._size=this._size,t._index=this._index,t._words=this._words.slice(),t._italic=-2,t},t.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},__getset(0,t,"size",function(){return this._size},function(t){this._size=t,this._words[this._index]=t+"px",this._text=null}),s.create=function(t){var e=s._cache[t];return e||(e=s._cache[t]=new s(t))},s.EMPTY=new s,s._cache={},s._cache2=null,s}(),CONST3D2D=function(){function t(){}return __class(t,"laya.webgl.utils.CONST3D2D"),t.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],t.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],t._TMPARRAY=[],t._OFFSETX=0,t._OFFSETY=0,__static(t,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),t}(),GlUtils=function(){function f(){}return __class(f,"laya.webgl.utils.GlUtils"),f.make2DProjection=function(t,e,i){return[2/t,0,0,0,0,-2/e,0,0,0,0,2/i,0,-1,1,0,1]},f.fillIBQuadrangle=function(t,e){if(65535/4<e)throw Error("IBQuadrangle count:"+e+" must<:"+Math.floor(65535/4));e=Math.floor(e),t._resizeBuffer(6*(e+1)*2,!1),t.byteLength=t.bufferLength;for(var i=t.getUint16Array(),n=0,s=0;s<e;s++)i[n++]=4*s,i[n++]=4*s+2,i[n++]=4*s+1,i[n++]=4*s,i[n++]=4*s+3,i[n++]=4*s+2;return t.setNeedUpload(),!0},f.expandIBQuadrangle=function(t,e){t.bufferLength>=6*e*2||f.fillIBQuadrangle(t,e)},f.mathCeilPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},f.fillQuadrangleImgVb=function(t,e,i,n,s,o,a,r){var l=16+(t._byteLength>>2);t.byteLength=l<<2;var h=t.getFloat32Array();h[(l-=16)+2]=s[0],h[l+3]=s[1],h[l+6]=s[2],h[l+7]=s[3],h[l+10]=s[4],h[l+11]=s[5],h[l+14]=s[6],h[l+15]=s[7];var c=o.a,u=o.b,d=o.c,_=o.d;if(1!==c||0!==u||0!==d||1!==_){o.bTransform=!0;var f=o.tx+a,p=o.ty+r;h[l]=(n[0]+e)*c+(n[1]+i)*d+f,h[l+1]=(n[0]+e)*u+(n[1]+i)*_+p,h[l+4]=(n[2]+e)*c+(n[3]+i)*d+f,h[l+5]=(n[2]+e)*u+(n[3]+i)*_+p,h[l+8]=(n[4]+e)*c+(n[5]+i)*d+f,h[l+9]=(n[4]+e)*u+(n[5]+i)*_+p,h[l+12]=(n[6]+e)*c+(n[7]+i)*d+f,h[l+13]=(n[6]+e)*u+(n[7]+i)*_+p}else o.bTransform=!1,e+=o.tx+a,i+=o.ty+r,h[l]=e+n[0],h[l+1]=i+n[1],h[l+4]=e+n[2],h[l+5]=i+n[3],h[l+8]=e+n[4],h[l+9]=i+n[5],h[l+12]=e+n[6],h[l+13]=i+n[7];return t._upload=!0},f.fillTranglesVB=function(t,e,i,n,s,o,a){var r=(t._byteLength>>2)+n.length;t.byteLength=r<<2;var l=t.getFloat32Array();r-=n.length;for(var h=n.length,c=s.a,u=s.b,d=s.c,_=s.d,f=0;f<h;f+=4)if(l[r+f+2]=n[f+2],l[r+f+3]=n[f+3],1!==c||0!==u||0!==d||1!==_){s.bTransform=!0;var p=s.tx+o,g=s.ty+a;l[r+f]=(n[f]+e)*c+(n[f+1]+i)*d+p,l[r+f+1]=(n[f]+e)*u+(n[f+1]+i)*_+g}else s.bTransform=!1,e+=s.tx+o,i+=s.ty+a,l[r+f]=e+n[f],l[r+f+1]=i+n[f+1];return t._upload=!0},f.copyPreImgVb=function(t,e,i){var n=t._byteLength>>2;t.byteLength=n+16<<2;for(var s=t.getFloat32Array(),o=0,a=n-16;o<4;o++)s[n]=s[a]+e,++a,s[++n]=s[a]+i,++a,s[++n]=s[a],++a,s[++n]=s[a],++n,++a;t._upload=!0},f.fillRectImgVb=function(t,e,i,n,s,o,a,r,l,h,c,u,d){void 0===d&&(d=!1);var _,f,p,g,m,b,y,v,w,x,C,S,T,L,R,I,G=1,M=r.a,A=r.b,k=r.c,B=r.d,W=e&&e.width<99999999;if(1!==M||0!==A||0!==k||1!==B?(r.bTransform=!0,0===A&&0===k&&(G=23,w=s+i,x=o+n,_=M*i+(C=r.tx+l),p=M*w+C,f=B*n+(S=r.ty+h),g=B*x+S)):(G=23,r.bTransform=!1,p=(_=i+r.tx+l)+s,g=(f=n+r.ty+h)+o),W&&(m=e.x,b=e.y,y=e.width+m,v=e.height+b),1!==G){if(Math.min(_,p)>=y)return!1;if(Math.min(f,g)>=v)return!1;if(Math.max(p,_)<=m)return!1;if(Math.max(g,f)<=b)return!1}var N=t._byteLength>>2;t.byteLength=16+N<<2;var V=t.getFloat32Array();switch(V[2+N]=a[0],V[3+N]=a[1],V[6+N]=a[2],V[7+N]=a[3],V[10+N]=a[4],V[11+N]=a[5],V[14+N]=a[6],V[15+N]=a[7],G){case 1:C=r.tx+l,S=r.ty+h;var E=M*i,F=k*n,Z=B*n,D=A*i,P=M*(w=s+i),X=k*(x=o+n),U=B*x,Y=A*w;d?(T=E+F+C,R=Math.round(T)-T,L=Z+D+S,I=Math.round(L)-L,V[N]=T+R,V[1+N]=L+I,V[4+N]=P+F+C+R,V[5+N]=Z+Y+S+I,V[8+N]=P+X+C+R,V[9+N]=U+Y+S+I,V[12+N]=E+X+C+R,V[13+N]=U+D+S+I):(V[N]=E+F+C,V[1+N]=Z+D+S,V[4+N]=P+F+C,V[5+N]=Z+Y+S,V[8+N]=P+X+C,V[9+N]=U+Y+S,V[12+N]=E+X+C,V[13+N]=U+D+S);break;case 23:d?(T=_+c,R=Math.round(T)-T,L=f,I=Math.round(L)-L,V[N]=T+R,V[1+N]=L+I,V[4+N]=p+c+R,V[5+N]=f+I,V[8+N]=p+R,V[9+N]=g+I,V[12+N]=_+R,V[13+N]=g+I):(V[N]=_+c,V[1+N]=f,V[4+N]=p+c,V[5+N]=f,V[8+N]=p,V[9+N]=g,V[12+N]=_,V[13+N]=g)}return t._upload=!0},f.fillLineVb=function(t,e,i,n,s,o,a,r){var l=.5*a,h=f._fillLineArray,c=-(n-o),u=i-s,d=Math.sqrt(c*c+u*u);c/=d,u/=d,c*=l,u*=l,h[0]=i-c,h[1]=n-u,h[4]=i+c,h[5]=n+u,h[8]=s+c,h[9]=o+u,h[12]=s-c,h[13]=o-u,r&&r.transformPointArray(h,h);var _=16+(t._byteLength>>2);return t.byteLength=_<<2,t.insertData(h,_-16),!0},f._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f}(),MatirxArray=function(){function l(){}return __class(l,"laya.webgl.utils.MatirxArray"),l.ArrayMul=function(t,e,i){if(t)if(e)for(var n=NaN,s=NaN,o=NaN,a=NaN,r=0;r<4;r++)n=t[r],s=t[r+4],o=t[r+8],a=t[r+12],i[r]=n*e[0]+s*e[1]+o*e[2]+a*e[3],i[r+4]=n*e[4]+s*e[5]+o*e[6]+a*e[7],i[r+8]=n*e[8]+s*e[9]+o*e[10]+a*e[11],i[r+12]=n*e[12]+s*e[13]+o*e[14]+a*e[15];else l.copyArray(t,i);else l.copyArray(e,i)},l.copyArray=function(t,e){if(t&&e)for(var i=0;i<t.length;i++)e[i]=t[i]},l}(),Mesh2D=function(){function e(t,e,i){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=t,this._vb=new VertexBuffer2D(t,35048),e&&this._vb._resizeBuffer(e,!1),this._ib=new IndexBuffer2D,i&&this._ib._resizeBuffer(i,!1)}__class(e,"laya.webgl.utils.Mesh2D");var t=e.prototype;return t.cloneWithNewVB=function(){var t=new e(this._stride,0,0);return t._ib=this._ib,t._quadNum=this._quadNum,t._attribInfo=this._attribInfo,t},t.cloneWithNewVBIB=function(){var t=new e(this._stride,0,0);return t._attribInfo=this._attribInfo,t},t.getVBW=function(){return this._vb.setNeedUpload(),this._vb},t.getVBR=function(){return this._vb},t.getIBR=function(){return this._ib},t.getIBW=function(){return this._ib.setNeedUpload(),this._ib},t.createQuadIB=function(t){this._quadNum=t,this._ib._resizeBuffer(6*t*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var e=this._ib.getUint16Array(),i=0,n=0,s=0;s<t;s++)e[i++]=n,e[i++]=n+2,e[i++]=n+1,e[i++]=n,e[i++]=n+3,e[i++]=n+2,n+=4;this._ib.setNeedUpload()},t.setAttributes=function(t){if(this._attribInfo=t,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},t.getEleNum=function(){return this._ib.getBuffer().byteLength/2},t.releaseMesh=function(){},t.destroy=function(){},t.clearVB=function(){this._vb.clear()},e._gvaoid=0,e}(),RenderState2D=function(){function s(){}return __class(s,"laya.webgl.utils.RenderState2D"),s.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},s.mat2MatArray=function(t,e){var i=t,n=e;return n[0]=i.a,n[1]=i.b,n[2]=s.EMPTYMAT4_ARRAY[2],n[3]=s.EMPTYMAT4_ARRAY[3],n[4]=i.c,n[5]=i.d,n[6]=s.EMPTYMAT4_ARRAY[6],n[7]=s.EMPTYMAT4_ARRAY[7],n[8]=s.EMPTYMAT4_ARRAY[8],n[9]=s.EMPTYMAT4_ARRAY[9],n[10]=s.EMPTYMAT4_ARRAY[10],n[11]=s.EMPTYMAT4_ARRAY[11],n[12]=i.tx,n[13]=i.ty,n[14]=s.EMPTYMAT4_ARRAY[14],n[15]=s.EMPTYMAT4_ARRAY[15],e},s.restoreTempArray=function(){s.TEMPMAT4_ARRAY[0]=1,s.TEMPMAT4_ARRAY[1]=0,s.TEMPMAT4_ARRAY[4]=0,s.TEMPMAT4_ARRAY[5]=1,s.TEMPMAT4_ARRAY[12]=0,s.TEMPMAT4_ARRAY[13]=0},s.clear=function(){s.worldScissorTest=!1,s.worldShaderDefines=null,s.worldFilters=null,s.worldAlpha=1,s.worldClipRect.x=s.worldClipRect.y=0,s.worldClipRect.width=s.width,s.worldClipRect.height=s.height,s.curRenderTarget=null},s._MAXSIZE=99999999,s.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s.worldMatrix4=s.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s.worldAlpha=1,s.worldScissorTest=!1,s.worldFilters=null,s.worldShaderDefines=null,s.curRenderTarget=null,s.width=0,s.height=0,__static(s,["worldMatrix",function(){return this.worldMatrix=new Matrix},"worldClipRect",function(){return this.worldClipRect=new Rectangle(0,0,99999999,99999999)}]),s}(),ShaderCompile=function(){var b,i;function y(t,e,i,n,s){var o=this;function a(t){var e=[],i=new b(e);return o._compileToTree(i,t.split("\n"),0,e,s),i}var r=Browser.now();this._VS=a(e),this._PS=a(i),this._nameMap=n,2<Browser.now()-r&&console.log("ShaderCompile use time:"+(Browser.now()-r)+"  size:"+e.length+"/"+i.length)}__class(y,"laya.webgl.utils.ShaderCompile");var t=y.prototype;return t._compileToTree=function(t,e,i,n,s){var o,a,r,l,h,c,u,d=0,_=0,f=0,p=0;for(_=i;_<e.length;_++)if(!((r=e[_]).length<1)&&0!==(d=r.indexOf("//"))){if(0<=d&&(r=r.substr(0,d)),o=u||new b(n),u=null,o.text=r,o.noCompile=!0,0<=(d=r.indexOf("#"))){for(l="#",p=d+1,f=r.length;p<f;p++){var g=r.charAt(p);if(" "===g||"\t"===g||"?"===g)break;l+=g}switch(o.name=l){case"#ifdef":case"#ifndef":if(o.src=r,o.noCompile=null!=r.match(/[!&|()=<>]/),o.noCompile?console.log("function():Boolean{return "+r.substr(d+o.name.length)+"}"):(c=r.replace(/^\s*/,"").split(/\s+/),o.setCondition(c[1],"#ifdef"===l?1:2),o.text="//"+o.text),o.setParent(t),t=o,s)for(c=r.substr(p).split(y._splitToWordExps3),p=0;p<c.length;p++)(r=c[p]).length&&(s[r]=!0);continue;case"#if":if(o.src=r,o.noCompile=!0,o.setParent(t),t=o,s)for(c=r.substr(p).split(y._splitToWordExps3),p=0;p<c.length;p++)(r=c[p]).length&&"defined"!=r&&(s[r]=!0);continue;case"#else":o.src=r,a=(t=t.parent).childs[t.childs.length-1],o.noCompile=a.noCompile,o.noCompile||(o.condition=a.condition,o.conditionType=1==a.conditionType?2:1,o.text="//"+o.text+" "+a.text+" "+o.conditionType),o.setParent(t),t=o;continue;case"#endif":a=(t=t.parent).childs[t.childs.length-1],o.noCompile=a.noCompile,o.noCompile||(o.text="//"+o.text),o.setParent(t);continue;case"#include":c=y.splitToWords(r,null);var m=y.includes[c[1]];if(!m)throw"ShaderCompile error no this include file:"+c[1];if((d=c[0].indexOf("?"))<0){o.setParent(t),r=m.getWith("with"==c[2]?c[3]:null),this._compileToTree(o,r.split("\n"),0,n,s),o.text="";continue}o.setCondition(c[0].substr(d+1),1),o.text=m.getWith("with"==c[2]?c[3]:null);break;case"#import":h=(c=y.splitToWords(r,null))[1],n.push({node:o,file:y.includes[h],ofs:o.text.length});continue}}else{if((a=t.childs[t.childs.length-1])&&!a.name){0<n.length&&y.splitToWords(r,a),u=o,a.text+="\n"+r;continue}0<n.length&&y.splitToWords(r,o)}o.setParent(t)}},t.createShader=function(t,e,i){var n={},s="";if(t)for(var o in t)s+="#define "+o+"\n",n[o]=!0;var a=this._VS.toscript(n,[]),r=this._PS.toscript(n,[]);return(i||Shader.create)(s+a.join("\n"),s+r.join("\n"),e,this._nameMap)},y._parseOne=function(t,e,i,n,s,o){var a={type:y.shaderParamsMap[i[n+1]],name:i[n+2],size:isNaN(parseInt(i[n+3]))?1:parseInt(i[n+3])};return o&&("attribute"==s?t.push(a):e.push(a)),":"==i[n+3]&&(a.type=i[n+4],n+=2),n+=2},y.addInclude=function(t,e){if(!e||0===e.length)throw new Error("add shader include file err:"+t);if(y.includes[t])throw new Error("add shader include file err, has add:"+t);y.includes[t]=new i(e)},y.preGetParams=function(t,e){var i=[t,e],n={},s=[],o=[],a={},r=[];n.attributes=s,n.uniforms=o,n.defines=a;for(var l=0,h=0,c=0;c<2;c++){i[c]=i[c].replace(y._removeAnnotation,"");var u,d=i[c].match(y._reg);for(l=0,h=d.length;l<h;l++){var _=d[l];if("attribute"==_||"uniform"==_)l=y._parseOne(s,o,d,l,_,!0);else{if("#define"==_){r[_=d[++l]]=1;continue}if("#ifdef"==_){a[u=d[++l]]=a[u]||[];for(l++;l<h;l++)if("attribute"==(_=d[l])||"uniform"==_)l=y._parseOne(s,o,d,l,_,r[u]);else if("#else"==_)for(l++;l<h;l++)if("attribute"==(_=d[l])||"uniform"==_)l=y._parseOne(s,o,d,l,_,!r[u]);else if("#endif"==_)break}}}}return n},y.splitToWords=function(t,e){for(var i,n,s=[],o=-1,a=0,r=t.length;a<r;a++)if(i=t.charAt(a),0<=" \t=+-*/&%!<>()'\",;".indexOf(i)){if(0<=o&&1<a-o&&(n=t.substr(o,a-o),s.push(n)),'"'==i||"'"==i){var l=t.indexOf(i,a+1);if(l<0)throw"Sharder err:"+t;s.push(t.substr(a+1,l-a-1)),a=l,o=-1;continue}"("==i&&e&&0<s.length&&(n=s[s.length-1]+";","vec4;main;".indexOf(n)<0&&(e.useFuns+=n)),o=-1}else o<0&&(o=a);return o<r&&1<r-o&&(n=t.substr(o,r-o),s.push(n)),s},y.IFDEF_NO=0,y.IFDEF_YES=1,y.IFDEF_ELSE=2,y.IFDEF_PARENT=3,y._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),y._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),y._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),y.includes={},__static(y,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),y.__init$=function(){b=function(){function i(t){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=t}__class(i,"");var t=i.prototype;return t.setParent=function(t){t.childs.push(this),this.z=t.z+1,this.parent=t},t.setCondition=function(t,e){t&&(this.conditionType=e,t=t.replace(/(\s*$)/g,""),this.condition=function(){return this[t]},this.condition.__condition=t)},t.toscript=function(t,e){return this._toscript(t,e,++i.__id)},t._toscript=function(n,s,o){if(this.childs.length<1&&!this.text)return s;s.length;if(this.condition){var t=!!this.condition.call(n);if(2===this.conditionType&&(t=!t),!t)return s}if(this.text&&s.push(this.text),0<this.childs.length&&this.childs.forEach(function(t,e,i){t._toscript(n,s,o)}),0<this.includefiles.length&&0<this.useFuns.length)for(var e,i=0,a=this.includefiles.length;i<a;i++)this.includefiles[i].curUseID!=o&&0<(e=this.includefiles[i].file.getFunsScript(this.useFuns)).length&&(this.includefiles[i].curUseID=o,s[0]=e+s[0]);return s},i.__id=1,i}(),i=function(){function t(t){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=t;for(var e=0,i=0,n=0;!((e=t.indexOf("#begin",e))<0);){for(n=e+5;!((n=t.indexOf("#end",n))<0)&&"i"===t.charAt(n+4);)n+=5;if(n<0)throw"add include err,no #end:"+t;i=t.indexOf("\n",e);var s=y.splitToWords(t.substr(e,i-e),null);"code"==s[1]?this.codes[s[2]]=t.substr(i+1,n-i-1):"function"==s[1]&&(i=t.indexOf("function",e),i+="function".length,this.funs[s[3]]=t.substr(i+1,n-i-1),this.funnames+=s[3]+";"),e=n+1}}__class(t,"");var e=t.prototype;return e.getWith=function(t){var e=t?this.codes[t]:this.script;if(!e)throw"get with error:"+t;return e},e.getFunsScript=function(t){var e="";for(var i in this.funs)0<=t.indexOf(i+";")&&(e+=this.funs[i]);return e},t}()},y}(),WebGL=function(){function a(){}return __class(a,"laya.webgl.WebGL"),a._uint8ArraySlice=function(){for(var t=this.length,e=new Uint8Array(this.length),i=0;i<t;i++)e[i]=this[i];return e},a._float32ArraySlice=function(){for(var t=this.length,e=new Float32Array(this.length),i=0;i<t;i++)e[i]=this[i];return e},a._uint16ArraySlice=function(t){var e,i=arguments,n=0,s=0;if(0===i.length)for(n=this.length,e=new Uint16Array(n),s=0;s<n;s++)e[s]=this[s];else if(2===i.length){var o=i[0],a=i[1];if(o<a)for(n=a-o,e=new Uint16Array(n),s=o;s<a;s++)e[s-o]=this[s];else e=new Uint16Array(0)}return e},a.expandContext=function(){var t=Context.prototype,e=CanvasRenderingContext2D.prototype;e.fillTrangles=t.fillTrangles,Buffer2D.__int__(null),e.setIBVB=function(t,e,i,n,s,o,a,r,l,h){void 0===l&&(l=0),void 0===h&&(h=0),null===i&&(this._ib=this._ib||IndexBuffer2D.QuadrangleIB,i=this._ib,GlUtils.expandIBQuadrangle(i,n._byteLength/64+8)),this._setIBVB(t,e,i,n,s,o,a,r,l,h)},e.fillTrangles=function(t,e,i,n,s){this._curMat=this._curMat||Matrix.create(),this._vb=this._vb||VertexBuffer2D.create(),this._ib||(this._ib=IndexBuffer2D.create(),GlUtils.fillIBQuadrangle(this._ib,a/4));var o=this._vb,a=n.length>>4;GlUtils.fillTranglesVB(o,e,i,n,s||this._curMat,0,0),GlUtils.expandIBQuadrangle(this._ib,o._byteLength/64+8);var r=new Value2D(1,0);r.textureHost=t;var l=new Shader2X("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; void main() {vec4 color= texture2D(texture, v_texcoord); color.a*=1.0; gl_FragColor= color;}");o._vertType=3,this._setIBVB(e,i,this._ib,o,6*a,s,l,r,0,0)}},a.enable=function(){if(Browser.__init__(),Render.isConchApp&&!Render.isConchWebGL)return RunDriver.skinAniSprite=function(){return new SkinMesh},a.expandContext(),!1;if(RunDriver.getWebGLContext=function(t){for(var e,i=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=0;n<i.length;n++){try{e=t.getContext(i[n],{stencil:Config.isStencil,alpha:Config.isAlpha,antialias:Config.isAntialias,premultipliedAlpha:Config.premultipliedAlpha,preserveDrawingBuffer:Config.preserveDrawingBuffer})}catch(t){}if(e)return e}return null},null==(a.mainContext=RunDriver.getWebGLContext(Render._mainCanvas)))return!1;if(Render.isWebGL)return!0;HTMLImage.create=function(t,e){return new WebGLImage(t,e)},HTMLSubImage.create=function(t,e,i,n,s,o,a){return new WebGLSubImage(t,e,i,n,s,o,a)},Render.WebGL=a,Render.isWebGL=!0,DrawText.__init__(),RunDriver.createRenderSprite=function(t,e){return new RenderSprite3D(t,e)},RunDriver.createWebGLContext2D=function(t){return new WebGLContext2D(t)},RunDriver.changeWebGLSize=function(t,e){laya.webgl.WebGL.onStageResize(t,e)},RunDriver.createGraphics=function(){return new GraphicsGL};var t=RunDriver.createFilterAction;return RunDriver.createFilterAction=t||function(t){return new ColorFilterActionGL},RunDriver.clear=function(t){RenderState2D.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var e=Render.context.ctx,i=0==e._submits._length||Config.preserveDrawingBuffer?Color.create(t)._color:Stage._wgColor;i&&e.clearBG(i[0],i[1],i[2],i[3]),RenderState2D.clear()},RunDriver.addToAtlas=function(t,e){void 0===e&&(e=!1);var i=t.bitmap;Render.optimizeTextureMemory(t.url,t)?Laya.__typeof(i,"laya.webgl.resource.IMergeAtlasBitmap")&&i.allowMerageInAtlas&&i.on("recovered",t,t.addTextureToAtlas):i.enableMerageInAtlas=!1},RunDriver.isAtlas=function(t){return t instanceof laya.webgl.atlas.AtlasWebGLCanvas},AtlasResourceManager._enable(),RunDriver.beginFlush=function(){for(var t=AtlasResourceManager.instance,e=t.getAtlaserCount(),i=0;i<e;i++){var n=t.getAtlaserByIndex(i).texture;n._flashCacheImageNeedFlush&&RunDriver.flashFlushImage(n)}},RunDriver.drawToCanvas=function(t,e,i,n,s,o){(i<=0||n<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),i|=0,n|=0,s|=0,o|=0;var a=RenderTarget2D.create(i,n,6408,5121,0,!1);a.start(),a.clear(0,0,0,0),Render.context.clear(),RenderSprite.renders[e]._fun(t,Render.context,s,RenderState2D.height-n+o),Render.context.flush(),a.end();var r=a.getData(0,0,i,n);if(a.recycle(),r.byteLength==i*n*4){var l=new WebGLCanvas;l._canvas=Browser.createElement("canvas"),l.size(i,n);var h=l._canvas.getContext("2d");Browser.canvas.size(i,n);var c=Browser.context,u=c.createImageData(i,n);return u.data.set(new Uint8ClampedArray(r.buffer)),l._imgData=u,c.putImageData(u,0,0),h.save(),h.translate(0,n),h.scale(1,-1),h.drawImage(Browser.canvas.source,0,0),h.restore(),l}console.log("drawToCanvas error: w:"+i+",h:"+n+",datalen:"+r.byteLength)},RunDriver.createFilterAction=function(t){var e;switch(t){case 32:e=new ColorFilterActionGL}return e},RunDriver.addTextureToAtlas=function(t){t._uvID++,AtlasResourceManager._atlasRestore++,t.bitmap.enableMerageInAtlas&&AtlasResourceManager.instance.addToAtlas(t)},RunDriver.getTexturePixels=function(t,e,i,n,s){Render.context.ctx.clear();var o=new Sprite;o.graphics.drawTexture(t,-e,-i);var a=RenderTarget2D.create(n,s);a.start(),a.clear(0,0,0,0),o.render(Render.context,0,0),Render.context.ctx.flush(),a.end();for(var r=a.getData(0,0,n,s),l=[],h=0,c=s-1;0<=c;c--)for(var u=0;u<n;u++)h=4*(c*n+u),l.push(r[h]),l.push(r[h+1]),l.push(r[h+2]),l.push(r[h+3]);return l},RunDriver.skinAniSprite=function(){return new SkinMesh},HTMLCanvas.create=function(t,e){var i=new WebGLCanvas;return i._imgData=e,i.flipY=!1,i},Filter._filterStart=function(t,e,i,n,s){var o=t.getValue("bounds"),a=RenderTarget2D.create(o.width,o.height);if(a.start(),a.clear(0,0,0,0),t.addValue("src",a),t.addValue("ScissorTest",RenderState2D.worldScissorTest),RenderState2D.worldScissorTest){var r=new Rectangle;r.copyFrom(i.ctx._clipRect),t.addValue("clipRect",r),RenderState2D.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},Filter._filterEnd=function(t,e,i,n,s){var o=t.getValue("bounds");t.getValue("src").end();var a=RenderTarget2D.create(o.width,o.height);a.start(),a.clear(0,0,0,0),t.addValue("out",a),e._set$P("_filterCache",a),e._set$P("_isHaveGlowFilter",t.getValue("_isHaveGlowFilter"))},Filter._EndTarget=function(t,e){if(t.getValue("src").recycle(),t.getValue("out").end(),t.getValue("ScissorTest")){RenderState2D.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),e.ctx.save();var i=t.getValue("clipRect");e.ctx.clipRect(i.x,i.y,i.width,i.height)}},Filter._useSrc=function(t){var e=t.getValue("out");e.end(),(e=t.getValue("src")).start(),e.clear(0,0,0,0)},Filter._endSrc=function(t){t.getValue("src").end()},Filter._useOut=function(t){var e=t.getValue("src");e.end(),(e=t.getValue("out")).start(),e.clear(0,0,0,0)},Filter._endOut=function(t){t.getValue("out").end()},Filter._recycleScope=function(t){t.recycle()},Filter._filter=function(t,e,i,n){var s=this._next;if(s){var o,a,r=t.filters,l=r.length;if(1==l&&32==r[0].type)return e.ctx.save(),e.ctx.setFilters([r[0]]),s._fun.call(s,t,e,i,n),void e.ctx.restore();var h=SubmitCMDScope.create(),c=Point.TEMP,u=e.ctx._getTransformMatrix(),d=Matrix.create();u.copyTo(d);var _=0,f=0,p=!1,g=t._$P._filterCache?t._$P._filterCache:null;if(!g||t._repaint){p=t._isHaveGlowFilter(),h.addValue("_isHaveGlowFilter",p),p&&(_=50,f=25),(a=new Rectangle).copyFrom(t.getSelfBounds()),a.x+=t.x,a.y+=t.y,a.x-=t.pivotX+4,a.y-=t.pivotY+4;var m=a.x,b=a.y;if(a.width+=_+8,a.height+=_+8,c.x=a.x*d.a+a.y*d.c,c.y=a.y*d.d+a.x*d.b,a.x=c.x,a.y=c.y,c.x=a.width*d.a+a.height*d.c,c.y=a.height*d.d+a.width*d.b,a.width=c.x,a.height=c.y,a.width<=0||a.height<=0)return;g&&g.recycle(),h.addValue("bounds",a);var y=SubmitCMD.create([h,t,e,0,0],Filter._filterStart);e.addRenderObject(y),e.ctx._renderKey=0,e.ctx._shader2D.glTexture=null;var v=t.x-m+f,w=t.y-b+f;s._fun.call(s,t,e,v,w),y=SubmitCMD.create([h,t,e,0,0],Filter._filterEnd),e.addRenderObject(y);for(var x=0;x<l;x++){0!=x&&(y=SubmitCMD.create([h],Filter._useSrc),e.addRenderObject(y),o=Value2D.create(1,0),Matrix.TEMP.identity(),e.ctx.drawTarget(h,0,0,a.width,a.height,Matrix.TEMP,"out",o,null,BlendMode.TOINT.overlay),y=SubmitCMD.create([h],Filter._useOut),e.addRenderObject(y)),r[x].action.apply3d(h,t,e,0,0)}y=SubmitCMD.create([h,e],Filter._EndTarget),e.addRenderObject(y)}else{if((p=!!t._$P._isHaveGlowFilter&&t._$P._isHaveGlowFilter)&&(_=50,f=25),(a=t.getBounds()).width<=0||a.height<=0)return;a.width+=_,a.height+=_,c.x=a.x*d.a+a.y*d.c,c.y=a.y*d.d+a.x*d.b,a.x=c.x,a.y=c.y,c.x=a.width*d.a+a.height*d.c,c.y=a.height*d.d+a.width*d.b,a.width=c.x,a.height=c.y,h.addValue("out",g)}i=i-f-t.x,n=n-f-t.y,c.setTo(i,n),d.transformPoint(c),i=c.x+a.x,n=c.y+a.y,o=Value2D.create(1,0),Matrix.TEMP.identity(),e.ctx.drawTarget(h,i,n,a.width,a.height,Matrix.TEMP,"out",o,null,BlendMode.TOINT.overlay),y=SubmitCMD.create([h],Filter._recycleScope),e.addRenderObject(y),d.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=a._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=a._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=a._uint8ArraySlice),!0},a.onStageResize=function(t,e){null!=a.mainContext&&(a.mainContext.viewport(0,0,t,e),RenderState2D.width=t,RenderState2D.height=e)},a.onInvalidGLRes=function(){AtlasResourceManager.instance.freeAll(),ResourceManager.releaseContentManagers(!0),a.doNodeRepaint(Laya.stage),a.mainContext.viewport(0,0,RenderState2D.width,RenderState2D.height),Laya.stage.event("devicelost")},a.doNodeRepaint=function(t){0==t.numChildren&&t.repaint();for(var e=0;e<t.numChildren;e++)a.doNodeRepaint(t.getChildAt(e))},a.init=function(t,e,i){a.mainCanvas=t,HTMLCanvas._createContext=function(t){return new WebGLContext2D(t)},WebGLCanvas._createContext=function(t){return new WebGLContext2D(t)};var n=laya.webgl.WebGL.mainContext;if(null!=n.getShaderPrecisionFormat){var s=n.getShaderPrecisionFormat(35633,36338),o=n.getShaderPrecisionFormat(35632,36338);a.shaderHighPrecision=!(!s.precision||!o.precision)}else a.shaderHighPrecision=!1;if(a.compressAstc=n.getExtension("WEBGL_compressed_texture_astc"),a.compressAtc=n.getExtension("WEBGL_compressed_texture_atc"),a.compressEtc=n.getExtension("WEBGL_compressed_texture_etc"),a.compressEtc1=n.getExtension("WEBGL_compressed_texture_etc1"),a.compressPvrtc=n.getExtension("WEBGL_compressed_texture_pvrtc"),a.compressS3tc=n.getExtension("WEBGL_compressed_texture_s3tc"),a.compressS3tc_srgb=n.getExtension("WEBGL_compressed_texture_s3tc_srgb"),n.deleteTexture1=n.deleteTexture,n.deleteTexture=function(t){t==WebGLContext.curBindTexValue&&(WebGLContext.curBindTexValue=null),n.deleteTexture1(t)},a.onStageResize(e,i),null==a.mainContext)throw new Error("webGL getContext err!");System.__init__(),AtlasResourceManager.__init__(),ShaderDefines2D.__init__(),Submit.__init__(),WebGLContext2D.__init__(),Value2D.__init__(),Shader2D.__init__(),Buffer2D.__int__(n),BlendMode._init_(n),Render.isConchApp&&conch.setOnInvalidGLRes(a.onInvalidGLRes)},a.compressAstc=null,a.compressAtc=null,a.compressEtc=null,a.compressEtc1=null,a.compressPvrtc=null,a.compressS3tc=null,a.compressS3tc_srgb=null,a.mainCanvas=null,a.mainContext=null,a.antialias=!0,a.shaderHighPrecision=!1,a._bg_null=[0,0,0,0],a}(),WebGLContext=function(){function n(){}return __class(n,"laya.webgl.WebGLContext"),n.UseProgram=function(t){return n._useProgram!==t&&(WebGL.mainContext.useProgram(t),n._useProgram=t,!0)},n.setDepthTest=function(t,e){e!==n._depthTest&&((n._depthTest=e)?t.enable(2929):t.disable(2929))},n.setDepthMask=function(t,e){e!==n._depthMask&&(n._depthMask=e,t.depthMask(e))},n.setDepthFunc=function(t,e){e!==n._depthFunc&&(n._depthFunc=e,t.depthFunc(e))},n.setBlend=function(t,e){e!==n._blend&&((n._blend=e)?t.enable(3042):t.disable(3042))},n.setBlendFunc=function(t,e,i){(e!==n._sFactor||i!==n._dFactor)&&(n._sFactor=e,n._dFactor=i,t.blendFunc(e,i))},n.setCullFace=function(t,e){e!==n._cullFace&&((n._cullFace=e)?t.enable(2884):t.disable(2884))},n.setFrontFace=function(t,e){e!==n._frontFace&&(n._frontFace=e,t.frontFace(e))},n.bindTexture=function(t,e,i){t.bindTexture(e,i),n.curBindTexTarget=e,n.curBindTexValue=i},n.DEPTH_BUFFER_BIT=256,n.STENCIL_BUFFER_BIT=1024,n.COLOR_BUFFER_BIT=16384,n.POINTS=0,n.LINES=1,n.LINE_LOOP=2,n.LINE_STRIP=3,n.TRIANGLES=4,n.TRIANGLE_STRIP=5,n.TRIANGLE_FAN=6,n.ZERO=0,n.ONE=1,n.SRC_COLOR=768,n.ONE_MINUS_SRC_COLOR=769,n.SRC_ALPHA=770,n.ONE_MINUS_SRC_ALPHA=771,n.DST_ALPHA=772,n.ONE_MINUS_DST_ALPHA=773,n.DST_COLOR=774,n.ONE_MINUS_DST_COLOR=775,n.SRC_ALPHA_SATURATE=776,n.FUNC_ADD=32774,n.BLEND_EQUATION=32777,n.BLEND_EQUATION_RGB=32777,n.BLEND_EQUATION_ALPHA=34877,n.FUNC_SUBTRACT=32778,n.FUNC_REVERSE_SUBTRACT=32779,n.BLEND_DST_RGB=32968,n.BLEND_SRC_RGB=32969,n.BLEND_DST_ALPHA=32970,n.BLEND_SRC_ALPHA=32971,n.CONSTANT_COLOR=32769,n.ONE_MINUS_CONSTANT_COLOR=32770,n.CONSTANT_ALPHA=32771,n.ONE_MINUS_CONSTANT_ALPHA=32772,n.BLEND_COLOR=32773,n.ARRAY_BUFFER=34962,n.ELEMENT_ARRAY_BUFFER=34963,n.ARRAY_BUFFER_BINDING=34964,n.ELEMENT_ARRAY_BUFFER_BINDING=34965,n.STREAM_DRAW=35040,n.STATIC_DRAW=35044,n.DYNAMIC_DRAW=35048,n.BUFFER_SIZE=34660,n.BUFFER_USAGE=34661,n.CURRENT_VERTEX_ATTRIB=34342,n.FRONT=1028,n.BACK=1029,n.CULL_FACE=2884,n.FRONT_AND_BACK=1032,n.BLEND=3042,n.DITHER=3024,n.STENCIL_TEST=2960,n.DEPTH_TEST=2929,n.SCISSOR_TEST=3089,n.POLYGON_OFFSET_FILL=32823,n.SAMPLE_ALPHA_TO_COVERAGE=32926,n.SAMPLE_COVERAGE=32928,n.NO_ERROR=0,n.INVALID_ENUM=1280,n.INVALID_VALUE=1281,n.INVALID_OPERATION=1282,n.OUT_OF_MEMORY=1285,n.CW=2304,n.CCW=2305,n.LINE_WIDTH=2849,n.ALIASED_POINT_SIZE_RANGE=33901,n.ALIASED_LINE_WIDTH_RANGE=33902,n.CULL_FACE_MODE=2885,n.FRONT_FACE=2886,n.DEPTH_RANGE=2928,n.DEPTH_WRITEMASK=2930,n.DEPTH_CLEAR_VALUE=2931,n.DEPTH_FUNC=2932,n.STENCIL_CLEAR_VALUE=2961,n.STENCIL_FUNC=2962,n.STENCIL_FAIL=2964,n.STENCIL_PASS_DEPTH_FAIL=2965,n.STENCIL_PASS_DEPTH_PASS=2966,n.STENCIL_REF=2967,n.STENCIL_VALUE_MASK=2963,n.STENCIL_WRITEMASK=2968,n.STENCIL_BACK_FUNC=34816,n.STENCIL_BACK_FAIL=34817,n.STENCIL_BACK_PASS_DEPTH_FAIL=34818,n.STENCIL_BACK_PASS_DEPTH_PASS=34819,n.STENCIL_BACK_REF=36003,n.STENCIL_BACK_VALUE_MASK=36004,n.STENCIL_BACK_WRITEMASK=36005,n.VIEWPORT=2978,n.SCISSOR_BOX=3088,n.COLOR_CLEAR_VALUE=3106,n.COLOR_WRITEMASK=3107,n.UNPACK_ALIGNMENT=3317,n.PACK_ALIGNMENT=3333,n.MAX_TEXTURE_SIZE=3379,n.MAX_VIEWPORT_DIMS=3386,n.SUBPIXEL_BITS=3408,n.RED_BITS=3410,n.GREEN_BITS=3411,n.BLUE_BITS=3412,n.ALPHA_BITS=3413,n.DEPTH_BITS=3414,n.STENCIL_BITS=3415,n.POLYGON_OFFSET_UNITS=10752,n.POLYGON_OFFSET_FACTOR=32824,n.TEXTURE_BINDING_2D=32873,n.SAMPLE_BUFFERS=32936,n.SAMPLES=32937,n.SAMPLE_COVERAGE_VALUE=32938,n.SAMPLE_COVERAGE_INVERT=32939,n.NUM_COMPRESSED_TEXTURE_FORMATS=34466,n.COMPRESSED_TEXTURE_FORMATS=34467,n.DONT_CARE=4352,n.FASTEST=4353,n.NICEST=4354,n.GENERATE_MIPMAP_HINT=33170,n.BYTE=5120,n.UNSIGNED_BYTE=5121,n.SHORT=5122,n.UNSIGNED_SHORT=5123,n.INT=5124,n.UNSIGNED_INT=5125,n.FLOAT=5126,n.DEPTH_COMPONENT=6402,n.ALPHA=6406,n.RGB=6407,n.RGBA=6408,n.LUMINANCE=6409,n.LUMINANCE_ALPHA=6410,n.UNSIGNED_SHORT_4_4_4_4=32819,n.UNSIGNED_SHORT_5_5_5_1=32820,n.UNSIGNED_SHORT_5_6_5=33635,n.FRAGMENT_SHADER=35632,n.VERTEX_SHADER=35633,n.MAX_VERTEX_ATTRIBS=34921,n.MAX_VERTEX_UNIFORM_VECTORS=36347,n.MAX_VARYING_VECTORS=36348,n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,n.MAX_TEXTURE_IMAGE_UNITS=34930,n.MAX_FRAGMENT_UNIFORM_VECTORS=36349,n.SHADER_TYPE=35663,n.DELETE_STATUS=35712,n.LINK_STATUS=35714,n.VALIDATE_STATUS=35715,n.ATTACHED_SHADERS=35717,n.ACTIVE_UNIFORMS=35718,n.ACTIVE_ATTRIBUTES=35721,n.SHADING_LANGUAGE_VERSION=35724,n.CURRENT_PROGRAM=35725,n.NEVER=512,n.LESS=513,n.EQUAL=514,n.LEQUAL=515,n.GREATER=516,n.NOTEQUAL=517,n.GEQUAL=518,n.ALWAYS=519,n.KEEP=7680,n.REPLACE=7681,n.INCR=7682,n.DECR=7683,n.INVERT=5386,n.INCR_WRAP=34055,n.DECR_WRAP=34056,n.VENDOR=7936,n.RENDERER=7937,n.VERSION=7938,n.NEAREST=9728,n.LINEAR=9729,n.NEAREST_MIPMAP_NEAREST=9984,n.LINEAR_MIPMAP_NEAREST=9985,n.NEAREST_MIPMAP_LINEAR=9986,n.LINEAR_MIPMAP_LINEAR=9987,n.TEXTURE_MAG_FILTER=10240,n.TEXTURE_MIN_FILTER=10241,n.TEXTURE_WRAP_S=10242,n.TEXTURE_WRAP_T=10243,n.TEXTURE_2D=3553,n.TEXTURE=5890,n.TEXTURE_CUBE_MAP=34067,n.TEXTURE_BINDING_CUBE_MAP=34068,n.TEXTURE_CUBE_MAP_POSITIVE_X=34069,n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,n.MAX_CUBE_MAP_TEXTURE_SIZE=34076,n.TEXTURE0=33984,n.TEXTURE1=33985,n.TEXTURE2=33986,n.TEXTURE3=33987,n.TEXTURE4=33988,n.TEXTURE5=33989,n.TEXTURE6=33990,n.TEXTURE7=33991,n.TEXTURE8=33992,n.TEXTURE9=33993,n.TEXTURE10=33994,n.TEXTURE11=33995,n.TEXTURE12=33996,n.TEXTURE13=33997,n.TEXTURE14=33998,n.TEXTURE15=33999,n.TEXTURE16=34e3,n.TEXTURE17=34001,n.TEXTURE18=34002,n.TEXTURE19=34003,n.TEXTURE20=34004,n.TEXTURE21=34005,n.TEXTURE22=34006,n.TEXTURE23=34007,n.TEXTURE24=34008,n.TEXTURE25=34009,n.TEXTURE26=34010,n.TEXTURE27=34011,n.TEXTURE28=34012,n.TEXTURE29=34013,n.TEXTURE30=34014,n.TEXTURE31=34015,n.ACTIVE_TEXTURE=34016,n.REPEAT=10497,n.CLAMP_TO_EDGE=33071,n.MIRRORED_REPEAT=33648,n.FLOAT_VEC2=35664,n.FLOAT_VEC3=35665,n.FLOAT_VEC4=35666,n.INT_VEC2=35667,n.INT_VEC3=35668,n.INT_VEC4=35669,n.BOOL=35670,n.BOOL_VEC2=35671,n.BOOL_VEC3=35672,n.BOOL_VEC4=35673,n.FLOAT_MAT2=35674,n.FLOAT_MAT3=35675,n.FLOAT_MAT4=35676,n.SAMPLER_2D=35678,n.SAMPLER_CUBE=35680,n.VERTEX_ATTRIB_ARRAY_ENABLED=34338,n.VERTEX_ATTRIB_ARRAY_SIZE=34339,n.VERTEX_ATTRIB_ARRAY_STRIDE=34340,n.VERTEX_ATTRIB_ARRAY_TYPE=34341,n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,n.VERTEX_ATTRIB_ARRAY_POINTER=34373,n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,n.COMPILE_STATUS=35713,n.LOW_FLOAT=36336,n.MEDIUM_FLOAT=36337,n.HIGH_FLOAT=36338,n.LOW_INT=36339,n.MEDIUM_INT=36340,n.HIGH_INT=36341,n.FRAMEBUFFER=36160,n.RENDERBUFFER=36161,n.RGBA4=32854,n.RGB5_A1=32855,n.RGB565=36194,n.DEPTH_COMPONENT16=33189,n.STENCIL_INDEX=6401,n.STENCIL_INDEX8=36168,n.DEPTH_STENCIL=34041,n.RENDERBUFFER_WIDTH=36162,n.RENDERBUFFER_HEIGHT=36163,n.RENDERBUFFER_INTERNAL_FORMAT=36164,n.RENDERBUFFER_RED_SIZE=36176,n.RENDERBUFFER_GREEN_SIZE=36177,n.RENDERBUFFER_BLUE_SIZE=36178,n.RENDERBUFFER_ALPHA_SIZE=36179,n.RENDERBUFFER_DEPTH_SIZE=36180,n.RENDERBUFFER_STENCIL_SIZE=36181,n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,n.COLOR_ATTACHMENT0=36064,n.DEPTH_ATTACHMENT=36096,n.STENCIL_ATTACHMENT=36128,n.DEPTH_STENCIL_ATTACHMENT=33306,n.NONE=0,n.FRAMEBUFFER_COMPLETE=36053,n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,n.FRAMEBUFFER_UNSUPPORTED=36061,n.FRAMEBUFFER_BINDING=36006,n.RENDERBUFFER_BINDING=36007,n.MAX_RENDERBUFFER_SIZE=34024,n.INVALID_FRAMEBUFFER_OPERATION=1286,n.UNPACK_FLIP_Y_WEBGL=37440,n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,n.CONTEXT_LOST_WEBGL=37442,n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,n.BROWSER_DEFAULT_WEBGL=37444,n._useProgram=null,n._depthTest=!0,n._depthMask=!0,n._depthFunc=513,n._blend=!1,n._sFactor=1,n._dFactor=0,n._cullFace=!1,n._frontFace=2305,n.curBindTexTarget=null,n.curBindTexValue=null,n}(),MiniAdpter=function(){function h(){}return __class(h,"laya.wx.mini.MiniAdpter"),h.getJson=function(t){return JSON.parse(t)},h.init=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),!h._inited&&(h._inited=!0,(h.window=window).hasOwnProperty("wx")&&!(h.window.navigator.userAgent.indexOf("MiniGame")<0))){h.isZiYu=e,h.isPosMsgYu=t,h.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0}catch(t){}if(h.isZiYu||(MiniFileMgr$1.setNativeFileDir("/layaairGame"),MiniFileMgr$1.existDir(MiniFileMgr$1.fileNativeDir,Handler.create(h,h.onMkdirCallBack))),"ios 10.1.1"===(h.systemInfo=h.window.wx.getSystemInfoSync()).system.toLowerCase())try{laya.webgl.resource.WebGLCharImage.canUseCanvas=!1}catch(t){}h.window.focus=function(){},Laya._getUrlPath=function(){},Laya.getUrlPath=function(){},h.window.logtime=function(t){},h.window.alertTimeLog=function(t){},h.window.resetShareInfo=function(){},h.window.CanvasRenderingContext2D=function(){},h.window.CanvasRenderingContext2D.prototype=h.window.wx.createCanvas().getContext("2d").__proto__,h.window.document.body.appendChild=function(){},h.EnvConfig.pixelRatioInt=0,RunDriver.getPixelRatio=h.pixelRatio,h._preCreateElement=Browser.createElement,Browser.createElement=h.createElement,RunDriver.createShaderCondition=h.createShaderCondition,Utils.parseXMLFromString=h.parseXMLFromString,Input._createInputElement=MiniInput$1._createInputElement,h.EnvConfig.load=Loader.prototype.load,Loader.prototype.load=MiniLoader$1.prototype.load,Loader.prototype._loadImage=MiniImage$1.prototype._loadImage,(LocalStorage._baseClass=MiniLocalStorage$1).__init__(),h.onReciveData()}},h.onReciveData=function(){laya.wx.mini.MiniAdpter.isZiYu&&h.window.wx.onMessage(function(t){"opendatacontext"==t.isLoad?t.url&&(MiniFileMgr$1.ziyuFileData[t.url]=t.atlasdata,MiniFileMgr$1.ziyuFileTextureData[t.imgReadyUrl]=t.imgNativeUrl):"openJsondatacontext"==t.isLoad?t.url&&(MiniFileMgr$1.ziyuFileData[t.url]=t.atlasdata):"openJsondatacontextPic"==t.isLoad&&(MiniFileMgr$1.ziyuFileTextureData[t.imgReadyUrl]=t.imgNativeUrl)})},h.measureText=function(t){var e=h._measureText(t);return e||(e={width:16},console.warn("-------微信获取文字宽度失败----等待修复---------")),e},h.getUrlEncode=function(t,e){return"arraybuffer"==e?"":"utf8"},h.downLoadFile=function(t,e,i,n){void 0===e&&(e=""),void 0===n&&(n="utf8"),MiniFileMgr$1.getFileInfo(t)?null!=i&&i.runWith([0]):MiniFileMgr$1.downLoadFile(t,e,i,n)},h.remove=function(t,e){MiniFileMgr$1.deleteFile("",t,e,"",0)},h.removeAll=function(){MiniFileMgr$1.deleteAll()},h.hasNativeFile=function(t){return MiniFileMgr$1.isLocalNativeFile(t)},h.getFileInfo=function(t){return MiniFileMgr$1.getFileInfo(t)},h.getFileList=function(){return MiniFileMgr$1.filesListObj},h.exitMiniProgram=function(){h.window.wx.exitMiniProgram()},h.onMkdirCallBack=function(t,e){t||(MiniFileMgr$1.filesListObj=JSON.parse(e.data),MiniFileMgr$1.fakeObj=MiniFileMgr$1.filesListObj)},h.pixelRatio=function(){if(!h.EnvConfig.pixelRatioInt)try{return h.EnvConfig.pixelRatioInt=h.systemInfo.pixelRatio,h.systemInfo.pixelRatio}catch(t){}return h.EnvConfig.pixelRatioInt},h.createElement=function(t){var e;if("canvas"==t)return 1==h.idx?h.isZiYu?(e=h.window.sharedCanvas).style={}:e=h.window.canvas:e=h.window.wx.createCanvas(),h.idx++,e;if("textarea"==t||"input"==t)return h.onCreateInput(t);if("div"!=t)return h._preCreateElement(t);var i=h._preCreateElement(t);return i.contains=function(t){return null},i.removeChild=function(t){},i},h.onCreateInput=function(t){var e=h._preCreateElement(t);return e.focus=MiniInput$1.wxinputFocus,e.blur=MiniInput$1.wxinputblur,e.style={},e.value=0,e.parentElement={},e.placeholder={},e.type={},e.setColor=function(t){},e.setType=function(t){},e.setFontFace=function(t){},e.addEventListener=function(t){},e.contains=function(t){return null},e.removeChild=function(t){},e},h.createShaderCondition=function(t){var e=this;return function(){return e[t.replace("this.","")]}},h.sendAtlasToOpenDataContext=function(t){if(!laya.wx.mini.MiniAdpter.isZiYu){var e=Loader.getRes(URL.formatURL(t));if(!e)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";e.meta.image.split(",");if(e.meta&&e.meta.image)for(var i=e.meta.image.split(","),n=0<=t.indexOf("/")?"/":"\\",s=t.lastIndexOf(n),o=0<=s?t.substr(0,s+1):"",a=0,r=i.length;a<r;a++)i[a]=o+i[a];else i=[t.replace(".json",".png")];for(a=0;a<i.length;a++){var l=i[a];h.postInfoToContext(t,l,e)}}},h.postInfoToContext=function(t,e,i){var n={frames:i.frames,meta:i.meta},s=e,o=MiniFileMgr$1.getFileInfo(URL.formatURL(e));if(o)var a=o.md5,r=MiniFileMgr$1.getFileNativePath(a);else r=s;if(!r)throw"获取图集的磁盘url路径不存在！";h.window.wx.postMessage({url:t,atlasdata:n,imgNativeUrl:r,imgReadyUrl:s,isLoad:"opendatacontext"})},h.sendSinglePicToOpenDataContext=function(t){var e=URL.formatURL(t),i=MiniFileMgr$1.getFileInfo(e);if(i){var n=i.md5,s=MiniFileMgr$1.getFileNativePath(n);t=e}else s=t;if(!s)throw"获取图集的磁盘url路径不存在！";h.window.wx.postMessage({url:t,imgNativeUrl:s,imgReadyUrl:t,isLoad:"openJsondatacontextPic"})},h.sendJsonDataToDataContext=function(t){if(!laya.wx.mini.MiniAdpter.isZiYu){var e=Loader.getRes(t);if(!e)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";h.window.wx.postMessage({url:t,atlasdata:e,isLoad:"openJsondatacontext"})}},h.EnvConfig=null,h.window=null,h._preCreateElement=null,h._inited=!1,h.systemInfo=null,h.isZiYu=!1,h.isPosMsgYu=!1,h.autoCacheFile=!0,h.minClearSize=5242880,h.subNativeFiles=null,h.subNativeheads=[],h.subMaps=[],h.AutoCacheDownFile=!1,h._measureText=null,h.parseXMLFromString=function(t){var e;t=t.replace(/>\s+</g,"><");try{e=(new window.Parser.DOMParser).parseFromString(t,"text/xml")}catch(t){throw"需要引入xml解析库文件"}return e},h.idx=1,__static(h,["nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"]}]),h}(),MiniFileMgr$1=function(){function c(){}return __class(c,"laya.wx.mini.MiniFileMgr",null,"MiniFileMgr$1"),c.isLocalNativeFile=function(t){for(var e=0,i=MiniAdpter.nativefiles.length;e<i;e++)if(-1!=t.indexOf(MiniAdpter.nativefiles[e]))return!0;return!1},c.getFileInfo=function(t){var e=c.fakeObj[t];return null==e?null:e},c.read=function(t,e,i,n,s,o){var a;void 0===e&&(e="utf8"),void 0===n&&(n=""),void 0===s&&(s=!1),void 0===o&&(o=""),a=""==n||-1==n.indexOf("http://")&&-1==n.indexOf("https://")?t:c.getFileNativePath(t),c.fs.readFile({filePath:a,encoding:e,success:function(t){null!=i&&i.runWith([0,t])},fail:function(t){t&&""!=n?c.downFiles(n,e,i,n,s,o):null!=i&&i.runWith([1])}})},c.downFiles=function(e,i,n,s,o,a,r){void 0===i&&(i="ascii"),void 0===s&&(s=""),void 0===o&&(o=!1),void 0===a&&(a=""),void 0===r&&(r=!0),c.wxdown({url:e,success:function(t){200===t.statusCode?c.readFile(t.tempFilePath,i,n,s,o,a,r):403===t.statusCode?null!=n&&n.runWith([0,e]):null!=n&&n.runWith([1,t])},fail:function(t){null!=n&&n.runWith([1,t])}}).onProgressUpdate(function(t){null!=n&&n.runWith([2,t.progress])})},c.readFile=function(e,i,n,s,o,t,a){void 0===i&&(i="utf8"),void 0===s&&(s=""),void 0===o&&(o=!1),void 0===t&&(t=""),void 0===a&&(a=!0),c.fs.readFile({filePath:e,encoding:i,success:function(t){-1!=e.indexOf("http://")||-1!=e.indexOf("https://")?(MiniAdpter.autoCacheFile||o)&&(null!=n&&n.runWith([0,t]),c.copyFile(e,s,null,i,a)):null!=n&&n.runWith([0,t])},fail:function(t){!t&&c.outLog&&c.outLog("MiniFileMgr.fail:data==nul"),t&&null!=n&&n.runWith([1,t])}})},c.downOtherFiles=function(t,e,i,n,s){void 0===i&&(i=""),void 0===n&&(n=!1),void 0===s&&(s=!0),c.wxdown({url:t,success:function(t){200===t.statusCode?(MiniAdpter.autoCacheFile||n)&&-1==i.indexOf("wx.qlogo.cn")&&-1==i.indexOf(".php")?(null!=e&&e.runWith([0,t.tempFilePath]),c.copyFile(t.tempFilePath,i,null,"",s)):null!=e&&e.runWith([0,t.tempFilePath]):null!=e&&e.runWith([1,t])},fail:function(t){null!=e&&e.runWith([1,t])}})},c.downLoadFile=function(t,e,i,n){void 0===e&&(e=""),void 0===n&&(n="ascii"),MiniAdpter.window.navigator.userAgent.indexOf("MiniGame")<0?Laya.loader.load(t,i):"image"==e||"sound"==e?c.downOtherFiles(t,i,t,!0,!1):c.downFiles(t,n,i,t,!0,e,!1)},c.copyFile=function(t,i,n,s,o){void 0===s&&(s=""),void 0===o&&(o=!0);var e=t.split("/"),a=e[e.length-1],r=c.getFileInfo(i),l=c.getFileNativePath(a);c.fakeObj[i]={md5:a,readyUrl:i,size:0,times:Browser.now(),encoding:s};var h=c.getCacheUseSize();r?r.readyUrl!=i?c.fs.getFileInfo({filePath:t,success:function(t){o&&52428800<=h+4194304+t.size&&(t.size>MiniAdpter.minClearSize&&(MiniAdpter.minClearSize=t.size),c.onClearCacheRes()),c.deleteFile(a,i,n,s,t.size)},fail:function(t){null!=n&&n.runWith([1,t])}}):null!=n&&n.runWith([0]):c.fs.getFileInfo({filePath:t,success:function(e){o&&52428800<=h+4194304+e.size&&(e.size>MiniAdpter.minClearSize&&(MiniAdpter.minClearSize=e.size),c.onClearCacheRes()),c.fs.copyFile({srcPath:t,destPath:l,success:function(t){c.onSaveFile(i,a,!0,s,n,e.size)},fail:function(t){null!=n&&n.runWith([1,t])}})},fail:function(t){null!=n&&n.runWith([1,t])}})},c.onClearCacheRes=function(){var t=MiniAdpter.minClearSize,e=[];for(var i in c.filesListObj)e.push(c.filesListObj[i]);c.sortOn(e,"times",16);for(var n=0,s=1,o=e.length;s<o;s++){var a=e[s];if(t<=n)break;n+=a.size,c.deleteFile("",a.readyUrl)}},c.sortOn=function(t,i,e){return void 0===e&&(e=0),16==e?t.sort(function(t,e){return t[i]-e[i]}):18==e?t.sort(function(t,e){return e[i]-t[i]}):t.sort(function(t,e){return t[i]-e[i]})},c.getFileNativePath=function(t){return laya.wx.mini.MiniFileMgr.fileNativeDir+"/"+t},c.deleteFile=function(n,s,o,a,r){void 0===s&&(s=""),void 0===a&&(a=""),void 0===r&&(r=0);var t=c.getFileInfo(s);if(t){var e=c.getFileNativePath(t.md5);c.fs.unlink({filePath:e,success:function(t){var e=""!=n;if(""!=n){var i=c.getFileNativePath(n);c.fs.copyFile({srcPath:n,destPath:i,success:function(t){c.onSaveFile(s,n,e,a,o,t.size)},fail:function(t){null!=o&&o.runWith([1,t])}})}else c.onSaveFile(s,n,e,a,o,r)},fail:function(t){}})}},c.deleteAll=function(){var t=[];for(var e in c.filesListObj)t.push(c.filesListObj[e]);for(var i=1,n=t.length;i<n;i++){var s=t[i];c.deleteFile("",s.readyUrl)}laya.wx.mini.MiniFileMgr.filesListObj&&laya.wx.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.wx.mini.MiniFileMgr.filesListObj.fileUsedSize=0),laya.wx.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)},c.onSaveFile=function(t,e,i,n,s,o){void 0===i&&(i=!0),void 0===n&&(n=""),void 0===o&&(o=0);var a=t;if(null==c.filesListObj.fileUsedSize&&(c.filesListObj.fileUsedSize=0),i){c.getFileNativePath(e);c.filesListObj[a]={md5:e,readyUrl:t,size:o,times:Browser.now(),encoding:n},c.filesListObj.fileUsedSize=parseInt(c.filesListObj.fileUsedSize)+o,c.writeFilesList(a,JSON.stringify(c.filesListObj),!0),null!=s&&s.runWith([0])}else if(c.filesListObj[a]){var r=parseInt(c.filesListObj[a].size);c.filesListObj.fileUsedSize=parseInt(c.filesListObj.fileUsedSize)-r,delete c.filesListObj[a],c.writeFilesList(a,JSON.stringify(c.filesListObj),!1),null!=s&&s.runWith([0])}},c.writeFilesList=function(t,e,i){var n=c.fileNativeDir+"/"+c.fileListName;c.fs.writeFile({filePath:n,encoding:"utf8",data:e,success:function(t){},fail:function(t){}}),!MiniAdpter.isZiYu&&MiniAdpter.isPosMsgYu&&MiniAdpter.window.wx.postMessage&&MiniAdpter.window.wx.postMessage({url:t,data:c.filesListObj[t],isLoad:"filenative",isAdd:i})},c.getCacheUseSize=function(){return c.filesListObj&&c.filesListObj.fileUsedSize?c.filesListObj.fileUsedSize:0},c.existDir=function(t,e){c.fs.mkdir({dirPath:t,success:function(t){null!=e&&e.runWith([0,{data:JSON.stringify({})}])},fail:function(t){-1!=t.errMsg.indexOf("file already exists")?c.readSync(c.fileListName,"utf8",e):null!=e&&e.runWith([1,t])}})},c.readSync=function(t,e,i,n){void 0===e&&(e="utf8"),void 0===n&&(n="");var s,o=c.getFileNativePath(t);try{s=c.fs.readFileSync(o,e),null!=i&&i.runWith([0,{data:s}])}catch(t){null!=i&&i.runWith([1])}},c.setNativeFileDir=function(t){c.fileNativeDir=MiniAdpter.window.wx.env.USER_DATA_PATH+t},c.filesListObj={},c.fakeObj={},c.fileNativeDir=null,c.fileListName="layaairfiles.txt",c.ziyuFileData={},c.ziyuFileTextureData={},c.loadPath="",c.DESCENDING=2,c.NUMERIC=16,c.outLog=null,__static(c,["fs",function(){return this.fs=MiniAdpter.window.wx.getFileSystemManager()},"wxdown",function(){return this.wxdown=MiniAdpter.window.wx.downloadFile}]),c}(),MiniImage$1=function(){function h(){}return __class(h,"laya.wx.mini.MiniImage",null,"MiniImage$1"),h.prototype._loadImage=function(t){if(MiniAdpter.isZiYu)h.onCreateImage(t,this,!0);else{var e=!1;if(MiniFileMgr$1.isLocalNativeFile(t)){if(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))if(""!=MiniFileMgr$1.loadPath)t=t.split(MiniFileMgr$1.loadPath)[1];else{var i=""!=URL.rootPath?URL.rootPath:URL.basePath,n=t;""!=i&&(t=t.split(i)[1]),t||(t=n)}if(MiniAdpter.subNativeFiles&&0==MiniAdpter.subNativeheads.length)for(var s in MiniAdpter.subNativeFiles){var o=MiniAdpter.subNativeFiles[s];MiniAdpter.subNativeheads=MiniAdpter.subNativeheads.concat(o);for(var a=0;a<o.length;a++)MiniAdpter.subMaps[o[a]]=s+"/"+o[a]}if(MiniAdpter.subNativeFiles&&-1!=t.indexOf("/")){var r=t.split("/")[0]+"/";if(r&&-1!=MiniAdpter.subNativeheads.indexOf(r)){var l=MiniAdpter.subMaps[r];t=t.replace(r,l)}}}else e=!0,t=URL.formatURL(t);MiniFileMgr$1.getFileInfo(t)?h.onCreateImage(t,this,!e):-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?MiniAdpter.isZiYu?h.onCreateImage(t,this,!0):MiniFileMgr$1.downOtherFiles(t,new Handler(h,h.onDownImgCallBack,[t,this]),t):h.onCreateImage(t,this,!0)}},h.onDownImgCallBack=function(t,e,i,n){void 0===n&&(n=""),i?e.onError(null):h.onCreateImage(t,e,!1,n)},h.onCreateImage=function(e,i,t,n){var s,o;if(void 0===t&&(t=!1),void 0===n&&(n=""),MiniAdpter.autoCacheFile)if(t)if(MiniAdpter.isZiYu){var a=URL.formatURL(e);s=MiniFileMgr$1.ziyuFileTextureData[a]?MiniFileMgr$1.ziyuFileTextureData[a]:e}else s=e;else if(""!=n)s=n;else{var r=MiniFileMgr$1.getFileInfo(e).md5;s=MiniFileMgr$1.getFileNativePath(r)}else s=t?e:n;function l(){o.onload=null,o.onerror=null,delete i.imgCache[e]}null==i.imgCache&&(i.imgCache={});var h=function(){l(),i.onLoaded(o)},c=function(){l(),i.event("error","Load image failed")};"nativeimage"==i._type?((o=new Browser.window.Image).crossOrigin="",o.onload=h,o.onerror=c,o.src=s,i.imgCache[e]=o):new HTMLImage.create(s,{onload:h,onerror:c,onCreate:function(t){o=t,i.imgCache[e]=t}})},h}(),MiniInput$1=function(){function i(){}return __class(i,"laya.wx.mini.MiniInput",null,"MiniInput$1"),i._createInputElement=function(){Input._initInput(Input.area=Browser.createElement("textarea")),Input._initInput(Input.input=Browser.createElement("input")),Input.inputContainer=Browser.createElement("div"),Input.inputContainer.style.position="absolute",Input.inputContainer.style.zIndex=1e5,Browser.container.appendChild(Input.inputContainer),Input.inputContainer.setPos=function(t,e){Input.inputContainer.style.left=t+"px",Input.inputContainer.style.top=e+"px"},Laya.stage.on("resize",null,i._onStageResize),wx.onWindowResize&&wx.onWindowResize(function(t){window.dispatchEvent&&window.dispatchEvent("resize")}),SoundManager._soundClass=MiniSound$1,SoundManager._musicClass=MiniSound$1;var t=MiniAdpter.systemInfo.model,e=MiniAdpter.systemInfo.system;-1!=t.indexOf("iPhone")&&(Browser.onIPhone=!0,Browser.onIOS=!0,Browser.onIPad=!0,Browser.onAndroid=!1),-1==e.indexOf("Android")&&-1==e.indexOf("Adr")||(Browser.onAndroid=!0,Browser.onIPhone=!1,Browser.onIOS=!1,Browser.onIPad=!1)},i._onStageResize=function(){Laya.stage._canvasTransform.identity().scale(Browser.width/Render.canvas.width/RunDriver.getPixelRatio(),Browser.height/Render.canvas.height/RunDriver.getPixelRatio())},i.wxinputFocus=function(t){var i=Input.inputElement.target;i&&!i.editable||(MiniAdpter.window.wx.offKeyboardConfirm(),MiniAdpter.window.wx.offKeyboardInput(),MiniAdpter.window.wx.showKeyboard({defaultValue:i.text,maxLength:i.maxChars,multiple:i.multiline,confirmHold:!0,confirmType:"done",success:function(t){},fail:function(t){}}),MiniAdpter.window.wx.onKeyboardConfirm(function(t){var e=t?t.value:"";i.text=e,i.event("input"),laya.wx.mini.MiniInput.inputEnter()}),MiniAdpter.window.wx.onKeyboardInput(function(t){var e=t?t.value:"";i.multiline||-1==e.indexOf("\n")?(i.text=e,i.event("input")):laya.wx.mini.MiniInput.inputEnter()}))},i.inputEnter=function(){Input.inputElement.target.focus=!1},i.wxinputblur=function(){i.hideKeyboard()},i.hideKeyboard=function(){MiniAdpter.window.wx.offKeyboardConfirm(),MiniAdpter.window.wx.offKeyboardInput(),MiniAdpter.window.wx.hideKeyboard({success:function(t){console.log("隐藏键盘")},fail:function(t){console.log("隐藏键盘出错:"+(t?t.errMsg:""))}})},i}(),MiniLocalStorage$1=function(){function i(){}return __class(i,"laya.wx.mini.MiniLocalStorage",null,"MiniLocalStorage$1"),i.__init__=function(){i.items=i},i.setItem=function(e,i){try{wx.setStorageSync(e,i)}catch(t){wx.setStorage({key:e,data:i})}},i.getItem=function(t){return wx.getStorageSync(t)},i.setJSON=function(t,e){i.setItem(t,e)},i.getJSON=function(t){return i.getItem(t)},i.removeItem=function(t){wx.removeStorageSync(t)},i.clear=function(){wx.clearStorageSync()},i.getStorageInfoSync=function(){try{var t=wx.getStorageInfoSync();return console.log(t.keys),console.log(t.currentSize),console.log(t.limitSize),t}catch(t){}return null},i.support=!0,i.items=null,i}(),UIConfig=function(){function t(){}return __class(t,"UIConfig"),t.touchScrollEnable=!0,t.mouseWheelEnable=!0,t.showButtons=!0,t.popupBgColor="#000000",t.popupBgAlpha=.5,t.closeDialogOnSide=!0,t}(),EClickType=function(){function t(){}return __class(t,"type.EClickType"),t.appLoginRes=1,t.importServer=2,t.importServerReturn=3,t.loadLogin=4,t.showServerList=5,t.startGame=6,t.enterLoading=7,t.connectSocket=8,t.connectSuccse=9,t.sendFirst=10,t.loginError=11,t.loadRes=12,t.loadResEnd=13,t.configStar=14,t.configEnd=15,t.loadCreate=16,t.enterCreate=17,t.startCreate=18,t.createSuccse=19,t.createError=20,t.setupPlayerData=21,t.enterScene=22,t.req_verify=23,t.back_verify=24,t.backFirst=25,t.loaded_ui=26,t.loaded_main=27,t.enter_main=28,t.main_login_res=29,t.main_connectSocket=30,t.main_connectSuccse=31,t.main_sendFirst=32,t.main_backFirst=33,t.new_player_record=34,t.game_start_button=35,t.game_first_task=36,t.secord_accept_task=37,t.secord_finish_task=38,t.error_verify=39,t.check_fristPack_back=40,t.gate_soket_close=41,t}(),GameLog=function(){function n(){this.bosaidongUrl="https://cqjy-client-log-capture.996a.com/cqjy-client",this.open_bosaidong="1",this.open_log=!0,this.appid=null,this.gameid=null,this._sid="",this._sName="",this._uid="",this.recordMap=null,this.recordsKey="record_",this.checkedReport=[],this.logMax=2e3,this.logLastClearTime=0,this.fixLogTime=6e4,this.logCount=0,this.logMap=new Hash,this.recordMap=new Object,this.bosaidongUrl=ProtocolUtil.changeProtocalByString(this.bosaidongUrl),Laya.timer.loop(1e3,this,this.checkTimeOutHandler)}__class(n,"utils.GameLog");var t=n.prototype;return t.checkTimeOutHandler=function(){for(var t in this.recordMap)this.checkedReport.indexOf(t)<0&&this.checkStepTimeOut(t)},t.setInfo=function(t,e,i){this._sid=t,this._sName=e,this._uid=i},t.startStep=function(t,e){void 0===e&&(e=-1),this.recordMap[this.recordsKey+t]=[Browser.now(),e]},t.endStep=function(t){var e=this.recordsKey+t;this.checkStepTimeOut(e,!0),this.recordMap[e]=null,delete this.recordMap[e]},t.checkStepTimeOut=function(t,e){void 0===e&&(e=!1);var i=Browser.now(),n=0,s=-1,o=this.recordMap[t];o&&2==o.length&&(n=i-o[0],0<(s=o[1])&&0<n-s?(e||this.checkedReport.push(t),this.innerLog(t+",检查耗时超过预期："+n,1,!0)):e&&this.innerLog("=== === time cost === === step_key:"+t+",cost:"+n))},t.innerLog=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1),0<e&&i&&(t=this.getTypeDescrbie(e)+t),this.open_log&&console.log(t),i&&t&&this.writeBoSaiDong(t)},t.getTypeDescrbie=function(t){return 1==t?this._uid?"Login_time_out:["+this._sid+","+this._sName+","+this._uid+"]=":"Login_time_out:[appid="+this.appid+"]=":2==t?this._uid?"Login_error:["+this._sid+","+this._sName+","+this._uid+"]=":"Login_error:[appid="+this.appid+"]=":"="},t.writeBoSaiDong=function(t){if("1"==this.open_bosaidong){var e=this.logMap.take(t),i=Browser.now();if(!(e&&i-e<this.fixLogTime)){this.logMap.put(t,i,!0);var n=new Object;n.log=t,HttpActionUtil.httpPost(this.bosaidongUrl,n,null,null),this.logCount++,0==this.logLastClearTime&&(this.logLastClearTime=i),(this.logCount>this.logMax||i-this.logLastClearTime>5*this.fixLogTime)&&(this.logMap.reset(),this.logCount=0,this.logLastClearTime=i)}}},n.ins=function(){return n._ins||(n._ins=new n),n._ins},n.log=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1),n.ins().innerLog(t,e,i)},n._ins=null,n.INFO="info",n.SERVER="server",n.SOCKET="socket",n.VERIFY="verify",n.CODE="code",n.ENTER="enter",n.LOGIN="login",n.VJSON="vjson",n.CODE_UI="code_ui",n.CODE_MAIN="code_main",n}(),HttpActionUtil=function(){function t(){}return __class(t,"utils.HttpActionUtil"),t.httpGet=function(t,e,i,n,s,o){var a=new HttpRequest,r="";for(var l in e)r+=""==r?l+"="+e[l]:"&"+l+"="+e[l];null!=i&&(a.once("complete",i,n),a.once("error",i,s),a.once("progress",i,o)),a.send(t+"?"+r,"","get")},t.httpPost=function(t,e,i,n,s,o){var a=new HttpRequest,r="";for(var l in e)r+=""==r?l+"="+e[l]:"&"+l+"="+e[l];a.once("complete",i,n),a.once("error",i,s),a.once("progress",i,o),a.send(t,r,"post")},t}(),PreLoadUtils=function(){function t(){this.pauseLoad=!1,this.phoneMode=null,this.webversion=null,this.versionMap=null,this.preLoadAtlasList=[],this.loadedCost=2e3,this._processStep=0,this.preLoadList=[],this.limitPreLoaded=!1}__class(t,"utils.PreLoadUtils");var e=t.prototype;return e.getFileVersion=function(t){var e=this.versionMap;if(e&&t){var i=e[t];if(i){var n=t.split(".");t=n[0]+"-"+i+"."+n[1]}}return t},e.loadPreLoadCfg=function(){var t=this.getFileVersion("preloadCfg.txt"),e=this.getFullUrl("db/configs/"+t);this.loadedCost=Browser.now(),Laya.loader.load(e,Handler.create(this,this.startPreLoad))},e.startPreLoad=function(t){if(this._processStep=1,this.loadedCost=Browser.now()-this.loadedCost,GameLog.log("preloadCfg.txt,loadedCost:"+this.loadedCost),t&&(this.preLoadList=String(t).split(";"),GameLog.log("preLoadList:"+this.preLoadList.length),0<this.preLoadList.length)){if(this.phoneMode&&0<=this.phoneMode.indexOf("iPhone")){var e=this.phoneMode.match(/iPhone [0-9]+/gi);if(e&&0<e.length){var i=e[0];parseInt(i.replace("iPhone ",""))<=7&&(this.limitPreLoaded=!0)}}0==this.limitPreLoaded?(Laya.timer.loop(2e3,this,this.preLoadJxr),this._processStep<2&&this.preLoadJxr(5)):this._processStep<2&&this.preLoadJxr(2)}},e.preLoadJxr=function(t){if(void 0===t&&(t=0),this.pauseLoad)Laya.timer.clear(this,this.preLoadJxr);else{var e=8;t&&(e=t);for(var i=0;i<e;i++)if(0<this.preLoadList.length){var n=this.getFullUrl("db/configs/"+this.getFileVersion(this.preLoadList.shift()+".jxr"));if(Laya.loader.getRes(n))continue;Laya.loader.load(n,Handler.create(this,this.preLoadedComp,[Browser.now()]),null,"arraybuffer")}this.preLoadList.length<=0&&Laya.timer.clear(this,this.preLoadJxr)}},e.preLoadedComp=function(t){this.loadedCost=Browser.now()-t,this.preLoadList.length<=0&&Laya.timer.clear(this,this.preLoadJxr)},e.getFullUrl=function(t){var e="";return-1==URL.basePath.indexOf("http://")&&-1==URL.basePath.indexOf("https://")||!this.webversion||(e="?"+this.webversion),URL.basePath+t+e},e.loadPreLoadAtlas=function(){this._processStep=2;var t=this.getFullUrl("ui/layouts/preloadAtlas.txt");Laya.loader.load(t,Handler.create(this,this.startAtlasPreLoad))},e.startAtlasPreLoad=function(t){t&&(this.preLoadAtlasList=String(t).split(";"),GameLog.log("preLoadAtlasList:"+this.preLoadAtlasList.length),0<this.preLoadAtlasList.length&&(this.limitPreLoaded||Laya.timer.loop(2e3,this,this.preLoadAtlas)))},e.preLoadAtlas=function(){var t=1;this.limitPreLoaded||(t=this.loadedCost<800?2:(this.loadedCost,1));for(var e=0;e<t;e++)if(0<this.preLoadAtlasList.length){var i=this.getFullUrl("ui/layouts/"+this.preLoadAtlasList.shift()+".atlas");Laya.loader.getRes(i)||Laya.loader.load(i,Handler.create(this,this.preLoadedAtlasComp,[Browser.now()]))}this.preLoadAtlasList.length<=0&&Laya.timer.clear(this,this.preLoadAtlas)},e.preLoadedAtlasComp=function(t){this.loadedCost=Browser.now()-t},t.getIns=function(){return t._ins||(t._ins=new t),t._ins},t._ins=null,t}(),ProtocolUtil=function(){function n(){}return __class(n,"utils.ProtocolUtil"),__getset(1,n,"hasHttps",function(){return"https:"==Browser.window.location.protocol}),n.changeProtocalByString=function(t){var e=Browser.window.location.protocol;if(t){if("https:"==e||n.forceHttps)return t.replace("http:","https:");if("http:"==e)return t.replace("https:","http:")}return t},n.changeProtocalByArray=function(t){if(t){for(var e=[],i=0;i<t.length;i++)e.push(n.changeProtocalByString(t[i]));return e}return t},n.hasNetHead=function(t){return!!t&&(0<=t.indexOf("http:")||0<=t.indexOf("https:"))},n.HTTPS="https:",n.HTTP="http:",n.FILE="file:",n.forceHttps=!1,n}(),SkinUtil=function(){function o(){}return __class(o,"utils.SkinUtil"),__getset(1,o,"skinFolderPath",function(){return"platform/37wan/"}),o.registerResources=function(){},o.getPlatfromSkinData=function(){var t=Browser.window.skins;if(t)for(var e in t){var i=t[e];if(i){var n=i.appids;if(n)for(var s=0;s<n.length;s++)if(n[s]==o.platfromId){o.folderName=e,o.parsePlatfromPics(i.pics);break}}}},o.parsePlatfromPics=function(t){if(t)for(var e=0;e<t.length;e++){var i=t[e];if(i&&!o.wordsOption(i)){var n=o.getPathFileName(i);n&&o.platfromMap.put(n,o.skinFolderPath+i)}}},o.getPathFileName=function(t){if(!t)return null;var e=t.lastIndexOf("/"),i=t;return 0<e&&(i=t.slice(e+1)),0<i.indexOf(".")?i:null},o.wordsOption=function(t){for(var e=0;e<o.regexpList.length;e++){var i=o.regexpList[e];if(0<=t.indexOf(i)){var n=o.getPathFileName(t);return n&&o.platfromMap.put(i+"_"+n,o.skinFolderPath+t),!0}}return!1},o.setup=function(t){t&&(o.platfromId=t,o.registerResources(),o.getPlatfromSkinData())},o.getFilePathBykey=function(t){return o.platfromId?o.platfromMap.take(t):(console.log("skin no platfromId"),null)},o.checkTranferSkin=function(t,e){var i=o.getFilePathBykey(t);return i||e},o.platfromId=null,o.folderName=null,o.LOADING_BG="dl_jm_bg.jpg",o.LOADING_XQD="dl_jm_xqd.png",__static(o,["platfromMap",function(){return this.platfromMap=new Hash},"regexpList",function(){return this.regexpList=new Array}]),o}(),TimeUtils$1=function(){function l(){}return __class(l,"utils.TimeUtils",null,"TimeUtils$1"),l.formatBuffTime=function(t){var e=t,i=Math.floor(e/86400);e%=86400;var n=Math.floor(e/3600);e%=3600;var s=Math.floor(e/60);e%=60;var o=Math.floor(e);return 0<i?i+"天"+n+"小时":0<n?n+":"+s+":"+o:0<s?s+":"+o:o+"s"},l.simpleFormat=function(t){var e="",i=Math.floor(t/3600);e+=0<i?10<=i?i.toFixed(0)+":":"0"+i+":":"00:";var n=Math.floor(t%3600/60);e+=0<n?10<=n?n+":":"0"+n+":":"00:";var s=Math.floor(t%60);return e+=10<=s?s+"":"0"+s},l.getFormatDate=function(t,e){return void 0===e&&(e="-"),l.format(t.getFullYear())+e+l.format(t.getMonth()+1)+e+l.format(t.getDate())},l.getFormatDateByTimestamp=function(t,e){void 0===e&&(e="-");var i=new Date(1e3*t);return l.getFormatDate(i,e)},l.getFormatTime=function(t,e){return void 0===e&&(e=":"),l.format(t.getHours())+e+l.format(t.getMinutes())+e+l.format(t.getSeconds())},l.getFormatTimeByTimestamp=function(t,e){void 0===e&&(e=":");var i=new Date(1e3*t);return l.getFormatTime(i,e)},l.getFormatDateByTimestamp2=function(t){var e=new Date(1e3*t);return l.format(e.getDate())+"天"},l.format=function(t){var e=t.toString();return 1==e.length&&(e="0"+e),e},l.getMinute=function(t,e){if(void 0===e&&(e=":"),null==t||0==t.length)return-1;var i=t.split(e);if(null==i||2!=i.length)return-1;if(!l.isNumberStr(i[0]))return-1;if(!l.isNumberStr(i[1]))return-1;var n=parseInt(i[0]),s=parseInt(i[1]);return n<0||23<n?-1:s<0||59<n?-1:60*n+s},l.getSec=function(t,e){if(void 0===e&&(e=":"),null==t||0==t.length)return-1;var i=t.split(e);if(null==i)return-1;if(!l.isNumberStr(i[0]))return-1;if(!l.isNumberStr(i[1]))return-1;var n=parseInt(i[0]),s=parseInt(i[1]);return n<0||23<n?-1:s<0||59<n?-1:3600*n+60*s},l.checkIsTimeFormatHM=function(t,e){return void 0===e&&(e=":"),-1!=l.getMinute(t,e)},l.isNumberStr=function(t){if(null==t&&t.length<=0)return!1;for(var e=0;e<t.length;e++){var i=t.charCodeAt(e);if(i<48||57<i)return!1}return!0},l.getTickNumber=function(t){var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=Math.floor(t-3600*e-60*i),s=e<10?"0"+e:e.toString();return s+=":"+(i<10?"0"+i:i),s+=":"+(n<10?"0"+n:n)},l.getTickHM=function(t){var e=t/3600,i=(t-3600*e)/60,n=e<10?"0"+e:e.toString();return n+=":"+(i<10?"0"+i:i)},l.getTickMS=function(t){var e=Math.floor(t/3600),i=Math.floor(t/60),n=Math.floor((t-3600*e)/60),s=Math.floor(t-3600*e-60*n),o=(i<10?"0"+i:i)+"";return o+=":"+(s<10?"0"+s:s)},l.changeToMS=function(t){var e=new Date(t);return e.setFullYear(parseInt(t.slice(0,4))),e.setMonth(parseInt(t.slice(4,6))-1),e.setDate(parseInt(t.slice(6,8))),e.getTime()},l.getNowSec=function(t){return 3600*t.getHours()+60*t.getMinutes()+t.getSeconds()},l.getCNTickMS=function(t){var e=Math.floor(t/60),i=Math.floor(t-60*e);if(0<e){var n=""+(10<=e?e:"0"+e);return n+="分"+(10<=i?i:"0"+i)+"秒"}return i+"秒"},l.getENTickMS=function(t){var e=Math.floor(t/60),i=Math.floor(t-60*e),n=""+(10<=e?e:"0"+e);return n+=":"+(10<=i?i:"0"+i)},l.getCNDHMS=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600),n=Math.floor((t-86400*e-3600*i)/60),s=Math.floor(t-86400*e-3600*i-60*n);return(0<e?e+"天":"")+" "+(9<i?i+"":"0"+i)+":"+(9<n?n+"":"0"+n)+":"+(9<s?s+"":"0"+s)},l.getSTRDHMS=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600),n=Math.floor((t-86400*e-3600*i)/60);return e+"天"+i+"小时"+n+"分"+Math.floor(t-86400*e-3600*i-60*n)+"秒"},l.getSTRYMDHM=function(t,e){void 0===e&&(e=!0);var i=new Date(t);return e?i.getFullYear()+"年"+l.format(i.getMonth()+1)+"月"+l.format(i.getDate())+"日 "+l.format(i.getHours())+":"+l.format(i.getMinutes())+":"+l.format(i.getSeconds()):i.getFullYear()+"."+l.format(i.getMonth()+1)+"."+l.format(i.getDate())+" "+l.format(i.getHours())+":"+l.format(i.getMinutes())+":"+l.format(i.getSeconds())},l.getSTRYMDHMWithoutSec=function(t,e){void 0===e&&(e=!0);var i=new Date(t);return e?i.getFullYear()+"年"+l.format(i.getMonth()+1)+"月"+l.format(i.getDate())+"日 "+l.format(i.getHours())+":"+l.format(i.getMinutes()):i.getFullYear()+"."+l.format(i.getMonth()+1)+"."+l.format(i.getDate())+" "+l.format(i.getHours())+":"+l.format(i.getMinutes())},l.getSTRMDHM=function(t){var e=new Date(t);return l.format(e.getMonth()+1)+"月"+l.format(e.getDate())+"日 "+l.format(e.getHours())+":"+l.format(e.getMinutes())+":"+l.format(e.getSeconds())},l.getSTRYMD=function(t){var e=new Date(t);return l.format(e.getFullYear())+"年"+l.format(e.getMonth()+1)+"月"+l.format(e.getDate())+"日"},l.getSTRHMS=function(t){var e=new Date(t);return l.format(e.getHours())+":"+l.format(e.getMinutes())+":"+l.format(e.getSeconds())},l.getSTRMD=function(t){var e=new Date(t);return l.format(e.getMonth()+1)+"月"+l.format(e.getDate())+"日"},l.getDHM=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600);return e+"天"+i+"时"+Math.floor((t-86400*e-3600*i)/60)+"分"},l.getDH=function(t){var e=Math.floor(t/86400);return e+"天"+Math.floor((t-86400*e)/3600)+"小时"},l.getHM=function(t){var e=Math.floor(t/3600);return e+"小时"+Math.floor((t-3600*e)/60)+"分"},l.getHMSOrDHm=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600),n=Math.floor((t-86400*e-3600*i)/60),s=Math.floor(t-86400*e-3600*i-60*n);return 0<e?e+"天"+i+"小时"+n+"分钟":i+"小时"+n+"分钟"+s+"秒"},l.getHMS=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600),n=Math.floor((t-86400*e-3600*i)/60),s=Math.floor(t-86400*e-3600*i-60*n);return 0<e?e+"天"+i+"小时"+n+"分钟"+s+"秒":i+"小时"+n+"分钟"+s+"秒"},l.getFormatDHM=function(t){var e=Math.floor(t/86400),i=Math.floor((t-86400*e)/3600),n=Math.floor((t-86400*e-3600*i)/60);return e+"天"+i+"时"+n+"分"},l.getHMTimeString=function(t,e){return(t<10?"0"+t:t.toString())+":"+(e<10?"0"+e:e.toString())},l.getHMSTimeString=function(t){var e=Math.floor(t/3600),i=10<=e?e.toString():"0"+e.toString(),n=Math.floor((t-3600*e)/60),s=10<=n?n.toString():"0"+n.toString(),o=Math.floor(t-3600*e-60*n);return i+":"+s+":"+(10<=o?o.toString():"0"+o.toString())},l.getHMSObject=function(t){return{hour:t/l.HOUR_SECOND,min:t%l.HOUR_SECOND/60,sec:t%60}},l.getSpecialTimeFormat=function(t){var e=new Date(t),i=e.getFullYear()+"/"+l.format(e.getMonth()+1)+"/"+l.format(e.getDate())+"/(",n=e.getHours(),s=10<=n?n.toString():"0"+n.toString(),o=e.getMinutes(),a=10<=o?o.toString():"0"+o.toString(),r=e.getSeconds();return i+=s+":"+a+":"+(10<=r?r.toString():"0"+r.toString())+")"},l.getSpecialTimeFormat1=function(t){var e=new Date(t),i=e.getFullYear()+"-"+l.format(e.getMonth()+1)+"-"+l.format(e.getDate())+" ",n=e.getHours(),s=10<=n?n.toString():"0"+n.toString(),o=e.getMinutes(),a=10<=o?o.toString():"0"+o.toString(),r=e.getSeconds();return i+=s+":"+a+":"+(10<=r?r.toString():"0"+r.toString())},l.getSpecialTimeFormat2=function(t){var e=new Date(t),i=e.getFullYear()+"-"+l.format(e.getMonth()+1)+"-"+l.format(e.getDate())+" ",n=e.getHours(),s=10<=n?n.toString():"0"+n.toString(),o=e.getMinutes(),a=10<=o?o.toString():"0"+o.toString(),r=e.getSeconds();r.toString();return i+=" "+s+":"+a},l.MINUTE_SECOND=60,l.HOUR_SECOND=3600,__static(l,["DATE_SECOND",function(){return this.DATE_SECOND=24*l.HOUR_SECOND},"WEEK_SECOND",function(){return this.WEEK_SECOND=7*l.DATE_SECOND}]),l}(),Proto=function(){function t(){this._className_=null,this._id_=null,this._oid_=null,this._proto_=null,this._className_=ClassUtil.getQualifiedClassName(this),this._id_=Asswc.getSoleId()}__class(t,"zwc.engine.core.protos.Proto");var e=t.prototype;return Laya.imps(e,{"zwc.saiman.interfaces.IProto":!0}),e.clone=function(){return null},e.dispose=function(){this._proto_=null,this._oid_=null,this._id_=null},e.toString=function(){return"["+this._className_+"@"+this._id_+"]"},__getset(0,e,"id",function(){return this._id_},function(t){this._id_!=t&&(this._id_=t)}),__getset(0,e,"oid",function(){return this._oid_},function(t){this._oid_=t}),__getset(0,e,"proto",function(){return this._proto_},function(t){this._proto_=t}),__getset(0,e,"className",function(){return this._className_}),t}(),Asswc=function(){function t(){}return __class(t,"zwc.saiman.Asswc"),__getset(1,t,"instance_key",function(){return--t.instance_index<0&&(t.instance_index=2147483647),t.instance_index}),t.getSoleId=function(){return"@"+zwc.saiman.Asswc.instance_key.toString(16)},t.LINE="_",t.SIGN="@",t.instance_index=2147483647,t.enabled=!0,t}(),ClassUtil=function(){function s(){}return __class(s,"zwc.utils.ClassUtil"),s.getQualifiedClassName=function(t){if(t&&t.constructor){var e=s._clsMap[t.constructor];if(e)return e;var i=Laya.__classmap;for(e in i){if(t.constructor==i[e])return s._clsMap[t.constructor]=e;-1==e.indexOf("laya")&&(s._clsMap[i[e]]=e)}var n=t.constructor.toString();return e=(e=(e=n.substr(0,n.indexOf("("))).replace("function","")).replace(/(^\s*)|(\s*$)/gi,""),s._clsMap[t.constructor]=e}return typeof t.toString()},s._clsMap={},s}(),Node=function(t){function a(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,a.__super.call(this),this._childs=a.ARRAY_EMPTY,this._$P=a.PROP_EMPTY,this.timer=Laya.scaleTimer,this.conchModel=Render.isConchNode?this.createConchModel():null}__class(a,"laya.display.Node",EventDispatcher);var e=a.prototype;return e._setBit=function(t,e){1==t&&(this._getBit(t)!=e&&this._updateDisplayedInstage());e?this._bits|=t:this._bits&=~t},e._getBit=function(t){return 0!=(this._bits&t)},e._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},e._setUpNoticeType=function(t){var e=this;for(e._setBit(t,!0),e=e.parent;e;){if(e._getBit(t))return;e._setBit(t,!0),e=e.parent}},e.on=function(t,e,i,n){return"display"!==t&&"undisplay"!==t||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t,e,i,n,!1)},e.once=function(t,e,i,n){return"display"!==t&&"undisplay"!==t||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t,e,i,n,!0)},e.createConchModel=function(){return null},e.destroy=function(t){void 0===t&&(t=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(t?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},e.destroyChildren=function(){if(this._childs)for(var t=this._childs.length-1;-1<t;t--)this._childs[t].destroy(!0)},e.addChild=function(t){if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),t._parent===this){var e=this.getChildIndex(t);e!==this._childs.length-1&&(this._childs.splice(e,1),this._childs.push(t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,this._childs.length-1)),this._childChanged())}else t.parent&&t.parent.removeChild(t),this._childs===a.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,this._childs.length-1),(t.parent=this)._childChanged();return t},e.addChildren=function(t){for(var e=arguments,i=0,n=e.length;i<n;)this.addChild(e[i++])},e.addChildAt=function(t,e){if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),0<=e&&e<=this._childs.length){if(t._parent===this){var i=this.getChildIndex(t);this._childs.splice(i,1),this._childs.splice(e,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,e)),this._childChanged()}else t.parent&&t.parent.removeChild(t),this._childs===a.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(e,0,t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,e),t.parent=this;return t}throw new Error("appendChildAt:The index is out of bounds")},e.getChildIndex=function(t){return this._childs.indexOf(t)},e.getChildByName=function(t){var e=this._childs;if(e)for(var i=0,n=e.length;i<n;i++){var s=e[i];if(s.name===t)return s}return null},e._get$P=function(t){return this._$P[t]},e._set$P=function(t,e){return this.destroyed||(this._$P===a.PROP_EMPTY&&(this._$P={}),this._$P[t]=e),e},e.getChildAt=function(t){return this._childs[t]},e.setChildIndex=function(t,e){var i=this._childs;if(e<0||e>=i.length)throw new Error("setChildIndex:The index is out of bounds.");var n=this.getChildIndex(t);if(n<0)throw new Error("setChildIndex:node is must child of this object.");return i.splice(n,1),i.splice(e,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,e)),this._childChanged(),t},e._childChanged=function(t){},e.removeChild=function(t){if(!this._childs)return t;var e=this._childs.indexOf(t);return this.removeChildAt(e)},e.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},e.removeChildByName=function(t){var e=this.getChildByName(t);return e&&this.removeChild(e),e},e.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(this._childs.splice(t,1),this.conchModel&&this.conchModel.removeChild(e.conchModel),e.parent=null),e},e.removeChildren=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=2147483647),this._childs&&0<this._childs.length){var i=this._childs;if(0===t&&o<=e){var n=i;this._childs=a.ARRAY_EMPTY}else n=i.splice(t,e-t);for(var s=0,o=n.length;s<o;s++)n[s].parent=null,this.conchModel&&this.conchModel.removeChild(n[s].conchModel)}return this},e.replaceChild=function(t,e){var i=this._childs.indexOf(e);return-1<i?(this._childs.splice(i,1,t),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(t.conchModel,i)),e.parent=null,t.parent=this,t):null},e._updateDisplayedInstage=function(){var t;t=this;var e=Laya.stage;for(this._displayedInStage=!1;t;){if(t._getBit(1)){this._displayedInStage=t._displayedInStage;break}if(t==e||t._displayedInStage){this._displayedInStage=!0;break}t=t.parent}},e._setDisplay=function(t){this._displayedInStage!==t&&((this._displayedInStage=t)?this.event("display"):this.event("undisplay"))},e._displayChild=function(t,e){var i=t._childs;if(i)for(var n=0,s=i.length;n<s;n++){var o=i[n];if(o){if(!o._getBit(1))continue;0<o._childs.length?this._displayChild(o,e):o._setDisplay(e)}}t&&t._setDisplay(e)},e.contains=function(t){if(t===this)return!0;for(;t;){if(t.parent===this)return!0;t=t.parent}return!1},e.timerLoop=function(t,e,i,n,s,o){void 0===s&&(s=!0),void 0===o&&(o=!1),this.timer.loop(t,e,i,n,s,o)},e.timerOnce=function(t,e,i,n,s){void 0===s&&(s=!0),this.timer._create(!1,!1,t,e,i,n,s)},e.frameLoop=function(t,e,i,n,s){void 0===s&&(s=!0),this.timer._create(!0,!0,t,e,i,n,s)},e.frameOnce=function(t,e,i,n,s){void 0===s&&(s=!0),this.timer._create(!0,!1,t,e,i,n,s)},e.clearTimer=function(t,e){this.timer.clear(t,e)},__getset(0,e,"numChildren",function(){return this._childs.length}),__getset(0,e,"destroyed",function(){return this._destroyed}),__getset(0,e,"parent",function(){return this._parent},function(t){this._parent!==t&&(t?(this._parent=t,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),t.displayedInStage&&this._displayChild(this,!0)),t._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=t))}),__getset(0,e,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),a.ARRAY_EMPTY=[],a.PROP_EMPTY={},a.NOTICE_DISPLAY=1,a.MOUSEENABLE=2,a}(),GameInit=function(t){function o(){o.__super.call(this)}__class(o,"gateModule.global.GameInit",GProto);var e=o.prototype;return e.checkNextHttp=function(){var t=Browser.window.location.href;return 0<=t.indexOf("http://")||0<=t.indexOf("https://")},e.initOption=function(){var t=getGlobalParams();if(t){if(t.hasOwnProperty("host"))GlobalConst.host=t.host;else if(this.checkNextHttp()){var e=Browser.window.location.href,i=e.lastIndexOf("/"),n=e.slice(0,i+1)+"resources/";GlobalConst.host=n}if(t.hasOwnProperty("clickStream")&&(GlobalConfig.clickStream=t.clickStream),t.hasOwnProperty("adminClickStream")&&(GlobalConfig.adminClickStream=t.adminClickStream),t.hasOwnProperty("clickAppids")){var s=t.clickAppids;s&&0<s.length&&(GlobalConfig.clickAppids=t.clickAppids)}if(t.hasOwnProperty("socket_ip")&&(GlobalConfig.socket_host=t.socket_ip),t.hasOwnProperty("socket_port")&&(GlobalConfig.socket_port=t.socket_port),t.hasOwnProperty("serverID")&&(GlobalConfig.serverID=t.serverID),t.hasOwnProperty("client")&&(GlobalConfig.client=t.client),30==GlobalConfig.client&&(t.time&&0<t.time.length&&(GlobalConfig.serverTime=t.time),t.sign&&0<t.sign.length&&(GlobalConfig.sign=t.sign),t.cdn&&0<t.cdn.length)){var o=t.cdn.split(";");GlobalConst.host=o[0]+"resources/",GlobalConfig.cdns=o}if(t.appversion&&0<t.appversion.length&&(GlobalConfig.appVersion=t.appversion),t.hasOwnProperty("query_subscribe")&&(GlobalConfig.query_subscribe=t.query_subscribe),t.hasOwnProperty("importServerUrl")&&(GlobalConfig.importServerUrl=t.importServerUrl),t.hasOwnProperty("getServerListUrl")&&(GlobalConfig.getServerListUrl=t.getServerListUrl),t.hasOwnProperty("pNoteUrl")&&(GlobalConfig.pNoteUrl=t.pNoteUrl),t.hasOwnProperty("token")&&(GlobalConfig.token=t.token),t.clickUrl&&(GlobalConfig.clickUrl=t.clickUrl),t.bigClickUrl&&(GlobalConfig.bigClickUrl=t.bigClickUrl),t.verifyUrl&&(GlobalConfig.verifyUrl=t.verifyUrl),t.mobileVerifyUrl&&t.mobileVerifyUrl.length&&(GlobalConfig.mobileVerifyUrl=t.mobileVerifyUrl),0==Global.xgame){var a=getRequest();if(a){if(console.log("getRequest-----------\x3e"+JSON.stringify(a)),a.hasOwnProperty("uid")&&a.uid&&a.uid.length&&(GlobalConfig.uid=a.uid),a.hasOwnProperty("time")&&a.time&&a.time.length&&(GlobalConfig.platformTime=a.time),a.hasOwnProperty("sign")&&a.sign&&a.sign.length&&(GlobalConfig.platformSign=a.sign),a.hasOwnProperty("is_adult")&&a.is_adult&&a.is_adult.length&&(GlobalConfig.platformAdult=a.is_adult),a.hasOwnProperty("ip")&&a.ip&&a.ip.length&&(GlobalConfig.socket_host=a.ip),a.hasOwnProperty("port")&&a.port&&a.port.length&&(GlobalConfig.socket_port=a.port),a.hasOwnProperty("sid")&&a.sid&&a.sid.length&&(GlobalConfig.serverID=a.sid),a.hasOwnProperty("guid")&&a.guid&&a.guid.length&&(GlobalConfig.guid=a.guid),a.hasOwnProperty("appid")&&a.appid&&a.appid.length&&(GlobalConfig.platform=GlobalConfig.pid=GlobalConfig.appid=a.appid),a.hasOwnProperty("game_id")&&a.game_id&&a.game_id.length&&(GlobalConfig.gid=a.game_id),a.hasOwnProperty("client_type")&&(1==a.client_type?GlobalConfig.client=10:2==a.client_type&&(GlobalConfig.client=20)),a.hasOwnProperty("click_stream")){var r=a.click_stream+"";"1"==r?GlobalConfig.clickAppids=GlobalConfig.appid+"|":r="0",GlobalConfig.clickStream=r}a.hasOwnProperty("host")&&a.host&&a.host.length&&(GlobalConst.host=a.host),a.hasOwnProperty("zizhi_id")&&a.zizhi_id&&a.zizhi_id.length&&(98009==a.zizhi_id?GlobalConfig.loadingDescribe="审批文号：新广出审【2016】843号 \n著作权人：成都智旭羽翰科技有限公司 \n著作权登记号：2015SR187525 \n网络游戏出版物号：ISBN 978-7-89989-715-8  \n出版单位名称：三七互娱（上海）科技有限公司\n备案号：文网游备字〔2016〕Ｗ-RPG 8524 号":98010==a.zizhi_id?GlobalConfig.loadingDescribe="审批文号：新广出审【2016】3735号 \n著作权人：深圳尚玩科技有限公司 \n著作权登记号：2016SR192908 \n网络游戏出版物号：ISBN 978-7-7979-2366-8  \n出版单位名称：三七互娱（上海）科技有限公司\n备案号：暂无":98011==a.zizhi_id&&(GlobalConfig.loadingDescribe="审批文号：新广出审【2016】118号 \n著作权人：江苏易乐网络技术有限公司 \n著作权登记号：2015SR094949 \n网络游戏出版物号：ISBN 978-7-89404-309-2  \n出版单位名称：上海同济大学电子音像出版社有限公司\n备案号：文网游备字〔2016〕Ｍ-RPG 6075 号")),GlobalConfig.webGetParams=a}}GlobalConfig.cdns=ProtocolUtil.changeProtocalByArray(GlobalConfig.cdns),GlobalConfig.query_subscribe=ProtocolUtil.changeProtocalByString(GlobalConfig.query_subscribe),GlobalConfig.importServerUrl=ProtocolUtil.changeProtocalByString(GlobalConfig.importServerUrl),GlobalConfig.getServerListUrl=ProtocolUtil.changeProtocalByString(GlobalConfig.getServerListUrl),GlobalConfig.pNoteUrl=ProtocolUtil.changeProtocalByString(GlobalConfig.pNoteUrl),GlobalConfig.verifyUrl=ProtocolUtil.changeProtocalByString(GlobalConfig.verifyUrl),GlobalConfig.mobileVerifyUrl=ProtocolUtil.changeProtocalByString(GlobalConfig.mobileVerifyUrl),GlobalConfig.clickUrl=ProtocolUtil.changeProtocalByString(GlobalConfig.clickUrl),GlobalConfig.bigClickUrl=ProtocolUtil.changeProtocalByString(GlobalConfig.bigClickUrl),GlobalConst.host=ProtocolUtil.changeProtocalByString(GlobalConst.host),URL.basePath=GlobalConst.host}if(Browser.window.GameVersionFiles){if(GlobalConfig.versionFiles=Browser.window.GameVersionFiles,GlobalConfig.versionFiles){var l=parseFloat(GlobalConfig.versionFiles.webversion);l>GlobalConfig.webversion&&(GlobalConfig.webversion=l)}if(GlobalConfig.versionFiles){var h=parseFloat(GlobalConfig.versionFiles.gateResVerison);h>GlobalConfig.gateResVerison&&(GlobalConfig.gateResVerison=h)}}console.log("ip:"+GlobalConfig.socket_host+",port:"+GlobalConfig.socket_port+",sid:"+GlobalConfig.serverID),console.log("GlobalConst.host:"+GlobalConst.host)},e.initErrorLisenter=function(){Browser.window.onerror=function(t,e,i,n,s){return("Script error"==t||e)&&Laya.timer.once(0,o,gateModule.global.GameInit.GlobalErrorHander,[t,e,i,n,s]),!0}},e.initGame=function(){this.initErrorLisenter(),URL.basePath=GlobalConst.host,this.initOption(),EGlobal.IMAGE_DIR=GlobalConst.host+"ui/",EGlobal.ASSET_DIR=EGlobal.IMAGE_DIR+"avatars_/",GateSocketUtils.setup(),UIRegister.instance().setup(),0==Global.isConchApp&&(SkinUtil.setup(GlobalConfig.appid),GameLog.ins().appid=GlobalConfig.appid),GateModuleDock.setup(GateModuleConst.moduleClass,GateSocketDock),Message.sendToTotalModule("__ENGIN_READY__"),FPSUtils.setup(Laya.stage),EGlobal.stage=Laya.stage,Laya.timer.loop(500,Engine,Engine.loop),Laya.stage.on("focus",this,this.onFocus),Laya.stage.on("blur",this,this.onBlur),Message.sendToModule("__TO_LOGIN__",["gateModule.modules.login.LoginGateModule"]),Laya.stage.on("resize",this,this.onResize),ReportUtils.ins.pushInfo("agent:"+Browser.userAgent),ReportUtils.ins.pushInfo("size:"+Laya.stage.width+"x"+Laya.stage.height),Laya.stage.on("mousedown",this,this.onMouseDown)},e.onMouseDown=function(){ReportUtils.ins.pushInfo("mousedown:"+Laya.stage.mouseX+"x"+Laya.stage.mouseY)},e.onBlur=function(t){Global.isSleep=!0,ReportUtils.ins.pushInfo("onblur:true"),Message.sendToTotalModule("APP_ONBLUR")},e.onFocus=function(t){Global.isSleep=!1,ReportUtils.ins.pushInfo("onblur:false"),Message.sendToTotalModule("APP_ONFOCUS")},e.onResize=function(){Laya.timer.once(100,this,this.doResize)},e.doResize=function(){ReportUtils.ins.pushInfo("size:"+Laya.stage.width+"x"+Laya.stage.height),Message.sendToTotalModule("resize")},o.getIntance=function(){return null==gateModule.global.GameInit._intance_&&(gateModule.global.GameInit._intance_=new o),gateModule.global.GameInit._intance_},o.GlobalErrorHander=function(t,e,i,n,s){var o={url:e,line:i,col:n,msg:t};if(n=n||Browser.window.event&&Browser.window.errorCharacter||0,s&&s.stack)o.msg=s.stack.toString();else if(arguments.callee){for(var a=[],r=arguments.callee.caller,l=3;r&&0<--l&&(a.push(r.toString()),r!==r.caller);)r=r.caller;a=a.join(","),s&&s.stack&&(o.msg=s.stack.toString())}alert(o.msg)},o.todo=function(t){},o._intance_=null,o.ErrorMsgCodeArray=[],o}(),UpdateResUtils=function(t){function e(){this.paths=[],this.configClass=[],this.statusType=0,this.persent=0,e.__super.call(this)}__class(e,"gateModule.global.UpdateResUtils",GProto);var i=e.prototype;return i.setup=function(){Laya.timer.frameLoop(1,this,this.doShowLoading),this.onEnterGame()},i.onLoadingUpdate=function(t){this.persent=t},i.doShowLoading=function(){this.showLoading("正在初始化创角模块...",this.persent),this.persent+=.02*Math.random(),1<this.persent&&(this.persent=0)},i.doShowCreateRole=function(){Laya.timer.clear(this,this.doShowLoading),Message.sendToModule("SHOWCREATEROLE",["gateModule.modules.login.LoginGateModule"])},i.showLoading=function(t,e){void 0===e&&(e=.5),Message.sendToModule("SETLOADING",["gateModule.modules.login.LoginGateModule"],{des:t,per:e})},i.onEnterGame=function(){this.configClass.length=0,this.configClass=null,this.paths=null,"0"!=GlobalConfig.socket_host?GlobalConst.isCreated?(Laya.timer.clear(this,this.doShowLoading),Message.sendToModule("SHOWCREATEROLE",["gateModule.modules.login.LoginGateModule"])):(Common.mirClick(16,GlobalConfig.pid,GlobalConfig.uid),"awy"==GlobalConfig.appid||"awyxcx"==GlobalConfig.appid?this.loginUrlsV3():this.loginUrlsV1()):Message.sendToModule("SHOWCREATEROLE",["gateModule.modules.login.LoginGateModule"])},i.loginUrlsV1=function(){var t=[];LoginGateProxy.urls.push(GlobalConst.getLayoutsImagePath("createrole1/cj_js_1_1.png",!1)),t.push({url:GlobalConst.getLayoutsImagePath("createrole1/cj_js_1_1.png",!1)}),LoginGateProxy.urls.push(GlobalConst.getLayoutsPath("createrole1")),t.push({url:GlobalConst.getLayoutsPath("createrole1")}),Laya.loader.load(t,Handler.create(this,this.doShowCreateRole))},i.loginUrlsV2=function(){for(var t=[],e=1;e<=3;e++){for(var i=1;i<=2;i++)LoginGateProxy.urls.push(GlobalConst.getLayoutsImagePath("createrole2/cj_img_"+e+"_"+i+".png",!1)),LoginGateProxy.urls.push(GlobalConst.getLayoutsImagePath("createrole2/cj_s_"+e+"_"+i+".png",!1)),t.push({url:GlobalConst.getLayoutsImagePath("createrole2/cj_img_"+e+"_"+i+".png",!1)}),t.push({url:GlobalConst.getLayoutsImagePath("createrole2/cj_s_"+e+"_"+i+".png",!1)});LoginGateProxy.urls.push(GlobalConst.getLayoutsImagePath("createrole2/cj_job_"+e+".png",!1)),t.push({url:GlobalConst.getLayoutsImagePath("createrole2/cj_job_"+e+".png",!1)})}LoginGateProxy.urls.push(GlobalConst.getLayoutsPath("createrole2")),t.push({url:GlobalConst.getLayoutsPath("createrole2")}),Laya.loader.load(t,Handler.create(this,this.doShowCreateRole))},i.loginUrlsV3=function(){var t=[];LoginGateProxy.urls.push(GlobalConst.getLayoutsImagePath("createrole3/cj_js_1_1.png",!1)),t.push({url:GlobalConst.getLayoutsImagePath("createrole3/cj_js_1_1.png",!1)}),LoginGateProxy.urls.push(GlobalConst.getLayoutsPath("createrole3")),t.push({url:GlobalConst.getLayoutsPath("createrole3")}),Laya.loader.load(t,Handler.create(this,this.doShowCreateRole))},e.getIntance=function(){return null==gateModule.global.UpdateResUtils._intance_&&(gateModule.global.UpdateResUtils._intance_=new e),gateModule.global.UpdateResUtils._intance_},e._intance_=null,e}(),GateUnitModule=function(t){function e(){this._name_=null,this._lock_=!1,this._isCallExecute_=!1,e.__super.call(this),this.id=this._name_=ClassUtil.getQualifiedClassName(this)}__class(e,"gateModule.zwc.engine.core.controls.dock.GateUnitModule",GProto);var i=e.prototype;return Laya.imps(i,{"gateModule.zwc.saiman.interfaces.dock.IModule":!0}),i.register=function(){GateModuleDock.getInstance().addModule(this)},i.unregister=function(){GateModuleDock.getInstance().removeModule(this.name)},i.send=function(t){Message.checkMessageFromat(t)&&MsgDock.getInstance().send(t)},i.subHandler=function(t){},i.registerSubProxy=function(t){for(var e=arguments,i=0,n=e.length;i<n;){var s,o=e[i];if(Laya.__isClass(o)){if((s=new o).oid=this.id,!s)throw new Error("参数对象不是SubProxy子类对象");GateModuleDock.getInstance().addSubProxy(s)}else{if(!o)throw new Error("参数对象不是SubProxy子类对象");(s=o).oid=this.id,GateModuleDock.getInstance().addSubProxy(s)}i++}},i.executeEndHandler=function(t){},__getset(0,i,"name",function(){return this._name_}),__getset(0,i,"lock",function(){return this._lock_},function(t){this._lock_=t}),__getset(0,i,"isCallExecute",function(){return this._isCallExecute_},function(t){this._isCallExecute_=t}),e}(),GateSubProxy=function(t){function e(){this._lock_=!1,this._name_,e.__super.call(this),this._name_=ClassUtil.getQualifiedClassName(this)}__class(e,"gateModule.zwc.engine.core.controls.dock.GateSubProxy",t);var i=e.prototype;return Laya.imps(i,{"gateModule.zwc.saiman.interfaces.dock.IProxy":!0}),i.send=function(t){MsgDock.getInstance().send(t)},i.checkFromat=function(){return!0},i.sendToModule=function(t,e,i){Message.sendToModule(t,e,i,this.oid)},i.sendToTotalModule=function(t,e){Message.sendToTotalModule(t,e,this.oid)},i.sendToService=function(t,e){Message.sendToService(t,e,this.oid)},i.subHandler=function(t){},i.register=function(t){this.unregister(),Laya.superSet(GProto,this,"oid",t),GateModuleDock.getInstance().addSubProxy(this)},i.unregister=function(){GateModuleDock.getInstance().removeSubProxy(this)},__getset(0,i,"name",function(){return this._name_}),__getset(0,i,"oid",t.prototype._$get_oid,function(t){Laya.superSet(GProto,this,"oid",t),this.register(t)}),__getset(0,i,"lock",function(){return this._lock_},function(t){this._lock_=t}),e}(GProto),GateCustomSocket=function(t){function a(t,e){this.buffMessages=[],this.messageArray=[],this.reConnectNum=0,this.reConnecting=!1,this.reConnectTime=0,this.wss_directServers=[],this._webSocket_=null,this._connected_=!1,this._closeStatus=!0,this._ReConnectNum=0,this._autoCheckConnect=!0,this.hasRevice13303=!1,this.tryTime=0,this.bodaySize=-1,this.indexKey=0,this.endian="bigEndian",this._inputBytes_=new ByteArray,void 0===e&&(e=0),a.__super.call(this),this.endian="bigEndian"}__class(a,"gateModule.net.GateCustomSocket",EventDispatcher);var e=a.prototype;return e.loop=function(){var t=Engine.getTimer();0==this._connected_&&this._autoCheckConnect&&!this.hasRevice13303?(this.reConnecting=!0,this._closeStatus?(this._closeStatus=!1,this.reConnectNum=Engine.getTimer(),console.log("开始检测")):0==this._closeStatus&&(10<this._ReConnectNum||3e4<t-this.reConnectNum?(this._autoCheckConnect=!1,this.reConnecting=!1,this.onReConect("与服务器已断开链接，请刷新页面！")):1500<t-this.tryTime&&!Global.isSleep&&(this.tryTime=t,this.reConnected(),console.log("开始第"+this._ReConnectNum+"次重连")))):this.reConnecting=!1},e.showAlertOutConnect=function(){this.onReConect("与服务器已断开链接，请刷新页面！")},e.connect=function(t,e){var i=this;if(!this.connected){var n="ws://"+t+":"+e;if(0<Global.xgame){var s=t+":"+e;n=this.wss_directServers&&0<this.wss_directServers.length&&0<=this.wss_directServers.indexOf(s)?"wss://"+t+":"+e:"wss://minigame.cqjy.5jli.com/?host="+t+":"+e}else n="https:"==Browser.window.location.protocol?"wss://"+t+":"+e:"ws://"+t+":"+e;null!=this._webSocket_&&this.close(),this._webSocket_&&this.clean(),this._webSocket_=new Browser.window.WebSocket(n),this._webSocket_.binaryType="arraybuffer",this._inputBytes_.length=0,this._inputBytes_.endian=this.endian,this._inputBytes_.position=0,this.bodaySize=-1,this._webSocket_.onopen=function(t){i._onConnect_(t)},this._webSocket_.onmessage=function(t){i._onMessage_(t)},this._webSocket_.onclose=function(t){i._onClose_(t)},this._webSocket_.onerror=function(t){i._onError_(t)}}},e._onConnect_=function(t){if(console.log("onConnect:"),this._connected_=!0,this._ReConnectNum=0,GateSocketDock.logined){var e=new tos_10113;e.arthor=GlobalConfig.uid,e.platform=GlobalConfig.platform,e.serverId=GlobalConfig.serverID,this.sendBeanData(e),e.dispose(),e=null}else Message.sendToModule("__SOCKET_CONENTED__",["gateModule.modules.login.LoginGateModule"]),GateSocketDock.logined=!0,Laya.timer.loop(15,this,this.loop);this.reConnectNum=Engine.getTimer()},e._onMessage_=function(t){if(t&&t.data){var e=t.data;this._readSocketDate_(e)}},e._onClose_=function(t){this._connected_=!1,this._closeStatus=!0,console.log(" run GateCustomSocket onClose"),Engine.getTimer()-this.reConnectNum<3e3?Laya.timer.once(1e3,this,this.reConnected):(this.reConnecting=!1,this.onReConect("网络异常，请点击刷新后重试！"))},e.onReConect=function(t){console.log("GateCustomSocket run LoginAlertView.show"),LoginAlertView.ins.show(t,!0)},e._onError_=function(t){this._connected_=!1,this._closeStatus=!0,console.log("WebSocket Error:"+t)},e.reConnected=function(){this._ReConnectNum++,console.log(" run GateCustomSocket reConnected:"+this._ReConnectNum),this.connect(GlobalConfig.socket_host,GlobalConfig.socket_port)},e.close=function(){if(this.bodaySize=-1,null!=this._webSocket_)try{this._webSocket_.close()}catch(t){}},e.clean=function(){try{this._webSocket_.close()}catch(t){}this._connected_=!1,this._webSocket_.onopen=null,this._webSocket_.onmessage=null,this._webSocket_.onclose=null,this._webSocket_.onerror=null,this._webSocket_=null,this.bodaySize=-1},e._readSocketDate_=function(t){if(t){var e=0,i=this._inputBytes_.position;if(this._inputBytes_.writeArrayBuffer(t),this._inputBytes_.position=i,this._inputBytes_.length>a.BUFFER_MAX_SIZE){var n=new ByteArray;n.endian=this.endian,e=this._inputBytes_.length-this._inputBytes_.position,this._inputBytes_.readBytes(n,0,e),this._inputBytes_.clear(),this._inputBytes_=n,this._inputBytes_.position=0}var s,o=0;(4<=(e=this._inputBytes_.length-this._inputBytes_.position)||-1!=this.bodaySize)&&(-1==this.bodaySize&&(this.bodaySize=this._inputBytes_.readInt()),this.bodaySize==this._inputBytes_.bytesAvailable&&(this._inputBytes_.readInt(),o=this._inputBytes_.readShort(),console.log("revice pack = ",o),s=new ByteArray,this._inputBytes_.readBytes(s,0,this.bodaySize),s.position=0,13303==o||10118==o?(this.hasRevice13303=!0,this.buffMessages.splice(0,0,[o,s])):10102==o?this.buffMessages.unshift([o,s]):this.buffMessages.push([o,s]),this.bodaySize=-1,this._inputBytes_.bytesAvailable<=0&&this._inputBytes_.length>a.BUFFER_MAX_SIZE/2&&this._inputBytes_.clear()))}},e.sendBeanData=function(t){if(null!=this._webSocket_){var e=t.encode(),i=new ByteArray;i.writeByte(9),i.writeByte(5),i.writeByte(2),i.writeByte(7),i.writeInt(this.indexKey),i.writeInt(e.length+2),i.writeShort(t.packId),console.log("send pack = ",t.packId),e&&e.length&&(e.position=0,i.writeBytes(e,0,e.length)),this._webSocket_.send(i.__getBuffer().slice(0,i.length)),e.clear(),i.clear(),e=i=null}},e.send=function(t){this._webSocket_.send(t)},e.flush=function(){},__getset(0,e,"connected",function(){return this._connected_}),a.BIG_ENDIAN="bigEndian",a.LITTLE_ENDIAN="littleEndian",a.TYPE_BINARY="arraybuffer",a.RECONNECTNUM=3e3,a.BUFFER_MAX_SIZE=2e4,a}(),GateSocketUtils=function(t){function e(){e.__super.call(this)}return __class(e,"gateModule.protos.GateSocketUtils",GProto),e.setup=function(){e.socket_Packages.put("10102",toc_10102),e.socket_Packages.put("10104",toc_10104),e.socket_Packages.put("10106",toc_10106),e.socket_Packages.put("10110",toc_10110),e.socket_Packages.put("10114",toc_10114),e.socket_Packages.put("10118",toc_10118),e.socket_Packages.put("13602",toc_13602)},e.readBit=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=4);for(var n=0,s=0;s<i;s++)n|=1<<s;return(t>>=e)&n},e.read24=function(t){return t.readByte()<<16|t.readUnsignedShort()},e.readLong=function(t){return 1*t.readShort()*4294967296+t.readUnsignedInt()},e.readLong64=function(t){return 1*t.readUnsignedInt()*4294967296+t.readUnsignedInt()},e.writeLong64_ωòóω=function(t,e){var i=e%4294967296,n=(e-1*i)/4294967296;return t.writeUnsignedInt(n),t.writeUnsignedInt(i),t},e.writeLong_ωòóω=function(t,e){var i=e%4294967296,n=(e-1*i)/4294967296;return t.writeInt(n),t.writeUnsignedInt(i),t},e.writeArray=function(t,e,i,n){for(var s=0;s<i;s++)n.call(t,e[s])},e.readArray=function(t,e,i,n){for(var s=0;s<i;s++){var o=n.call(t);e.push(o)}},e.readObject=function(t,e,i,n,s){for(var o=0;o<i;o++){for(var a={},r=0;r<n.length;r++){a[n[r]]=t[s[r]]()}e.push(a)}},__static(e,["orders",function(){return this.orders=new Hash},"socket_Packages",function(){return this.socket_Packages=new Hash}]),e}(),GSocket_toc=function(t){function e(){this._pack_id_=0,e.__super.call(this)}__class(e,"gateModule.zwc.engine.core.protos.GSocket_toc",GProto);var i=e.prototype;return Laya.imps(i,{"gateModule.zwc.saiman.interfaces.dock.ISocket_toc":!0}),i.decode=function(t){},i.readLong=function(t){var e=t.readShort(),i=t.readUnsignedInt();return 4294967296*Number(e)+i},i.readNumberLong=function(t){var e=t.readInt(),i=t.readUnsignedInt();return 4294967296*Number(e)+i},i.getProtoStr=function(){return Engine.isDebugMode?"pack_id:"+this.packId+"  className:"+this.className+"\t"+JSON.stringify(this):"pack_id:"+this.packId},__getset(0,i,"packId_str",function(){return this._pack_id_.toString()}),__getset(0,i,"packId",function(){return this._pack_id_},function(t){this._pack_id_=t}),e}(),GSocket_tos=function(t){function e(){this._bytes_=null,this._pack_id_=0,e.__super.call(this),this._bytes_=new ByteArray}__class(e,"gateModule.zwc.engine.core.protos.GSocket_tos",t);var i=e.prototype;return Laya.imps(i,{"gateModule.zwc.saiman.interfaces.dock.ISocket_tos":!0}),i.encode=function(){return this._bytes_},i.toString=function(){return"【消息号:"+this._pack_id_+"】"+t.prototype.toString.call(this)},i.writeString_ωòóω=function(t){this._bytes_.writeUTF(t)},i.writeByte_ωòóω=function(t){this._bytes_.writeByte(t)},i.writeShort_ωòóω=function(t){this._bytes_.writeShort(t)},i.writeBoolean_ωòóω=function(t){t?this._bytes_.writeByte(1):this._bytes_.writeByte(0)},i.writeInt_ωòóω=function(t){this._bytes_.writeInt(t)},i.writeBytes_ωòóω=function(t){t.position=0,this._bytes_.writeBytes(t)},i.writeLong_ωòóω=function(t){var e=t%4294967296,i=(t-Number(e))/4294967296;this._bytes_.writeInt(i),this._bytes_.writeUnsignedInt(e)},i.getProtoStr=function(){return Engine.isDebugMode?"pack_id:"+this.packId+"  className:"+this.className+"\t"+JSON.stringify(this):"pack_id:"+this.packId},__getset(0,i,"bytes",function(){return this._bytes_},function(t){this._bytes_=t}),__getset(0,i,"packId",function(){return this._pack_id_},function(t){this._pack_id_=t}),e}(GProto),UIRegister=function(t){function e(){e.__super.call(this)}return __class(e,"gateModule.ui.UIRegister",GProto),e.prototype.setup=function(){View.regComponent("HtmlDiv",HtmlDiv),View.regComponent("TipButton",TipButton)},e.instance=function(){return e._inst=e._inst||new e},e._inst=null,e}(),ColorConst=function(t){function e(){e.__super.call(this)}return __class(e,"gateModule.utils.ColorConst",GProto),e.getByQuality=function(t){switch(t){case 2:return"#01b527";case 3:return"#a93aff";case 4:return"#ff831e";case 5:return"#e41b00";case 6:return"#fff000"}return"#d6d6d6"},e.getDragonColorByQuality=function(t){var e="";switch(t){case 1:e="#d6d6d6";break;case 2:e="#01b527";break;case 3:e="#a93aff";break;case 4:e="#ff831e";break;case 5:e="#e41b00";break;case 6:e="#fff000"}return e},e.WHITE_COLOR="#d6d6d6",e.GREEN_COLOR="#01b527",e.PINK_COLOR="#a93aff",e.ORANGE_COLOR="#ff831e",e.RED_COLOR="#e41b00",e.GOODS_GOLD_COLOR="#fff000",e.DARK_BROWN="#b7a06f",e.RED="#FF0000",e.BLACK="#000000",e.WHITE="#FFFFFF",e.LU_WHITE="#f7fadf",e.YELLOW="#e6d80d",e.GRAY_YELLOW="#948b6e",e.GOLD_YELLOW="#FFCC00",e.GREEN="#23b11f",e.GREEN_ANOTHER="#65F558",e.GREEN_LIGHT="#4EFE4E",e.GRAY="#666666",e.LIGHT_GRAY="#C3B68E",e.PURPLE="#912CEE",e.PURPLE_LIGHT="#B5A3F1",e.PINK="#FF00FF",e.BLUE="#0098FF",e.BLUE_LIGHT="#00FFFF",e.ORANGER="#FF9900",e.PURE_WHITE="#FFFFFF",e.MONEY_COLOR="#ddcaaa",e.GOLD_COLOR="#ffd901",e.STRENGTH_RED="#ff2e24",e.CHAT_COMMON="#a19980",e.CHAT_GUILD="#01b527",e.CHAT_WORLD="#ff831a",e.CHAT_SYSTEM="#e6d80d",e.CHAT_CURRENT="#fff9e0",e.CHAT_NAME="#02b0e9",e}(),HtmlUtils=function(t){function n(){n.__super.call(this)}return __class(n,"gateModule.utils.HtmlUtils",GProto),n.newline=function(){return"<br />"},n.htmlText=function(t,e,i,n,s,o){if(void 0===s&&(s=!1),null==t||0==t.length)return"";var a="<font style='";return e&&0<e.length&&(a+="font-family:"+e+";"),0<i&&(a+="font-size:"+i+"px;"),n&&0<n.length&&(a+="color:"+n+";"),s&&(a+="font-weight:bold;"),o&&0<o.length&&(a+="' href='"+o),a+="'>"+t+"</font>"},n.htmlImg=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1);var n="<img src='"+t+"'";return-1==e&&-1==i||(n+=" style='",-1!=e&&(n+="width:"+e+"px;"),-1!=i&&(n+="height:"+i+"px;"),n+="'"),n+=" />"},n.htmlImg2=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1);var n="<img skin='"+t;return-1!=e&&(n+="' width='"+e),-1!=i&&(n+="' height='"+i),n+="' />"},n.htmlTex2=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1);var n="<tex skin='"+t;return-1!=e&&(n+="' width='"+e),-1!=i&&(n+="' height='"+i),n+="' />"},n.htmlClip=function(t,e,i,n,s){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=-1),void 0===s&&(s=-1);var o="<clip skin='"+t+"' clipX='"+e+"' clipY='"+i;return-1!=n&&(o+="' width='"+n),-1!=s&&(o+="' height='"+s),o+="' />"},n.createLink=function(t,e){return StringUtils.getFormat("<span href='{0}'>{1}</span>",[e,t])},n.createColorHerf=function(t,e,i){return n.htmlText(t,null,0,e,!1,i)},n.createColor=function(t,e){return n.htmlText(t,null,0,e,!1,null)},n.createSizeColor=function(t,e,i){return n.htmlText(t,null,e,i,!1,null)},n.createCmd=function(t,e){var i={};return i.text=t,e&&(i.color=e),i},__static(n,["SPACE",function(){return this.SPACE="&nbsp;"}]),n}(),GateModuleDock=function(t){function e(){e.__super.call(this)}__class(e,"gateModule.zwc.engine.core.controls.dock.GateModuleDock",GProto);var i=e.prototype;return i.addModule=function(t){gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleHash_.has(t.name)||(gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleHash_.put(t.name,t),gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleNames_.push(t.name),gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleArray_.push(t),gateModule.zwc.engine.core.controls.dock.GateModuleDock._subProxyHash_.put(t.id,[]))},i.takeModule=function(t){return gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleHash_.take(t)},i.removeModule=function(t){var e=gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleHash_.remove(t),i=gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleArray_.indexOf(e);-1!=i&&(gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleArray_.splice(i,1),gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleNames_.splice(i,1))},i.addSubProxy=function(t){var e;t.oid;gateModule.zwc.engine.core.controls.dock.GateModuleDock._subProxyHash_.has(t.oid)?e=gateModule.zwc.engine.core.controls.dock.GateModuleDock._subProxyHash_.take(t.oid):(e=new Array,gateModule.zwc.engine.core.controls.dock.GateModuleDock._subProxyHash_.put(t.oid,e)),-1==e.indexOf(t)&&e.push(t)},i.removeSubProxy=function(t){var e=gateModule.zwc.engine.core.controls.dock.GateModuleDock._subProxyHash_.take(t.oid);if(e){var i=e.indexOf(t);-1!=i&&e.splice(i,1)}},i.sendToModules=function(t){for(var e,i,n,s,o=t.geters,a=0,r=o.length;a<r;){if(i=o[a],!(e=this.takeModule(i)).lock&&"gateModule.zwc.engine.core.controls.dock.MainNetworkModule"!=i){if(e.subHandler(t),n=gateModule.zwc.engine.core.controls.dock.GateModuleDock._subProxyHash_.take(i))for(var l=0,h=n.length;l<h;){if(s=n[l],Engine.isDebugMode)s.lock||s.subHandler(t);else try{s.lock||s.subHandler(t)}catch(t){console.log(t)}l++}e.isCallExecute&&e.executeEndHandler(t)}a++}MsgDock.recover(t)},i.sendToSubs=function(t){this.sendToModules(t)},i.sendToTotalModule=function(t){this.sendToModules(t)},i.sendToService=function(t){var e,i,n=this.takeModule("gateModule.zwc.engine.core.controls.dock.MainNetworkModule");if(n&&!n.lock)for(var s=0,o=(e=gateModule.zwc.engine.core.controls.dock.GateModuleDock._subProxyHash_.take("gateModule.zwc.engine.core.controls.dock.MainNetworkModule")).length;s<o;)!(i=e[s]).lock&&Asswc.enabled&&i.subHandler(t),s++},__getset(1,e,"modules",function(){return gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleArray_},gateModule.zwc.engine.core.protos.GProto._$SET_modules),__getset(1,e,"moduleNames",function(){return gateModule.zwc.engine.core.controls.dock.GateModuleDock._moduleNames_},gateModule.zwc.engine.core.protos.GProto._$SET_moduleNames),e.getInstance=function(){return gateModule.zwc.engine.core.controls.dock.GateModuleDock._inteance_||(gateModule.zwc.engine.core.controls.dock.GateModuleDock._inteance_=new e),gateModule.zwc.engine.core.controls.dock.GateModuleDock._inteance_},e.setup=function(t,e){MainNetworkModule.getInstance().register(),null!=e&&MainNetworkModule.getInstance().addSubToNetworkModule(e);for(var i=0;i<t.length;i++){var n=new t[i];null!=n&&gateModule.zwc.engine.core.controls.dock.GateModuleDock.getInstance().addModule(n)}},e._inteance_=null,e._moduleNames_=[],__static(e,["_moduleHash_",function(){return this._moduleHash_=new Hash},"_moduleArray_",function(){return this._moduleArray_=new Array},"_subProxyHash_",function(){return this._subProxyHash_=new Hash}]),e}(),Message=function(t){function e(){this._geters_=null,this._actionOrder_=null,this._messageType_=0,this._sender_=null,this._isDisposed=!1,this._isRevived,e.__super.call(this)}__class(e,"gateModule.zwc.engine.core.controls.dock.Message",t);var i=e.prototype;return Laya.imps(i,{"gateModule.zwc.saiman.interfaces.dock.IMessage":!0}),i.send=function(){return!!this.checkFromat()&&(MsgDock.getInstance().send(this),!0)},i.checkFromat=function(){return null!=this._actionOrder_&&null!=this._geters_&&0!=this._geters_.length},i.setup=function(t,e,i,n,s){void 0===s&&(s=0),null==n&&(n="DefaultModule"),this._actionOrder_=t,this._geters_=e,this._messageType_=s,this._sender_=n,this.proto=i},i.recover=function(){MsgDock.recover(this)},i.dispose=function(){t.prototype.dispose.call(this),this._actionOrder_=null,this._geters_=null,this._id_=null,this._messageType_=0,this._proto_=null,this._oid_=null,this._sender_=null,this._isDisposed=!0},i.revive=function(){this._isDisposed=!1,this._actionOrder_=null,this._geters_=null,this._id_=null,this._messageType_=0,this._proto_=null,this._oid_=null,this._sender_=null},i.toString=function(){var t=ClassUtil.getQualifiedClassName(this),e="";return e+="["+t.substr(t.indexOf("::")+2,t.length)+" "+this.id+"] \n{\n",e+=" messageType="+this.messageType+" \n",e+=" actionOrder="+this.actionOrder+" \n",e+=" sender="+this.sender+" \n",2!=this.messageType?e+=" geters="+this.geters+" \n}":e+=" geters=total_module \n}\n",e},__getset(0,i,"geters",function(){return this._geters_}),__getset(0,i,"isRevived",function(){return this._isRevived}),__getset(0,i,"messageType",function(){return this._messageType_}),__getset(0,i,"sender",function(){return this._sender_}),__getset(0,i,"actionOrder",function(){return this._actionOrder_}),__getset(0,i,"isDisposed",function(){return this._isDisposed}),e.checkMessageFromat=function(t){return t.checkFromat()},e.sendToModule=function(t,e,i,n){var s=MsgDock.produce();s.setup(t,e,i,n,1),MsgDock.getInstance().send(s)},e.sendToTotalModule=function(t,e,i){var n=MsgDock.produce();n.setup(t,GateModuleDock.moduleNames,e,i,2),MsgDock.getInstance().send(n)},e.sendToService=function(t,e,i){var n=MsgDock.produce();null==e&&(e=MsgConst.SEND_TO_SOCKET.toString()),n.setup(e,["gateModule.zwc.engine.core.controls.dock.MainNetworkModule"],t,i,3),MsgDock.getInstance().send(n)},e}(GProto),Resource=function(t){function r(){r.__super.call(this),this._$1__id=++r._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(r._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,ResourceManager.currentResourceManager&&ResourceManager.currentResourceManager.addResource(this)}__class(r,"laya.resource.Resource",EventDispatcher);var e=r.prototype;return Laya.imps(e,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),e._setUrl=function(t){var e;this._url!==t&&(this._url&&((e=r._urlResourcesMap[this._url]).splice(e.indexOf(this),1),0===e.length&&delete r._urlResourcesMap[this._url]),t&&((e=r._urlResourcesMap[t])||(r._urlResourcesMap[t]=e=[]),e.push(this)),this._url=t)},e._getGroup=function(){return this._group},e._setGroup=function(t){var e;this._group!==t&&(this._group&&((e=r._groupResourcesMap[this._group]).splice(e.indexOf(this),1),0===e.length&&delete r._groupResourcesMap[this._group]),t&&((e=r._groupResourcesMap[t])||(r._groupResourcesMap[t]=e=[]),e.push(this)),this._group=t)},e._addReference=function(){this._referenceCount++},e._removeReference=function(){this._referenceCount--},e._clearReference=function(){this._referenceCount=0},e._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},e.recreateResource=function(){this.completeCreate()},e.disposeResource=function(){},e.activeResource=function(t){void 0===t&&(t=!1),this._lastUseFrameCount=Stat.loopCount,!this._destroyed&&this.__loaded&&(this._released||t)&&this.recreateResource()},e.releaseResource=function(t){return void 0===t&&(t=!1),!(!t&&this.lock)&&(!(this._released&&!t)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},e.onAsynLoaded=function(t,e,i){throw new Error("Resource: must override this function!")},e.destroy=function(){var t;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete r._idResourcesMap[this.id],this._url&&((t=r._urlResourcesMap[this._url])&&(t.splice(t.indexOf(this),1),0===t.length&&delete r._urlResourcesMap[this.url]),Loader.clearRes(this._url),this.__loaded||RunDriver.cancelLoadByUrl(this._url)),this._group&&((t=r._groupResourcesMap[this._group]).splice(t.indexOf(this),1),0===t.length&&delete r._groupResourcesMap[this.url]))},e.completeCreate=function(){this._released=!1,this.event("recovered",this)},e.dispose=function(){this.destroy()},__getset(0,e,"memorySize",function(){return this._memorySize},function(t){var e=t-this._memorySize;this._memorySize=t,this.resourceManager&&this.resourceManager.addSize(e)}),__getset(0,e,"_loaded",null,function(t){this.__loaded=t}),__getset(0,e,"loaded",function(){return this.__loaded}),__getset(0,e,"id",function(){return this._$1__id}),__getset(0,e,"destroyed",function(){return this._destroyed}),__getset(0,e,"group",function(){return this._getGroup()},function(t){this._setGroup(t)}),__getset(0,e,"resourceManager",function(){return this._resourceManager}),__getset(0,e,"url",function(){return this._url}),__getset(0,e,"released",function(){return this._released}),__getset(0,e,"referenceCount",function(){return this._referenceCount}),r.getResourceByID=function(t){return r._idResourcesMap[t]},r.getResourceByURL=function(t,e){return void 0===e&&(e=0),r._urlResourcesMap[t][e]},r.getResourceCountByURL=function(t){return r._urlResourcesMap[t].length},r.destroyUnusedResources=function(t){var e;if(t){var i=r._groupResourcesMap[t];if(i)for(var n=i.slice(),s=0,o=n.length;s<o;s++)(e=n[s]).lock||0!==e._referenceCount||e.destroy()}else for(var a in r._idResourcesMap)(e=r._idResourcesMap[a]).lock||0!==e._referenceCount||e.destroy()},r._uniqueIDCounter=0,r._idResourcesMap={},r._urlResourcesMap={},r._groupResourcesMap={},r}(),MiniLoader=function(t){function u(){u.__super.call(this)}return __class(u,"laya.bd.mini.MiniLoader",EventDispatcher),u.prototype.load=function(t,e,i,n,s){void 0===i&&(i=!0),void 0===s&&(s=!1);var o=this;if(o._url=t){if(0===(t=URL.customFormat(t)).indexOf("data:image")?o._type=e="image":o._type=e||(e=o.getTypeFromUrl(o._url)),o._cache=i,o._data=null,!s&&Loader.loadedMap[URL.formatURL(t)])return o._data=Loader.loadedMap[URL.formatURL(t)],this.event("progress",1),void this.event("complete",o._data);if(null!=Loader.parserMap[e])return o._customParse=!0,void(Loader.parserMap[e]instanceof laya.utils.Handler?Loader.parserMap[e].runWith(this):Loader.parserMap[e].call(null,this));var a=BMiniAdapter.getUrlEncode(t,e),r=Utils.getFileExtension(t);if(-1!=u._fileTypeArr.indexOf(r))BMiniAdapter.EnvConfig.load.call(this,t,e,i,n,s);else{if(BMiniAdapter.isZiYu&&MiniFileMgr.ziyuFileData[t]){var l=MiniFileMgr.ziyuFileData[t];return void o.onLoaded(l)}if(MiniFileMgr.getFileInfo(t)){var h=MiniFileMgr.getFileInfo(t);h.encoding=null==h.encoding?"ascii":h.encoding,MiniFileMgr.readFile(t,h.encoding,new Handler(u,u.onReadNativeCallBack,[a,t,e,i,n,s,o]),t)}else{if(MiniFileMgr.isLocalNativeFile(t))return void MiniFileMgr.read(t,a,new Handler(u,u.onReadNativeCallBack,[a,t,e,i,n,s,o]));var c=URL.formatURL(t);-1!=c.indexOf("http://usr/")||-1==c.indexOf("http://")&&-1==c.indexOf("https://")?MiniFileMgr.readFile(t,a,new Handler(u,u.onReadNativeCallBack,[a,t,e,i,n,s,o]),t):BMiniAdapter.EnvConfig.load.call(o,t,e,i,n,s)}}}else o.onLoaded(null)},u.onReadNativeCallBack=function(t,e,i,n,s,o,a,r,l){var h;(void 0===n&&(n=!0),void 0===o&&(o=!1),void 0===r&&(r=0),r)?1==r&&BMiniAdapter.EnvConfig.load.call(a,e,i,n,s,o):(h="json"==i||"atlas"==i?BMiniAdapter.getJson(l.data):"xml"==i?Utils.parseXMLFromString(l.data):l.data,!BMiniAdapter.isZiYu&&BMiniAdapter.isPosMsgYu,a.onLoaded(h))},__static(u,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),u}(),MiniSound=function(t){function o(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,o.__super.call(this)}__class(o,"laya.bd.mini.MiniSound",EventDispatcher);var e=o.prototype;return e.load=function(t){t=URL.formatURL(t),this.url=t,this.readyUrl=t,o._audioCache[this.readyUrl]?this.event("complete"):BMiniAdapter.autoCacheFile&&MiniFileMgr.getFileInfo(t)?this.onDownLoadCallBack(t,0):BMiniAdapter.autoCacheFile?MiniFileMgr.downOtherFiles(t,Handler.create(this,this.onDownLoadCallBack,[t]),t):this.onDownLoadCallBack(t,0)},e.onDownLoadCallBack=function(t,e){if(e)this.event("error");else{var i;if(BMiniAdapter.autoCacheFile){var n=MiniFileMgr.getFileInfo(t).md5;i=MiniFileMgr.getFileNativePath(n),this._sound=o._createSound(),this._sound.src=this.url=i}else this._sound=o._createSound(),this._sound.src=t;this._sound.onCanplay(o.bindToThis(this.onCanPlay,this)),this._sound.onError(o.bindToThis(this.onError,this))}},e.onError=function(t){try{console.log("-----1---------------minisound-----id:"+o._id),console.log(t)}catch(t){console.log("-----2---------------minisound-----id:"+o._id),console.log(t)}this.event("error"),this._sound.offError(null)},e.onCanPlay=function(){this.loaded=!0,this.event("complete"),this._sound.offCanplay(null)},e.play=function(t,e){var i;if(void 0===t&&(t=0),void 0===e&&(e=0),this.url==SoundManager._tMusic?(o._musicAudio||(o._musicAudio=o._createSound()),i=o._musicAudio):o._audioCache[this.readyUrl]?i=o._audioCache[this.readyUrl]._sound:(i=o._createSound(),o._audioCache[this.readyUrl]=this),!i)return null;if(BMiniAdapter.autoCacheFile&&MiniFileMgr.getFileInfo(this.url)){var n=MiniFileMgr.getFileInfo(this.url).md5;i.src=this.url=MiniFileMgr.getFileNativePath(n)}else i.src=this.url;var s=new MiniSoundChannel(i,this);return s.url=this.url,s.loops=e,s.loop=0===e,s.startTime=t,s.play(),SoundManager.addChannel(s),s},e.dispose=function(){var t=o._audioCache[this.readyUrl];t&&(t.src="",t._sound&&(t._sound.destroy(),t._sound=null,t=null),delete o._audioCache[this.readyUrl])},__getset(0,e,"duration",function(){return this._sound.duration}),o._createSound=function(){return o._id++,BMiniAdapter.window.swan.createInnerAudioContext()},o.bindToThis=function(t,e){return t.bind(e)},o._musicAudio=null,o._id=0,o._audioCache={},o}(),SoundChannel=function(t){function e(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.completeHandler=null,e.__super.call(this)}__class(e,"laya.media.SoundChannel",EventDispatcher);var i=e.prototype;return i.play=function(){},i.stop=function(){},i.pause=function(){},i.resume=function(){},i.__runComplete=function(t){t&&t.run()},__getset(0,i,"volume",function(){return 1},function(t){}),__getset(0,i,"position",function(){return 0}),__getset(0,i,"duration",function(){return 0}),e}(),MsgDock=function(t){function e(){e.__super.call(this)}return __class(e,"gateModule.zwc.engine.core.controls.dock.MsgDock",Hash),e.prototype.send=function(t){1==t.messageType?GateModuleDock.getInstance().sendToModules(t):2==t.messageType?GateModuleDock.getInstance().sendToTotalModule(t):3==t.messageType&&GateModuleDock.getInstance().sendToService(t)},e.getInstance=function(){return null==gateModule.zwc.engine.core.controls.dock.MsgDock._inteance_&&(gateModule.zwc.engine.core.controls.dock.MsgDock._inteance_=new e),gateModule.zwc.engine.core.controls.dock.MsgDock._inteance_},e.recover=function(t){e.RecoverMessages.length<50?e.RecoverMessages.push(t):t.dispose()},e.produce=function(){var t=e.RecoverMessages.length?e.RecoverMessages.shift():new Message;return t&&t.revive(),t.id=Asswc.getSoleId(),t},e._inteance_=null,e._moduleArray_=null,e._moduleNames_=null,__static(e,["RecoverMessages",function(){return this.RecoverMessages=new Array},"_moduleHash_",function(){return this._moduleHash_=new Hash},"_subProxyHash_",function(){return this._subProxyHash_=new Hash}]),e}(),LoaderManager=function(t){var d;function _(){this.retryNum=1,this.retryDelay=0,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},_.__super.call(this);for(var t=0;t<this._maxPriority;t++)this._resInfos[t]=[]}__class(_,"laya.net.LoaderManager",EventDispatcher);var e=_.prototype;return e.create=function(t,i,e,n,s,o,a,r){if(void 0===o&&(o=1),void 0===a&&(a=!0),t instanceof Array){var l=t,h=l.length,c=0;if(e)var u=Handler.create(e.caller,e.method,e.args,!1);for(var d=0;d<h;d++){var _=l[d];"string"==typeof _&&(_=l[d]={url:_}),_.progress=0}for(d=0;d<h;d++){_=l[d];var f=e?Handler.create(null,m,[_],!1):null,p=e||i?Handler.create(null,g,[_]):null;this._create(_.url,p,f,_.clas||n,_.params||s,_.priority||o,a,_.group||r)}function g(t,e){c++,t.progress=1,c===h&&i&&i.run()}function m(t,e){t.progress=e;for(var i=0,n=0;n<h;n++){i+=l[n].progress}var s=i/h;u.runWith(s)}return!0}return this._create(t,i,e,n,s,o,a,r)},e._create=function(e,i,t,n,s,o,a,r){void 0===o&&(o=1),void 0===a&&(a=!0);var l=URL.formatURL(e),h=this.getRes(l);if(h)!h.hasOwnProperty("loaded")||h.loaded?(t&&t.runWith(1),i&&i.run()):i&&Laya.loader._createListener(e,i.caller,i.method,i.args,!0,!1);else{var c=Utils.getFileExtension(e),u=_.createMap[c];if(!u)throw new Error("LoaderManager:unknown file("+e+") extension with: "+c+".");n||(n=u[0]);var d=u[1];if("atlas"==c)this.load(e,i,t,d,o,a);else{n===Texture&&(d="htmlimage"),(h=n?new n:null).hasOwnProperty("_loaded")&&(h._loaded=!1),h._setUrl(e),r&&h._setGroup(r),this._createLoad(h,e,Handler.create(null,function(t){h&&!h.destroyed&&t&&h.onAsynLoaded.call(h,e,t,s),i&&i.run();Laya.loader.event(e)}),t,d,o,!1,r,!0),a&&this.cacheRes(l,h)}}return h},e.load=function(t,e,i,n,s,o,a,r){var l=this;if(void 0===s&&(s=1),void 0===o&&(o=!0),void 0===r&&(r=!1),t instanceof Array)return this._loadAssets(t,e,i,n,s,o,a);var h=Loader.getRes(t);if(null!=h)Laya.timer.frameOnce(1,null,function(){i&&i.runWith(1),e&&e.runWith(h),l._loaderCount||l.event("complete")});else{var c=_._resMap[t];c?(e&&c._createListener("complete",e.caller,e.method,e.args,!1,!1),i&&c._createListener("progress",i.caller,i.method,i.args,!1,!1)):((c=this._infoPool.length?this._infoPool.pop():new d).url=t,c.type=n,c.cache=o,c.group=a,c.ignoreCache=r,e&&c.on("complete",e.caller,e.method,e.args),i&&c.on("progress",i.caller,i.method,i.args),_._resMap[t]=c,s=s<this._maxPriority?s:this._maxPriority-1,this._resInfos[s].push(c),this._next())}return this},e._createLoad=function(t,e,i,n,s,o,a,r,l){var h=this;if(void 0===o&&(o=1),void 0===a&&(a=!0),void 0===l&&(l=!1),e instanceof Array)return this._loadAssets(e,i,n,s,o,a,r);var c=Loader.getRes(e);if(null!=c)Laya.timer.frameOnce(1,null,function(){n&&n.runWith(1),i&&i.runWith(c),h._loaderCount||h.event("complete")});else{var u=_._resMap[e];u?(i&&u._createListener("complete",i.caller,i.method,i.args,!1,!1),n&&u._createListener("progress",n.caller,n.method,n.args,!1,!1)):((u=this._infoPool.length?this._infoPool.pop():new d).url=e,u.clas=t,u.type=s,u.cache=a,u.group=r,u.ignoreCache=l,i&&u.on("complete",i.caller,i.method,i.args),n&&u.on("progress",n.caller,n.method,n.args),_._resMap[e]=u,o=o<this._maxPriority?o:this._maxPriority-1,this._resInfos[o].push(u),this._next())}return this},e._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var t=0;t<this._maxPriority;t++)for(var e=this._resInfos[t];0<e.length;){var i=e.shift();if(i)return this._doLoad(i)}this._loaderCount||this.event("complete")}},e._doLoad=function(e){this._loaderCount++;var i=this._loaders.length?this._loaders.pop():new Loader;i.on("complete",null,s),i.on("progress",null,function(t){e.event("progress",t)}),i.on("error",null,function(t){s(null)});var n=this;function s(t){i.offAll(),i._data=null,i._customParse=!1,n._loaders.push(i),n._endLoad(e,t instanceof Array?[t]:t),n._loaderCount--,n._next()}i._class=e.clas,i.load(e.url,e.type,e.cache,e.group,e.ignoreCache)},e._endLoad=function(t,e){var i=t.url;if(null==e){var n=this._failRes[i]||0;if(n<this.retryNum)return console.warn("[warn]Retry to load:",i),this._failRes[i]=n+1,void Laya.timer.once(this.retryDelay,this,this._addReTry,[t],!1);console.warn("[error]Failed to load:",i),this.event("error",i)}this._failRes[i]&&(this._failRes[i]=0),delete _._resMap[i],t.event("complete",e),t.offAll(),this._infoPool.push(t)},e._addReTry=function(t){this._resInfos[this._maxPriority-1].push(t),this._next()},e.clearRes=function(t,e){void 0===e&&(e=!1),Loader.clearRes(t,e)},e.getRes=function(t){return Loader.getRes(t)},e.cacheRes=function(t,e){Loader.cacheRes(t,e)},e.clearTextureRes=function(t){Loader.clearTextureRes(t)},e.setGroup=function(t,e){Loader.setGroup(t,e)},e.clearResByGroup=function(t){Loader.clearResByGroup(t)},e.clearUnLoaded=function(){for(var t=0;t<this._maxPriority;t++){for(var e=this._resInfos[t],i=e.length-1;-1<i;i--){var n=e[i];n&&(n.offAll(),this._infoPool.push(n))}e.length=0}this._loaderCount=0,_._resMap={}},e.cancelLoadByUrls=function(t){if(t)for(var e=0,i=t.length;e<i;e++)this.cancelLoadByUrl(t[e])},e.cancelLoadByUrl=function(t){for(var e=0;e<this._maxPriority;e++)for(var i=this._resInfos[e],n=i.length-1;-1<n;n--){var s=i[n];s&&s.url===t&&(i[n]=null,s.offAll(),this._infoPool.push(s))}_._resMap[t]&&delete _._resMap[t]},e._loadAssets=function(t,i,a,e,n,s,o){void 0===n&&(n=1),void 0===s&&(s=!0);for(var r=t.length,l=0,h=0,c=[],u=!0,d=0;d<r;d++){var _=t[d];"string"==typeof _&&(_={url:_,type:e,size:1,priority:n}),_.size||(_.size=1),_.progress=0,h+=_.size,c.push(_);var f=a?Handler.create(null,m,[_],!1):null,p=i||a?Handler.create(null,g,[_]):null;this.load(_.url,p,f,_.type,_.priority||1,s,_.group||o)}function g(t,e){l++,t.progress=1,e||(u=!1),l===r&&i&&i.runWith(u)}function m(t,e){if(null!=a){t.progress=e;for(var i=0,n=0;n<c.length;n++){var s=c[n];i+=s.size*s.progress}var o=i/h;a.runWith(o)}}return this},_.cacheRes=function(t,e){Loader.cacheRes(t,e)},_._resMap={},__static(_,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),_.__init$=function(){d=function(t){function e(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,e.__super.call(this)}return __class(e,"",EventDispatcher),e}()},_}(),Notice=function(t){function o(){o.__super.call(this)}return __class(o,"laya.debug.tools.Notice",EventDispatcher),o.notify=function(t,e){o.I.event(t,e)},o.listen=function(t,e,i,n,s){void 0===s&&(s=!1),s&&o.cancel(t,e,i),o.I.on(t,e,i,n)},o.cancel=function(t,e,i){o.I.off(t,e,i)},__static(o,["I",function(){return this.I=new o}]),o}(),AudioSound=function(t){function a(){this.url=null,this.audio=null,this.loaded=!1,a.__super.call(this)}__class(a,"laya.media.h5audio.AudioSound",EventDispatcher);var e=a.prototype;return e.dispose=function(){var t=a._audioCache[this.url];Pool.clearBySign("audio:"+this.url),t&&(Render.isConchApp||(t.src=""),delete a._audioCache[this.url])},e.load=function(t){var e;if(t=URL.formatURL(t),(this.url=t)==SoundManager._tMusic?(a._initMusicAudio(),(e=a._musicAudio).src!=t&&(a._audioCache[e.src]=null,e=null)):e=a._audioCache[t],e&&2<=e.readyState)this.event("complete");else{e||(e=t==SoundManager._tMusic?(a._initMusicAudio(),a._musicAudio):Browser.createElement("audio"),(a._audioCache[t]=e).src=t),e.addEventListener("canplaythrough",n),e.addEventListener("error",s);var i=this;(this.audio=e).load?e.load():s()}function n(){o(),i.loaded=!0,i.event("complete")}function s(){e.load=null,o(),i.event("error")}function o(){e.removeEventListener("canplaythrough",n),e.removeEventListener("error",s)}},e.play=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=0),!this.url)return null;var i,n;if(!(i=this.url==SoundManager._tMusic?a._musicAudio:a._audioCache[this.url]))return null;n=Pool.getItem("audio:"+this.url),Render.isConchApp?n||((n=Browser.createElement("audio")).src=this.url):this.url==SoundManager._tMusic?(a._initMusicAudio(),(n=a._musicAudio).src=this.url):n=n||i.cloneNode(!0);var s=new AudioSoundChannel(n);return s.url=this.url,s.loops=e,s.startTime=t,s.play(),SoundManager.addChannel(s),s},__getset(0,e,"duration",function(){var t;return(t=a._audioCache[this.url])?t.duration:0}),a._initMusicAudio=function(){a._musicAudio||(a._musicAudio||(a._musicAudio=Browser.createElement("audio")),Render.isConchApp||Browser.document.addEventListener("mousedown",a._makeMusicOK))},a._makeMusicOK=function(){Browser.document.removeEventListener("mousedown",a._makeMusicOK),a._musicAudio.src?a._musicAudio.play():(a._musicAudio.src="",a._musicAudio.load())},a._audioCache={},a._musicAudio=null,a}(),Sound=function(t){function e(){e.__super.call(this)}__class(e,"laya.media.Sound",EventDispatcher);var i=e.prototype;return i.load=function(t){},i.play=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),null},i.dispose=function(){},__getset(0,i,"duration",function(){return 0}),e}(),WebAudioSound=function(t){function s(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,s.__super.call(this)}__class(s,"laya.media.webaudio.WebAudioSound",EventDispatcher);var e=s.prototype;return e.load=function(t){var e=this;if(t=URL.formatURL(t),this.url=t,this.audioBuffer=s._dataCache[t],this.audioBuffer)this._loaded(this.audioBuffer);else if(s.e.on("loaded:"+t,this,this._loaded),s.e.on("err:"+t,this,this._err),!s.__loadingSound[t]){s.__loadingSound[t]=!0;var i=new Browser.window.XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){e._disposed?e._removeLoadEvents():(e.data=i.response,s.buffs.push({buffer:e.data,url:e.url}),s.decode())},i.onerror=function(t){e._err()},i.send()}},e._err=function(){if(this._removeLoadEvents(),s.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var t,e,i,n=0;for(t=(e=this.__toPlays).length,n=0;n<t;n++)(i=e[n])[2]&&!i[2].isStopped&&i[2].event("error");this.__toPlays.length=0}},e._loaded=function(t){this._removeLoadEvents(),this._disposed||(this.audioBuffer=t,s._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete"))},e._removeLoadEvents=function(){s.e.off("loaded:"+this.url,this,this._loaded),s.e.off("err:"+this.url,this,this._err)},e.__playAfterLoaded=function(){if(this.__toPlays){var t,e,i,n=0;for(t=(e=this.__toPlays).length,n=0;n<t;n++)(i=e[n])[2]&&!i[2].isStopped&&this.play(i[0],i[1],i[2]);this.__toPlays.length=0}},e.play=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i=i||new WebAudioSoundChannel,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([t,e,i]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),i.url=this.url,i.loops=e,i.audioBuffer=this.audioBuffer,i.startTime=t,i.play(),SoundManager.addChannel(i),i},e.dispose=function(){this._disposed=!0,delete s._dataCache[this.url],delete s.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},__getset(0,e,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),s.decode=function(){s.buffs.length<=0||s.isDecoding||(s.isDecoding=!0,s.tInfo=s.buffs.shift(),s.ctx.decodeAudioData(s.tInfo.buffer,s._done,s._fail))},s._done=function(t){s.e.event("loaded:"+s.tInfo.url,t),s.isDecoding=!1,s.decode()},s._fail=function(){s.e.event("err:"+s.tInfo.url,null),s.isDecoding=!1,s.decode()},s._playEmptySound=function(){if(null!=s.ctx)try{var t=s.ctx.createBufferSource();t.buffer=s._miniBuffer,t.connect(s.ctx.destination),t.start(0,0,0)}catch(t){console.log("声音出错了，_playEmptySound")}},s._unlock=function(){s._unlocked||(s._playEmptySound(),"running"==s.ctx.state&&(Browser.document.removeEventListener("mousedown",s._unlock,!0),Browser.document.removeEventListener("touchend",s._unlock,!0),Browser.document.removeEventListener("touchstart",s._unlock,!0),s._unlocked=!0))},s.initWebAudio=function(){"running"!=s.ctx.state&&(s._unlock(),Browser.document.addEventListener("mousedown",s._unlock,!0),Browser.document.addEventListener("touchend",s._unlock,!0),Browser.document.addEventListener("touchstart",s._unlock,!0))},s._dataCache={},s.buffs=[],s.isDecoding=!1,s._unlocked=!1,s.tInfo=null,s.__loadingSound={},__static(s,["window",function(){return this.window=Browser.window},"webAudioEnabled",function(){return this.webAudioEnabled=s.window.AudioContext||s.window.webkitAudioContext||s.window.mozAudioContext},"ctx",function(){return this.ctx=s.webAudioEnabled?new(s.window.AudioContext||s.window.webkitAudioContext||s.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=s.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new EventDispatcher}]),s}(),HttpRequest=function(t){function e(){this._responseType=null,this._data=null,e.__super.call(this),this._http=new Browser.window.XMLHttpRequest}__class(e,"laya.net.HttpRequest",EventDispatcher);var i=e.prototype;return i.send=function(t,e,i,n,s){void 0===i&&(i="get"),void 0===n&&(n="text"),this._responseType=n,this._data=null;var o=this,a=this._http;if(a.open(i,t,!0),s)for(var r=0;r<s.length;r++)a.setRequestHeader(s[r++],s[r]);else Render.isConchApp||(e&&"string"!=typeof e?a.setRequestHeader("Content-Type","application/json"):a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));a.responseType="arraybuffer"!==n?"text":"arraybuffer",a.onerror=function(t){o._onError(t)},a.onabort=function(t){o._onAbort(t)},a.onprogress=function(t){o._onProgress(t)},a.onload=function(t){o._onLoad(t)},a.send(e)},i._onProgress=function(t){t&&t.lengthComputable&&this.event("progress",t.loaded/t.total)},i._onAbort=function(t){this.error("Request was aborted by user")},i._onError=function(t){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},i._onLoad=function(t){var e=this._http,i=void 0!==e.status?e.status:200;200===i||204===i||0===i?this.complete():this.error("["+e.status+"]"+e.statusText+":"+e.responseURL)},i.error=function(t){this.clear(),this.event("error",t)},i.complete=function(){this.clear();var e=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=Utils.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(t){e=!1,this.error(t.message)}e&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},i.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null},__getset(0,i,"url",function(){return this._http.responseURL}),__getset(0,i,"http",function(){return this._http}),__getset(0,i,"data",function(){return this._data}),e}(),Loader=function(t){function R(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,R.__super.call(this)}__class(R,"laya.net.Loader",EventDispatcher);var e=R.prototype;return e.formatURL=function(t){return t},e.load=function(t,e,i,n,s){if(void 0===i&&(i=!0),void 0===s&&(s=!1),this._url=t,Asset.setAtlasVersion(t),0===t.indexOf("data:image")?this._type=e="image":(this._type=e||(e=this.getTypeFromUrl(t)),t=URL.formatURL(t)),this._cache=i,this._data=null,!s&&R.loadedMap[t])return this._data=R.loadedMap[t],this.event("progress",1),void this.event("complete",this._data);if(n&&R.setGroup(t,n),null!=R.parserMap[e])return this._customParse=!0,void(R.parserMap[e]instanceof laya.utils.Handler?R.parserMap[e].runWith(this):R.parserMap[e].call(null,this));var o,a=this.formatURL(t);if("image"===e||"htmlimage"===e||"nativeimage"===e)return this._loadImage(a);if("sound"===e)return this._loadSound(a);if("ttf"===e)return this._loadTTF(a);switch(e){case"atlas":case"plf":o="json";break;case"font":o="xml";break;case"pkm":o="arraybuffer";break;default:o=e}R.preLoadedMap[t]?this.onLoaded(R.preLoadedMap[t]):(this._http||(this._http=new HttpRequest,this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded)),this._http.send(a,null,"get",o))},e.getTypeFromUrl=function(t){var e=Utils.getFileExtension(t);return e?R.typeMap[e]:(console.warn("Not recognize the resources suffix",t),"text")},e._loadTTF=function(t){t=URL.formatURL(t);var e=new TTFLoader;e.complete=Handler.create(this,this.onLoaded),e.load(t)},e._loadImage=function(e){e=URL.formatURL(e);var i,t=this;function n(){i.onload=null,i.onerror=null,delete R.imgCache[e]}var s=function(){n(),t.onLoaded(i)},o=function(){n(),t.event("error","Load image failed")};"nativeimage"===this._type?((i=new Browser.window.Image).crossOrigin="",i.onload=s,i.onerror=o,i.src=e,R.imgCache[e]=i):new HTMLImage.create(e,{onload:s,onerror:o,onCreate:function(t){i=t,R.imgCache[e]=t}})},e._loadSound=function(t){var e=new SoundManager._soundClass,i=this;function n(){e.offAll()}e.on("complete",this,function(){n(),i.onLoaded(e)}),e.on("error",this,function(){n(),e.dispose(),i.event("error","Load sound failed")}),e.load(t)},e.onProgress=function(t){"atlas"===this._type?this.event("progress",.3*t):this.event("progress",t)},e.onError=function(t){this.event("error",t)},e.onLoaded=function(t){var e=this._type;if("plf"==e)this.parsePLFData(t),this.complete(t);else if("image"===e){var i=new Texture(t);i.url=this._url,this.complete(i)}else if("sound"===e||"htmlimage"===e||"nativeimage"===e)this.complete(t);else if("atlas"===e){if(!t.src&&!t._setContext){if(!this._data){if((this._data=t).meta&&t.meta.image){var n=t.meta.image.split(","),s=0<=this._url.indexOf("/")?"/":"\\",o=this._url.lastIndexOf(s),a=0<=o?this._url.substr(0,o+1):"",r="";Render.isConchApp||-1!=this._url.indexOf("?")&&(r="?"+this._url.split("?")[1]);for(var l=0,h=n.length;l<h;l++)n[l]=a+n[l]+r}else n=[this._url.replace(".json",".png")];n.reverse(),t.toLoads=n,t.pics=[]}return this.event("progress",.3+1/n.length*.6),this._loadImage(this.formatURL(n.pop()))}if(this._data.pics.push(t),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this.formatURL(this._data.toLoads.pop()));var c=this._data.frames,u=this._url.split("?")[0],d=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:u.substring(0,u.lastIndexOf("."))+"/",_=this._data.pics,f=URL.formatURL(this._url),p=R.atlasMap[f]||(R.atlasMap[f]=[]);p.dir=d;var g=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var m in g=parseFloat(this._data.meta.scale),c){var b,y=c[m],v=_[y.frame.idx?y.frame.idx:0],w=URL.formatURL(d+m);v.scaleRate=g,b=Texture.create(v,y.frame.x,y.frame.y,y.frame.w,y.frame.h,y.spriteSourceSize.x,y.spriteSourceSize.y,y.sourceSize.w,y.sourceSize.h),R.cacheRes(w,b),b.url=w,p.push(w)}else for(m in c)v=_[(y=c[m]).frame.idx?y.frame.idx:0],w=URL.formatURL(d+m),R.cacheRes(w,Texture.create(v,y.frame.x,y.frame.y,y.frame.w,y.frame.h,y.spriteSourceSize.x,y.spriteSourceSize.y,y.sourceSize.w,y.sourceSize.h)),R.loadedMap[w].url=w,p.push(w);Asset.setAtlasMap(p,f),delete this._data.pics,this.complete(this._data)}else if("font"==e){if(!t.src)return this._data=t,this.event("progress",.5),this._loadImage(this.formatURL(this._url.replace(".fnt",".png")));var x=new BitmapFont;x.parseFont(this._data,t);var C=this._url.split(".fnt")[0].split("/"),S=C[C.length-1];Text.registerBitmapFont(S,x),this._data=x,this.complete(this._data)}else if("pkm"==e){var T=HTMLImage.create(t,this._url),L=new Texture(T);L.url=this._url,this.complete(L)}else this.complete(t)},e.parsePLFData=function(t){var e,i,n;for(e in t)switch(n=t[e],e){case"json":case"text":for(i in n)R.preLoadedMap[URL.formatURL(i)]=n[i];break;default:for(i in n)R.preLoadedMap[URL.formatURL(i)]=n[i]}},e.complete=function(t){this._data=t,this._customParse?this.event("loaded",t instanceof Array?[t]:t):(R._loaders.push(this),R._isWorking||R.checkNext())},e.endLoad=function(t){t&&(this._data=t),this._cache&&R.cacheRes(this._url,this._data),this._customParse=!1,this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},__getset(0,e,"url",function(){return this._url}),__getset(0,e,"data",function(){return this._data}),__getset(0,e,"cache",function(){return this._cache}),__getset(0,e,"type",function(){return this._type}),R.checkNext=function(){R._isWorking=!0;for(var t=Browser.now();R._startIndex<R._loaders.length;)if(Browser.now(),R._loaders[R._startIndex].endLoad(),R._startIndex++,Browser.now()-t>R.maxTimeOut)return console.warn("loader callback cost a long time:"+(Browser.now()-t)+" url="+R._loaders[R._startIndex-1].url),void Laya.timer.frameOnce(1,null,R.checkNext);R._loaders.length=0,R._startIndex=0,R._isWorking=!1},R.clearRes=function(t,e){void 0===e&&(e=!1),t=URL.formatURL(t);var i=R.getAtlas(t);if(i){for(var n=0,s=i.length;n<s;n++){var o=i[n],a=R.getRes(o);delete R.loadedMap[o],a&&a.destroy(e)}i.length=0,delete R.atlasMap[t],delete R.loadedMap[t]}else{var r=R.loadedMap[t];r&&(delete R.loadedMap[t],r instanceof laya.resource.Texture&&r.bitmap&&r.destroy(e))}},R.clearTextureRes=function(t){t=URL.formatURL(t);var e=laya.net.Loader.getAtlas(t),i=e&&0<e.length?laya.net.Loader.getRes(e[0]):laya.net.Loader.getRes(t);i&&i.bitmap&&(Render.isConchApp&&!Render.isConchWebGL?i.bitmap.source.releaseTexture&&i.bitmap.source.releaseTexture():null==i.bitmap._atlaser&&i.bitmap.releaseResource(!0))},R.getRes=function(t){return R.loadedMap[URL.formatURL(t)]},R.getAtlas=function(t){return R.atlasMap[URL.formatURL(t)]},R.cacheRes=function(t,e){t=URL.formatURL(t),null!=R.loadedMap[t]?console.warn("Resources already exist,is repeated loading:",t):R.loadedMap[t]=e},R.setGroup=function(t,e){R.groupMap[e]||(R.groupMap[e]=[]),R.groupMap[e].push(t)},R.clearResByGroup=function(t){if(R.groupMap[t]){var e=R.groupMap[t],i=0,n=e.length;for(i=0;i<n;i++)R.clearRes(e[i]);e.length=0}},R.TEXT="text",R.JSON="json",R.XML="xml",R.BUFFER="arraybuffer",R.IMAGE="image",R.SOUND="sound",R.ATLAS="atlas",R.FONT="font",R.TTF="ttf",R.PLF="plf",R.PKM="pkm",R.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},R.parserMap={},R.groupMap={},R.maxTimeOut=100,R.loadedMap={},R.preLoadedMap={},R.atlasMap={},R._loaders=[],R._isWorking=!1,R._startIndex=0,R.imgCache={},R}(),Texture=function(t){function L(t,e){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,this.lastTime=0,L.__super.call(this),t&&null!=t._addReference&&t._addReference(),this.setTo(t,e)}__class(L,"laya.resource.Texture",EventDispatcher);var e=L.prototype;return e._setUrl=function(t){this.url=t},e.setTo=function(t,e){if(t instanceof window.HTMLElement){var i=HTMLCanvas.create("2D",t);this.bitmap=i}else this.bitmap=t;if(this.uv=e||L.DEF_UV,t){this._w=t.width,this._h=t.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var n=this;if(this._loaded)RunDriver.addToAtlas&&RunDriver.addToAtlas(n);else{var s=t;s instanceof laya.resource.HTMLImage&&s.image&&s.image.addEventListener("load",function(t){RunDriver.addToAtlas&&RunDriver.addToAtlas(n)},!1)}}},e.active=function(){this.bitmap&&this.bitmap.activeResource()},e.destroy=function(t){if(void 0===t&&(t=!1),this.bitmap&&0<this.bitmap.referenceCount){var e=this.bitmap;t?(Render.isConchApp&&e.source&&e.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,e.dispose(),e._clearReference()):(e._removeReference(),0==e.referenceCount&&(Render.isConchApp&&e.source&&e.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,e.dispose())),this.url&&this===Laya.loader.getRes(this.url)&&Laya.loader.clearRes(this.url,t),this._loaded=!1}},e.load=function(t){var e=this;this._loaded=!1,t=URL.customFormat(t);var i=this.bitmap||(this.bitmap=HTMLImage.create(t));i&&i._addReference();var n=this;i.onload=function(){i.onload=null,n._loaded=!0,e.sourceWidth=e._w=i.width,e.sourceHeight=e._h=i.height,n.event("loaded",this),RunDriver.addToAtlas&&RunDriver.addToAtlas(n)}},e.addTextureToAtlas=function(t){RunDriver.addTextureToAtlas(this)},e.getPixels=function(t,e,i,n){if(Render.isConchApp){var s=this.bitmap;if(s.source&&s.source.getImageData){var o=s.source.getImageData(t,e,i,n),a=new Uint8Array(o);return Array.from(a)}return null}return Render.isWebGL?RunDriver.getTexturePixels(this,t,e,i,n):(Browser.canvas.size(i,n),Browser.canvas.clear(),Browser.context.drawTexture(this,-t,-e,this.width,this.height,0,0),Browser.context.getImageData(0,0,i,n).data)},e.onAsynLoaded=function(t,e){e&&e._addReference(),this.setTo(e,this.uv)},__getset(0,e,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),__getset(0,e,"loaded",function(){return this._loaded}),__getset(0,e,"released",function(){return!this.bitmap||this.bitmap.released}),__getset(0,e,"width",function(){return this._w?this._w:this.uv&&this.uv!==L.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(t){this._w=t,this.sourceWidth||(this.sourceWidth=t)}),__getset(0,e,"repeat",function(){return!Render.isWebGL||!this.bitmap||this.bitmap.repeat},function(t){t&&Render.isWebGL&&this.bitmap&&(this.bitmap.repeat=t)&&(this.bitmap.enableMerageInAtlas=!1)}),__getset(0,e,"height",function(){return this._h?this._h:this.uv&&this.uv!==L.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(t){this._h=t,this.sourceHeight||(this.sourceHeight=t)}),__getset(0,e,"isLinearSampling",function(){return!Render.isWebGL||9728!=this.bitmap.minFifter},function(t){!t&&Render.isWebGL&&(t||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),L.moveUV=function(t,e,i){for(var n=0;n<8;n+=2)i[n]+=t,i[n+1]+=e;return i},L.create=function(t,e,i,n,s,o,a,r,l){void 0===o&&(o=0),void 0===a&&(a=0),void 0===r&&(r=0),void 0===l&&(l=0);var h=t instanceof laya.resource.Texture,c=h?t.uv:L.DEF_UV,u=h?t.bitmap:t,d=RunDriver.isAtlas(u);if(d){var _=u._atlaser,f=t._atlasID;if(-1==f)throw new Error("create texture error");u=_._inAtlasTextureBitmapValue[f],c=_._inAtlasTextureOriUVValue[f]}var p=new L(u,null);u.width&&e+n>u.width&&(n=u.width-e),u.height&&i+s>u.height&&(s=u.height-i),p.width=n,p.height=s,p.offsetX=o,p.offsetY=a,p.sourceWidth=r||n,p.sourceHeight=l||s;var g=1/u.width,m=1/u.height;e*=g,i*=m,n*=g,s*=m;var b=p.uv[0],y=p.uv[1],v=p.uv[4],w=p.uv[5],x=v-b,C=w-y,S=L.moveUV(c[0],c[1],[e,i,e+n,i,e+n,i+s,e,i+s]);p.uv=[b+S[0]*x,y+S[1]*C,v-(1-S[2])*x,y+S[3]*C,v-(1-S[4])*x,w-(1-S[5])*C,b+S[6]*x,w-(1-S[7])*C],d&&p.addTextureToAtlas();var T=u.scaleRate;return T&&1!=T?(p.sourceWidth/=T,p.sourceHeight/=T,p.width/=T,p.height/=T,p.scaleRate=T,p.offsetX/=T,p.offsetY/=T):p.scaleRate=1,p},L.createFromTexture=function(t,e,i,n,s){var o=t.scaleRate;1!=o&&(e*=o,i*=o,n*=o,s*=o);var a=Rectangle.TEMP.setTo(e-t.offsetX,i-t.offsetY,n,s),r=a.intersection(L._rect1.setTo(0,0,t.width,t.height),L._rect2);if(!r)return null;var l=L.create(t,r.x,r.y,r.width,r.height,r.x-a.x,r.y-a.y,n,s);return l.bitmap._removeReference(),l},L.DEF_UV=[0,0,1,0,1,1,0,1],L.INV_UV=[0,1,1,1,1,0,0,0],L._rect1=new Rectangle,L._rect2=new Rectangle,L}(),Asset=function(s){function r(t,e){this._isDestroy=!1,this._url=null,this._reference=0,this._loaded=!1,this._inFrame=!1,this._content=null,this._test=!1,r.__super.call(this),r._asset_prop!=e&&console.log("abstract class!!!"),this._url=t}__class(r,"laya.ui.Asset",s);var t=r.prototype;return t._retain=function(){this._isDestroy&&console.log("asset has been destroyed!!!"),this._reference++},t._release=function(){this._isDestroy&&console.log("asset has been destroyed!!!"),this._reference--,this._test&&console.log(" >>>Asset.release = "+this._reference+" <<<"+this._url),this._reference<0&&console.log(" >>> Asset error release <<< "+this._url),0==this._reference&&(delete r._map[this._url],r.isClearTexture(this._url)&&0==r.hasAtlas(this._url)&&r._addDestroy(this._url),this._url=null,this._content=null,this.offAll(),this._isDestroy=!0)},t.getRes=function(){return this._isDestroy&&console.log("asset has been destroyed!!!"),this._content},t.on=function(t,e,i,n){return this._isDestroy&&console.log("asset has been destroyed!!!"),this.once(t,e,i,n)},t.once=function(t,e,i,n){return this._isDestroy&&console.log("asset has been destroyed!!!"),this._loaded&&!this._inFrame&&(this._inFrame=!0,Laya.timer.callLater(this,this._eventComplete)),s.prototype.once.call(this,t,e,i,n)},t._eventComplete=function(){this._inFrame=!1,this._loaded=!0,this._content=Laya.loader.getRes(this.url),this._content&&this._content instanceof laya.resource.Texture&&this._content.bitmap&&(this._content.bitmap.enableMerageInAtlas=!1),this.event("complete",this)},__getset(0,t,"loaded",function(){return this._isDestroy&&console.log("asset has been destroyed!!!"),this._loaded}),__getset(0,t,"referenceTimes",function(){return this._reference}),__getset(0,t,"url",function(){return this._isDestroy&&console.log("asset has been destroyed!!!"),this._url}),__getset(0,t,"isDestroy",function(){return this._isDestroy}),r.retain=function(t){if(!t||r.hasAtlas(t))return null;var e=r._map[t];return null==e&&(r._destroyMap[t]&&(delete r._destroyMap[t],r._destroyQueue.splice(r._destroyQueue.indexOf(t),1),0==r._destroyQueue.length&&Laya.timer.clear(r,r._destroyThread)),e=r._map[t]=new r(t,r._asset_prop)),e._retain(),e},r.release=function(t){var e="string"==typeof t?r._map[t]:t;e?e._release():"string"==typeof t&&r.isClearTexture(t)&&r.hasAtlas(t)},r.has=function(t){return null!=r._map[t]},r.hasLoaded=function(t){var e=r._map[t];return e&&e.loaded},r.faseDestroy=function(t){void 0===t&&(t=200),0<r._destroyQueue.length&&Laya.timer.loop(t,r,r._destroyThread,null,!0)},r._addDestroy=function(t){r._destroyMap[t]||(r._destroyMap[t]=!0,r._destroyQueue.push(t),0<r._destroyQueue.length&&Laya.timer.loop(10,r,r._destroyThread))},r._destroyThread=function(){var t=r._destroyQueue.shift();delete r._destroyMap[t],0==r._destroyQueue.length&&Laya.timer.clear(r,r._destroyThread);var e=r._map[t];e&&0<e.referenceTimes||Loader.getRes(t)&&Laya.loader.clearRes(t)},r.isClearTexture=function(t){var e;if(t)for(var i in r.noClearTexture)if(e=r.noClearTexture[i],-1<t.indexOf(e))return!1;return!0},r.setAtlasVersion=function(t){if(t&&0<t.indexOf(".atlas")){var e=URL.formatURL(t),i=e.indexOf("?");0<i&&(r.atlasVersion[e.slice(0,i)]=e.slice(i,e.length))}},r.setAtlasMap=function(t,e){if(0<t.length&&r.isClearTexture(e)){var i=r.recordAtlasMap[e];i&&i.length==t.length||(r.recordAtlasMap[e]=t)}},r.hasAtlas=function(t){if(t&&0<t.indexOf("layouts")){var e=t.lastIndexOf("/"),i=t.slice(0,e)+".atlas",n=URL.formatURL(i),s=(URL.formatURL(t),r.atlasVersion[n]);s&&n.indexOf("?")<0&&(n+=s);var o=r.recordAtlasMap[n];if(o&&0<=o.indexOf(URL.formatURL(t)))return!0;var a=Loader.getAtlas(n);if(a&&0<=a.indexOf(URL.formatURL(t)))return o||(r.recordAtlasMap[n]=a.slice()),!0}return!1},r._destroyQueue=[],r._destroyMap={},r.atlasVersion={},r.testReg=null,__static(r,["_asset_prop",function(){return this._asset_prop=r.getSoleProperty()},"_map",function(){return this._map=Object.create(null)},"recordAtlasMap",function(){return this.recordAtlasMap=new Object},"getSoleProperty",function(){return this.getSoleProperty=function(){if("function"==typeof Symbol)return Symbol;return function(t){void 0===t&&(t=void 0),0,Math.random()}}()},"noClearTexture",function(){return this.noClearTexture=["/layouts/grids","/layouts/mainframe","/images/actorhead","/images/boss/ichead","/layouts/basic_ui","/layouts/base_ui2","/layouts/gui","/images/actorsmallhead","/images/textures/","layouts/mainicons_mix"]}]),r}(EventDispatcher),MiniLoader$1=function(t){function g(){g.__super.call(this)}return __class(g,"laya.wx.mini.MiniLoader",EventDispatcher,"MiniLoader$1"),g.prototype.load=function(t,e,i,n,s){void 0===i&&(i=!0),void 0===s&&(s=!1);var o=this;if(0===(o._url=t).indexOf("data:image")?o._type=e="image":o._type=e||(e=o.getTypeFromUrl(t)),o._cache=i,o._data=null,!s&&Loader.loadedMap[URL.formatURL(t)])return o._data=Loader.loadedMap[URL.formatURL(t)],this.event("progress",1),void this.event("complete",o._data);if(null!=Loader.parserMap[e])return o._customParse=!0,void(Loader.parserMap[e]instanceof laya.utils.Handler?Loader.parserMap[e].runWith(this):Loader.parserMap[e].call(null,this));var a=MiniAdpter.getUrlEncode(t,e),r=Utils.getFileExtension(t);if(-1!=g._fileTypeArr.indexOf(r))MiniAdpter.EnvConfig.load.call(this,t,e,i,n,s);else{if(MiniAdpter.isZiYu&&!MiniFileMgr$1.ziyuFileData[t]&&(t=URL.formatURL(t)),MiniAdpter.isZiYu&&MiniFileMgr$1.ziyuFileData[t]){var l=MiniFileMgr$1.ziyuFileData[t];return void o.onLoaded(l)}if(MiniFileMgr$1.getFileInfo(t)){var h=MiniFileMgr$1.getFileInfo(t);h.encoding=null==h.encoding?"utf8":h.encoding,MiniFileMgr$1.readFile(t,h.encoding,new Handler(g,g.onReadNativeCallBack,[a,t,e,i,n,s,o]),t)}else{if(MiniFileMgr$1.isLocalNativeFile(t)){if(MiniAdpter.subNativeFiles&&0==MiniAdpter.subNativeheads.length)for(var c in MiniAdpter.subNativeFiles){var u=MiniAdpter.subNativeFiles[c];MiniAdpter.subNativeheads=MiniAdpter.subNativeheads.concat(u);for(var d=0;d<u.length;d++)MiniAdpter.subMaps[u[d]]=c+"/"+u[d]}if(MiniAdpter.subNativeFiles&&-1!=t.indexOf("/")){var _=t.split("/")[0]+"/";if(_&&-1!=MiniAdpter.subNativeheads.indexOf(_)){var f=MiniAdpter.subMaps[_];t=t.replace(_,f)}}return void MiniFileMgr$1.read(t,a,new Handler(g,g.onReadNativeCallBack,[a,t,e,i,n,s,o]))}var p=t;-1!=(t=URL.formatURL(t)).indexOf("http://")||-1!=t.indexOf("https://")&&!MiniAdpter.AutoCacheDownFile?MiniAdpter.EnvConfig.load.call(o,p,e,i,n,s):(h=MiniFileMgr$1.getFileInfo(t))?(h.encoding=null==h.encoding?"utf8":h.encoding,MiniFileMgr$1.readFile(h.url,a,new Handler(g,g.onReadNativeCallBack,[a,t,e,i,n,s,o]),t)):"image"==o.type||"htmlimage"==o.type?MiniAdpter.EnvConfig.load.call(o,t,e,i,n,s):-1==(t=URL.formatURL(t)).indexOf("http://")&&-1==t.indexOf("https://")||MiniFileMgr$1.isLocalNativeFile(t)?MiniFileMgr$1.readFile(t,a,new Handler(g,g.onReadNativeCallBack,[a,t,e,i,n,s,o]),t):MiniFileMgr$1.downFiles(t,a,new Handler(g,g.onReadNativeCallBack,[a,t,e,i,n,s,o]),t,!0)}}},g.onReadNativeCallBack=function(t,e,i,n,s,o,a,r,l){var h;(void 0===n&&(n=!0),void 0===o&&(o=!1),void 0===r&&(r=0),r)?1==r&&(console.log("-----------本地加载失败，尝试外网加载----"),MiniAdpter.EnvConfig.load.call(a,e,i,n,s,o)):(h="json"==i||"atlas"==i?MiniAdpter.getJson(l.data):"xml"==i?Utils.parseXMLFromString(l.data):l.data,!MiniAdpter.isZiYu&&MiniAdpter.isPosMsgYu&&"arraybuffer"!=i&&MiniAdpter.window.wx&&MiniAdpter.window.wx.postMessage({url:e,data:h,isLoad:"filedata"}),a.onLoaded(h))},__static(g,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),g}(),MiniSound$1=function(t){function l(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,l.__super.call(this)}__class(l,"laya.wx.mini.MiniSound",EventDispatcher,"MiniSound$1");var e=l.prototype;return e.load=function(t){if(MiniFileMgr$1.isLocalNativeFile(t)){if(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))if(""!=MiniFileMgr$1.loadPath)t=t.split(MiniFileMgr$1.loadPath)[1];else{var e=""!=URL.rootPath?URL.rootPath:URL.basePath;""!=e&&(t=t.split(e)[1])}}else t=URL.formatURL(t);if(this.url=t,this.readyUrl=t,l._audioCache[this.readyUrl])this.event("complete");else if(MiniAdpter.autoCacheFile&&MiniFileMgr$1.getFileInfo(t))this.onDownLoadCallBack(t,0);else if(MiniAdpter.autoCacheFile)if(MiniFileMgr$1.isLocalNativeFile(t)){var i=t;if(""!=(e=""!=URL.rootPath?URL.rootPath:URL.basePath)&&(t=t.split(e)[1]),t||(t=i),MiniAdpter.subNativeFiles&&0==MiniAdpter.subNativeheads.length)for(var n in MiniAdpter.subNativeFiles){var s=MiniAdpter.subNativeFiles[n];MiniAdpter.subNativeheads=MiniAdpter.subNativeheads.concat(s);for(var o=0;o<s.length;o++)MiniAdpter.subMaps[s[o]]=n+"/"+s[o]}if(MiniAdpter.subNativeFiles&&-1!=t.indexOf("/")){var a=t.split("/")[0]+"/";if(a&&-1!=MiniAdpter.subNativeheads.indexOf(a)){var r=MiniAdpter.subMaps[a];t=t.replace(a,r)}}this.onDownLoadCallBack(t,0)}else MiniFileMgr$1.downOtherFiles(t,Handler.create(this,this.onDownLoadCallBack,[t]),t);else this.onDownLoadCallBack(t,0)},e.onDownLoadCallBack=function(t,e){if(e)this.event("error");else{var i;if(MiniAdpter.autoCacheFile){var n=MiniFileMgr$1.getFileInfo(t);if(n&&n.md5){var s=n.md5;i=MiniFileMgr$1.getFileNativePath(s)}else i=t;this._sound=l._createSound(),this._sound.src=this.url=i}else this._sound=l._createSound(),this._sound.src=t;this._sound.onCanplay(l.bindToThis(this.onCanPlay,this)),this._sound.onError(l.bindToThis(this.onError,this))}},e.onError=function(t){try{console.log("-----1---------------minisound-----id:"+l._id),console.log(t)}catch(t){console.log("-----2---------------minisound-----id:"+l._id),console.log(t)}this.event("error"),this._sound.offError(null)},e.onCanPlay=function(){this.loaded=!0,this.event("complete"),this._sound.offCanplay(null)},e.play=function(t,e){var i;if(void 0===t&&(t=0),void 0===e&&(e=0),i=this.url==SoundManager._tMusic?(l._musicAudio||(l._musicAudio=l._createSound()),l._musicAudio):l._audioCache[this.readyUrl]?l._audioCache[this.readyUrl]._sound:l._createSound(),MiniAdpter.autoCacheFile&&MiniFileMgr$1.getFileInfo(this.url)){var n=MiniFileMgr$1.getFileInfo(this.url).md5;i.src=this.url=MiniFileMgr$1.getFileNativePath(n)}else i.src=this.url;var s=new MiniSoundChannel$1(i,this);return s.url=this.url,s.loops=e,s.loop=0===e,s.startTime=t,s.play(),SoundManager.addChannel(s),s},e.dispose=function(){var t=l._audioCache[this.readyUrl];t&&(t.src="",t._sound&&(t._sound.destroy(),t._sound=null,t=null),delete l._audioCache[this.readyUrl])},__getset(0,e,"duration",function(){return this._sound.duration}),l._createSound=function(){return l._id++,MiniAdpter.window.wx.createInnerAudioContext()},l.bindToThis=function(t,e){return t.bind(e)},l._musicAudio=null,l._id=0,l._audioCache={},l}(),AutoBitmap=function(e){function f(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,f.__super.call(this)}__class(f,"laya.ui.AutoBitmap",e);var t=f.prototype;return t.destroy=function(){e.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},t._setChanged=function(){this._isChanged||(this._isChanged=!0,Laya.timer.callLater(this,this.changeSource))},t.changeSource=function(){this._isChanged=!1;var t=this._source;if(t&&t.bitmap){var e=this.width,i=this.height,n=this._sizeGrid,s=t.sourceWidth,o=t.sourceHeight;if(!n||s===e&&o===i)this.clear(),this.drawTexture(t,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,e,i);else{t.$_GID||(t.$_GID=Utils.getGID());var a=t.$_GID+"."+e+"."+i+"."+n.join(".");if(Utils.isOKCmdList(WeakObject.I.get(a)))return void(this.cmds=WeakObject.I.get(a));this.clear();var r=n[0],l=n[1],h=n[2],c=n[3],u=n[4],d=!1;if(e==s&&(c=l=0),i==o&&(r=h=0),e<c+l){var _=e;d=!0,e=c+l,this.save(),this.clipRect(0,0,_,i)}c&&r&&this.drawTexture(f.getTexture(t,0,0,c,r),0,0,c,r),l&&r&&this.drawTexture(f.getTexture(t,s-l,0,l,r),e-l,0,l,r),c&&h&&this.drawTexture(f.getTexture(t,0,o-h,c,h),0,i-h,c,h),l&&h&&this.drawTexture(f.getTexture(t,s-l,o-h,l,h),e-l,i-h,l,h),r&&this.drawBitmap(u,f.getTexture(t,c,0,s-c-l,r),c,0,e-c-l,r),h&&this.drawBitmap(u,f.getTexture(t,c,o-h,s-c-l,h),c,i-h,e-c-l,h),c&&this.drawBitmap(u,f.getTexture(t,0,r,c,o-r-h),0,r,c,i-r-h),l&&this.drawBitmap(u,f.getTexture(t,s-l,r,l,o-r-h),e-l,r,l,i-r-h),this.drawBitmap(u,f.getTexture(t,c,r,s-c-l,o-r-h),c,r,e-c-l,i-r-h),d&&this.restore(),this.autoCacheCmd&&!Render.isConchApp&&WeakObject.I.set(a,this.cmds)}this._repaint()}},t.drawBitmap=function(t,e,i,n,s,o){void 0===s&&(s=0),void 0===o&&(o=0),s<.1||o<.1||(!t||e.width==s&&e.height==o?this.drawTexture(e,i,n,s,o):this.fillTexture(e,i,n,s,o))},t.clear=function(t){void 0===t&&(t=!0),e.prototype.clear.call(this,!1)},__getset(0,t,"sizeGrid",function(){return this._sizeGrid},function(t){this._sizeGrid=t,this._setChanged()}),__getset(0,t,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(t){this._width!=t&&(this._width=t,this._setChanged())}),__getset(0,t,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(t){this._height!=t&&(this._height=t,this._setChanged())}),__getset(0,t,"source",function(){return this._source},function(t){t?(this._source=t,this._setChanged()):(this._source=null,this.clear())}),f.getTexture=function(t,e,i,n,s){n<=0&&(n=1),s<=0&&(s=1),t.$_GID||(t.$_GID=Utils.getGID());var o=t.$_GID+"."+e+"."+i+"."+n+"."+s,a=WeakObject.I.get(o);return a&&a.source||(a=Texture.createFromTexture(t,e,i,n,s),WeakObject.I.set(o,a)),a},f}(Graphics),CSSStyle=function(t){function d(t){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,d.__super.call(this),this._padding=d._PADDING,this._spacing=d._SPACING,this._aligns=d._ALIGNS,this._font=Font.EMPTY,this._ower=t}__class(d,"laya.display.css.CSSStyle",t);var e=d.prototype;return e.destroy=function(){this._ower=null,this._font=null,this._rect=null},e.inherit=function(t){this._font=t._font,this._spacing=t._spacing===d._SPACING?d._SPACING:t._spacing.slice(),this.lineHeight=t.lineHeight},e._widthAuto=function(){return 0!=(262144&this._type)},e.widthed=function(t){return 0!=(8&this._type)},e._calculation=function(t,e){if(e.indexOf("%")<0)return!1;var n=this._ower,s=n.parent,o=this._rect;function a(t,e,i){return t*i[0]+e*i[1]+i[2]}function i(t){var e=s.width,i=n.width;o.width&&(n.width=a(e,i,o.width)),o.height&&(n.height=a(e,i,o.height)),o.left&&(n.x=a(e,i,o.left)),o.top&&(n.y=a(e,i,o.top))}null===o&&(s._getCSSStyle()._type|=524288,s.on("resize",this,i),this._rect=o={input:{}});var r=e.split(" ");return r[0]=parseFloat(r[0])/100,1==r.length?r[1]=r[2]=0:(r[1]=parseFloat(r[1])/100,r[2]=parseFloat(r[2])),o[t]=r,o.input[t]=e,i(),!0},e.heighted=function(t){return 0!=(8192&this._type)},e.size=function(t,e){var i=this._ower,n=!1;-1!==t&&t!=this._ower.width&&(this._type|=8,this._ower.width=t,n=!0),-1!==e&&e!=this._ower.height&&(this._type|=8192,this._ower.height=e,n=!0),n&&(i._layoutLater(),524288&this._type&&i.event("resize",this))},e._getAlign=function(){return this._aligns[0]},e._getValign=function(){return this._aligns[1]},e._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},e._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new Font(this._font))},e.render=function(t,e,i,n){var s=t.width,o=t.height;i-=t.pivotX,n-=t.pivotY,this._bgground&&null!=this._bgground.color&&e.ctx.fillRect(i,n,s,o,this._bgground.color),this._border&&this._border.color&&e.drawRect(i,n,s,o,this._border.color.strColor,this._border.size)},e.getCSSStyle=function(){return this},e.cssText=function(t){this.attrs(d.parseOneCSS(t,";"))},e.attrs=function(t){if(t)for(var e=0,i=t.length;e<i;e++){var n=t[e];this[n[0]]=n[1]}},e.setTransform=function(t){"none"===t?this._tf=Style._TF_EMPTY:this.attrs(d.parseOneCSS(t,","))},e.translate=function(t,e){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateX=t,this._tf.translateY=e},e.scale=function(t,e){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=t,this._tf.scaleY=e},e._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},__getset(0,e,"block",t.prototype._$get_block,function(t){t?this._type|=1:this._type&=-2}),__getset(0,e,"valign",function(){return d._valigndef[this._aligns[1]]},function(t){this._aligns===d._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=d._valigndef[t]}),__getset(0,e,"height",null,function(t){if(this._type|=8192,"string"==typeof t){if(this._calculation("height",t))return;t=parseInt(t)}this.size(-1,t)}),__getset(0,e,"width",null,function(t){if(this._type|=8,"string"==typeof t){var e=t.indexOf("auto");if(0<=e&&(this._type|=262144,t=t.substr(0,e)),this._calculation("width",t))return;t=parseInt(t)}this.size(t,-1)}),__getset(0,e,"fontWeight",function(){return this._font.weight},function(t){this._createFont().weight=t}),__getset(0,e,"left",null,function(t){var e=this._ower;if("string"==typeof t){if("center"===t?t="50% -50% 0":"right"===t&&(t="100% -100% 0"),this._calculation("left",t))return;t=parseInt(t)}e.x=t}),__getset(0,e,"_translate",null,function(t){this.translate(t[0],t[1])}),__getset(0,e,"absolute",function(){return 0!=(4&this._type)}),__getset(0,e,"top",null,function(t){var e=this._ower;if("string"==typeof t){if("middle"===t?t="50% -50% 0":"bottom"===t&&(t="100% -100% 0"),this._calculation("top",t))return;t=parseInt(t)}e.y=t}),__getset(0,e,"align",function(){return d._aligndef[this._aligns[0]]},function(t){this._aligns===d._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=d._aligndef[t]}),__getset(0,e,"bold",function(){return this._font.bold},function(t){this._createFont().bold=t}),__getset(0,e,"padding",function(){return this._padding},function(t){this._padding=t}),__getset(0,e,"leading",function(){return this._spacing[1]},function(t){"string"==typeof t&&(t=parseInt(t+"")),this._spacing===d._SPACING&&(this._spacing=[0,0]),this._spacing[1]=t}),__getset(0,e,"lineElement",function(){return 0!=(65536&this._type)},function(t){t?this._type|=65536:this._type&=-65537}),__getset(0,e,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(t){this.lineElement=!1,"right"===t?this._type|=32768:this._type&=-32769}),__getset(0,e,"textDecoration",function(){return this._font.decoration},function(t){this._createFont().decoration=t}),__getset(0,e,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(t){"nowrap"===t&&(this._type|=131072),"none"===t&&(this._type&=-131073)}),__getset(0,e,"background",null,function(t){t?(this._bgground||(this._bgground={}),this._bgground.color=t,this._ower.conchModel&&this._ower.conchModel.bgColor(t),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),__getset(0,e,"wordWrap",function(){return 0==(131072&this._type)},function(t){t?this._type&=-131073:this._type|=131072}),__getset(0,e,"color",function(){return this._font.color},function(t){this._createFont().color=t}),__getset(0,e,"password",function(){return this._font.password},function(t){this._createFont().password=t}),__getset(0,e,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(t){"none"===t?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=t),this._ower.conchModel&&this._ower.conchModel.bgColor(t),this._ower._renderType|=256}),__getset(0,e,"font",function(){return this._font.toString()},function(t){this._createFont().set(t)}),__getset(0,e,"weight",null,function(t){this._createFont().weight=t}),__getset(0,e,"letterSpacing",function(){return this._spacing[0]},function(t){"string"==typeof t&&(t=parseInt(t+"")),this._spacing===d._SPACING&&(this._spacing=[0,0]),this._spacing[0]=t}),__getset(0,e,"fontSize",function(){return this._font.size},function(t){this._createFont().size=t}),__getset(0,e,"italic",function(){return this._font.italic},function(t){this._createFont().italic=t}),__getset(0,e,"fontFamily",function(){return this._font.family},function(t){this._createFont().family=t}),__getset(0,e,"stroke",function(){return this._font.stroke[0]},function(t){this._createFont().stroke===Font._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=t}),__getset(0,e,"strokeColor",function(){return this._font.stroke[1]},function(t){this._createFont().stroke===Font._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=t}),__getset(0,e,"border",function(){return this._border?this._border.value:""},function(t){if("none"!=t){this._border||(this._border={});var e=(this._border.value=t).split(" ");if(this._border.color=Color.create(e[e.length-1]),1==e.length)return this._border.size=1,void(this._border.type="solid");var i=0;0<e[0].indexOf("px")?(this._border.size=parseInt(e[0]),i++):this._border.size=1,this._border.type=e[i],this._ower._renderType|=256}else this._border=null}),__getset(0,e,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(t){t?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==t?null:Color.create(t),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),__getset(0,e,"position",function(){return 4&this._type?"absolute":""},function(t){"absolute"==t?this._type|=4:this._type&=-5}),__getset(0,e,"display",null,function(t){switch(t){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),__getset(0,e,"paddingLeft",function(){return this.padding[3]}),__getset(0,e,"paddingTop",function(){return this.padding[0]}),__getset(0,e,"_scale",null,function(t){this._ower.scale(t[0],t[1])}),__getset(0,e,"_rotate",null,function(t){this._ower.rotation=t}),d.parseOneCSS=function(t,e){for(var i,n=[],s=t.split(e),o=0,a=s.length;o<a;o++){var r=s[o],l=r.indexOf(":"),h=r.substr(0,l).replace(/^\s+|\s+$/g,"");if(0!=h.length){var c=r.substr(l+1).replace(/^\s+|\s+$/g,""),u=[h,c];switch(h){case"italic":case"bold":u[1]="true"==c;break;case"line-height":u[0]="lineHeight",u[1]=parseInt(c);break;case"font-size":u[0]="fontSize",u[1]=parseInt(c);break;case"padding":1<(i=c.split(" ")).length||(i[1]=i[2]=i[3]=i[0]),u[1]=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])];break;case"rotate":u[0]="_rotate",u[1]=parseFloat(c);break;case"scale":i=c.split(" "),u[0]="_scale",u[1]=[parseFloat(i[0]),parseFloat(i[1])];break;case"translate":i=c.split(" "),u[0]="_translate",u[1]=[parseInt(i[0]),parseInt(i[1])];break;default:(u[0]=d._CSSTOVALUE[h])||(u[0]=h)}n.push(u)}}return n},d.parseCSS=function(t,e){for(var i;null!=(i=d._parseCSSRegExp.exec(t));)d.styleSheets[i[1]]=d.parseOneCSS(i[2],";")},d.EMPTY=new d(null),d._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},d._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),d._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},d._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},d.styleSheets={},d.ALIGN_CENTER=1,d.ALIGN_RIGHT=2,d.VALIGN_MIDDLE=1,d.VALIGN_BOTTOM=2,d._CSS_BLOCK=1,d._DISPLAY_NONE=2,d._ABSOLUTE=4,d._WIDTH_SET=8,d._PADDING=[0,0,0,0],d._RECT=[-1,-1,-1,-1],d._SPACING=[0,0],d._ALIGNS=[0,0,0],d.ADDLAYOUTED=512,d._NEWFONT=4096,d._HEIGHT_SET=8192,d._BACKGROUND_SET=16384,d._FLOAT_RIGHT=32768,d._LINE_ELEMENT=65536,d._NOWARP=131072,d._WIDTHAUTO=262144,d._LISTERRESZIE=524288,d}(Style),GraphicsGL=function(t){function e(){e.__super.call(this)}__class(e,"laya.webgl.display.GraphicsGL",Graphics);var i=e.prototype;return i.setShader=function(t){this._saveToCmd(Render.context._setShader,[t])},i.setIBVB=function(t,e,i,n,s,o){this._saveToCmd(Render.context._setIBVB,[t,e,i,n,s,o])},i.drawParticle=function(t,e,i){var n=RunDriver.createParticleTemplate2D(i);n.x=t,n.y=e,this._saveToCmd(Render.context._drawParticle,[n])},e}(),BlurFilter=function(t){function e(t){this.strength=NaN,this.strength_sig2_2sig2_gauss1=[],e.__super.call(this),void 0===t&&(t=4),Render.isWebGL&&WebGLFilter.enable(),this.strength=t,this._action=RunDriver.createFilterAction(16),this._action.data=this}__class(e,"laya.filters.BlurFilter",Filter);var i=e.prototype;return i.callNative=function(t){t.conchModel&&t.conchModel.blurFilter&&t.conchModel.blurFilter(this.strength)},__getset(0,i,"action",function(){return this._action}),__getset(0,i,"type",function(){return 16}),e}(),ColorFilter=function(t){function s(t){s.__super.call(this),t||(t=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var e=0,i=0,n=0;n<20;n++)n%5!=4?this._mat[e++]=t[n]:this._alpha[i++]=t[n];this._action=RunDriver.createFilterAction(32),this._action.data=this}__class(s,"laya.filters.ColorFilter",Filter);var e=s.prototype;return Laya.imps(e,{"laya.filters.IFilter":!0}),e.callNative=function(t){t._$P.cf=this;t.conchModel&&t.conchModel.setFilterMatrix&&t.conchModel.setFilterMatrix(this._mat,this._alpha)},__getset(0,e,"type",function(){return 32}),__getset(0,e,"action",function(){return this._action}),s}(),GlowFilter=function(t){function s(t,e,i,n){this._color=null,s.__super.call(this),this._elements=new Float32Array(9),void 0===e&&(e=4),void 0===i&&(i=6),void 0===n&&(n=6),Render.isWebGL&&WebGLFilter.enable(),this._color=new Color(t),this.blur=Math.min(e,20),this.offX=i,this.offY=n,this._action=RunDriver.createFilterAction(8),this._action.data=this}__class(s,"laya.filters.GlowFilter",Filter);var e=s.prototype;return e.getColor=function(){return this._color._color},e.callNative=function(t){t.conchModel&&t.conchModel.glowFilter&&t.conchModel.glowFilter(this._color.strColor,this._elements[4],this._elements[5],this._elements[6])},__getset(0,e,"type",function(){return 8}),__getset(0,e,"action",function(){return this._action}),__getset(0,e,"offY",function(){return this._elements[6]},function(t){this._elements[6]=t}),__getset(0,e,"offX",function(){return this._elements[5]},function(t){this._elements[5]=t}),__getset(0,e,"blur",function(){return this._elements[4]},function(t){this._elements[4]=t}),s}(),BlurFilterActionGL=function(t){function e(){this.data=null,e.__super.call(this)}__class(e,"laya.filters.webgl.BlurFilterActionGL",FilterActionGL);var i=e.prototype;return i.setValueMix=function(t){t.defines.add(this.data.type)},i.apply3d=function(t,e,i,n,s){var o=t.getValue("bounds"),a=Value2D.create(1,0);a.setFilters([this.data]),Matrix.EMPTY.identity(),i.ctx.drawTarget(t,0,0,o.width,o.height,Matrix.EMPTY,"src",a),a.setFilters(null)},i.setValue=function(t){t.strength=this.data.strength;var e=this.data.strength/3,i=e*e;this.data.strength_sig2_2sig2_gauss1[0]=this.data.strength,this.data.strength_sig2_2sig2_gauss1[1]=i,this.data.strength_sig2_2sig2_gauss1[2]=2*i,this.data.strength_sig2_2sig2_gauss1[3]=1/(2*Math.PI*i),t.strength_sig2_2sig2_gauss1=this.data.strength_sig2_2sig2_gauss1},__getset(0,i,"typeMix",function(){return 16}),e}(),ColorFilterActionGL=function(t){function e(){this.data=null,e.__super.call(this)}__class(e,"laya.filters.webgl.ColorFilterActionGL",FilterActionGL);var i=e.prototype;return Laya.imps(i,{"laya.filters.IFilterActionGL":!0}),i.setValue=function(t){t.colorMat=this.data._mat,t.colorAlpha=this.data._alpha},i.apply3d=function(t,e,i,n,s){var o=t.getValue("bounds"),a=Value2D.create(1,0);a.setFilters([this.data]);var r=Matrix.TEMP;r.identity(),i.ctx.drawTarget(t,0,0,o.width,o.height,r,"src",a)},e}(),GlowFilterActionGL=function(t){function e(){this.data=null,this._initKey=!1,this._textureWidth=0,this._textureHeight=0,e.__super.call(this)}__class(e,"laya.filters.webgl.GlowFilterActionGL",FilterActionGL);var i=e.prototype;return Laya.imps(i,{"laya.filters.IFilterActionGL":!0}),i.setValueMix=function(t){},i.apply3d=function(t,e,i,n,s){var o=t.getValue("bounds");t.addValue("color",this.data.getColor());var a,r=o.width,l=o.height;this._textureWidth=r,this._textureHeight=l;var h=Matrix.TEMP;return h.identity(),(a=Value2D.create(1,0)).setFilters([this.data]),i.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,h,"src",a,null),a=Value2D.create(1,0),i.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,h,"src",a),null},i.setSpriteWH=function(t){this._textureWidth=t.width,this._textureHeight=t.height},i.setValue=function(t){t.u_offsetX=this.data.offX,t.u_offsetY=-this.data.offY,t.u_strength=1,t.u_blurX=this.data.blur,t.u_blurY=this.data.blur,t.u_textW=this._textureWidth,t.u_textH=this._textureHeight,t.u_color=this.data.getColor()},__getset(0,i,"typeMix",function(){return 8}),e.tmpTarget=function(t,e,i,n,s){var o=t.getValue("bounds");t.getValue("out").end();var a=RenderTarget2D.create(o.width,o.height);a.start();var r=t.getValue("color");r&&a.clear(r[0],r[1],r[2],0),t.addValue("tmpTarget",a)},e.startOut=function(t,e,i,n,s){t.getValue("tmpTarget").end();var o=t.getValue("out");o.start();var a=t.getValue("color");a&&o.clear(a[0],a[1],a[2],0)},e.recycleTarget=function(t,e,i,n,s){t.getValue("src");t.getValue("tmpTarget").recycle()},e}(),UIEvent=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.UIEvent",Event),e.SHOW_TIP="showtip",e.HIDE_TIP="hidetip",e}(),Value2D=function(t){function n(t,e){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,n.__super.call(this),this.defines=new ShaderDefines2D,this.position=n._POSITION,this.mainID=t,this.subID=e,this.textureHost=null,this.texture=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=t|e,this._inClassCache=n._cache[this._cacheID],0<t&&!this._inClassCache&&(this._inClassCache=n._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}__class(n,"laya.webgl.shader.d2.value.Value2D",ShaderValue);var e=n.prototype;return e.setValue=function(t){},e.refresh=function(){var t=this.size;return t[0]=RenderState2D.width,t[1]=RenderState2D.height,this.alpha=this.ALPHA*RenderState2D.worldAlpha,this.mmat=RenderState2D.worldMatrix4,this},e._ShaderWithCompile=function(){return Shader.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,Shader2X.create)},e._withWorldShaderDefines=function(){var t=RenderState2D.worldShaderDefines,e=Shader.sharders[this.mainID|this.defines._value|t.getValue()];if(!e){var i,n={};for(i in this.defines.toNameDic())n[i]="";for(i in t.toNameDic())n[i]="";e=Shader.withCompile2D(0,this.mainID,n,this.mainID|this.defines._value|t.getValue(),Shader2X.create)}var s=RenderState2D.worldFilters;if(!s)return e;for(var o,a=s.length,r=0;r<a;r++)(o=s[r])&&o.action.setValue(this);return e},e.upload=function(){var t=RenderState2D;this.alpha=this.ALPHA*t.worldAlpha,RenderState2D.worldMatrix4!==RenderState2D.TEMPMAT4_ARRAY&&this.defines.add(128),WebGL.shaderHighPrecision&&this.defines.add(1024);var e,i=t.worldShaderDefines?this._withWorldShaderDefines():Shader.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=t.width,this.size[1]=t.height,this.mmat=t.worldMatrix4,BaseShader.activeShader!==i?i._shaderValueWidth!==t.width||i._shaderValueHeight!==t.height?(i._shaderValueWidth=t.width,i._shaderValueHeight=t.height):e=i._params2dQuick2||i._make2dQuick2():i._shaderValueWidth!==t.width||i._shaderValueHeight!==t.height?(i._shaderValueWidth=t.width,i._shaderValueHeight=t.height):e=i._params2dQuick1||i._make2dQuick1(),i.upload(this,e)},e.setFilters=function(t){if(this.filters=t)for(var e,i=t.length,n=0;n<i;n++)(e=t[n])&&(this.defines.add(e.type),e.action.setValue(this))},e.clear=function(){this.defines.setValue(this.subID)},e.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.clear()},n._initone=function(t,e){n._typeClass[t]=e,n._cache[t]=[],n._cache[t]._length=0},n.__init__=function(){n._POSITION=[2,5126,!1,4*CONST3D2D.BYTES_PE,0],n._TEXCOORD=[2,5126,!1,4*CONST3D2D.BYTES_PE,2*CONST3D2D.BYTES_PE],n._initone(2,Color2dSV),n._initone(4,PrimitiveSV),n._initone(256,FillTextureSV),n._initone(512,SkinSV),n._initone(1,TextureSV),n._initone(65,TextSV),n._initone(9,TextureSV)},n.create=function(t,e){var i=n._cache[t|e];return i._length?i[--i._length]:new n._typeClass[t|e](e)},n._POSITION=null,n._TEXCOORD=null,n._cache=[],n._typeClass=[],n.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n}(),WebGLContext2D=function(t){var i;function Z(t){this._x=0,this._y=0,this._id=++Z._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,Z.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=Z.MAXCLIPRECT,this.mOutPoint,this._canvas=t,Z._contextcount++,Render.isFlash?(this._ib=IndexBuffer2D.create(35044),GlUtils.fillIBQuadrangle(this._ib,16)):this._ib=IndexBuffer2D.QuadrangleIB,this.clear()}__class(Z,"laya.webgl.canvas.WebGLContext2D",Context);var e=Z.prototype;return e.setIsMainContext=function(){this._isMain=!0},e.clearBG=function(t,e,i,n){var s=WebGL.mainContext;s.clearColor(t,e,i,n),s.clear(16384)},e._getSubmits=function(){return this._submits},e._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var t=0,e=this._submits._length;t<e;t++)this._submits[t].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},e.destroy=function(){--Z._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas=null,this._ib&&this._ib!=IndexBuffer2D.QuadrangleIB&&this._ib.releaseResource()},e.clear=function(){this._submits||(this._other=i.DEFAULT,this._curMat=Matrix.create(),this._vb=VertexBuffer2D.create(-1),this._submits=[],this._save=[SaveMark.Create(this)],this._save.length=10,this._shader2D=new Shader2D,this._triangleMesh=MeshTexture.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=i.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=Z.MAXCLIPRECT,this._curSubmit=Submit.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=DrawStyle.DEFAULT;for(var t=0,e=this._submits._length;t<e;t++)this._submits[t].releaseRender();this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},e.size=function(t,e){if(this._width!=t||this._height!=e)if(0==t||0==e){0!=this._vb._byteLength&&(this._width=t,this._height=e,this._vb.clear(),this._vb.upload());for(var i=0,n=this._submits._length;i<n;i++)this._submits[i].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=t,this._height=e,this._targets&&this._targets.size(t,e),this._canvas.memorySize-=this._canvas.memorySize;0===t&&0===e&&this._releaseMem()},e._getTransformMatrix=function(){return this._curMat},e.translate=function(t,e){0===t&&0===e||(SaveTranslate.save(this),this._curMat.bTransform&&(SaveTransform.save(this),this._curMat.transformPointN(Point.TEMP.setTo(t,e)),t=Point.TEMP.x,e=Point.TEMP.y),this._x+=t,this._y+=e)},e.save=function(){this._save[this._save._length++]=SaveMark.Create(this)},e.restore=function(){var t=this._save._length;if(!(t<1))for(var e=t-1;0<=e;e--){var i=this._save[e];if(i.restore(this),i.isSaveMark())return void(this._save._length=e)}},e._fillText=function(t,e,i,n,s,o,a,r,l,h){void 0===h&&(h=0);var c=this._shader2D,u=this._curSubmit.shaderValue,d=s?FontInContext.create(s):this._other.font;if(AtlasResourceManager.enabled)c.ALPHA!==u.ALPHA&&(c.glTexture=null),DrawText.drawText(this,t,e,this._curMat,d,l||this._other.textAlign,o,a,r,i,n,h);else{this._shader2D.defines.getValue();var _=o?Color.create(o)._color:c.colorAdd;c.ALPHA===u.ALPHA&&_===c.colorAdd&&u.colorAdd===c.colorAdd||(c.glTexture=null,c.colorAdd=_),DrawText.drawText(this,t,e,this._curMat,d,l||this._other.textAlign,o,a,r,i,n,h)}},e.fillWords=function(t,e,i,n,s,o){this._fillText(null,t,e,i,n,s,null,-1,null,o)},e.fillBorderWords=function(t,e,i,n,s,o,a){this._fillBorderText(null,t,e,i,n,s,o,a,null)},e.fillText=function(t,e,i,n,s,o){this._fillText(t,null,e,i,n,s,null,-1,o)},e.strokeText=function(t,e,i,n,s,o,a){this._fillText(t,null,e,i,n,null,s,o||1,a)},e.fillBorderText=function(t,e,i,n,s,o,a,r){this._fillBorderText(t,null,e,i,n,s,o,a,r)},e._fillBorderText=function(t,e,i,n,s,o,a,r,l){if(!AtlasResourceManager.enabled)return this._fillText(t,e,i,n,s,null,a,r||1,l),void this._fillText(t,e,i,n,s,o,null,-1,l);var h=this._shader2D,c=this._curSubmit.shaderValue;h.ALPHA!==c.ALPHA&&(h.glTexture=null);var u=s?(Z._fontTemp.setFont(s),Z._fontTemp):this._other.font;DrawText.drawText(this,t,e,this._curMat,u,l||this._other.textAlign,o,a,r||1,i,n,0)},e.fillRect=function(t,e,i,n,s){var o=this._vb;if(GlUtils.fillRectImgVb(o,this._clipRect,t,e,i,n,Texture.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var a=this._shader2D.fillStyle;s&&(this._shader2D.fillStyle=DrawStyle.create(s));var r=this._shader2D,l=this._curSubmit.shaderValue;if(r.fillStyle!==l.fillStyle||r.ALPHA!==l.ALPHA){r.glTexture=null;var h=this._curSubmit=Submit.createSubmit(this,this._ib,o,(o._byteLength-64)/32*3,Value2D.create(2,0));h.shaderValue.color=r.fillStyle._color._color,h.shaderValue.ALPHA=r.ALPHA,this._submits[this._submits._length++]=h}this._curSubmit._numEle+=6,this._shader2D.fillStyle=a}},e.fillTexture=function(t,e,i,n,s,o,a,r){if(t.loaded&&t.bitmap&&t.source){var l=this._vb,h=t.bitmap.width,c=t.bitmap.height,u=t.uv,d=a.x%t.width,_=a.y%t.height;if(h!=r.w||c!=r.h){if(!r.w&&!r.h)switch(r.oy=r.ox=0,o){case"repeat":r.width=n,r.height=s;break;case"repeat-x":r.width=n,_<0?t.height+_>s?r.height=s:r.height=t.height+_:(r.oy=_,t.height+_>s?r.height=s-_:r.height=t.height);break;case"repeat-y":d<0?t.width+d>n?r.width=n:r.width=t.width+d:(r.ox=d,t.width+d>n?r.width=n-d:r.width=t.width),r.height=s;break;case"no-repeat":d<0?t.width+d>n?r.width=n:r.width=t.width+d:(r.ox=d,t.width+d>n?r.width=n-d:r.width=t.width),_<0?t.height+_>s?r.height=s:r.height=t.height+_:(r.oy=_,t.height+_>s?r.height=s-_:r.height=t.height);break;default:r.width=n,r.height=s}r.w=h,r.h=c,r.uv=[0,0,r.width/h,0,r.width/h,r.height/c,0,r.height/c]}if(e+=r.ox,i+=r.oy,d-=r.ox,_-=r.oy,GlUtils.fillRectImgVb(l,this._clipRect,e,i,r.width,r.height,r.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var f=SubmitTexture.create(this,this._ib,l,(l._byteLength-64)/32*3,Value2D.create(256,0)),p=(this._submits[this._submits._length++]=f).shaderValue;p.textureHost=t;var g=u[0]*h,m=u[1]*c,b=(u[2]-u[0])*h,y=(u[5]-u[3])*c,v=-d/h,w=-_/c;p.u_TexRange[0]=g/h,p.u_TexRange[1]=b/h,p.u_TexRange[2]=m/c,p.u_TexRange[3]=y/c,p.u_offset[0]=v,p.u_offset[1]=w,AtlasResourceManager.enabled&&!this._isMain&&f.addTexture(t,(l._byteLength>>2)-16),(this._curSubmit=f)._renderType=10017,f._numEle+=6}}else this.sprite&&Laya.timer.callLater(this,this._repaintSprite)},e.setShader=function(t){SaveBase.save(this,1048576,this._shader2D,!0),this._shader2D.shader=t},e.setFilters=function(t){SaveBase.save(this,2097152,this._shader2D,!0),this._shader2D.filters=t,this._curSubmit=Submit.RENDERBASE,this._renderKey=0,this._drawCount++},e.drawTexture=function(t,e,i,n,s,o,a){this._drawTextureM(t,e,i,n,s,o,a,null,1)},e.addTextureVb=function(t,e,i){var n=this._curSubmit._vb||this._vb,s=n._byteLength>>2;n.byteLength=s+16<<2;for(var o=n.getFloat32Array(),a=0;a<16;a+=4)o[s++]=t[a]+e,o[s++]=t[a+1]+i,o[s++]=t[a+2],o[s++]=t[a+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),n._upload=!0},e.willDrawTexture=function(t,e){if(!(t.loaded&&t.bitmap&&t.source))return this.sprite&&Laya.timer.callLater(this,this._repaintSprite),0;var i=t.bitmap,n=i.id+this._shader2D.ALPHA*e+10016;if(n==this._renderKey)return n;var s=this._shader2D,o=s.ALPHA,a=this._curSubmit.shaderValue;s.ALPHA*=e,this._renderKey=n,this._drawCount++,s.glTexture=i;var r=this._vb,l=null,h=r._byteLength/32*3;return l=SubmitTexture.create(this,this._ib,r,h,Value2D.create(1,0)),(this._submits[this._submits._length++]=l).shaderValue.textureHost=t,l._renderType=10016,l._preIsSameTextureShader=10016===this._curSubmit._renderType&&s.ALPHA===a.ALPHA,this._curSubmit=l,s.ALPHA=o,n},e.drawTextures=function(t,e,i,n){if(t.loaded&&t.bitmap&&t.source){var s=this._clipRect;if(this._clipRect=Z.MAXCLIPRECT,this._drawTextureM(t,e[0],e[1],t.width,t.height,i,n,null,1)){if(this._clipRect=s,Stat.drawCall++,!(e.length<4)){for(var o=this._curSubmit._vb||this._vb,a=this._curMat.a,r=this._curMat.d,l=2,h=e.length;l<h;l+=2)GlUtils.copyPreImgVb(o,(e[l]-e[l-2])*a,(e[l+1]-e[l-1])*r),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&Laya.timer.callLater(this,this._repaintSprite)},e._drawTextureM=function(t,e,i,n,s,o,a,r,l){if(!t.loaded||!t.source)return this.sprite&&Laya.timer.callLater(this,this._repaintSprite),!1;var h=this._curSubmit._vb||this._vb,c=t.bitmap;e+=o,i+=a,this._drawCount++;var u=c.id+this._shader2D.ALPHA*l+10016;if(u!=this._renderKey){this._renderKey=u;var d=this._curSubmit.shaderValue,_=this._shader2D,f=_.ALPHA;_.ALPHA*=l,_.glTexture=c;var p=this._vb,g=null,m=p._byteLength/32*3;g=SubmitTexture.create(this,this._ib,p,m,Value2D.create(1,0)),(this._submits[this._submits._length++]=g).shaderValue.textureHost=t,g._renderType=10016,g._preIsSameTextureShader=10016===this._curSubmit._renderType&&_.ALPHA===d.ALPHA,this._curSubmit=g,h=this._curSubmit._vb||this._vb,_.ALPHA=f}return!!GlUtils.fillRectImgVb(h,this._clipRect,e,i,n||t.width,s||t.height,t.uv,r||this._curMat,this._x,this._y,0,0)&&(AtlasResourceManager.enabled&&!this._isMain&&this._curSubmit.addTexture(t,(h._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},e._repaintSprite=function(){this.sprite&&this.sprite.repaint()},e._drawText=function(t,e,i,n,s,o,a,r,l,h){var c=t.bitmap;this._drawCount++;var u=c.id+this._shader2D.ALPHA+10016;if(u!=this._renderKey){this._renderKey=u;var d=this._curSubmit.shaderValue,_=this._shader2D;_.glTexture=c;var f=this._vb,p=null,g=f._byteLength/32*3;(p=AtlasResourceManager.enabled?SubmitTexture.create(this,this._ib,f,g,Value2D.create(1,0)):SubmitTexture.create(this,this._ib,f,g,TextSV.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&_.ALPHA===d.ALPHA,(this._submits[this._submits._length++]=p).shaderValue.textureHost=t,p._renderType=10016,this._curSubmit=p}t.active();var m=this._curSubmit._vb||this._vb;GlUtils.fillRectImgVb(m,this._clipRect,e+a,i+r,n||t.width,s||t.height,t.uv,o||this._curMat,this._x,this._y,l,h,!0)&&(AtlasResourceManager.enabled&&!this._isMain&&this._curSubmit.addTexture(t,(m._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},e.drawTextureWithTransform=function(t,e,i,n,s,o,a,r,l){if(o){var h=this._curMat,c=this._x,u=this._y;(0!==a||0!==r)&&(this._x=a*h.a+r*h.c,this._y=r*h.d+a*h.b),o&&h.bTransform?(Matrix.mul(o,h,Z._tmpMatrix),(o=Z._tmpMatrix)._checkTransform()):(this._x+=h.tx,this._y+=h.ty),this._drawTextureM(t,e,i,n,s,0,0,o,l),this._x=c,this._y=u}else this._drawTextureM(t,e,i,n,s,a,r,null,l)},e.fillQuadrangle=function(t,e,i,n,s){var o=this._curSubmit,a=this._vb,r=this._shader2D,l=o.shaderValue;if(this._renderKey=0,t.bitmap){var h=t.bitmap;r.glTexture==h&&r.ALPHA===l.ALPHA||(r.glTexture=h,(o=this._curSubmit=Submit.createSubmit(this,this._ib,a,a._byteLength/32*3,Value2D.create(1,0))).shaderValue.glTexture=h,this._submits[this._submits._length++]=o),GlUtils.fillQuadrangleImgVb(a,e,i,n,t.uv,s||this._curMat,this._x,this._y)}else o.shaderValue.fillStyle&&o.shaderValue.fillStyle.equal(t)&&r.ALPHA===l.ALPHA||(r.glTexture=null,(o=this._curSubmit=Submit.createSubmit(this,this._ib,a,a._byteLength/32*3,Value2D.create(2,0))).shaderValue.defines.add(2),o.shaderValue.fillStyle=DrawStyle.create(t),this._submits[this._submits._length++]=o),GlUtils.fillQuadrangleImgVb(a,e,i,n,Texture.DEF_UV,s||this._curMat,this._x,this._y);o._numEle+=6},e.drawTexture2=function(t,e,i,n,s,o,a,r){if(0!=o){var l=this._curMat;if(this._x=t*l.a+e*l.c,this._y=e*l.d+t*l.b,s&&(s=l.bTransform||s.bTransform?(Matrix.mul(s,l,Z._tmpMatrix),Z._tmpMatrix):(this._x+=s.tx+l.tx,this._y+=s.ty+l.ty,Matrix.EMPTY)),1!==o||a){var h=this._shader2D.ALPHA,c=this._nBlendType;this._shader2D.ALPHA=o,a&&(this._nBlendType=BlendMode.TOINT(a)),this._drawTextureM(r[0],r[1]-i,r[2]-n,r[3],r[4],0,0,s,1),this._shader2D.ALPHA=h,this._nBlendType=c}else this._drawTextureM(r[0],r[1]-i,r[2]-n,r[3],r[4],0,0,s,1);this._x=this._y=0}},e.drawCanvas=function(t,e,i,n,s){var o=t.context;if(this._renderKey=0,o._targets)this._submits[this._submits._length++]=SubmitCanvas.create(o,0,null),this._curSubmit=Submit.RENDERBASE,o._targets.drawTo(this,e,i,n,s);else{var a=this._submits[this._submits._length++]=SubmitCanvas.create(o,this._shader2D.ALPHA,this._shader2D.filters),r=n/t.width,l=s/t.height,h=a._matrix;this._curMat.copyTo(h),1!=r&&1!=l&&h.scale(r,l);var c=h.tx,u=h.ty;h.tx=h.ty=0,h.transformPoint(Point.TEMP.setTo(e,i)),h.translate(Point.TEMP.x+c,Point.TEMP.y+u),this._curSubmit=Submit.RENDERBASE}Config.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=o._targets?"yellow":"green",this.strokeRect(e-1,i-1,n+2,s+2,1),this.strokeRect(e,i,n,s,1),this.restore())},e.drawTarget=function(t,e,i,n,s,o,a,r,l,h){void 0===h&&(h=-1);var c=this._vb;if(GlUtils.fillRectImgVb(c,this._clipRect,e,i,n,s,l||Texture.DEF_UV,o||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var u=this._curSubmit=SubmitTarget.create(this,this._ib,c,(c._byteLength-64)/32*3,r,a);u.blendType=-1==h?this._nBlendType:h,u.scope=t,this._submits[this._submits._length++]=u,this._curSubmit._numEle+=6}},e.mixRGBandAlpha=function(t){return this._mixRGBandAlpha(t,this._shader2D.ALPHA)},e._mixRGBandAlpha=function(t,e){var i=(4278190080&t)>>>24;return 0!=i?i*=e:i=255*e,16777215&t|i<<24},e.drawTriangles=function(t,e,i,n,s,o,a,r,l,h){if(!t.loaded||!t.source)return this.sprite&&Laya.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;t.bitmap;var c=this._mixRGBandAlpha(4294967295,r),u=(n.length,o.length);this._renderKey=-1;var d=this._curSubmit=SubmitTexture.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,Value2D.create(1,0));return d.shaderValue.textureHost=t,d._renderType=10016,this._submits[this._submits._length++]=d,a?(Z._tmpMatrix.a=a.a,Z._tmpMatrix.b=a.b,Z._tmpMatrix.c=a.c,Z._tmpMatrix.d=a.d,Z._tmpMatrix.tx=a.tx+e,Z._tmpMatrix.ty=a.ty+i,Matrix.mul(Z._tmpMatrix,this._curMat,Z._tmpMatrix)):(Z._tmpMatrix.a=this._curMat.a,Z._tmpMatrix.b=this._curMat.b,Z._tmpMatrix.c=this._curMat.c,Z._tmpMatrix.d=this._curMat.d,Z._tmpMatrix.tx=this._curMat.tx+e,Z._tmpMatrix.ty=this._curMat.ty+i),this._triangleMesh.addData(n,s,o,Z._tmpMatrix,c,this),this._curSubmit._numEle+=u,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},e.transform=function(t,e,i,n,s,o){SaveTransform.save(this),Matrix.mul(Matrix.TEMP.setTo(t,e,i,n,s,o),this._curMat,this._curMat),this._curMat._checkTransform()},e.setTransformByMatrix=function(t){t.copyTo(this._curMat)},e.transformByMatrix=function(t){SaveTransform.save(this),Matrix.mul(t,this._curMat,this._curMat),this._curMat._checkTransform()},e.rotate=function(t){SaveTransform.save(this),this._curMat.rotateEx(t)},e.scale=function(t,e){SaveTransform.save(this),this._curMat.scaleEx(t,e)},e.clipRect=function(t,e,i,n){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var s=SubmitStencil.create(4);this.addRenderObject(s);var o=this._vb,a=o._byteLength>>2;if(GlUtils.fillRectImgVb(o,null,t,e,i,n,Texture.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var r=this._curSubmit=Submit.createSubmit(this,this._ib,o,(o._byteLength-64)/32*3,Value2D.create(2,0));r.shaderValue.ALPHA=1,this._submits[this._submits._length++]=r,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var l=SubmitStencil.create(5);this.addRenderObject(l);var h=o.getFloat32Array(),c=Math.min(Math.min(Math.min(h[0+a],h[4+a]),h[8+a]),h[12+a]),u=Math.max(Math.max(Math.max(h[0+a],h[4+a]),h[8+a]),h[12+a]),d=Math.min(Math.min(Math.min(h[1+a],h[5+a]),h[9+a]),h[13+a]),_=Math.max(Math.max(Math.max(h[1+a],h[5+a]),h[9+a]),h[13+a]);SaveClipRectStencil.save(this,l,t,e,i,n,c,d,u-c,_-d),this._curSubmit=Submit.RENDERBASE}else{i*=this._curMat.a,n*=this._curMat.d;var f=Point.TEMP;this._curMat.transformPoint(f.setTo(t,e)),i<0&&(f.x=f.x+i,i=-i),n<0&&(f.y=f.y+n,n=-n),this._renderKey=0;var p=this._curSubmit=SubmitScissor.create(this);(this._submits[this._submits._length++]=p).submitIndex=this._submits._length,p.submitLength=9999999,SaveClipRect.save(this,p);var g=this._clipRect,m=g.x,b=g.y,y=f.x+i,v=f.y+n;m<f.x&&(g.x=f.x),b<f.y&&(g.y=f.y),g.width=Math.min(y,m+g.width)-g.x,g.height=Math.min(v,b+g.height)-g.y,this._shader2D.glTexture=null,p.clipRect.copyFrom(g),this._curSubmit=Submit.RENDERBASE}},e.setIBVB=function(t,e,i,n,s,o,a,r,l,h,c){if(void 0===l&&(l=0),void 0===h&&(h=0),void 0===c&&(c=0),null===i){if(Render.isFlash){var u=n;u._selfIB||(u._selfIB=IndexBuffer2D.create(35044)),u._selfIB.clear(),i=u._selfIB}else i=this._ib;GlUtils.expandIBQuadrangle(i,n._byteLength/(4*n.vertexStride*4))}if(!r||!a)throw Error("setIBVB must input:shader shaderValues");var d=SubmitOtherIBVB.create(this,n,i,s,a,r,l,h,c);o||(o=Matrix.EMPTY),o.translate(t,e),Matrix.mul(o,this._curMat,d._mat),o.translate(-t,-e),this._submits[this._submits._length++]=d,this._curSubmit=Submit.RENDERBASE,this._renderKey=0},e.addRenderObject=function(t){this._submits[this._submits._length++]=t},e.fillTrangles=function(t,e,i,n,s){var o=this._curSubmit,a=this._vb,r=this._shader2D,l=o.shaderValue,h=n.length>>4,c=t.bitmap;this._renderKey=0,r.glTexture==c&&r.ALPHA===l.ALPHA||((o=this._curSubmit=Submit.createSubmit(this,this._ib,a,a._byteLength/32*3,Value2D.create(1,0))).shaderValue.textureHost=t,this._submits[this._submits._length++]=o),GlUtils.fillTranglesVB(a,e,i,n,s||this._curMat,this._x,this._y),o._numEle+=6*h},e.submitElement=function(t,e){var i=this._submits;for(e<0&&(e=i._length);t<e;)t+=i[t].renderSubmit()},e.finish=function(){WebGL.mainContext.finish()},e.flush=function(){var t=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(t>this._ib.bufferLength/12&&GlUtils.expandIBQuadrangle(this._ib,t),!this._isMain&&AtlasResourceManager.enabled&&AtlasResourceManager._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=AtlasResourceManager._atlasRestore;for(var e=this._submits,i=0,n=e._length;i<n;i++){var s=e[i];10016===s.getRenderType()&&s.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),SkinMeshBuffer.instance&&SkinMeshBuffer.getInstance().reset();var o;for(i=0,o=this.meshlist.length;i<o;i++){var a=this.meshlist[i];a.canReuse?a.releaseMesh():a.destroy()}return this.meshlist.length=0,this._curSubmit=Submit.RENDERBASE,this._renderKey=0,this._triangleMesh=MeshTexture.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},e.setPathId=function(t){if(this.mId=t,-1!=this.mId){this.mHaveKey=!1;var e=VectorGraphManager.getInstance();e.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,e.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},e.movePath=function(t,e){var i=t,n=e;t=this._curMat.a*i+this._curMat.c*n+this._curMat.tx,e=this._curMat.b*i+this._curMat.d*n+this._curMat.ty,this.mX+=t,this.mY+=e},e.beginPath=function(){var t=this._getPath();t.tempArray.length=0,t.closePath=!1,this.mX=0,this.mY=0},e.closePath=function(){this._path.closePath=!0},e.fill=function(t){void 0===t&&(t=!1);var e=this._getPath();this.drawPoly(0,0,e.tempArray,this.fillStyle._color.numColor,0,0,t)},e.stroke=function(){var t=this._getPath();if(0<this.lineWidth){if(-1==this.mId)t.drawLine(0,0,t.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var e=VectorGraphManager.getInstance().shapeLineDic[this.mId];e.rebuild(t.tempArray),t.setGeomtry(e)}else VectorGraphManager.getInstance().addLine(this.mId,t.drawLine(0,0,t.tempArray,this.lineWidth,this.strokeStyle._color.numColor));t.update();var i=[this.mX,this.mY],n=Submit.createShape(this,t.ib,t.vb,t.count,t.offset,Value2D.create(4,0));n.shaderValue.ALPHA=this._shader2D.ALPHA,n.shaderValue.u_pos=i,n.shaderValue.u_mmat2=RenderState2D.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=n,this._renderKey=-1}},e.line=function(t,e,i,n,s,o){var a=this._curSubmit,r=this._vb;if(GlUtils.fillLineVb(r,this._clipRect,t,e,i,n,s,o)){this._renderKey=0;var l=this._shader2D,h=a.shaderValue;l.strokeStyle===h.strokeStyle&&l.ALPHA===h.ALPHA||(l.glTexture=null,(a=this._curSubmit=Submit.createSubmit(this,this._ib,r,(r._byteLength-64)/32*3,Value2D.create(2,0))).shaderValue.strokeStyle=l.strokeStyle,a.shaderValue.mainID=2,a.shaderValue.ALPHA=l.ALPHA,this._submits[this._submits._length++]=a),a._numEle+=6}},e.moveTo=function(t,e,i){void 0===i&&(i=!0);var n=this._getPath();if(i){var s=t,o=e;t=this._curMat.a*s+this._curMat.c*o,e=this._curMat.b*s+this._curMat.d*o}n.addPoint(t,e)},e.lineTo=function(t,e,i){void 0===i&&(i=!0);var n=this._getPath();if(i){var s=t,o=e;t=this._curMat.a*s+this._curMat.c*o,e=this._curMat.b*s+this._curMat.d*o}n.addPoint(t,e)},e.drawCurves=function(t,e,i){this.setPathId(-1),this.beginPath(),this.strokeStyle=i[3],this.lineWidth=i[4];var n=i[2];t+=i[0],e+=i[1],this.movePath(t,e),this.moveTo(n[0],n[1]);for(var s=2,o=n.length;s<o;)this.quadraticCurveTo(n[s++],n[s++],n[s++],n[s++]);this.stroke()},e.arcTo=function(t,e,i,n,s){if(-1==this.mId||!this.mHaveKey){var o=0,a=0,r=0,l=this._getPath();this._curMat.copyTo(Z._tmpMatrix),Z._tmpMatrix.tx=Z._tmpMatrix.ty=0,Z._tempPoint.setTo(l.getEndPointX(),l.getEndPointY()),Z._tmpMatrix.invertTransformPoint(Z._tempPoint);var h=Z._tempPoint.x-t,c=Z._tempPoint.y-e,u=Math.sqrt(h*h+c*c);if(!(u<=1e-6)){var d=h/u,_=c/u,f=i-t,p=n-e,g=f*f+p*p,m=Math.sqrt(g);if(!(m<=1e-6)){var b=f/m,y=p/m,v=d+b,w=_+y,x=Math.sqrt(v*v+w*w);if(!(x<=1e-6)){var C=v/x,S=w/x,T=Math.acos(C*d+S*_),L=Math.PI/2-T,R=(u=s/Math.tan(L))*d+t,I=u*_+e,G=Math.sqrt(u*u+s*s),M=t+C*G,A=e+S*G,k=0,B=0;if(0<=d*y-_*b){var W=2*L/Z.SEGNUM;k=Math.sin(W),B=Math.cos(W)}else W=2*-L/Z.SEGNUM,k=Math.sin(W),B=Math.cos(W);a=this._curMat.a*R+this._curMat.c*I,r=this._curMat.b*R+this._curMat.d*I,a==this._path.getEndPointX()&&r==this._path.getEndPointY()||l.addPoint(a,r);var N=R-M,V=I-A;for(o=0;o<Z.SEGNUM;o++){var E=N*B+V*k,F=-N*k+V*B;a=E+M,r=F+A,t=this._curMat.a*a+this._curMat.c*r,r=e=this._curMat.b*a+this._curMat.d*r,(a=t)==this._path.getEndPointX()&&r==this._path.getEndPointY()||l.addPoint(a,r),N=E,V=F}}}}}},e.arc=function(t,e,i,n,s,o,a){if(void 0===o&&(o=!1),void 0===a&&(a=!0),-1!=this.mId){var r=VectorGraphManager.getInstance().shapeDic[this.mId];if(r&&this.mHaveKey&&!r.needUpdate(this._curMat))return;e=t=0}var l,h=0,c=0,u=0,d=0,_=0,f=0,p=0;if(c=s-n,o)if(Math.abs(c)>=2*Math.PI)c=2*-Math.PI;else for(;0<c;)c-=2*Math.PI;else if(Math.abs(c)>=2*Math.PI)c=2*Math.PI;else for(;c<0;)c+=2*Math.PI;l=c/(p=i<101?Math.max(10,c*i/5):i<201?Math.max(10,c*i/20):Math.max(10,c*i/40))/2,u=Math.abs(4/3*(1-Math.cos(l))/Math.sin(l)),o&&(u=-u);var g=this._getPath(),m=NaN,b=NaN;for(f=0;f<=p;f++)h=n+c*(f/p),d=t+Math.cos(h)*i,_=e+Math.sin(h)*i,a&&(m=d,b=_,d=this._curMat.a*m+this._curMat.c*b,_=this._curMat.b*m+this._curMat.d*b),d==this._path.getEndPointX()&&_==this._path.getEndPointY()||g.addPoint(d,_);d=t+Math.cos(s)*i,_=e+Math.sin(s)*i,a&&(m=d,b=_,d=this._curMat.a*m+this._curMat.c*b,_=this._curMat.b*m+this._curMat.d*b),d==this._path.getEndPointX()&&_==this._path.getEndPointY()||g.addPoint(d,_)},e.quadraticCurveTo=function(t,e,i,n){var s=Bezier$1.I,o=i,a=n;i=this._curMat.a*o+this._curMat.c*a,n=this._curMat.b*o+this._curMat.d*a,o=t,a=e,t=this._curMat.a*o+this._curMat.c*a,e=this._curMat.b*o+this._curMat.d*a;for(var r=s.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),t,e,i,n],30,2),l=0,h=r.length/2;l<h;l++)this.lineTo(r[2*l],r[2*l+1],!1);this.lineTo(i,n,!1)},e.rect=function(t,e,i,n){this._other=this._other.make(),this._other.path||(this._other.path=new Path),this._other.path.rect(t,e,i,n)},e.strokeRect=function(t,e,i,n,s){var o=.5*s;this.line(t-o,e,t+i+o,e,s,this._curMat),this.line(t+i,e,t+i,e+n,s,this._curMat),this.line(t,e,t,e+n,s,this._curMat),this.line(t-o,e+n,t+i+o,e+n,s,this._curMat)},e.clip=function(){},e.drawPoly=function(t,e,i,n,s,o,a){void 0===a&&(a=!1),this._renderKey=0,this._shader2D.glTexture=null;var r=this._getPath();if(-1==this.mId)r.polygon(t,e,i,n,s||1,o);else if(this.mHaveKey){var l=VectorGraphManager.getInstance().shapeDic[this.mId];l.setMatrix(this._curMat),l.rebuild(r.tempArray),r.setGeomtry(l)}else{var h=r.polygon(t,e,i,n,s||1,o);VectorGraphManager.getInstance().addShape(this.mId,h),h.setMatrix(this._curMat)}r.update();var c,u=[this.mX,this.mY];if((c=Submit.createShape(this,r.ib,r.vb,r.count,r.offset,Value2D.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,c.shaderValue.u_pos=u,c.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=c,0<s){if(this.mHaveLineKey){var d=VectorGraphManager.getInstance().shapeLineDic[this.mId];d.rebuild(r.tempArray),r.setGeomtry(d)}else VectorGraphManager.getInstance().addShape(this.mId,r.drawLine(t,e,i,s,o));r.update(),(c=Submit.createShape(this,r.ib,r.vb,r.count,r.offset,Value2D.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,c.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=c}},e.drawParticle=function(t,e,i){i.x=t,i.y=e,this._submits[this._submits._length++]=i},e._getPath=function(){return this._path||(this._path=new Path)},__getset(0,e,"globalCompositeOperation",function(){return BlendMode.NAMES[this._nBlendType]},function(t){var e=BlendMode.TOINT[t];null==e||this._nBlendType===e||(SaveBase.save(this,65536,this,!0),this._curSubmit=Submit.RENDERBASE,this._renderKey=0,this._nBlendType=e)}),__getset(0,e,"strokeStyle",function(){return this._shader2D.strokeStyle},function(t){this._shader2D.strokeStyle.equal(t)||(SaveBase.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=DrawStyle.create(t))}),__getset(0,e,"globalAlpha",function(){return this._shader2D.ALPHA},function(t){(t=Math.floor(1e3*t)/1e3)!=this._shader2D.ALPHA&&(SaveBase.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=t)}),__getset(0,e,"asBitmap",null,function(t){if(t){if(this._targets||(this._targets=new RenderTargetMAX),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),__getset(0,e,"fillStyle",function(){return this._shader2D.fillStyle},function(t){this._shader2D.fillStyle.equal(t)||(SaveBase.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=DrawStyle.create(t))}),__getset(0,e,"textAlign",function(){return this._other.textAlign},function(t){this._other.textAlign===t||(this._other=this._other.make(),SaveBase.save(this,32768,this._other,!1),this._other.textAlign=t)}),__getset(0,e,"lineWidth",function(){return this._other.lineWidth},function(t){this._other.lineWidth===t||(this._other=this._other.make(),SaveBase.save(this,256,this._other,!1),this._other.lineWidth=t)}),__getset(0,e,"textBaseline",function(){return this._other.textBaseline},function(t){this._other.textBaseline===t||(this._other=this._other.make(),SaveBase.save(this,16384,this._other,!1),this._other.textBaseline=t)}),__getset(0,e,"font",null,function(t){t!=this._other.font.toString()&&(this._other=this._other.make(),SaveBase.save(this,8,this._other,!1),this._other.font===FontInContext.EMPTY?this._other.font=new FontInContext(t):this._other.font.setFont(t))}),Z.__init__=function(){i.DEFAULT=new i},Z._tempPoint=new Point,Z._SUBMITVBSIZE=32e3,Z._MAXSIZE=99999999,Z._RECTVBSIZE=16,Z.MAXCLIPRECT=new Rectangle(0,0,99999999,99999999),Z._COUNT=0,Z._tmpMatrix=new Matrix,Z.SEGNUM=32,Z._contextcount=0,__static(Z,["_fontTemp",function(){return this._fontTemp=new FontInContext},"_drawStyleTemp",function(){return this._drawStyleTemp=new DrawStyle(null)}]),Z.__init$=function(){i=function(){function t(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=FontInContext.EMPTY}__class(t,"");var e=t.prototype;return e.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=FontInContext.EMPTY},e.make=function(){return this===t.DEFAULT?new t:this},t.DEFAULT=null,t}()},Z}(),RenderSprite3D=function(t){function g(t,e){g.__super.call(this,t,e)}__class(g,"laya.webgl.utils.RenderSprite3D",RenderSprite);var e=g.prototype;return e.onCreate=function(t){switch(t){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},e._mask=function(t,e,i,n){var s,o,a=this._next,r=t.mask;if(r){e.ctx.save();var l=e.ctx.globalCompositeOperation,h=new Rectangle;if(h.copyFrom(r.getBounds()),h.width=Math.round(h.width),h.height=Math.round(h.height),h.x=Math.round(h.x),h.y=Math.round(h.y),0<h.width&&0<h.height){var c=t._style._tf,u=SubmitCMDScope.create();u.addValue("bounds",h),s=SubmitCMD.create([u,e],laya.webgl.utils.RenderSprite3D.tmpTarget),e.addRenderObject(s),r.render(e,-h.x,-h.y),s=SubmitCMD.create([u],laya.webgl.utils.RenderSprite3D.endTmpTarget),e.addRenderObject(s),e.ctx.save(),e.clipRect(i-c.translateX+h.x,n-c.translateY+h.y,h.width,h.height),a._fun.call(a,t,e,i,n),e.ctx.restore(),o=SubmitStencil.create(6),l=e.ctx.globalCompositeOperation,o.blendMode="mask",e.addRenderObject(o),Matrix.TEMP.identity();var d=Value2D.create(1,0),_=Texture.INV_UV,f=h.width,p=h.height;(h.width<32||h.height<32)&&((_=g.tempUV)[0]=0,_[1]=0,_[2]=32<=h.width?1:h.width/32,_[3]=0,_[4]=32<=h.width?1:h.width/32,_[5]=32<=h.height?1:h.height/32,_[6]=0,_[7]=32<=h.height?1:h.height/32,h.width=32<=h.width?h.width:32,h.height=32<=h.height?h.height:32,_[1]*=-1,_[3]*=-1,_[5]*=-1,_[7]*=-1,_[1]+=1,_[3]+=1,_[5]+=1,_[7]+=1),e.ctx.drawTarget(u,i+h.x-c.translateX,n+h.y-c.translateY,f,p,Matrix.TEMP,"tmpTarget",d,_,6),s=SubmitCMD.create([u],laya.webgl.utils.RenderSprite3D.recycleTarget),e.addRenderObject(s),(o=SubmitStencil.create(6)).blendMode=l,e.addRenderObject(o)}e.ctx.restore()}else a._fun.call(a,t,e,i,n)},e._blend=function(t,e,i,n){var s=t._style,o=this._next;s.blendMode?(e.ctx.save(),e.ctx.globalCompositeOperation=s.blendMode,o._fun.call(o,t,e,i,n),e.ctx.restore()):o._fun.call(o,t,e,i,n)},e._transform=function(t,e,i,n){var s=t.transform,o=this._next;if(s&&o!=RenderSprite.NORENDER){var a=e.ctx;t._style;s.tx=i,s.ty=n;var r=a._getTransformMatrix(),l=r.clone();Matrix.mul(s,r,r),r._checkTransform(),s.tx=s.ty=0,o._fun.call(o,t,e,0,0),l.copyTo(r),l.destroy()}else o._fun.call(o,t,e,i,n)},g.tmpTarget=function(t,e){var i=t.getValue("bounds"),n=RenderTarget2D.create(i.width,i.height);n.start(),n.clear(0,0,0,0),t.addValue("tmpTarget",n)},g.endTmpTarget=function(t){t.getValue("tmpTarget").end()},g.recycleTarget=function(t){t.getValue("tmpTarget").recycle(),t.recycle()},__static(g,["tempUV",function(){return this.tempUV=new Array(8)}]),g}(),Atlaser=function(t){function o(t,e,i,n,s){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,o.__super.call(this,t,e,s),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new AtlasWebGLCanvas,(this._atlasCanvas._atlaser=this)._atlasCanvas.width=i,this._atlasCanvas.height=n,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}__class(o,"laya.webgl.atlas.Atlaser",AtlasGrid);var e=o.prototype;return e.computeUVinAtlasTexture=function(t,e,i,n){var s=AtlasResourceManager.atlasTextureWidth,o=AtlasResourceManager.atlasTextureHeight,a=i/s,r=n/o,l=(i+t.bitmap.width)/s,h=(n+t.bitmap.height)/o,c=t.bitmap.width/s,u=t.bitmap.height/o;t.uv=[a+e[0]*c,r+e[1]*u,l-(1-e[2])*c,r+e[3]*u,l-(1-e[4])*c,h-(1-e[5])*u,a+e[6]*c,h-(1-e[7])*u]},e.findBitmapIsExist=function(t){if(t instanceof laya.webgl.resource.WebGLImage){var e=t,i=e.url,n=this._InAtlasWebGLImagesKey[i||e.id];if(n)return n.offsetInfoID}return-1},e.addToAtlasTexture=function(t,e,i){if(t instanceof laya.webgl.resource.WebGLImage){var n=t,s=n.url;this._InAtlasWebGLImagesKey[s||n.id]={bitmap:t,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([e,i])}this._atlasCanvas.texSubImage2D(e,i,t.atlasImgData||t.atlasSource),t.clearAtlasSource()},e.addToAtlas=function(t,e,i){t._atlasID=this._inAtlasTextureKey.length;var n=t.uv.slice(),s=t.bitmap;this._inAtlasTextureKey.push(t),this._inAtlasTextureOriUVValue.push(n),this._inAtlasTextureBitmapValue.push(s),this.computeUVinAtlasTexture(t,n,e,i),t.bitmap=this._atlasCanvas},e.clear=function(){for(var t=0,e=this._inAtlasTextureKey.length;t<e;t++)this._inAtlasTextureKey[t].bitmap=this._inAtlasTextureBitmapValue[t],this._inAtlasTextureKey[t].uv=this._inAtlasTextureOriUVValue[t],this._inAtlasTextureKey[t]._atlasID=-1,this._inAtlasTextureKey[t].bitmap.lock=!1,this._inAtlasTextureKey[t].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},e.dispose=function(){this.clear(),this._atlasCanvas.destroy()},__getset(0,e,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),__getset(0,e,"texture",function(){return this._atlasCanvas}),__getset(0,e,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),o}(),ShaderDefines2D=function(t){function i(){i.__super.call(this,i.__name2int,i.__int2name,i.__int2nameMap)}return __class(i,"laya.webgl.shader.d2.ShaderDefines2D",ShaderDefines),i.__init__=function(){i.reg("TEXTURE2D",1),i.reg("COLOR2D",2),i.reg("PRIMITIVE",4),i.reg("GLOW_FILTER",8),i.reg("BLUR_FILTER",16),i.reg("COLOR_FILTER",32),i.reg("COLOR_ADD",64),i.reg("WORLDMAT",128),i.reg("FILLTEXTURE",256),i.reg("FSHIGHPRECISION",1024)},i.reg=function(t,e){ShaderDefines._reg(t,e,i.__name2int,i.__int2name)},i.toText=function(t,e,i){return ShaderDefines._toText(t,e,i)},i.toInt=function(t){return ShaderDefines._toInt(t,i.__name2int)},i.TEXTURE2D=1,i.COLOR2D=2,i.PRIMITIVE=4,i.FILTERGLOW=8,i.FILTERBLUR=16,i.FILTERCOLOR=32,i.COLORADD=64,i.WORLDMAT=128,i.FILLTEXTURE=256,i.SKINMESH=512,i.SHADERDEFINE_FSHIGHPRECISION=1024,i.__name2int={},i.__int2name=[],i.__int2nameMap=[],i}(),Line=function(t){function o(t,e,i,n,s){this._points=[],this.rebuild(i),o.__super.call(this,t,e,0,0,0,s,n,s,0)}__class(o,"laya.webgl.shapes.Line",BasePoly);var e=o.prototype;return e.rebuild=function(t){var e=t.length;e!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(e/2-1)),this.mFloat32Array=new Float32Array(5*e)),this._points.length=0;for(var i=NaN,n=NaN,s=-1,o=-1,a=t.length/2,r=0;r<a;r++)i=t[2*r],n=t[2*r+1],(.01<Math.abs(s-i)||.01<Math.abs(o-n))&&this._points.push(i,n),s=i,o=n},e.getData=function(t,e,i){var n=[],s=[];0<this.borderWidth&&this.createLine2(this._points,n,this.borderWidth,i,s,this._points.length/2),this.mUint16Array.set(n,0),this.mFloat32Array.set(s,0),t.append(this.mUint16Array),e.append(this.mFloat32Array)},o}(),LoopLine=function(t){function u(t,e,i,n,s){this._points=[];for(var o=NaN,a=NaN,r=-1,l=-1,h=i.length/2-1,c=0;c<h;c++)o=i[2*c],a=i[2*c+1],(.01<Math.abs(r-o)||.01<Math.abs(l-a))&&this._points.push(o,a),r=o,l=a;o=i[2*h],a=i[2*h+1],r=this._points[0],l=this._points[1],(.01<Math.abs(r-o)||.01<Math.abs(l-a))&&this._points.push(o,a),u.__super.call(this,t,e,0,0,this._points.length/2,0,n,s)}__class(u,"laya.webgl.shapes.LoopLine",BasePoly);var e=u.prototype;return e.getData=function(t,e,i){if(0<this.borderWidth){for(var n=this.color,s=(n>>16&255)/255,o=(n>>8&255)/255,a=(255&n)/255,r=[],l=0,h=0,c=[],u=Math.floor(this._points.length/2),d=0;d<u;d++)l=this._points[2*d],h=this._points[2*d+1],r.push(this.x+l,this.y+h,s,o,a);this.createLoopLine(r,c,this.borderWidth,i+r.length/5),t.append(new Uint16Array(c)),e.append(new Float32Array(r))}},e.createLoopLine=function(t,e,i,n,s,o){t.length;var a=t.concat(),r=s||t,l=this.borderColor,h=(l>>16&255)/255,c=(l>>8&255)/255,u=(255&l)/255,d=[a[0],a[1]],_=[a[a.length-5],a[a.length-4]],f=_[0]+.5*(d[0]-_[0]),p=_[1]+.5*(d[1]-_[1]);a.unshift(f,p,0,0,0),a.push(f,p,0,0,0);var g,m,b,y,v,w,x,C,S,T,L,R,I,G,M,A,k,B,W,N,V=a.length/5,E=n,F=i/2;b=a[0],y=a[1],T=b-(v=a[5]),S=(S=-(y-(w=a[6])))/(N=Math.sqrt(S*S+T*T))*F,T=T/N*F,r.push(b-S,y-T,h,c,u,b+S,y+T,h,c,u);for(var Z=1;Z<V-1;Z++)b=a[5*(Z-1)],y=a[5*(Z-1)+1],v=a[5*Z],w=a[5*Z+1],x=a[5*(Z+1)],C=a[5*(Z+1)+1],T=b-v,R=v-x,M=(-(S=(S=-(y-w))/(N=Math.sqrt(S*S+T*T))*F)+b)*(-(T=T/N*F)+w)-(-S+v)*(-T+y),B=(-(L=(L=-(w-C))/(N=Math.sqrt(L*L+R*R))*F)+x)*(-(R=R/N*F)+w)-(-L+v)*(-R+C),W=(I=-T+y-(-T+w))*(k=-L+v-(-L+x))-(A=-R+C-(-R+w))*(G=-S+v-(-S+b)),Math.abs(W)<.1?(W+=10.1,r.push(v-S,w-T,h,c,u,v+S,w+T,h,c,u)):(((g=(G*B-k*M)/W)-v)*(g-v)+((m=(A*M-I*B)/W)-w)+(m-w),r.push(g,m,h,c,u,v-(g-v),w-(m-w),h,c,u));o&&(e=o);var D=this.edges+1;for(Z=1;Z<D;Z++)e.push(E+2*(Z-1),E+2*(Z-1)+1,E+2*Z+1,E+2*Z+1,E+2*Z,E+2*(Z-1));return e.push(E+2*(Z-1),E+2*(Z-1)+1,E+1,E+1,E,E+2*(Z-1)),r},u}(),Polygon=function(t){function a(t,e,i,n,s,o){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=Matrix.create(),this._points=i.slice(0,i.length),a.__super.call(this,t,e,0,0,this._points.length/2,n,s,o)}__class(a,"laya.webgl.shapes.Polygon",BasePoly);var e=a.prototype;return e.rebuild=function(t){this._repaint||(this._points.length=0,this._points=this._points.concat(t))},e.setMatrix=function(t){t.copyTo(this._mat)},e.needUpdate=function(t){return this._repaint=this._mat.a==t.a&&this._mat.b==t.b&&this._mat.c==t.c&&this._mat.d==t.d&&this._mat.tx==t.tx&&this._mat.ty==t.ty,!this._repaint},e.getData=function(t,e,i){var n,s=0,o=this._points,a=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=i){for(this._start=i,n=[],a=this.earcutTriangles.length,s=0;s<a;s++)n.push(this.earcutTriangles[s]+i);this.mUint16Array=new Uint16Array(n)}}else{this._start=i,n=[];var r=[],l=[],h=this.color,c=(h>>16&255)/255,u=(h>>8&255)/255,d=(255&h)/255;for(a=Math.floor(o.length/2),s=0;s<a;s++)r.push(this.x+o[2*s],this.y+o[2*s+1],c,u,d),l.push(this.x+o[2*s],this.y+o[2*s+1]);for(this.earcutTriangles=Earcut.earcut(l,null,2),a=this.earcutTriangles.length,s=0;s<a;s++)n.push(this.earcutTriangles[s]+i);this.mUint16Array=new Uint16Array(n),this.mFloat32Array=new Float32Array(r)}t.append(this.mUint16Array),e.append(this.mFloat32Array)},a}(),ByteArray=function(t){function s(t){this._len=0,this._objectEncoding_=0,this._position_=0,this._$1__allocated_=8,this._data_=null,this._littleEndian_=!1,this._byteView_=null,this._strTable=null,this._objTable=null,this._traitsTable=null,s.__super.call(this),t?this.setUint8Array(new Uint8Array(t)):this.___resizeBuffers(this._allocated_)}__class(s,"utils.ByteArray",Byte);var e=s.prototype;return e.clear=function(){this._strTable=[],this._objTable=[],this._traitsTable=[],this._position_=0,this.length=0},e.ensureWrite=function(t){this._len<t&&(this.length=t)},e.readBoolean=function(){return 0!=this.readByte()},e.readByte=function(){return this._data_.getInt8(this._position_++)},e.readBytes=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),e<0||i<0)throw"Read error - Out of bounds";0==i&&(i=this._len-this._position_),t.ensureWrite(e+i),t._byteView_.set(this._byteView_.subarray(this._position_,this._position_+i),e),t.position=e,this._position_+=i,t.position+i>t.length&&(t.length=t.position+i)},e.readDouble=function(){var t=this._data_.getFloat64(this._position_,this._littleEndian_);return this._position_+=8,t},e.readLong=function(){return 1*this.readShort()*4294967296+this.readUnsignedInt()},e.readFloat=function(){var t=this._data_.getFloat32(this._position_,this._littleEndian_);return this._position_+=4,t},e.readFullBytes=function(t,e,i){this.ensureWrite(i);for(var n=e;n<e+i;n++)this._data_.setInt8(this._position_++,t.get(n))},e.readInt=function(){var t=this._data_.getInt32(this._position_,this._littleEndian_);return this._position_+=4,t},e.readShort=function(){var t=this._data_.getInt16(this._position_,this._littleEndian_);return this._position_+=2,t},e.readUnsignedByte=function(){return this._data_.getUint8(this._position_++)},e.readUnsignedInt=function(){var t=this._data_.getUint32(this._position_,this._littleEndian_);return this._position_+=4,Math.floor(t)},e.readUnsignedShort=function(){var t=this._data_.getUint16(this._position_,this._littleEndian_);return this.position+=2,t},e.readUTF=function(){var t="",e=this.readUnsignedShort();return 0<e&&(t=this.readUTFBytes(e)).charCodeAt(),t},e.readUTF3=function(){var t="",e=this.readInt();return 0<e&&(t=this.readUTFBytes(e)).charCodeAt(),t},e.readUnicode=function(t){for(var e="",i=this._position_+t,n=0,s=0;this._position_<i;)s=this._byteView_[this._position_++],n=this._byteView_[this._position_++],e+=String.fromCharCode(n<<8|s);return e.charCodeAt(),e},e.readMultiByte=function(t,e){return"UNICODE"==e||"unicode"==e?this.readUnicode(t):this.readUTFBytes(t)},e.readUTFBytes=function(t){void 0===t&&(t=-1);for(var e="",i=this._position_+t,n=0,s=String.fromCharCode;this._position_<i;)(n=this._data_.getUint8(this._position_++))<128?0!=n&&(e+=s(n)):e+=s(n<224?(63&n)<<6|127&this._data_.getUint8(this._position_++):n<240?(31&n)<<12|(127&this._data_.getUint8(this._position_++))<<6|127&this._data_.getUint8(this._position_++):(15&n)<<18|(127&this._data_.getUint8(this._position_++))<<12|this._data_.getUint8(this._position_++)<<6&127|127&this._data_.getUint8(this._position_++));return e.charCodeAt(),e},e.toString=function(){var t=this._position_;this._position_=0;var e=this.readUTFBytes(this.length);return this._position_=t,e},e.writeBoolean=function(t){this.writeByte(t?1:0)},e.writeByte=function(t){this.ensureWrite(this._position_+1),this._data_.setInt8(this._position_,t),this._position_+=1},e.writeBytes=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),e<0||i<0)throw"writeBytes error - Out of bounds";0==i&&(i=t.length-e),this.ensureWrite(this._position_+i),this._byteView_.set(t._byteView_.subarray(e,e+i),this._position_),this._position_+=i},e.writeArrayBuffer=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),e<0||i<0)throw"writeArrayBuffer error - Out of bounds";0==i&&(i=t.byteLength-e),this.ensureWrite(this._position_+i);var n=new Uint8Array(t);this._byteView_.set(n.subarray(e,e+i),this._position_),this._position_+=i},e.writeDouble=function(t){this.ensureWrite(this._position_+8),this._data_.setFloat64(this._position_,t,this._littleEndian_),this._position_+=8},e.writeFloat=function(t){this.ensureWrite(this._position_+4),this._data_.setFloat32(this._position_,t,this._littleEndian_),this._position_+=4},e.writeInt=function(t){this.ensureWrite(this._position_+4),this._data_.setInt32(this._position_,t,this._littleEndian_),this._position_+=4},e.writeShort=function(t){this.ensureWrite(this._position_+2),this._data_.setInt16(this._position_,t,this._littleEndian_),this._position_+=2},e.writeUnsignedInt=function(t){this.ensureWrite(this._position_+4),this._data_.setUint32(this._position_,t,this._littleEndian_),this._position_+=4},e.writeUnsignedShort=function(t){this.ensureWrite(this._position_+2),this._data_.setUint16(this._position_,t,this._littleEndian_),this._position_+=2},e.writeUTF=function(t){t+="",this.writeUnsignedShort(this._getUTFBytesCount(t)),this.writeUTFBytes(t)},e.writeUnicode=function(t){t+="",this.ensureWrite(this._position_+2*t.length);for(var e=0,i=0,n=t.length;i<n;i++)e=t.charCodeAt(i),this._byteView_[this._position_++]=255&e,this._byteView_[this._position_++]=e>>8},e.writeMultiByte=function(t,e){if(t+="","UNICODE"==e||"unicode"==e)return this.writeUnicode(t);this.writeUTFBytes(t)},e.writeUTFBytes=function(t){t+="",this.ensureWrite(this._position_+4*t.length);for(var e=0,i=t.length;e<i;e++){var n=t.charCodeAt(e);n<=127?this.writeByte(n):(n<=2047?this.writeByte(192|n>>6):(n<=65535?this.writeByte(224|n>>12):(this.writeByte(240|n>>18),this.writeByte(128|n>>12&63)),this.writeByte(128|n>>6&63)),this.writeByte(128|63&n))}this.length=this._position_},e.__fromBytes=function(t){this._byteView_=new Uint8Array(t.getData()),this.length=this._byteView_.length,this._$1__allocated_=this.length},e.__get=function(t){return this._data_.getUint8(t)},e._getUTFBytesCount=function(t){for(var e=0,i=0,n=(t+="").length;i<n;i++){var s=t.charCodeAt(i);e+=s<=127?1:s<=2047?2:s<=65535?3:4}return e},e._byteAt_=function(t){return this._byteView_[t]},e._byteSet_=function(t,e){this.ensureWrite(t+1),this._byteView_[t]=e},e.uncompress=function(t){void 0===t&&(t="zlib");var e=new Zlib.Inflate(this._byteView_);this._byteView_=e.decompress(),this._data_=new DataView(this._byteView_.buffer),this._$1__allocated_=this._len=this._byteView_.byteLength,this._position_=0},e.compress=function(t){void 0===t&&(t="zlib");var e=new Zlib.Deflate(this._byteView_);this._byteView_=e.compress(),this._data_=new DataView(this._byteView_.buffer),this._position_=this._$1__allocated_=this._len=this._byteView_.byteLength},e.___resizeBuffers=function(e){try{var t=new Uint8Array(e);null!=this._byteView_&&(this._byteView_.length<=e?t.set(this._byteView_):t.set(this._byteView_.subarray(0,e))),this._byteView_=t,this._data_=new DataView(t.buffer)}catch(t){throw"___resizeBuffer err:"+e}},e.__getBuffer=function(){return this._data_.buffer.byteLength=this.length,this._data_.buffer},e.__set=function(t,e){this._data_.setUint8(t,e)},e.setUint8Array=function(t){this._byteView_=t,this._data_=new DataView(t.buffer),this._len=t.byteLength,this._position_=0},e.readObject=function(){return this._strTable=[],this._objTable=[],this._traitsTable=[],this.readObject2()},e.readObject2=function(){var t=this.readByte();return this.readObjectValue(t)},e.readObjectValue=function(t){var e;switch(t){case 1:break;case 6:e=this.__readString();break;case 4:e=this.readInterger();break;case 2:e=!1;break;case 3:e=!0;break;case 10:e=this.readScriptObject();break;case 9:e=this.readArray();break;case 5:e=this.readDouble();break;case 12:e=this.readByteArray()}return e},e.readByteArray=function(){var t=this.readUInt29();if(0==(1&t))return this.getObjRef(t>>1);var e=t>>1,i=new s;return this._objTable.push(i),this.readBytes(i,0,e),i},e.readInterger=function(){var t=this.readUInt29();return t=t<<3>>3,parseInt(t+"")},e.getStrRef=function(t){return this._strTable[t]},e.getObjRef=function(t){return this._objTable[t]},e.__readString=function(){var t=this.readUInt29();if(0==(1&t))return this.getStrRef(t>>1);var e=t>>1;if(0==e)return"";var i=this.readUTFBytes(e);return this._strTable.push(i),i},e.readTraits=function(t){var e;if(1==(3&t))return(e=this.getTraitReference(t>>2)).propoties?e:{obj:{}};var i=4==(4&t),n=8==(8&t),s=t>>4,o=this.__readString();if((e={}).className=o,e.propoties=[],e.dynamic=n,e.externalizable=i,0<s)for(var a=0;a<s;a++){var r=this.__readString();e.propoties.push(r)}return this._traitsTable.push(e),e},e.readScriptObject=function(){var t=this.readUInt29();if(0==(1&t))return this.getObjRef(t>>1);var e,i,n=this.readTraits(t),s=n.className,o=(n.externalizable,n.propoties);if(s&&""!=s){var a=ClassUtils.getRegClass(s);e=a?new a:{}}else e={};if(this._objTable.push(e),o)for(var r=0;r<o.length;r++)e[o[r]]=this.readObject2();if(n.dynamic)for(;null!=(i=this.__readString())&&0!=i.length;)e[i]=this.readObject2();return e},e.readArray=function(){var t=this.readUInt29();if(0==(1&t))return this.getObjRef(t>>1);for(var e,i=null,n=t>>1;null!=(e=this.__readString())&&0!=e.length;)null==i&&(i={},this._objTable.push(i)),i[e]=this.readObject2();if(null==i){i=[],this._objTable.push(i);var s=0;for(s=0;s<n;s++)i.push(this.readObject2())}else for(s=0;s<n;s++)i[s.toString()]=this.readObject2();return i},e.readUInt29=function(){var t=0,e=255&this.readByte();return e<128?e:(t=(127&e)<<7,(e=255&this.readByte())<128?t|e:(t=(t|127&e)<<7,(e=255&this.readByte())<128?t|e:(t=(t|127&e)<<8)|(e=255&this.readByte())))},e.writeObject=function(t){this._strTable=[],this._objTable=[],this._traitsTable=[],this.writeObject2(t)},e.writeObject2=function(t){if(null!=t){var e=typeof t;"string"==e?this.writeAMFString(t):"boolean"==e?this.writeAMFBoolean(t):"number"==e?-1!=String(t).indexOf(".")?this.writeAMFDouble(t):this.writeAMFInt(t):"object"==e&&(t instanceof Array?this.writeArray(t):t instanceof utils.ByteArray&&this.writeAMFByteArray(t))}else this.writeAMFNull()},e.writeAMFNull=function(){this.writeByte(1)},e.writeAMFString=function(t){this.writeByte(6),this.writeStringWithoutType(t)},e.writeStringWithoutType=function(t){if(0!=t.length){var e=this._strTable.indexOf(t);if(0<=e)this.writeUInt29(e<<1);else{var i=this._getUTFBytesCount(t);this.writeUInt29(i<<1|1),this.writeUTFBytes(t),this._strTable.push(t)}}else this.writeUInt29(1)},e.writeAMFInt=function(t){s.INT28_MIN_VALUE<=t&&t<=268435455?(t&=536870911,this.writeByte(4),this.writeUInt29(t)):this.writeAMFDouble(t)},e.writeAMFDouble=function(t){this.writeByte(5),this.writeDouble(t)},e.writeAMFBoolean=function(t){t?this.writeByte(3):this.writeByte(2)},e.writeArray=function(t){this.writeByte(9);var e=t.length;if(-1<this._objTable.indexOf(t))this.writeUInt29(e<<1);else{this.writeUInt29(e<<1|1),this.writeStringWithoutType("");for(var i=0;i<e;i++)this.writeObject2(t[i]);this._objTable.push(t)}},e.writeAMFByteArray=function(t){this.writeByte(12);var e=this._objTable.indexOf(t);if(0<=e)this.writeUInt29(e<<1);else{var i=t.length;this.writeUInt29(i<<1|1),this.writeBytes(t,0,i)}},e.writeMapAsECMAArray=function(t){this.writeByte(9),this.writeUInt29(1);var e;for(e in t)0,this.writeStringWithoutType(e),this.writeObject2(t[e]);this.writeStringWithoutType("")},e.writeUInt29=function(t){t<128?this.writeByte(t):t<16384?(this.writeByte(t>>7&127|128),this.writeByte(127&t)):t<2097152?(this.writeByte(t>>14&127|128),this.writeByte(t>>7&127|128),this.writeByte(127&t)):t<1073741824?(this.writeByte(t>>22&127|128),this.writeByte(t>>15&127|128),this.writeByte(t>>8&127|128),this.writeByte(255&t)):console.log("Integer out of range: "+t)},e.getTraitReference=function(t){return this._traitsTable[t]},__getset(0,e,"bytesAvailable",function(){return this.length-this._position_}),__getset(0,e,"position",function(){return this._position_},function(t){t<this._len?this._position_=t<0?0:t:(this._position_=t,this.length=t)}),__getset(0,e,"endian",function(){return this._littleEndian_?"littleEndian":"bigEndian"},function(t){this._littleEndian_="littleEndian"==t}),__getset(0,e,"length",function(){return this._len},function(t){this.___resizeBuffers(this._$1__allocated_=t),this._len=t}),s.__ofBuffer=function(t){var e=new s;return e.length=e.allocated=t.byteLength,e.data=new DataView(t),e.byteView=new Uint8Array(t),e},s.getTraitsInfoRef=function(t,e){var i=0,n=t.length;for(i=0;i<n;i++)if(s.equalsTraitsInfo(e,t[i]))return i;return-1},s.equalsTraitsInfo=function(t,e){if(t==e)return!0;if(!t.className===e.className)return!1;if(t.properties.length!=e.properties.length)return!1;var i=t.properties.length;t.properties.sort(),e.properties.sort();for(var n=0;n<i;n++)if(t.properties[n]!=e.properties[n])return!1;return!0},s.BIG_ENDIAN="bigEndian",s.LITTLE_ENDIAN="littleEndian",s.UNDEFINED_TYPE=0,s.NULL_TYPE=1,s.FALSE_TYPE=2,s.TRUE_TYPE=3,s.INTEGER_TYPE=4,s.DOUBLE_TYPE=5,s.STRING_TYPE=6,s.XML_TYPE=7,s.DATE_TYPE=8,s.ARRAY_TYPE=9,s.OBJECT_TYPE=10,s.AVMPLUSXML_TYPE=11,s.BYTEARRAY_TYPE=12,s.EMPTY_STRING="",s.UINT29_MASK=536870911,s.INT28_MAX_VALUE=268435455,s.INT28_MIN_VALUE=-268435456,s}(),SubmitCanvas=function(t){function o(){this._matrix=new Matrix,this._matrix4=CONST3D2D.defaultMatrix4.concat(),o.__super.call(this,1e4),this.shaderValue=new Value2D(0,0)}__class(o,"laya.webgl.submit.SubmitCanvas",Submit);var e=o.prototype;return e.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var t=RenderState2D.worldAlpha,e=RenderState2D.worldMatrix4,i=RenderState2D.worldMatrix,n=RenderState2D.worldFilters,s=RenderState2D.worldShaderDefines,o=this.shaderValue,a=this._matrix,r=this._matrix4,l=Matrix.TEMP;return Matrix.mul(a,i,l),r[0]=l.a,r[1]=l.b,r[4]=l.c,r[5]=l.d,r[12]=l.tx,r[13]=l.ty,RenderState2D.worldMatrix=l.clone(),RenderState2D.worldMatrix4=r,RenderState2D.worldAlpha=RenderState2D.worldAlpha*o.alpha,o.filters&&o.filters.length&&(RenderState2D.worldFilters=o.filters,RenderState2D.worldShaderDefines=o.defines),this._ctx_src.flush(),RenderState2D.worldAlpha=t,RenderState2D.worldMatrix4=e,RenderState2D.worldMatrix.destroy(),RenderState2D.worldMatrix=i,RenderState2D.worldFilters=n,RenderState2D.worldShaderDefines=s,1},e.releaseRender=function(){var t=o._cache;this._ctx_src=null,t[t._length++]=this},e.getRenderType=function(){return 10003},o.create=function(t,e,i){var n=o._cache._length?o._cache[--o._cache._length]:new o;n._ctx_src=t;var s=n.shaderValue;return s.alpha=e,s.defines.setValue(0),i&&i.length&&s.setFilters(i),n},o._cache=((o._cache=[])._length=0,o._cache),o}(),SubmitTexture=function(t){function h(t){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===t&&(t=1e4),h.__super.call(this,t)}__class(h,"laya.webgl.submit.SubmitTexture",Submit);var e=h.prototype;return e.releaseRender=function(){var t=h._cache;(t[t._length++]=this).shaderValue.release(),this._preIsSameTextureShader=!1,this._vb=null,this._texs.length=0,this._vbPos.length=0,this._isSameTexture=!0},e.addTexture=function(t,e){this._texsID[this._texs.length]=t._uvID,this._texs.push(t),this._vbPos.push(e)},e.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var t=this.shaderValue.textureHost.bitmap;if(null!==t)for(var e=this._vb.getFloat32Array(),i=0,n=this._texs.length;i<n;i++){var s=this._texs[i];s.active();var o=s.uv;if(this._texsID[i]!==s._uvID){this._texsID[i]=s._uvID;var a=this._vbPos[i];e[a+2]=o[0],e[a+3]=o[1],e[a+6]=o[2],e[a+7]=o[3],e[a+10]=o[4],e[a+11]=o[5],e[a+14]=o[6],e[a+15]=o[7],this._vb.setNeedUpload()}s.bitmap!==t&&(this._isSameTexture=!1)}}},e.renderSubmit=function(){if(0===this._numEle)return h._shaderSet=!1,1;var t=this.shaderValue.textureHost;if(t){var e=t.source;if(!t.bitmap||!e)return h._shaderSet=!1,1;this.shaderValue.texture=e}this._vb.bind_upload(this._ib);var i=WebGL.mainContext;if(BlendMode.activeBlendFunction!==this._blendFn&&(i.enable(3042),this._blendFn(i),BlendMode.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&BaseShader.activeShader&&h._shaderSet?BaseShader.activeShader.uploadTexture2D(this.shaderValue.texture):this.shaderValue.upload(),h._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var n=t.bitmap,s=0,o=BaseShader.activeShader,a=0,r=this._texs.length;a<r;a++){var l=this._texs[a];l.bitmap===n&&a+1!==r||(o.uploadTexture2D(l.source),i.drawElements(4,6*(a-s+1),5123,this._startIdx+6*s*CONST3D2D.BYTES_PIDX),n=l.bitmap,s=a)}else i.drawElements(4,this._numEle,5123,this._startIdx);return 1},h.create=function(t,e,i,n,s){var o=h._cache._length?h._cache[--h._cache._length]:new h;null==i&&((i=o._selfVb||(o._selfVb=VertexBuffer2D.create(-1))).clear(),n=0),o._ib=e,o._vb=i,o._startIdx=n*CONST3D2D.BYTES_PIDX,o._numEle=0;var a=t._nBlendType;o._blendFn=t._targets?BlendMode.targetFns[a]:BlendMode.fns[a],o.shaderValue=s,o.shaderValue.setValue(t._shader2D);var r=t._shader2D.filters;return r&&o.shaderValue.setFilters(r),o},h._cache=((h._cache=[])._length=0,h._cache),h._shaderSet=!0,h}(),MeshTexture=function(t){function b(){b.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}__class(b,"laya.webgl.utils.MeshTexture",Mesh2D);var e=b.prototype;return e.addData=function(t,e,i,n,s,o){for(var a=t.length/2,r=this._vb.needSize(a*b.const_stride)>>2,l=this._vb.getFloat32Array(),h=0,c=0;c<a;c++){var u=t[h],d=t[h+1],_=u*n.a+d*n.c+n.tx,f=u*n.b+d*n.d+n.ty;l[r++]=_,l[r++]=f,l[r++]=e[h],l[r++]=e[h+1],h+=2}this._vb.setNeedUpload();var p=this.vertNum;if(0<p){var g=i.length;g>b.tmpIdx.length&&(b.tmpIdx=new Uint16Array(g));for(var m=0;m<g;m++)b.tmpIdx[m]=i[m]+p;this._ib.appendU16Array(b.tmpIdx,i.length)}else this._ib.append(i);this._ib.setNeedUpload(),this.vertNum+=a,this.indexNum+=i.length},e.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},e.destroy=function(){this._ib.destroy(),this._vb.destroy()},b.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new b},b.const_stride=16,b._POOL=[],__static(b,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),b}(),Sprite=function(s){function i(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,i.__super.call(this),this._style=Style.EMPTY}__class(i,"laya.display.Sprite",s);var t=i.prototype;return Laya.imps(t,{"laya.display.ILayout":!0}),t.createConchModel=function(){return new ConchNode},t.destroy=function(t){void 0===t&&(t=!0),this._releaseMem(),s.prototype.destroy.call(this,t),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},t.updateZOrder=function(){Utils.updateOrder(this._childs)&&this.repaint()},t.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},t.setBounds=function(t){this._set$P("uBounds",t)},t.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new Rectangle),Rectangle._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},t.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new Rectangle),Rectangle._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},t._boundPointsToParent=function(t){void 0===t&&(t=!1);var e=0,i=0;this._style&&(e=this._style._tf.translateX,i=this._style._tf.translateY,t=t||0!==this._style._tf.rotate,this._style.scrollRect&&(e+=this._style.scrollRect.x,i+=this._style.scrollRect.y));var n=this._getBoundPointsM(t);if(!n||n.length<1)return n;if(8!=n.length&&(n=t?GrahamScan.scanPList(n):Rectangle._getWrapRec(n,Rectangle.TEMP)._getBoundPoints()),!this.transform)return Utils.transPointList(n,this._x-e,this._y-i),n;var s=Point.TEMP,o=0,a=n.length;for(o=0;o<a;o+=2)s.x=n[o],s.y=n[o+1],this.toParentPoint(s),n[o]=s.x,n[o+1]=s.y;return n},t.getGraphicBounds=function(t){return void 0===t&&(t=!1),this._graphics?this._graphics.getBounds(t):Rectangle.TEMP.setTo(0,0,0,0)},t._getBoundPointsM=function(t){if(void 0===t&&(t=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var e=Utils.clearArray(this._$P.temBM),i=Rectangle.TEMP;return i.copyFrom(this.scrollRect),Utils.concatArray(e,i._getBoundPoints()),e}for(var n,s,o,a=this._graphics?this._graphics.getBoundPoints():Utils.clearArray(this._$P.temBM),r=0,l=(o=this._childs).length;r<l;r++)(n=o[r])instanceof laya.display.Sprite&&1==n.visible&&(s=n._boundPointsToParent(t))&&(a=a?Utils.concatArray(a,s):s);return a},t.getStyle=function(){return this._style===Style.EMPTY&&(this._style=new Style),this._style},t.setStyle=function(t){this._style=t},t._adjustTransform=function(){this._tfChanged=!1;var t,e=this._style._tf,i=e.scaleX,n=e.scaleY;if(e.rotate||1!==i||1!==n||e.skewX||e.skewY){(t=this._transform||(this._transform=Matrix.create())).bTransform=!0;var s=.0174532922222222*(e.rotate-e.skewX),o=.0174532922222222*(e.rotate+e.skewY),a=Math.cos(o),r=Math.sin(o),l=Math.sin(s),h=Math.cos(s);return t.a=i*a,t.b=i*r,t.c=-n*l,t.d=n*h,t.tx=t.ty=0,t}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,t},t.pos=function(t,e,i){if(void 0===i&&(i=!1),this._x!==t||this._y!==e){if(this.destroyed)return this;if(i){this._x=t,this._y=e,this.conchModel&&this.conchModel.pos(this._x,this._y);var n=this._parent;n&&0===n._repaint&&(n._repaint=1,n.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=t,this.y=e}return this},t.pivot=function(t,e){return this.pivotX=t,this.pivotY=e,this},t.size=function(t,e){return this.width=t,this.height=e,this},t.scale=function(t,e,i){void 0===i&&(i=!1);var n=this.getStyle(),s=n._tf;if(s.scaleX!=t||s.scaleY!=e){if(this.destroyed)return this;if(i){n.setScale(t,e),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t,e),this._renderType|=4;var o=this._parent;o&&0===o._repaint&&(o._repaint=1,o.parentRepaint())}else this.scaleX=t,this.scaleY=e}return this},t.skew=function(t,e){return this.skewX=t,this.skewY=e,this},t.render=function(t,e,i){Stat.spriteCount++,RenderSprite.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this._repaint=0},t.drawToCanvas=function(t,e,i,n){if(Render.isConchNode){var s=HTMLCanvas.create("2D");return new RenderContext(t,e,s).ctx.setCanvasType(1),this.conchModel.drawToCanvas(s.source,i,n),s}return RunDriver.drawToCanvas(this,this._renderType,t,e,i,n)},t.customRender=function(t,e,i){this._renderType|=1024},t._applyFilters=function(){var t;if(!Render.isWebGL&&((t=this._$P.filters)&&!(t.length<1)))for(var e=0,i=t.length;e<i;e++)t[e].action.apply(this._$P.cacheCanvas)},t._isHaveGlowFilter=function(){var t,e=0;if(this.filters)for(e=0;e<this.filters.length;e++)if(8==this.filters[e].type)return!0;for(e=0,t=this._childs.length;e<t;e++)if(this._childs[e]._isHaveGlowFilter())return!0;return!1},t.localToGlobal=function(t,e){void 0===e&&(e=!1),!0===e&&(t=new Point(t.x,t.y));for(var i=this;i&&i!=Laya.stage;)t=i.toParentPoint(t),i=i.parent;return t},t.globalToLocal=function(t,e){void 0===e&&(e=!1),e&&(t=new Point(t.x,t.y));for(var i=this,n=[];i&&i!=Laya.stage;)n.push(i),i=i.parent;for(var s=n.length-1;0<=s;)t=(i=n[s]).fromParentPoint(t),s--;return t},t.toParentPoint=function(t){if(!t)return t;t.x-=this.pivotX,t.y-=this.pivotY,this.transform&&this._transform.transformPoint(t),t.x+=this._x,t.y+=this._y;var e=this._style.scrollRect;return e&&(t.x-=e.x,t.y-=e.y),t},t.fromParentPoint=function(t){if(!t)return t;t.x-=this._x,t.y-=this._y;var e=this._style.scrollRect;return e&&(t.x+=e.x,t.y+=e.y),this.transform&&this._transform.invertTransformPoint(t),t.x+=this.pivotX,t.y+=this.pivotY,t},t.on=function(t,e,i,n){return 1!==this._mouseEnableState&&this.isMouseEvent(t)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(t,e,i,n,!1)):s.prototype.on.call(this,t,e,i,n)},t.once=function(t,e,i,n){return 1!==this._mouseEnableState&&this.isMouseEvent(t)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(t,e,i,n,!0)):s.prototype.once.call(this,t,e,i,n)},t._$2__onDisplay=function(){if(1!==this._mouseEnableState){var t=this;for(t=t.parent;t&&1!==t._mouseEnableState&&!t._getBit(2);)t.mouseEnabled=!0,t._setBit(2,!0),t=t.parent}},t.loadImage=function(t,e,i,n,s,o){var a=this;return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),this.graphics.loadImage(t,e,i,n,s,function(t){a.destroyed||(a.size(e+(n||t.width),i+(s||t.height)),a.repaint(),o&&o.runWith(t))}),this},t.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},t._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},t._childChanged=function(t){this._childs.length?this._renderType|=2048:this._renderType&=-2049,t&&this._get$P("hasZorder")&&Laya.timer.callLater(this,this.updateZOrder),this.repaint()},t.parentRepaint=function(){var t=this._parent;t&&0===t._repaint&&(t._repaint=1,t.parentRepaint())},t.startDrag=function(t,e,i,n,s,o,a){void 0===e&&(e=!1),void 0===i&&(i=0),void 0===n&&(n=300),void 0===o&&(o=!1),void 0===a&&(a=.92),this._$P.dragging||this._set$P("dragging",new Dragging),this._$P.dragging.start(this,t,e,i,n,s,o,a)},t.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},t._releaseMem=function(){if(this._$P){var t=this._$P.cacheCanvas;t&&t.ctx&&(Pool.recover("RenderContext",t.ctx),t.ctx.canvas.size(0,0),t.ctx=null);var e=this._$P._filterCache;e&&(e.destroy(),e.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},t._setDisplay=function(t){t||this._releaseMem(),s.prototype._setDisplay.call(this,t)},t.hitTestPoint=function(t,e){var i=this.globalToLocal(Point.TEMP.setTo(t,e));return t=i.x,e=i.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?Rectangle.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(t,e)},t.getMousePoint=function(){return this.globalToLocal(Point.TEMP.setTo(Laya.stage.mouseX,Laya.stage.mouseY))},t._getWords=function(){return null},t._addChildsToLayout=function(n){var t=this._getWords();if(null==t&&0==this._childs.length)return!1;if(t)for(var e=0,i=t.length;e<i;e++)n.push(t[e]);return this._childs.forEach(function(t,e,i){t._style._enableLayout()&&t._addToLayout(n)}),!0},t._addToLayout=function(t){this._style.absolute||(this._style.block?t.push(this):this._addChildsToLayout(t)&&(this.x=this.y=0))},t._isChar=function(){return!1},t._getCSSStyle=function(){return this._style.getCSSStyle()},t._setAttributes=function(t,e){switch(t){case"x":this.x=parseFloat(e);break;case"y":this.y=parseFloat(e);break;case"width":this.width=parseFloat(e);break;case"height":this.height=parseFloat(e);break;default:this[t]=e}},t._layoutLater=function(){this.parent&&this.parent._layoutLater()},__getset(0,t,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(t){this._optimizeScrollRect!=t&&(this._optimizeScrollRect=t,this.conchModel&&this.conchModel.optimizeScrollRect(t))}),__getset(0,t,"customRenderEnable",null,function(t){if(t&&(this._renderType|=1024,Render.isConchNode)){i.CustomList.push(this);var e=new HTMLCanvas("2d");e._setContext(new CanvasRenderingContext2D),this.customContext=new RenderContext(0,0,e),e.context.setCanvasType&&e.context.setCanvasType(2),this.conchModel.custom(e.context)}}),__getset(0,t,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(t){this.cacheAs=t?this._$P.hasFilter?"none":"normal":"none"}),__getset(0,t,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(t){var e=this._$P.cacheCanvas;if(t!==(e?e.type:"none")){if("none"!==t)this._getBit(1)||this._setUpNoticeType(1),e||(e=this._set$P("cacheCanvas",Pool.getItemByClass("cacheCanvas",Object))),e.type=t,e.reCache=!0,this._renderType|=16,"bitmap"==t&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(e){var i=e;i&&i.ctx&&(Pool.recover("RenderContext",i.ctx),i.ctx.canvas.size(0,0),i.ctx=null),Pool.recover("cacheCanvas",e)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),__getset(0,t,"zOrder",function(){return this._zOrder},function(t){this._zOrder!=t&&(this._zOrder=t,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(t),this._parent&&(t&&this._parent._set$P("hasZorder",!0),Laya.timer.callLater(this._parent,this.updateZOrder)))}),__getset(0,t,"rotation",function(){return this._style._tf.rotate},function(t){var e=this.getStyle();if(e._tf.rotate!==t){e.setRotate(t),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,t,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(t){this._width!==t&&(this._width=t,this.conchModel&&this.conchModel.size(t,this._height),this.repaint())}),__getset(0,t,"x",function(){return this._x},function(t){if(this._x!==t){if(this.destroyed)return;this._x=t,this.conchModel&&this.conchModel.pos(t,this._y);var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),__getset(0,t,"globalScaleY",function(){for(var t=1,e=this;e&&e!==Laya.stage;)t*=e.scaleY,e=e.parent;return t}),__getset(0,t,"hitArea",function(){return this._$P.hitArea},function(t){this._set$P("hitArea",t)}),__getset(0,t,"staticCache",function(){return this._$P.staticCache},function(t){this._set$P("staticCache",t),t||this.reCache()}),__getset(0,t,"texture",function(){return this._texture},function(t){this._texture!=t&&(this._texture=t,this.graphics.cleanByTexture(t,0,0))}),__getset(0,t,"y",function(){return this._y},function(t){if(this._y!==t){if(this.destroyed)return;this._y=t,this.conchModel&&this.conchModel.pos(this._x,t);var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),__getset(0,t,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(t){this._height!==t&&(this._height=t,this.conchModel&&this.conchModel.size(this._width,t),this.repaint())}),__getset(0,t,"blendMode",function(){return this._style.blendMode},function(t){this.getStyle().blendMode=t,this.conchModel&&this.conchModel.blendMode(t),t&&"source-over"!=t?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),__getset(0,t,"scaleX",function(){return this._style._tf.scaleX},function(t){var e=this.getStyle();if(e._tf.scaleX!==t){e.setScaleX(t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t,e._tf.scaleY),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,t,"scaleY",function(){return this._style._tf.scaleY},function(t){var e=this.getStyle();if(e._tf.scaleY!==t){e.setScaleY(t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e._tf.scaleX,t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,t,"stage",function(){return Laya.stage}),__getset(0,t,"skewX",function(){return this._style._tf.skewX},function(t){var e=this.getStyle();if(e._tf.skewX!==t){e.setSkewX(t),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(t,e._tf.skewY),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,t,"scrollRect",function(){return this._style.scrollRect},function(t){this.getStyle().scrollRect=t,this.repaint(),t?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(t.x,t.y,t.width,t.height)):(this._renderType&=-129,this.conchModel&&(i.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),__getset(0,t,"skewY",function(){return this._style._tf.skewY},function(t){var e=this.getStyle();if(e._tf.skewY!==t){e.setSkewY(t),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(e._tf.skewX,t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,t,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(t){this._tfChanged=!1,(this._transform=t)&&(this._x=t.tx,this._y=t.ty,t.tx=t.ty=0,this.conchModel&&this.conchModel.transform(t.a,t.b,t.c,t.d,this._x,this._y)),t?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),__getset(0,t,"pivotX",function(){return this._style._tf.translateX},function(t){this.getStyle().setTranslateX(t),this.conchModel&&this.conchModel.pivot(t,this._style._tf.translateY),this.repaint()}),__getset(0,t,"pivotY",function(){return this._style._tf.translateY},function(t){this.getStyle().setTranslateY(t),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,t),this.repaint()}),__getset(0,t,"alpha",function(){return this._style.alpha},function(t){this._style&&this._style.alpha!==t&&(t=t<0?0:1<t?1:t,this.getStyle().alpha=t,this.conchModel&&this.conchModel.alpha(t),1!==t?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),__getset(0,t,"visible",function(){return this._style.visible},function(t){this._style&&this._style.visible!==t&&(this.getStyle().visible=t,this.conchModel&&this.conchModel.visible(t),this.parentRepaint())}),__getset(0,t,"graphics",function(){return this._graphics||(this.graphics=RunDriver.createGraphics())},function(t){this._graphics&&(this._graphics._sp=null),(this._graphics=t)?(this._renderType&=-2,this._renderType|=512,(t._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(i.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),__getset(0,t,"filters",function(){return this._$P.filters},function(t){t&&0===t.length&&(t=null),this._$P.filters!=t&&(this._set$P("filters",t?t.slice():null),Render.isConchApp&&(this.conchModel&&(i.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),Render.isWebGL&&(t&&t.length?this._renderType|=32:this._renderType&=-33),t&&0<t.length?(this._getBit(1)||this._setUpNoticeType(1),Render.isWebGL&&1==t.length&&t[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(Render.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),__getset(0,t,"parent",s.prototype._$get_parent,function(t){Laya.superSet(Node,this,"parent",t),t&&this._getBit(2)&&this._$2__onDisplay()}),__getset(0,t,"mask",function(){return this._$P._mask},function(t){t&&this.mask&&this.mask._$P.maskParent||(t?(this.cacheAs="bitmap",this._set$P("_mask",t),t._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",t),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(t?t.conchModel:null),this._renderType|=64,this.parentRepaint())}),__getset(0,t,"mouseEnabled",function(){return 1<this._mouseEnableState},function(t){this._mouseEnableState=t?2:1}),__getset(0,t,"globalScaleX",function(){for(var t=1,e=this;e&&e!==Laya.stage;)t*=e.scaleX,e=e.parent;return t}),__getset(0,t,"mouseX",function(){return this.getMousePoint().x}),__getset(0,t,"mouseY",function(){return this.getMousePoint().y}),i.fromImage=function(t){return(new i).loadImage(t)},i.CustomList=[],__static(i,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=window.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),i}(Node),Module=function(t){function e(){e.__super.call(this)}__class(e,"gateModule.zwc.engine.core.controls.dock.Module",GateUnitModule);var i=e.prototype;return i.sendToModule=function(t,e,i){Message.sendToModule(t,e,i,this.name)},i.sendToTotalModule=function(t,e){Message.sendToTotalModule(t,e,this.name)},i.sendToService=function(t,e){Message.sendToService(t,e,this.name)},e}(),LoginGateProxy=function(t){function n(){this._otherUrls=[],this.toc_06=null,this.isLoading=!1,this.leftTimeStr="",this.reconnectTimes=0,this.persent=0,this.statusType=0,this.pointStr="",this.msgTxts=null,this.m_IsLoaded=!1,this.loginLoaded=-1,this.m_LoadingUI=null,this.m_firstLoading=null,this.roleCreate=null,this.loginUI=null,this.maxRequestTime=2,this.requestSuccse=!1,this.serverList=null,this.reqVerifySuccess=!1,this.maxVerifyTime=2,this.verifyUrl=null,this.verifyRequestTime=0,this.verifyFristTime=0,this.fristPackBack=!1,this.nativeAppBg=null,this.enterLoadJs=!1,this.loadedVersion=-1,this.loadedUI=-1,this.loadedMain=-1,this.blackOption=-1,this.enterBool=!1,this.loadingIos=null,this._jss=["part1"],n.__super.call(this)}__class(n,"gateModule.modules.login.proxys.LoginGateProxy",GateSubProxy);var e=n.prototype;return e.toConnect=function(){GateSocketDock.GetIntance().connect(GlobalConfig.socket_host,GlobalConfig.socket_port)},e.subHandler=function(t){switch(t.actionOrder){case"__LOGIN_ENTERSCENE__":break;case"__TO_LOGIN__":0<Common.checkWXLib()&&this.starLogin();break;case"STARTLODING":this.closeLoginView(),this.persent=0,this.statusType=1,Laya.timer.frameLoop(1,this,this.doShowLoading);break;case"__SOCKET_CONENTED__":GameLog.ins().endStep(GameLog.SOCKET),WebSdkUtil.sdk_cmd("report_server"),Common.mirClick(9,GlobalConfig.pid,GlobalConfig.uid),null!=GlobalConfig.uid&&""!=GlobalConfig.uid?10==GlobalConfig.client||20==GlobalConfig.client||Global.isConchApp||0<Global.xgame?(this.reqEnterVerify(),this.closeServerList(),this.showNativeAppBg("正在进入战场")):30==GlobalConfig.client?this.requestEnter():this.showServerList():this.showLoginView();break;case"CLOSESERVERLIST":null!=this.serverList&&this.serverList.parent&&this.serverList.closeList();break;case"REQUESTENTER":this.reqEnterVerify();break;case"SETLOADING":if(this.m_LoadingUI){var e=t.proto;this.m_LoadingUI.setLoading(e.des,e.per,e.gPer)}break;case"SHOWCREATEROLE":this.isLoading=!1,Global.isConchApp&&this.closeNativeAppBg(),this.closeLoading();var i=GateSocketDock.GetIntance().loginSocket;if(i&&i.connected){GlobalConst.isCreated?this.enterGame():this.showCreateRole();break}console.log("服务端断线.......");case"SHOWLOGINUI":this.showServerList();break;case"resize":this.onResize();break;case"10102":Common.mirClick(25,GlobalConfig.pid,GlobalConfig.uid),this.fristPackBack=!0,this.closeLoginView();var n=t.proto;if(1==n.status){if(Global.isConchApp)if(Global.nativeIOS)NativeSdk.selected_server(GlobalConfig.serverID,GlobalConfig.serverName);else{var s={serverid:GlobalConfig.serverID,servername:GlobalConfig.serverName},o=0;o=Global.curServerTime?Math.floor(Global.curServerTime/1e3):Math.floor(Browser.now()/1e3),s.timestamp=o+"",NativeSdk.reportRole("selected_server",s)}GlobalConst.isCreated=n.isCreated,GlobalConst.justCreated=1==n.justCreated,GlobalConst.isCreated&&GlobalConst.justCreated&&Laya.timer.once(3e3,this,this.reportCreate),GlobalConst.isCreated?this.enterGame():(this.showLoading(),UpdateResUtils.getIntance().setup())}else Common.mirClick(11,GlobalConfig.pid,GlobalConfig.uid),this.showAlertOutServer(5);GlobalConfig.hasFirstSend=!0;break;case"10104":var a=t.proto;this.roleCreate&&this.roleCreate.parent&&(GlobalConfig.playerName=a.nameStr,this.roleCreate.setName(a.nameStr));break;case"10110":var r=t.proto;Global.curServerTime=r.serverTime,Global.openServeTime=r.openServeTime,Global.comServeTime=r.ComServeTime;break;case"10114":this.reconnectTimes++;var l=t.proto;1==l.status?GateSocketDock.GetIntance().reSetWebSocket():2==l.status?(GateSocketDock.GetIntance().reSetWebSocket(),this.sendToService(new tos_10107)):this.onReConect("与服务器已断开链接，请刷新页面！");break;case"10118":var h=t.proto;this.leftTimeStr="\n距离解禁还有"+h.day+"天"+h.hour+"时"+h.mintue+"分",this.showAlertOutServer(7);break;case"10106":if(this.toc_06=t.proto,1==this.toc_06.result)Common.mirClick(19,GlobalConfig.pid,GlobalConfig.uid),GlobalConst.isCreated=!0,GlobalConst.justCreated=!0,Laya.timer.once(3e3,this,this.reportCreate),this.enterGame(),this.closeRoleCreate();else switch(Common.mirClick(20,GlobalConfig.pid,GlobalConfig.uid),this.toc_06.result){case 2:this.playErrorMsg("很遗憾，该用户名已被注册，请修改后重试"),this.roleCreate&&this.roleCreate.parent&&this.roleCreate.onGetRadomName();break;case 3:this.playErrorMsg("用户名含有非法字符，请修改后重试"),this.roleCreate&&this.roleCreate.parent&&this.roleCreate.onGetRadomName();break;case 4:this.playErrorMsg("无效职业");break;case 5:this.playErrorMsg("玩家ID溢出");break;case 6:this.playErrorMsg("服务器不存在")}break;case"10201":!this.isLoading&&GlobalConst.isCreated&&this.enterGame();break;case"13602":ReportUtils.ins.setSwitch(t.proto.report);break;case"13303":var c=t.proto;this.showAlertOutServer(c.outType);break;case"LOGIN_FAIL":this.onReConect("登陆失败，请刷新重新登录")}},e.reportCreate=function(){var t={};t.serverid=GlobalConfig.serverID,t.rolename=GlobalConfig.playerName,Global.curServerTime?t.timestamp=Global.curServerTime:t.timestamp=Browser.now();try{WebSdk.logServer(t,"create")}catch(t){var e="["+GlobalConfig.serverID+","+GlobalConfig.serverName+","+GlobalConfig.uid+"]";GameLog.ins().writeBoSaiDong("LogError:"+e+" "+t)}},e.doShowLoading=function(){1<=this.persent&&(this.persent=0);""==this.pointStr?this.pointStr=".":"."==this.pointStr?this.pointStr="..":(this.pointStr,this.pointStr);var t=null;t=1==this.statusType?"正在连接服务器，请稍后"+this.pointStr:2==this.statusType?(100*this.persent,"正在加载主文件，请稍后"+this.pointStr):"正在连接服务器，请稍后"+this.pointStr,this.setLoading(t,this.persent),this.persent+=.02*Math.random()},e.setLoading=function(t,e){void 0===e&&(e=.5),Message.sendToModule("SETLOADING",["gateModule.modules.login.LoginGateModule"],{des:t,per:e})},e.exitParma=function(){2==Global.xgame?wx.exitMiniProgram({}):Browser.window.location.reload()},e.showAlertOutServer=function(t){var e="网络繁忙，请刷新后重试！";switch(console.log("showAlertOutServer:"+t),t){case 0:return e="你的账号在其他地方登陆，请重新登陆",void LoginAlertView.ins.show(e,!0,Handler.create(this,this.exitParma));case 1:e="您已断开连接，请重新登陆";break;case 2:e="您的账号长时间未连接已失效，请重新登陆";break;case 3:e="您还未防沉迷验证，请进行验证后再登录";break;case 4:e="您使用了非法工具，请关闭工具重新登录！";break;case 5:e="服务器验证失败，请重新登陆";break;case 6:e="服务器验证维护中，请稍后再试";break;case 7:e="账号已被封禁"+this.leftTimeStr}this.onReConect(e)},e.showAlertOutConnect=function(){this.onReConect("与服务器已断开链接，请刷新页面！")},e.playErrorMsg=function(t){var e=CodeUtils.createText(Laya.stage.width/2-150,Laya.stage.mouseY-20,200,20,t,20,"#FF0000",!0),i=e.y-150;Laya.stage.addChild(e),Tween.to(e,{alpha:0,y:i},1500,null,Handler.create(this,this.onTFGone,[e]))},e.onTFGone=function(t){t&&(t.parent&&t.parent.removeChild(t),t.destroy(),t=null)},e.onReConect=function(t){LoginAlertView.ins.show(t,!0)},e.starLogin=function(){this.loadStarLogin()},e.loadStarLogin=function(){var e=this;if(this.showNativeAppBg(),0<Global.xgame)try{var t=null;t=1==Global.xgame?swan:wx,this.loadedUI=0;t.loadSubpackage({name:"gameui",success:function(t){GameLog.log("load ui,success:"+JSON.stringify(t)),e.loadedUI=1,e.checkStartMain()},fail:function(t){GameLog.log("loadSubpackage fail:ui>"+JSON.stringify(t),0,!0),e.loadedUI=-1}});this.loadedMain=0;t.loadSubpackage({name:"gamemain",success:function(t){GameLog.log("load main,success:"+JSON.stringify(t)),e.loadedMain=1,e.checkStartMain()},fail:function(t){GameLog.log("loadSubpackage fail:main>"+JSON.stringify(t),0,!0),e.loadedUI=-1}})}catch(t){}if(this.m_IsLoaded)GlobalConfig.clickStream="0",this.doShowLoginSatrView();else{GameLog.log("login start"),2==Global.xgame&&Laya.timer.loop(3e4,this,this.checkLoginLoaded),Common.mirClick(4,GlobalConfig.pid,GlobalConfig.uid,""),n.urls.push(GlobalConst.getLayoutsPath("login"));var i=[{url:GlobalConst.getLayoutsPath("login"),type:"atlas"}];Global.nativeIOS&&1==Global.iosChecking&&(i.unshift({url:GlobalConst.getFullUrl("ui/images/loginios/guoshenbg.jpg",!1)}),i.unshift({url:GlobalConst.getFullUrl("ui/images/loginios/actor1.png",!1)}),i.unshift({url:GlobalConst.getFullUrl("ui/images/loginios/actor2.png",!1)}),i.unshift({url:GlobalConst.getFullUrl("ui/images/loginios/actor3.png",!1)})),Laya.loader.load(i,Handler.create(this,this.onLoginLoaded),Handler.create(this,this.onLoginLoading)),this.m_IsLoaded=!0}},e.checkLoginLoaded=function(t){if(2==Global.xgame)if(-1==this.loginLoaded){this.loginLoaded=0,MiniFileMgr$1.deleteAll();var e=GlobalConst.getFullUrl("ui/layouts/login.atlas");Laya.loader.load(e,Handler.create(this,this.onLoginLoaded),Handler.create(this,this.onLoginLoading))}else this.onLoginLoaded()},e.showLoading=function(){this.enterLoadJs?console.log("+++++++++++++ run showLoading,_gameGateClear:"+this.enterLoadJs):(null==this.m_LoadingUI&&(this.m_LoadingUI=new LoadingView),this.m_LoadingUI.isShowing()||(this.isLoading=!0,this.m_LoadingUI.show(),NativeSdk.hasPhoneBang||(this.m_LoadingUI.centerY=0)))},e.closeLoading=function(){this.m_LoadingUI&&(this.m_LoadingUI.destroyed||this.m_LoadingUI.destroy(),this.m_LoadingUI=null,this.isLoading=!1)},e.onLoginLoading=function(t){this.m_firstLoading&&this.m_firstLoading.setLoading(t)},e.showFirstLoading=function(){null==this.m_firstLoading&&(this.m_firstLoading=new FirstLoadingView),this.m_firstLoading.isShowing()||this.m_firstLoading.show()},e.showCreateRole=function(){if(n.urls&&0<n.urls.length){this.closeLoading();var t={serverid:parseInt(GlobalConfig.serverID),servername:GlobalConfig.serverName},e=0;e=Global.curServerTime?Global.curServerTime:Browser.now(),t.timestamp=e+"",WebSdk.logServer(t,"precreate"),this.doShowCreateRole()}},e.doShowCreateRole=function(){null==this.roleCreate&&("awy"==GlobalConfig.appid||"awyxcx"==GlobalConfig.appid?this.roleCreate=new _RoleCreateView3:this.roleCreate=new _RoleCreateView),NativeSdk.hasPhoneBang&&(this.roleCreate.top=57),this.roleCreate.show(),this.startBlackPreLoad()},e.closeRoleCreate=function(){this.roleCreate&&(this.roleCreate.destroy(),this.roleCreate=null)},e.onLoginLoaded=function(t){if(void 0===t&&(t=!1),GameLog.log("gate login end resouce:"+t,t?0:1),this.loginLoaded=1,Laya.timer.clear(this,this.checkLoginLoaded),Global.isConchApp)NativeSdk.login();else if(0<Global.xgame)GameLog.log("get user info"),this.showNativeAppBg("获取用户信息"),WebSdkUtil.sdk_cmd("xgame_login");else if(WebSdkUtil.sdk_cmd("app_device_info"),this.m_firstLoading&&this.m_firstLoading.parent&&this.m_firstLoading.destroy(),this.m_firstLoading=null,GlobalConfig.uid){if(GlobalConfig.socket_host&&10==GlobalConfig.client||GlobalConfig.socket_host&&30==GlobalConfig.client)return Message.sendToModule("STARTLODING",["gateModule.modules.login.LoginGateModule"]),void GateSocketDock.GetIntance().connect(GlobalConfig.socket_host,GlobalConfig.socket_port);this.showServerList()}else this.showLoginView()},e.showLoginView=function(){n.urls&&0<n.urls.length&&(null==this.loginUI&&(this.loginUI=new LoginBaseView),this.loginUI.show(),this.closeNativeAppBg())},e.closeLoginView=function(){this.serverList&&(this.serverList.destroy(),this.serverList=null)},e.showServerList=function(){if(this.maxRequestTime<=0)return console.log("request importserver no back......"),void Browser.window.location.reload();this.maxRequestTime--,Laya.timer.clear(this,this.checkImportTimeOut);var t=new Object;t.platCode=GlobalConfig.platform,t.pid=GlobalConfig.pid,Global.isConchApp?(t.token=GlobalConfig.token,t.clientid=GlobalConfig.clientid,NativeSdk.deviceInfo&&(t.version=NativeSdk.deviceInfo.bundle_version)):(1==Global.xgame?(t.platCode=GlobalConfig.platCode,t.token=GlobalConfig.token):t.account=GlobalConfig.uid,t.version=GlobalConfig.version.toString()),t.gid=GlobalConfig.gid,t.imei=GlobalConfig.IMEI,t.ip="",t.os="",Browser.onAndroid?t.os="andriod":Browser.onIOS?t.os="ios":Browser.onPC&&(t.os="window"),GameLog.ins().startStep(GameLog.SERVER,3e3),Common.mirClick(2,GlobalConfig.pid,GlobalConfig.uid,""),HttpActionUtil.httpGet(GlobalConfig.importServerUrl,t,this,this.onImportServer,this.onImportError),Laya.timer.once(6e3,this,this.checkImportTimeOut)},e.checkImportTimeOut=function(){this.requestSuccse||(0<this.maxRequestTime?this.showServerList():this.showAlertOutServer(99))},e.onImportServer=function(t){if(Laya.timer.clear(this,this.checkImportTimeOut),"string"==typeof t)console.log("importServerUrl back,String>>>："+t),t=JSON.parse(t);else{var e="";for(var i in t)e+=""==e?i+"="+t[i]:"&"+i+"="+t[i]}if(t&&(t.hasOwnProperty("uid")&&t.uid&&0<t.uid.length&&(GlobalConfig.uid=t.uid,console.log("onImportServer--------\x3eGlobalConfig.uid:"+GlobalConfig.uid)),t.hasOwnProperty("name")&&(GlobalConfig.serverName=t.name),t.hasOwnProperty("server")&&(GlobalConfig.serverID=t.server),t.hasOwnProperty("state")&&(GlobalConfig.serverState=parseInt(t.state+"")),t.hasOwnProperty("domain")&&(GlobalConfig.socket_host=t.domain),t.hasOwnProperty("port")&&(GlobalConfig.socket_port=t.port),t.hasOwnProperty("time")&&(GlobalConfig.serverTime=t.time),t.hasOwnProperty("sign")&&(GlobalConfig.sign=t.sign),t.hasOwnProperty("autoOpenTime")&&(GlobalConfig.openSerTime=t.autoOpenTime),t.version&&(GlobalConfig.appVersion=t.version),this.m_firstLoading&&this.m_firstLoading.destroy(),this.requestSuccse=!0,Common.mirClick(3,GlobalConfig.pid,GlobalConfig.uid),GameLog.ins().setInfo(GlobalConfig.serverID,GlobalConfig.serverName,GlobalConfig.uid),GameLog.ins().endStep(GameLog.SERVER),t.hasOwnProperty("isOldUser")&&0==t.isOldUser&&GlobalConfig.serverState<4&&0<GlobalConfig.serverState&&(GlobalConfig.newUser=!0,Common.mirClick(34,GlobalConfig.pid,GlobalConfig.uid),GlobalConfig.socket_host&&GlobalConfig.socket_port)))return Common.mirClick(8,GlobalConfig.pid,GlobalConfig.uid),GameLog.ins().startStep(GameLog.SOCKET,2e3),GlobalConfig.client=10,void GateSocketDock.GetIntance().connect(GlobalConfig.socket_host,GlobalConfig.socket_port);GlobalConfig.clickStream="0",this.loadStarLogin()},e.reqEnterVerify=function(){var t=null;Global.isConchApp||1==Global.xgame?((t=new Object).sid=GlobalConfig.serverID,t.uid=GlobalConfig.uid,t.pid=GlobalConfig.pid,t.gid=GlobalConfig.gid,t.sign=GlobalConfig.sign,t.time=GlobalConfig.serverTime,t.imei=GlobalConfig.IMEI,0==Global.xgame&&NativeSdk.deviceInfo&&(t.version=NativeSdk.deviceInfo.bundle_version),this.verifyUrl=GlobalConfig.mobileVerifyUrl):((t=GlobalConfig.webGetParams).sid=GlobalConfig.serverID,this.verifyUrl=GlobalConfig.verifyUrl),Common.mirClick(23,GlobalConfig.pid,GlobalConfig.uid),console.log("request versify:"+JSON.stringify(t)),HttpActionUtil.httpGet(this.verifyUrl,t,this,this.onVerfyBack,this.onVerifyError),this.verifyRequestTime=Browser.now(),0==this.verifyFristTime&&(this.verifyFristTime=this.verifyRequestTime,GameLog.ins().startStep(GameLog.VERIFY,3e3)),Laya.timer.once(6e3,this,this.checkVerifyTimeOut),this.maxVerifyTime--},e.onVerifyError=function(t){Laya.timer.clear(this,this.checkVerifyTimeOut),console.log("request versify:"+this.verifyUrl+"error"),Common.mirClick(39,GlobalConfig.pid,GlobalConfig.uid),this.requestEnter()},e.checkVerifyTimeOut=function(){Laya.timer.clear(this,this.checkVerifyTimeOut),this.reqVerifySuccess||(0<this.maxVerifyTime?(console.log("request versify time out,reconnect remain times:"+this.maxVerifyTime),this.reqEnterVerify()):this.showAlertOutServer(99))},e.onVerfyBack=function(t){var e=Browser.now();if(console.log("verifyUrl receive,verifyRequestTime:"+(e-this.verifyRequestTime)+",maxVerifyTime:"+this.maxVerifyTime+",costTime:"+(e-this.verifyFristTime)),Laya.timer.clear(this,this.checkVerifyTimeOut),console.log("verifyUrl receive："+JSON.stringify(t)),Common.mirClick(24,GlobalConfig.pid,GlobalConfig.uid),GameLog.ins().endStep(GameLog.VERIFY),"string"==typeof t)t=JSON.parse(t);else{var i="";for(var n in t)i+=""==i?n+"="+t[n]:"&"+n+"="+t[n]}if(t){if(t.hasOwnProperty("state")&&-101==t.state)return void this.onReConect("账号异常，已被封禁");t.hasOwnProperty("time")&&(GlobalConfig.serverTime=t.time),t.hasOwnProperty("sign")&&(GlobalConfig.sign=t.sign);var s=t.msg;if(s){if(s.cdn&&0<s.cdn.length){var o=s.cdn.split(";");GlobalConfig.cdns=ProtocolUtil.changeProtocalByArray(o)}s.jsVer&&0<s.jsVer.length&&(GlobalConfig.appVersion=s.jsVer)}this.reqVerifySuccess=!0}this.requestEnter()},e.requestEnter=function(){GlobalConfig.loadingDescribe||Global.checkQualificationDesc(GlobalConfig.packageName),this.showNativeAppBg("正在打扫战场");var t=new tos_10101;t.arthor=GlobalConfig.uid,t.serverId=GlobalConfig.serverID,t.platform=GlobalConfig.platform,t.token=GlobalConfig.token,t.gid=GlobalConfig.gid,t.pid=GlobalConfig.pid,t.param=GlobalConfig.param,t.guid=GlobalConfig.guid,t.appid=GlobalConfig.appid,t.sign=GlobalConfig.sign,t.time=GlobalConfig.serverTime,t.ptime=GlobalConfig.platformTime,t.psign=GlobalConfig.platformSign,t.adult=GlobalConfig.platformAdult,t.gmModel=30==GlobalConfig.client?1:0,WebSdkUtil.deviceInfo&&(WebSdkUtil.deviceInfo.DEVICE_TOKEN&&(t.device_token=WebSdkUtil.deviceInfo.DEVICE_TOKEN),WebSdkUtil.deviceInfo.PACKAGE_NAME&&(t.package_name=WebSdkUtil.deviceInfo.PACKAGE_NAME)),console.log("request 10101-----------\x3e"+JSON.stringify(t)),Message.sendToService(t),Common.mirClick(10,GlobalConfig.pid,GlobalConfig.uid),this.fristPackBack=!1,this.checkFristPackBack(!1)},e.checkFristPackBack=function(t){void 0===t&&(t=!0),t&&0==this.fristPackBack&&Common.mirClick(40,GlobalConfig.pid,GlobalConfig.uid);var e=GateSocketDock.GetIntance().loginSocket.reConnecting&&GateSocketDock.GetIntance().loginSocket.connected;0==e&&Common.mirClick(41,GlobalConfig.pid,GlobalConfig.uid),0==this.fristPackBack&&e&&Laya.timer.once(1e3,this,this.checkFristPackBack)},e.onImportError=function(t){console.log("request "+GlobalConfig.importServerUrl+" error"),Laya.timer.clear(this,this.checkImportTimeOut),Global.isConchApp?this.checkImportTimeOut():this.loadStarLogin()},e.doShowLoginSatrView=function(){this.closeNativeAppBg(),n.urls&&0<n.urls.length&&(null==this.serverList&&(this.serverList=new LoginStartView),this.serverList.show(),NativeSdk.hasPhoneBang?this.serverList.top=57:this.serverList.centerY=0,this.startBlackPreLoad())},e.closeServerList=function(){this.serverList&&(this.serverList.destroy(),this.serverList=null)},e.onResize=function(){this.serverList&&this.serverList.parent&&this.serverList.resize(),this.m_firstLoading&&this.m_firstLoading.parent&&this.m_firstLoading.resize()},e.clearUI=function(){this.roleCreate&&(this.roleCreate.visible=!1,this.roleCreate.destroyed||this.roleCreate.destroy(),this.roleCreate=null),this.loginUI&&(this.loginUI.visible=!1,this.loginUI.destroyed||this.loginUI.destroy(),this.loginUI=null),this.serverList&&(this.serverList.visible=!1,this.serverList.destroyed||this.serverList.destroy(),this.serverList=null),this.m_firstLoading&&(this.m_firstLoading.visible=!1,this.m_firstLoading.destroyed||this.m_firstLoading.destroy(),this.m_firstLoading=null),this.m_LoadingUI&&(this.m_LoadingUI.visible=!1,this.m_LoadingUI.destroyed||this.m_LoadingUI.destroy(),this.m_LoadingUI=null)},e.showNativeAppBg=function(t,e){if(void 0===e&&(e=!1),!this.nativeAppBg){var i=null;i=Render.isConchApp||0<Global.xgame?GlobalConst.checkTranferSkin(SkinUtil.LOADING_BG,"ui/layouts/login/dl_jm_bg1.jpg"):GlobalConst.checkTranferSkin(SkinUtil.LOADING_BG,"ui/layouts/login/dl_jm_bg1.jpg?"+GlobalConfig.gateResVerison,!1),this.nativeAppBg=new WelcomeView,this.nativeAppBg.bg.centerX=0,this.nativeAppBg.bg.skin=i,this._otherUrls.push(i),i="ui/layouts/login/dl_db.png",this.nativeAppBg.loading_sub_bg.skin=GlobalConst.getFullUrl(i,!1),this._otherUrls.push(i),i="ui/layouts/login/loading_jzq_yq.png",this.nativeAppBg.img_circle.skin=GlobalConst.getFullUrl(i,!1),this._otherUrls.push(i)}this.nativeAppBg.show(t,e),NativeSdk.hasPhoneBang||1==Global.application_model&&375==Browser.clientWidth&&812==Browser.clientHeight?this.nativeAppBg.top=48:(this.nativeAppBg.centerX=0,this.nativeAppBg.centerY=0)},e.closeNativeAppBg=function(){this.nativeAppBg&&this.nativeAppBg.hide()},e.enterGame=function(){this.showNativeAppBg("开始加载资源"),GameLog.log("=== ==== this version"+GlobalConfig.version+"==== ==="),this.enterLoadJs=!0,-1==this.blackOption?this.startLoad():this.checkStartMain()},e.startLoad=function(){if(Common.mirClick(7,GlobalConfig.pid,GlobalConfig.uid),GameLog.ins().startStep(GameLog.CODE),GlobalConfig.cdns&&0<GlobalConfig.cdns.length){var t=GlobalConfig.cdns[0]+"resources/";GlobalConst.host!=t&&(GlobalConfig.sameHost=!1,GlobalConst.host=t,Global.nativeIOS&&this.transUrl(t))}this.loadResourceVersion(),this.loadUIModule()},e.startBlackPreLoad=function(){},e.transUrl=function(n){if(n&&0<n.length){var t=Browser.window.appcache;if(t&&t.transUrlToCachedUrl){var s=Browser.window.location.href.replace(/^(.*[\\\/])[^\\\/]*$/,"$1");t.transUrlToCachedUrl(function(t){if(!t)return t;t=t.replace(/\?.*/,"");var e=n.length;if(t.substr(0,e)!=n)return console.log("---------------after no trans url:"+t),t;var i=s+t.substr(e);return console.log("========== after trans url:"+i),i})}}},e.loadResourceVersion=function(){-1==this.loadedVersion?(GameLog.ins().startStep(GameLog.VJSON,3e3),this.loadedVersion=0,ModulesManager.instance().loadModule("vs",Handler.create(this,this.loadedResVersionCompete),null,Global.xgame)):this.checkStartMain()},e.load_JS=function(){this._jss.length<=0?Laya.timer.once(100,this,this.checkStartMain):ModulesManager.instance().loadModule(this._jss.shift(),Handler.create(this,this.loaded_JS_Module),null,Global.xgame)},e.loaded_JS_Module=function(){this.load_JS()},e.loadUIModule=function(){-1==this.loadedUI?(GameLog.ins().startStep(GameLog.CODE_UI,2e3),this.loadedUI=0,ModulesManager.instance().loadModule("gameui",Handler.create(this,this.loadedUIModuleCompete),null,Global.xgame)):this.checkStartMain()},e.loadMainModule=function(){-1==this.loadedMain?(GameLog.ins().startStep(GameLog.CODE_MAIN,5e3),this.loadedMain=0,ModulesManager.instance().loadModule("gamemain",Handler.create(this,this.loadedMainModuleCompete),null,Global.xgame)):this.checkStartMain()},e.loadedResVersionCompete=function(t){0!=t?(GameLog.ins().endStep(GameLog.VJSON),this.loadedVersion=1,this.checkStartMain()):this.onReConect("网络无法加载，请检查网络重新登录！")},e.loadedUIModuleCompete=function(t){0!=t?(GameLog.ins().endStep(GameLog.CODE_UI),this.loadedUI=1,Common.mirClick(26,GlobalConfig.pid,GlobalConfig.uid),this.loadMainModule()):this.onReConect("网络加载异常，请检查网络重新登录！")},e.loadedMainModuleCompete=function(t){0!=t?(GameLog.ins().endStep(GameLog.CODE_MAIN),GameLog.ins().endStep(GameLog.CODE),this.loadedMain=1,WebSdkUtil.deviceInfo&&(PreLoadUtils.getIns().phoneMode=WebSdkUtil.deviceInfo.PHONE_MODEL,console.log("phoneMode:"+WebSdkUtil.deviceInfo.PHONE_MODEL),PreLoadUtils.getIns().versionMap=GlobalConfig.versionMap),Common.mirClick(27,GlobalConfig.pid,GlobalConfig.uid),this.checkStartMain()):this.onReConect("网络加载异常，请重新登录！")},e.checkStartMain=function(){if(GameLog.log("checkStartMain,"+this.loadedVersion+","+this.loadedUI+","+this.loadedMain+","+this.enterLoadJs+","+this.enterBool),0<this.loadedVersion&&0<this.loadedUI&&0<this.loadedMain&&1==this.enterLoadJs&&0<this._jss.length)this.load_JS();else if(0<this.loadedVersion&&0<this.loadedUI&&0<this.loadedMain&&1==this.enterLoadJs&&this._jss.length<=0){if(this.enterBool)return;for(PreLoadUtils.getIns().pauseLoad=!0,Laya.timer.clear(this,this.doShowLoading),GateSocketDock.GetIntance().clearn();Laya.stage.numChildren;)Laya.stage.removeChildAt(0);Global.isConchApp&&this.closeNativeAppBg(),this.m_firstLoading&&this.m_firstLoading.parent&&this.m_firstLoading.destroy(),this.m_firstLoading=null,this.clearUI(),Global.nativeIOS&&1==Global.iosChecking&&(this.loadingIos=new LoadingIosView,Laya.stage.addChild(this.loadingIos)),this.enterBool=!0,this.enterMain()}},e.enterMain=function(){this.showNativeAppBg("正在加载配置"),console.log("mainFile:"+GlobalConfig.mainFile);try{var t=GameEnter.getInstance()}catch(t){return GameLog.log(t,2,!0),this.onReConect("网络加载异常，请检查网络重新登录！"),void(2==Global.xgame&&MiniFileMgr$1.deleteAll())}var e=GlobalConst.host,i={createRole:GlobalConst.justCreated,uid:GlobalConfig.uid,gid:GlobalConfig.gid,appid:GlobalConfig.appid,version:GlobalConfig.webversion,appversion:GlobalConfig.appVersion,mainFile:GlobalConfig.mainFile,time:GlobalConfig.serverTime,sign:GlobalConfig.sign,socket_ip:GlobalConfig.socket_host,app_sdk:NativeSdk,run_model:Global.application_model,socket_port:GlobalConfig.socket_port,server_id:GlobalConfig.serverID,server_name:GlobalConfig.serverName,host:e,cdns:GlobalConfig.cdns};i.resVersion=GlobalConfig.versionMap,Global.isConchApp?i.deviceInfo=NativeSdk.deviceInfo:i.deviceInfo=WebSdkUtil.deviceInfo,GlobalConfig.loadingDescribe||(GlobalConfig.loadingDescribe=GlobalConfig.defaultQualification),i.client=GlobalConfig.client,i.nativeSuffix=Global.nativeSuffix,i.loadingDescribe=GlobalConfig.loadingDescribe,i.noticeDescribe=GlobalConfig.noticeDescribe,Global.nativeIOS&&1==Global.iosChecking?i.loadingView=this.loadingIos:i.loadingView=this.nativeAppBg,i.xgame=Global.xgame,i.websdk=WebSdkUtil.getWebSdk(),i.globalParams=getGlobalParams(),i.webGetParams=GlobalConfig.webGetParams,i.clickStream=GlobalConfig.clickStream,i.clickAppids=GlobalConfig.clickAppids,this._otherUrls=this._otherUrls.concat(n.urls),i.loginResList=this._otherUrls,GameLog.ins().startStep(GameLog.ENTER),Common.mirClick(28,GlobalConfig.pid,GlobalConfig.uid),t.runWeb(i)},n.urls=[],n}(),GateSocketDock=function(t){function i(){this.loginSocket=null,this.priorityQueueTime=0,this.resolvePacketTime=0,this.resolve_dur=2,this.isDebug=!0,this.now=0,this.tickTime=0,this.waitQueue=new Array,i.__super.call(this),console.log("SocketDock is Ready!"),(gateModule.net.GateSocketDock._intance_=this).initWebSocket()}__class(i,"gateModule.net.GateSocketDock",GateSubProxy);var e=i.prototype;return e.initWebSocket=function(){this.loginSocket=new GateGameSocket,this.tickTime=Engine.getTimer(),Laya.timer.loop(2,this,this.loop)},e.setSlowPack=function(){Laya.timer.clear(this,this.loop),Laya.timer.loop(800,this,this.loop)},e.recovePack=function(){Laya.timer.clear(this,this.loop),Laya.timer.loop(2,this,this.loop)},e.reSetWebSocket=function(){this.loginSocket.reConnecting=!1},e.connect=function(t,e){this.isDebug,this.loginSocket.connect(t,e)},e.clearn=function(){this.loginSocket&&(this.loginSocket._autoCheckConnect=!1,this.loginSocket.close(),this.loginSocket.clean(),Laya.timer.clear(this,this.loop))},e.loop=function(){if(this.loginSocket){var t=this.loginSocket.buffMessages.length,e=Engine.getTimer();0<t&&(this.loginSocket.connected?e-this.resolvePacketTime>this.resolve_dur&&(this.resolvePacketTime=e,this.receivedHandler()):e-this.resolvePacketTime>this.resolve_dur&&(this.resolvePacketTime=e,this.receiveHandlerByOutServer())),this.now=Engine.getTimer(),this.loginSocket.connected&&3e4<=this.now-this.tickTime&&(1==GlobalConfig.hasFirstSend&&(Browser.onPC||!Browser.onPC&&Laya.stage.isVisibility)&&Message.sendToService(new tos_10115),this.tickTime=this.now)}},e.subHandler=function(t){var e=t.proto;if(this.loginSocket&&this.loginSocket.connected&&!this.loginSocket.reConnecting)switch(t.actionOrder){case"4":this.loginSocket.sendBeanData(t.proto),e.packId,t.proto=null,t.recover()}else this.waitQueue.push(t.proto),-1==i.PACKIDS.indexOf(e.packId)||this.loginSocket.connected||this.onReConect("登陆信息已失效,请刷新重新登陆！"),e.packId,console.log(t,"消息发送失败，当前链接处于离线状态。")},e.showAlertOutConnect=function(){this.onReConect("登陆信息已失效,请刷新重新登陆！")},e.onReConect=function(t){LoginAlertView.ins.show(t,!0)},e.receivedHandler=function(){var t,e,i=this.loginSocket.buffMessages.shift(),n=i[0],s=i[1];try{e=GateSocketUtils.socket_Packages.take(n.toString())}catch(t){console.log(t.message)}e&&(t=new e).decode(s),t&&this.broadcastMsg(n,t)},e.receiveHandlerByOutServer=function(){var t=this.loginSocket.buffMessages[0],e=t[0];if(13303==e||10118==e){var i,n,s=(t=this.loginSocket.buffMessages.shift())[1];try{n=GateSocketUtils.socket_Packages.take(e.toString())}catch(t){console.log(t.message)}n&&(i=new n).decode(s),i&&this.broadcastMsg(e,i)}},e.broadcastMsg=function(t,e){var i=t.toString(),n=GateCustomModule.subscribeHash.take(i);n&&this.sendToModule(i,n,e)},i.GetIntance=function(){return gateModule.net.GateSocketDock._intance_},i._intance_=null,i.logined=!1,i.isConnected=!1,__static(i,["PACKIDS",function(){return this.PACKIDS=[10101,10103,10105,10107]}]),i}(),GateGameSocket=function(e){function i(t,e){this._host_="",void(this._port_=0)===e&&(e=0),i.__super.call(this,t,e)}__class(i,"gateModule.net.GateGameSocket",e);var t=i.prototype;return t._init_=function(){},t._onConnect_=function(t){e.prototype._onConnect_.call(this,t),console.log("is connected !")},t._onClose_=function(t){e.prototype._onClose_.call(this,t)},t._onError_=function(t){e.prototype._onError_.call(this,t)},t._onMessage_=function(t){e.prototype._onMessage_.call(this,t)},i}(GateCustomSocket),toc_10102=function(t){function e(){this.status=0,this.isCreated=!1,this.justCreated=0,e.__super.call(this),this.packId=10102}return __class(e,"gateModule.protos.login.toc_10102",GSocket_toc),e.prototype.decode=function(t){this.status=t.readByte(),this.isCreated=1==t.readByte(),0<t.bytesAvailable&&(this.justCreated=t.readByte())},e}(),toc_10104=function(t){function e(){this.nameStr=null,e.__super.call(this),this.packId=10104}return __class(e,"gateModule.protos.login.toc_10104",GSocket_toc),e.prototype.decode=function(t){this.nameStr=t.readUTF()},e}(),toc_10106=function(t){function e(){this.result=0,e.__super.call(this),this.packId=10106}return __class(e,"gateModule.protos.login.toc_10106",GSocket_toc),e.prototype.decode=function(t){this.result=t.readByte()},e}(),toc_10110=function(t){function e(){this.serverTime=NaN,this.openServeTime=0,this.ComServeTime=0,e.__super.call(this),this.packId=10110}return __class(e,"gateModule.protos.login.toc_10110",GSocket_toc),e.prototype.decode=function(t){this.serverTime=GateSocketUtils.readLong64(t),this.openServeTime=t.readInt(),this.ComServeTime=t.readInt()},e}(),toc_10114=function(t){function e(){this.status=0,e.__super.call(this),this.packId=10114}return __class(e,"gateModule.protos.login.toc_10114",GSocket_toc),e.prototype.decode=function(t){this.status=t.readByte()},e}(),toc_10118=function(t){function e(){this.day=0,this.hour=0,this.mintue=0,this.reson=null,e.__super.call(this),this.packId=10118}return __class(e,"gateModule.protos.login.toc_10118",GSocket_toc),e.prototype.decode=function(t){this.day=t.readInt(),this.hour=t.readByte(),this.mintue=t.readByte(),this.reson=t.readUTF()},e}(),toc_13303=function(t){function e(){this.outType=0,e.__super.call(this),this.packId=13303}return __class(e,"gateModule.protos.login.toc_13303",GSocket_toc),e.prototype.decode=function(t){this.outType=t.readByte()},e}(),toc_13602=function(t){function e(){this.report=!1,e.__super.call(this),this.packId=13602}return __class(e,"gateModule.protos.login.toc_13602",GSocket_toc),e.prototype.decode=function(t){this.report=t.readBoolean()},e}(),tos_10101=function(t){function e(){this.platform=null,this.serverId=null,this.arthor=null,this.gid="",this.pid="",this.time="",this.sign="",this.token="",this.param="",this.guid="",this.appid="",this.ptime="",this.psign="",this.adult=-1,this.device_token="",this.package_name="",this.gmModel=0,e.__super.call(this),this.packId=10101}return __class(e,"gateModule.protos.login.tos_10101",GSocket_tos),e.prototype.encode=function(){return this.bytes.writeUTF(this.platform),this.bytes.writeUTF(this.serverId),this.bytes.writeUTF(this.arthor),this.bytes.writeUTF(this.gid),this.bytes.writeUTF(this.pid),this.bytes.writeUTF(this.ptime),this.bytes.writeUTF(this.psign),this.bytes.writeUTF(this.token),this.bytes.writeUTF(this.param),this.bytes.writeUTF(this.guid),this.bytes.writeUTF(this.appid),this.bytes.writeByte(this.adult),this.bytes.writeUTF(this.time),this.bytes.writeUTF(this.sign),this.bytes.writeUTF(this.device_token),this.bytes.writeUTF(this.package_name),this.bytes.writeByte(this.gmModel),this.bytes},e}(),tos_10103=function(t){function e(){this.sex=0,e.__super.call(this),this.packId=10103}return __class(e,"gateModule.protos.login.tos_10103",GSocket_tos),e.prototype.encode=function(){return this.bytes.writeByte(this.sex),this.bytes},e}(),tos_10105=function(t){function e(){this.sex=0,this.carrerId=0,this.charName=null,e.__super.call(this),this.packId=10105}return __class(e,"gateModule.protos.login.tos_10105",GSocket_tos),e.prototype.encode=function(){return this.bytes.writeByte(this.sex),this.bytes.writeByte(this.carrerId),this.bytes.writeUTF(this.charName),this.bytes},e}(),tos_10107=function(t){function e(){e.__super.call(this),this.packId=10107}return __class(e,"gateModule.protos.login.tos_10107",GSocket_tos),e}(),tos_10113=function(t){function e(){this.platform=null,this.serverId=null,this.arthor=null,e.__super.call(this),this.packId=10113}return __class(e,"gateModule.protos.login.tos_10113",GSocket_tos),e.prototype.encode=function(){return this.bytes.writeUTF(this.platform),this.bytes.writeUTF(this.serverId),this.bytes.writeUTF(this.arthor),this.bytes.writeUTF(GlobalConfig.key),this.bytes},e}(),tos_10115=function(t){function e(){e.__super.call(this),this.packId=10115}return __class(e,"gateModule.protos.login.tos_10115",GSocket_tos),e}(),tos_13601=function(t){function e(){this.info=null,e.__super.call(this),this.packId=13601}return __class(e,"gateModule.protos.login.tos_13601",GSocket_tos),e.prototype.encode=function(){return this.bytes.writeUTF(this.info),this.bytes},e}(),MiniSoundChannel=function(t){function i(t,e){this._audio=null,this._onEnd=null,this._miniSound=null,i.__super.call(this),this._audio=t,this._miniSound=e,this._onEnd=i.bindToThis(this.__onEnd,this),t.onEnded(this._onEnd)}__class(i,"laya.bd.mini.MiniSoundChannel",SoundChannel);var e=i.prototype;return e.__onEnd=function(){if(MiniSound._audioCache[this.url]=this._miniSound,1==this.loops)return this.completeHandler&&(Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play()},e.play=function(){this.isStopped=!1,SoundManager.addChannel(this),this._audio.play()},e.stop=function(){this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.stop(),this._audio.offEnded(null))},e.pause=function(){this.isStopped=!0,this._audio.pause()},e.resume=function(){this._audio&&(this.isStopped=!1,SoundManager.addChannel(this),this._audio.play())},__getset(0,e,"autoplay",function(){return this._audio.autoplay},function(t){this._audio.autoplay=t}),__getset(0,e,"position",function(){return this._audio?this._audio.currentTime:0}),__getset(0,e,"duration",function(){return this._audio?this._audio.duration:0}),__getset(0,e,"loop",function(){return this._audio.loop},function(t){this._audio.loop=t}),__getset(0,e,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),i.bindToThis=function(t,e){return t.bind(e)},i}(),LoaderHook=function(l){function i(){i.__super.call(this)}__class(i,"laya.debug.tools.enginehook.LoaderHook",l);var t=i.prototype;return t.checkUrls=function(t){var e;e="string"==typeof t?t:t.url,i.preFails[e]},t.chekUrlList=function(t){var e,i=0;for(e=t.length,i=0;i<e;i++)this.checkUrls(t[i])},t.load=function(t,e,i,n,s,o,a,r){return void 0===s&&(s=1),void 0===o&&(o=!0),void 0===r&&(r=!1),t instanceof Array?this.chekUrlList(t):this.checkUrls(t),l.prototype.load.call(this,t,e,i,n,s,o,a,r)},i.init=function(){i.isInited||(i.isInited=!0,Laya.loader=new i,Laya.loader.on("error",null,i.onFail),(i.preFails=LocalStorage.getJSON("LoadFailItems"))||(i.preFails={}))},i.onFail=function(t){OutPutView.I.dTrace("LoadFail:"+t),i.nowFails[t]=!0,LocalStorage.setJSON("LoadFailItems",i.nowFails)},i.resetFails=function(){i.nowFails={},LocalStorage.setJSON("LoadFailItems",i.nowFails)},i.preFails={},i.nowFails={},i.enableFailDebugger=!0,i.FailSign="LoadFailItems",i.isInited=!1,i}(LoaderManager),Bitmap=function(t){function e(){e.__super.call(this),this._w=0,this._h=0}__class(e,"laya.resource.Bitmap",Resource);var i=e.prototype;return __getset(0,i,"width",function(){return this._w}),__getset(0,i,"height",function(){return this._h}),__getset(0,i,"source",function(){return this._source}),e}(),BaseShader=function(t){function e(){e.__super.call(this),this.lock=!0}return __class(e,"laya.webgl.shader.BaseShader",Resource),e.activeShader=null,e.bindShader=null,e}(),AudioSoundChannel=function(t){function e(t){this._audio=null,this._onEnd=null,this._resumePlay=null,e.__super.call(this),this._onEnd=Utils.bind(this.__onEnd,this),this._resumePlay=Utils.bind(this.__resumePlay,this),t.addEventListener("ended",this._onEnd),this._audio=t}__class(e,"laya.media.h5audio.AudioSoundChannel",SoundChannel);var i=e.prototype;return i.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play()},i.__resumePlay=function(){if(this._audio&&this._audio.removeEventListener("canplay",this._resumePlay),!this.isStopped)try{this._audio.currentTime=this.startTime,Browser.container.appendChild(this._audio),this._audio.play()}catch(t){this.event("error")}},i.play=function(){if(this.isStopped=!1,this._audio){try{this._audio.playbackRate=SoundManager.playbackRate,this._audio.currentTime=this.startTime}catch(t){return void this._audio.addEventListener("canplay",this._resumePlay)}SoundManager.addChannel(this),Browser.container.appendChild(this._audio),"play"in this._audio&&this._audio.play()}},i.stop=function(){this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&Render.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),Browser.onIE||this._audio!=AudioSound._musicAudio&&Pool.recover("audio:"+this.url,this._audio),Browser.removeElement(this._audio),this._audio=null)},i.pause=function(){this.isStopped=!0,SoundManager.removeChannel(this),"pause"in this._audio&&this._audio.pause()},i.resume=function(){this._audio&&(this.isStopped=!1,SoundManager.addChannel(this),"play"in this._audio&&this._audio.play())},__getset(0,i,"position",function(){return this._audio?this._audio.currentTime:0}),__getset(0,i,"duration",function(){return this._audio?this._audio.duration:0}),__getset(0,i,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),e}(),WebAudioSoundChannel=function(t){function e(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=WebAudioSound.ctx,e.__super.call(this),this._onPlayEnd=Utils.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}__class(e,"laya.media.webaudio.WebAudioSoundChannel",SoundChannel);var i=e.prototype;return i.play=function(){if(SoundManager.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var t=this.context,e=this.gain,i=t.createBufferSource();(this.bufferSource=i).buffer=this.audioBuffer,i.connect(e),e&&e.disconnect(),e.connect(t.destination),i.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=Browser.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.001):this.gain.gain.value=this._volume,0==this.loops&&(i.loop=!0),i.playbackRate.setTargetAtTime?i.playbackRate.setTargetAtTime(SoundManager.playbackRate,this.context.currentTime,.001):i.playbackRate.value=SoundManager.playbackRate,i.start(0,this.startTime),this._currentTime=0}},i.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play()},i._clearBufferSource=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),t.disconnect(0),t.onended=null,e._tryCleanFailed||this._tryClearBuffer(t),this.bufferSource=null}},i._tryClearBuffer=function(t){if(Browser.onMac)try{t.buffer=WebAudioSound._miniBuffer}catch(t){e._tryCleanFailed=!0}else try{t.buffer=null}catch(t){e._tryCleanFailed=!0}},i.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null,SoundManager.autoReleaseSound&&Laya.timer.once(5e3,null,SoundManager.disposeSoundIfNotUsed,[this.url],!1)},i.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,SoundManager.removeChannel(this),SoundManager.autoReleaseSound&&Laya.timer.once(5e3,null,SoundManager.disposeSoundIfNotUsed,[this.url],!1)},i.resume=function(){this.startTime=this._pauseTime,this.play()},__getset(0,i,"position",function(){return this.bufferSource?(Browser.now()-this._startTime)/1e3+this.startTime:0}),__getset(0,i,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),__getset(0,i,"volume",function(){return this._volume},function(t){this.isStopped||(this._volume=t,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(t,this.context.currentTime,.001):this.gain.gain.value=t)}),e._tryCleanFailed=!1,e.SetTargetDelay=.001,e}(),Buffer=function(t){function e(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,e.__super.call(this),e._gl=WebGL.mainContext}__class(e,"laya.webgl.utils.Buffer",Resource);var i=e.prototype;return i._bind=function(){this.activeResource(),e._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(e._bindVertexBuffer=this._glBuffer),e._gl.bindBuffer(this._bufferType,e._bindActive[this._bufferType]=this._glBuffer),BaseShader.activeShader=null)},i.recreateResource=function(){this._glBuffer||(this._glBuffer=e._gl.createBuffer()),this.completeCreate()},i.disposeResource=function(){this._glBuffer&&(WebGL.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},__getset(0,i,"bufferUsage",function(){return this._bufferUsage}),e._gl=null,e._bindActive={},e._bindVertexBuffer=null,e._enableAtributes=[],e}(),MiniSoundChannel$1=function(t){function i(t,e){this._audio=null,this._onEnd=null,this._miniSound=null,i.__super.call(this),this._audio=t,this._miniSound=e,this._onEnd=i.bindToThis(this.__onEnd,this),t.onEnded(this._onEnd)}__class(i,"laya.wx.mini.MiniSoundChannel",SoundChannel,"MiniSoundChannel$1");var e=i.prototype;return e.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play()},e.play=function(){this.isStopped=!1,SoundManager.addChannel(this),this._audio.play()},e.stop=function(){this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.pause(),this._audio.offEnded(null),this._audio=null,this._miniSound=null,this._onEnd=null)},e.pause=function(){this.isStopped=!0,this._audio.pause()},e.resume=function(){this._audio&&(this.isStopped=!1,SoundManager.addChannel(this),this._audio.play())},__getset(0,e,"startTime",null,function(t){this._audio&&(this._audio.startTime=t)}),__getset(0,e,"autoplay",function(){return this._audio.autoplay},function(t){this._audio.autoplay=t}),__getset(0,e,"position",function(){return this._audio?this._audio.currentTime:0}),__getset(0,e,"duration",function(){return this._audio?this._audio.duration:0}),__getset(0,e,"loop",function(){return this._audio.loop},function(t){this._audio.loop=t}),__getset(0,e,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),i.bindToThis=function(t,e){return t.bind(e)},i}(),RenderTarget2D=function(e){function c(t,e,i,n,s,o,a,r,l){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===i&&(i=6408),void 0===n&&(n=5121),void 0===s&&(s=34041),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===r&&(r=-1),void 0===l&&(l=-1),this._type=1,this._w=t,this._h=e,this._surfaceFormat=i,this._surfaceType=n,this._depthStencilFormat=s,Render.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=o,this._repeat=a,this._minFifter=r,this._magFifter=l,this._createWebGLRenderTarget(),this.bitmap.lock=!0,c.__super.call(this,this.bitmap,Texture.INV_UV)}__class(c,"laya.webgl.resource.RenderTarget2D",e);var t=c.prototype;return Laya.imps(t,{"laya.resource.IDispose":!0}),t.getType=function(){return this._type},t.getTexture=function(){return this},t.size=function(t,e){this._w==t&&this._h==e||(this._w=t,this._h=e,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},t.release=function(){this.destroy()},t.recycle=function(){c.POOL.push(this)},t.start=function(){var t=WebGL.mainContext;return this._preRenderTarget=RenderState2D.curRenderTarget,RenderState2D.curRenderTarget=this,t.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(t.viewport(0,0,this._w,this._h),this._svWidth=RenderState2D.width,this._svHeight=RenderState2D.height,RenderState2D.width=this._w,RenderState2D.height=this._h,BaseShader.activeShader=null),this},t.clear=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1);var s=WebGL.mainContext;s.clearColor(t,e,i,n);var o=16384;switch(this._depthStencilFormat){case 33189:o|=256;break;case 36168:o|=1024;break;case 34041:o|=256,o|=1024}s.clear(o)},t.end=function(){var t=WebGL.mainContext;t.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,RenderState2D.curRenderTarget=this._preRenderTarget,1==this._type?(t.viewport(0,0,this._svWidth,this._svHeight),RenderState2D.width=this._svWidth,RenderState2D.height=this._svHeight,BaseShader.activeShader=null):t.viewport(0,0,Laya.stage.width,Laya.stage.height)},t.getData=function(t,e,i,n){var s=WebGL.mainContext;if(s.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===s.checkFramebufferStatus(36160)))return s.bindFramebuffer(36160,null),null;var o=new Uint8Array(this._w*this._h*4);return s.readPixels(t,e,i,n,this._surfaceFormat,this._surfaceType,o),s.bindFramebuffer(36160,null),o},t.destroy=function(t){void 0===t&&(t=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,e.prototype.destroy.call(this))},t.dispose=function(){},t._createWebGLRenderTarget=function(){this.bitmap=new WebGLRenderTarget(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(t){this.event("recovered")})},__getset(0,t,"surfaceFormat",function(){return this._surfaceFormat}),__getset(0,t,"magFifter",function(){return this._magFifter}),__getset(0,t,"surfaceType",function(){return this._surfaceType}),__getset(0,t,"mipMap",function(){return this._mipMap}),__getset(0,t,"depthStencilFormat",function(){return this._depthStencilFormat}),__getset(0,t,"minFifter",function(){return this._minFifter}),__getset(0,t,"source",function(){return this._alreadyResolved?Laya.superGet(Texture,this,"source"):null}),c.create=function(t,e,i,n,s,o,a,r,l){void 0===i&&(i=6408),void 0===n&&(n=5121),void 0===s&&(s=34041),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===r&&(r=-1),void 0===l&&(l=-1);var h=c.POOL.pop();return h||(h=new c(t,e)),h.bitmap&&h._w==t&&h._h==e&&h._surfaceFormat==i&&h._surfaceType==n&&h._depthStencilFormat==s&&h._mipMap==o&&h._repeat==a&&h._minFifter==r&&h._magFifter==l||(h._w=t,h._h=e,h._surfaceFormat=i,h._surfaceType=n,h._depthStencilFormat=s,Render.isConchWebGL&&34041===h._depthStencilFormat&&(h._depthStencilFormat=33189),h._mipMap=o,h._repeat=a,h._minFifter=r,h._magFifter=l,h.release(),h._createWebGLRenderTarget()),h},c.TYPE2D=1,c.TYPE3D=2,c.POOL=[],c}(Texture),SkinSV=function(t){function i(t){this.texcoord=null,this.offsetX=300,this.offsetY=0,i.__super.call(this,512,0);var e=8*CONST3D2D.BYTES_PE;this.position=[2,5126,!1,e,0],this.texcoord=[2,5126,!1,e,2*CONST3D2D.BYTES_PE],this.color=[4,5126,!1,e,4*CONST3D2D.BYTES_PE]}return __class(i,"laya.webgl.shader.d2.skinAnishader.SkinSV",Value2D),i}(),Color2dSV=function(t){function e(t){e.__super.call(this,2,0),this.color=[]}return __class(e,"laya.webgl.shader.d2.value.Color2dSV",Value2D),e.prototype.setValue=function(t){t.fillStyle&&(this.color=t.fillStyle._color._color),t.strokeStyle&&(this.color=t.strokeStyle._color._color)},e}(),FillTextureSV=function(t){function e(t){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=Value2D._TEXCOORD,e.__super.call(this,256,0)}__class(e,"laya.webgl.shader.d2.value.FillTextureSV",Value2D);var i=e.prototype;return i.setValue=function(t){this.ALPHA=t.ALPHA,t.filters&&this.setFilters(t.filters)},i.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},e}(),TextureSV=function(t){function e(t){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=Value2D._TEXCOORD,void 0===t&&(t=0),e.__super.call(this,1,t)}__class(e,"laya.webgl.shader.d2.value.TextureSV",Value2D);var i=e.prototype;return i.setValue=function(t){this.ALPHA=t.ALPHA,t.filters&&this.setFilters(t.filters)},i.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},e}(),PrimitiveSV=function(t){function e(t){this.a_color=null,this.u_pos=[0,0],e.__super.call(this,4,0),this.position=[2,5126,!1,5*CONST3D2D.BYTES_PE,0],this.a_color=[3,5126,!1,5*CONST3D2D.BYTES_PE,2*CONST3D2D.BYTES_PE]}return __class(e,"laya.webgl.shader.d2.value.PrimitiveSV",Value2D),e}(),gameGate=function(t){function e(){this.firstSize=0,e.__super.call(this)}__class(e,"gameGate",Sprite);var i=e.prototype;return i.run=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=!0),i&&0<i.length&&(GlobalConfig.appid=i),Global.run_env=t,Global.checkAppModel(1==t),Common.setup_xgame(t),Global.nativeSuffix=e,Laya.init(720,1280,WebGL),Font.defaultFamily="黑体",this.isFitWidth?Laya.stage.scaleMode="fixedwidth":Laya.stage.scaleMode="fixedheight",Global.isConchApp?Laya.loader.maxLoader=6:0<Global.xgame?Laya.loader.maxLoader=10:Laya.loader.maxLoader=7,Global.isConchApp?NativeSdk.initSdk():WebSdkUtil.initSdk(),GameInit.getIntance().initGame()},__getset(0,i,"isFitWidth",function(){var t=Browser.clientWidth/Browser.clientHeight;return this.firstSize<=0&&(this.firstSize=t),t<.5625}),e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e._instance=null,e}(),Component=function(e){function t(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,t.__super.call(this),this._layout=LayoutStyle.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}__class(t,"laya.ui.Component",e);var i=t.prototype;return Laya.imps(i,{"laya.ui.IComponent":!0}),i.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},i.preinitialize=function(){},i.createChildren=function(){},i.initialize=function(){},i.callLater=function(t,e){Laya.timer.callLater(this,t,e)},i.runCallLater=function(t){Laya.timer.runCallLater(this,t)},i.commitMeasure=function(){},i.changeSize=function(){this.event("resize"),this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},i.getLayout=function(){return this._layout===LayoutStyle.EMPTY&&(this._layout=new LayoutStyle),this._layout},i._setLayoutEnabled=function(t){this._layout&&this._layout.enable!=t&&(this._layout.enable=t,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},i.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},i.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},i.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},i.resetLayoutX=function(){var t=this._layout;if(isNaN(t.anchorX)||(this.pivotX=t.anchorX*this.width),this.layoutEnabled){var e=this.parent;e&&(isNaN(t.centerX)?isNaN(t.left)?isNaN(t.right)||(this.x=Math.round(e.width-this.displayWidth-t.right+this.pivotX*this.scaleX)):(this.x=Math.round(t.left+this.pivotX*this.scaleX),isNaN(t.right)||(this.width=(e._width-t.left-t.right)/(this.scaleX||.01))):this.x=Math.round(.5*(e.width-this.displayWidth)+t.centerX+this.pivotX*this.scaleX))}},i.resetLayoutY=function(){var t=this._layout;if(isNaN(t.anchorY)||(this.pivotY=t.anchorY*this.height),this.layoutEnabled){var e=this.parent;e&&(isNaN(t.centerY)?isNaN(t.top)?isNaN(t.bottom)||(this.y=Math.round(e.height-this.displayHeight-t.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(t.top+this.pivotY*this.scaleY),isNaN(t.bottom)||(this.height=(e._height-t.top-t.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(e.height-this.displayHeight)+t.centerY+this.pivotY*this.scaleY))}},i.onMouseOver=function(t){Laya.stage.event("showtip",this._toolTip)},i.onMouseOut=function(t){Laya.stage.event("hidetip",this._toolTip)},i._childChanged=function(t){this.callLater(this.changeSize),e.prototype._childChanged.call(this,t)},__getset(0,i,"displayWidth",function(){return this.width*this.scaleX}),__getset(0,i,"width",function(){return this._width?this._width:this.measureWidth},function(t){this._width!=t&&(this._width=t,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),__getset(0,i,"measureWidth",function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;-1<e;e--){var i=this.getChildAt(e);i.visible&&(t=Math.max(i.x+i.width*i.scaleX,t))}return t}),__getset(0,i,"displayHeight",function(){return this.height*this.scaleY}),__getset(0,i,"height",function(){return this._height?this._height:this.measureHeight},function(t){this._height!=t&&(this._height=t,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),__getset(0,i,"dataSource",function(){return this._dataSource},function(t){for(var e in this._dataSource=t,this._dataSource)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=this._dataSource[e])}),__getset(0,i,"scaleY",e.prototype._$get_scaleY,function(t){Laya.superGet(Sprite,this,"scaleY")!=t&&(Laya.superSet(Sprite,this,"scaleY",t),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),__getset(0,i,"measureHeight",function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;-1<e;e--){var i=this.getChildAt(e);i.visible&&(t=Math.max(i.y+i.height*i.scaleY,t))}return t}),__getset(0,i,"scaleX",e.prototype._$get_scaleX,function(t){Laya.superGet(Sprite,this,"scaleX")!=t&&(Laya.superSet(Sprite,this,"scaleX",t),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),__getset(0,i,"top",function(){return this._layout.top},function(t){t!=this._layout.top&&(this.getLayout().top=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),__getset(0,i,"bottom",function(){return this._layout.bottom},function(t){t!=this._layout.bottom&&(this.getLayout().bottom=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),__getset(0,i,"left",function(){return this._layout.left},function(t){t!=this._layout.left&&(this.getLayout().left=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),__getset(0,i,"right",function(){return this._layout.right},function(t){t!=this._layout.right&&(this.getLayout().right=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),__getset(0,i,"centerX",function(){return this._layout.centerX},function(t){t!=this._layout.centerX&&(this.getLayout().centerX=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),__getset(0,i,"centerY",function(){return this._layout.centerY},function(t){t!=this._layout.centerY&&(this.getLayout().centerY=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),__getset(0,i,"anchorX",function(){return this._layout.anchorX},function(t){t!=this._layout.anchorX&&(this.getLayout().anchorX=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),__getset(0,i,"anchorY",function(){return this._layout.anchorY},function(t){t!=this._layout.anchorY&&(this.getLayout().anchorY=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),__getset(0,i,"tag",function(){return this._tag},function(t){this._tag=t}),__getset(0,i,"toolTip",function(){return this._toolTip},function(t){this._toolTip!=t&&(null!=(this._toolTip=t)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),__getset(0,i,"comXml",function(){return this._comXml},function(t){this._comXml=t}),__getset(0,i,"gray",function(){return this._gray},function(t){t!==this._gray&&(this._gray=t,UIUtils.gray(this,t))}),__getset(0,i,"disabled",function(){return this._disabled},function(t){t!==this._disabled&&(this.gray=this._disabled=t,this.mouseEnabled=!t)}),t}(Sprite),HTMLElement=function(i){function e(){this.URI=null,this._href=null,e.__super.call(this),this._text=e._EMPTYTEXT,this.setStyle(new CSSStyle(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}__class(e,"laya.html.dom.HTMLElement",i);var t=e.prototype;return t.layaoutCallNative=function(){var t=0;if(this._childs&&0<(t=this._childs.length))for(var e=0;e<t;e++)this._childs[e].layaoutCallNative&&this._childs[e].layaoutCallNative();var i=this._getWords();i?laya.html.dom.HTMLElement.fillWords(this,i,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},t.appendChild=function(t){return this.addChild(t)},t._getWords2=function(){var t=this._text.text;if(!t||0===t.length)return null;var e,i,n=0,s=0;if(this._text.drawWords)i=this._text.drawWords;else{for(s=(e=t.split(" ")).length-1,i=[],n=0;n<s;n++)i.push(e[n]," ");0<=s&&i.push(e[s]),this._text.drawWords=i}var o,a=this._text.words;if(a&&a.length===i.length)return a;null===a&&(this._text.words=a=[]),a.length=i.length;var r=this.style,l=r.font;for(n=0,s=i.length;n<s;n++){o=Utils.measureText(i[n],l);var h=a[n]=new HTMLChar(i[n],o.width,o.height||r.fontSize,r);if(1<h.char.length&&(h.charNum=h.char),this.href){var c=new Sprite;this.addChild(c),h.setSprite(c)}}return a},t._getWords=function(){if(!Text.CharacterCache)return this._getWords2();var t=this._text.text;if(!t||0===t.length)return null;var e,i=this._text.words;if(i&&i.length===t.length)return i;null===i&&(this._text.words=i=[]),i.length=t.length;for(var n=this.style,s=n.font,o=0,a=t.length;o<a;o++){e=Utils.measureText(t.charAt(o),s);var r=i[o]=new HTMLChar(t.charAt(o),e.width,e.height||n.fontSize,n);if(this.href){var l=new Sprite;this.addChild(l),r.setSprite(l)}}return i},t.showLinkSprite=function(){var t=this._text.words;if(t)for(var e,i,n=[],s=0;s<t.length;s++)i=t[s],(e=new Sprite).graphics.drawRect(0,0,i.width,i.height,"#ff0000"),e.width=i.width,e.height=i.height,this.addChild(e),n.push(e)},t._layoutLater=function(){var t=this.style;512&t._type||(t.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&t.block?(Layout.later(this),t._type|=512):this.parent&&this.parent._layoutLater())},t._setAttributes=function(t,e){switch(t){case"style":return void this.style.cssText(e);case"class":return void(this.className=e)}i.prototype._setAttributes.call(this,t,e)},t.updateHref=function(){if(null!=this._href){var t=this._getWords();if(t)for(var e,i,n=0;n<t.length;n++)(i=(e=t[n]).getSprite())&&(i.size(e.width,e.height),i.on("click",this,this.onLinkHandler))}},t.onLinkHandler=function(t){switch(t.type){case"click":for(var e=this;e;)e.event("link",[this.href]),e=e.parent}},t.formatURL=function(t){return this.URI?URL.formatURL(t,this.URI?this.URI.path:null):t},__getset(0,t,"href",function(){return this._href},function(t){null!=(this._href=t)&&(this._getCSSStyle().underLine=1,this.updateHref())}),__getset(0,t,"color",null,function(t){this.style.color=t}),__getset(0,t,"onClick",null,function(t){Laya._runScript("fn=function(event){"+t+";}"),this.on("click",this,void 0)}),__getset(0,t,"id",null,function(t){HTMLDocument.document.setElementById(t,this)}),__getset(0,t,"innerTEXT",function(){return this._text.text},function(t){this.text=t}),__getset(0,t,"style",function(){return this._style}),__getset(0,t,"text",function(){return this._text.text},function(t){this._text==e._EMPTYTEXT?this._text={text:t,words:null}:(this._text.text=t,this._text.words&&(this._text.words.length=0)),Render.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),__getset(0,t,"parent",i.prototype._$get_parent,function(t){if(t instanceof laya.html.dom.HTMLElement){var e=t;this.URI||(this.URI=e.URI),this.style.inherit(e.style)}Laya.superSet(Sprite,this,"parent",t)}),__getset(0,t,"className",null,function(t){this.style.attrs(HTMLDocument.document.styleSheets["."+t])}),e.fillWords=function(t,e,i,n,s,o,a){t.graphics.clear();for(var r=0,l=e.length;r<l;r++){var h=e[r];t.graphics.fillText(h.char,h.x+i,h.y+n,s,o,"left",a)}},e._EMPTYTEXT={text:null,words:null},e}(Sprite),GateCustomModule=function(t){function l(){l.__super.call(this),null==gateModule.modules.GateCustomModule.subscribeHash&&(gateModule.modules.GateCustomModule.subscribeHash=new Hash)}__class(l,"gateModule.modules.GateCustomModule",Module);var e=l.prototype;return e.addSubscribe=function(t){for(var e=[],i=0,n=arguments.length;i<n;i++)e.push(arguments[i]);for(i=0;i<e.length;i++){var s;(s=new e[i]).oid=this.id,s&&GateModuleDock.getInstance().addSubProxy(s)}},__getset(0,e,"subPackages",null,function(t){for(var e=[],i=0,n=arguments.length;i<n;i++)e.push(arguments[i]);var s=(e=e[0]).length;for(i=0;i<s;i++){var o,a=e[i].toString(),r=this.name;l.subscribeHash.has(a)?-1==(o=l.subscribeHash.take(a)).indexOf(r)&&o.push(r):((o=[]).push(r),l.subscribeHash.put(a,o))}}),l.subscribeHash=null,l}(),MainNetworkModule=function(t){function e(){e._instance=this,e.__super.call(this)}__class(e,"gateModule.zwc.engine.core.controls.dock.MainNetworkModule",Module);var i=e.prototype;return i.register=function(){gateModule.zwc.engine.core.controls.dock.GateUnitModule.prototype.register.call(this)},i.addSubToNetworkModule=function(t){this.registerSubProxy(t)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e._instance=null,e}(),ArrowLine=function(t){function e(t){this.lineLen=160,this.arrowLen=10,this.sign="Y",this._targetChanger=null,this._isMoving=!1,this.lenControl=new Rect,this.rotationControl=new Rect,this.lenChanger=ValueChanger.create(this,"lineLen"),this.lenControlXChanger=ValueChanger.create(this.lenControl,"x"),void 0===t&&(t="X"),e.__super.call(this),this.sign=t,this.addChild(this.lenControl),this.addChild(this.rotationControl),this.lenControl.on("mousedown",this,this.controlMouseDown),this.drawMe()}__class(e,"laya.debug.tools.comps.ArrowLine",Sprite);var i=e.prototype;return i.drawMe=function(){var t;(t=this.graphics).clear(),t.drawLine(0,0,this.lineLen,0,"#ffff00"),t.drawLine(this.lineLen,0,this.lineLen-this.arrowLen,-this.arrowLen,"#ff0000"),t.drawLine(this.lineLen,0,this.lineLen-this.arrowLen,this.arrowLen,"#ff0000"),t.fillText(this.sign,50,-5,"","#ff0000","left"),this._isMoving&&this._targetChanger&&t.fillText(this._targetChanger.key+":"+this._targetChanger.value.toFixed(2),this.lineLen-15,-25,"","#ffff00","center"),this.lenControl.posTo(this.lineLen-15,0),this.rotationControl.posTo(this.lineLen+10,0),this.size(this.arrowLen,this.lineLen)},i.clearMoveEvents=function(){Laya.stage.off("mousemove",this,this.stageMouseMove),Laya.stage.off("mouseup",this,this.stageMouseUp)},i.controlMouseDown=function(t){this.clearMoveEvents(),this.lenControlXChanger.record(),this.lenChanger.record(),this.targetChanger&&this.targetChanger.record(),this._isMoving=!0,Laya.stage.on("mousemove",this,this.stageMouseMove),Laya.stage.on("mouseup",this,this.stageMouseUp)},i.stageMouseMove=function(t){this.lenControlXChanger.value=this.mouseX,this.lenChanger.showValueByScale(this.lenControlXChanger.scaleValue),this.targetChanger&&this.targetChanger.showValueByScale(this.lenControlXChanger.scaleValue),this.drawMe()},i.stageMouseUp=function(t){this._isMoving=!1,this.noticeChange(),this.clearMoveEvents(),this.lenControlXChanger.recover(),this.lenChanger.recover(),this.drawMe()},i.noticeChange=function(){var t;t=this.lenChanger.dValue,console.log("lenChange:",t)},__getset(0,i,"targetChanger",function(){return this._targetChanger},function(t){this._targetChanger&&this._targetChanger.dispose(),this._targetChanger=t}),e}(),Axis=function(t){function e(){this._target=null,this._lenType=[["width","height"],["scaleX","scaleY"]],this._type=1,this.xAxis=new ArrowLine("X"),this.yAxis=new ArrowLine("Y"),this.controlBox=new Rect,this._point=new Point,this.oPoint=new Point,this.myRotationChanger=ValueChanger.create(this,"rotation"),this.targetRotationChanger=ValueChanger.create(null,"rotation"),this.stageMouseRotationChanger=new ValueChanger,e.__super.call(this),this.mouseEnabled=!0,this.size(1,1),this.initMe(),this.xAxis.rotationControl.on("mousedown",this,this.controlMouseDown),this.yAxis.rotationControl.on("mousedown",this,this.controlMouseDown),this.controlBox.on("mousedown",this,this.controlBoxMouseDown),this.on("dragmove",this,this.dragging)}__class(e,"laya.debug.tools.comps.Axis",Sprite);var i=e.prototype;return i.updateChanges=function(){var t;this._target&&(t=this._lenType[this._type],this.xAxis.targetChanger=ValueChanger.create(this._target,t[0]),this.yAxis.targetChanger=ValueChanger.create(this._target,t[1]))},i.switchType=function(){this._type++,this._type=this._type%this._lenType.length,this.type=this._type},i.controlBoxMouseDown=function(t){this.startDrag()},i.dragging=function(){this._target&&(this._point.setTo(this.x,this.y),DisControlTool.transPoint(this.parent,this._target.parent,this._point),this._target.pos(this._point.x,this._point.y))},i.initMe=function(){this.addChild(this.xAxis),this.addChild(this.yAxis),this.yAxis.rotation=90,this.addChild(this.controlBox),this.controlBox.posTo(0,0)},i.clearMoveEvents=function(){Laya.stage.off("mousemove",this,this.stageMouseMove),Laya.stage.off("mouseup",this,this.stageMouseUp)},i.controlMouseDown=function(t){this.targetRotationChanger.target=this.target,this.clearMoveEvents(),this.oPoint.setTo(0,0),this.myRotationChanger.record(),this.oPoint=this.localToGlobal(this.oPoint),this.stageMouseRotationChanger.value=this.getStageMouseRatation(),this.stageMouseRotationChanger.record(),this.targetRotationChanger.record(),Laya.stage.on("mousemove",this,this.stageMouseMove),Laya.stage.on("mouseup",this,this.stageMouseUp)},i.getStageMouseRatation=function(){return MathUtil.getRotation(this.oPoint.x,this.oPoint.y,Laya.stage.mouseX,Laya.stage.mouseY)},i.stageMouseMove=function(t){this.stageMouseRotationChanger.value=this.getStageMouseRatation();var e;e=-this.stageMouseRotationChanger.dValue,this.target?this.targetRotationChanger.showValueByAdd(e):this.myRotationChanger.showValueByAdd(e)},i.stageMouseUp=function(t){this.noticeChange(),this.clearMoveEvents()},i.noticeChange=function(){console.log("rotate:",-this.stageMouseRotationChanger.dValue)},__getset(0,i,"target",function(){return this._target},function(t){this._target=t,this.updateChanges()}),__getset(0,i,"type",function(){return this._type},function(t){this._type=t,this.updateChanges()}),e}(),Rect=function(t){function e(){this.recWidth=10,e.__super.call(this),this.drawMe()}__class(e,"laya.debug.tools.comps.Rect",Sprite);var i=e.prototype;return i.drawMe=function(){var t;(t=this.graphics).clear(),t.drawRect(0,0,this.recWidth,this.recWidth,"#22ff22"),this.size(this.recWidth,this.recWidth)},i.posTo=function(t,e){this.x=t-.5*this.recWidth,this.y=e-.5*this.recWidth},e}(),Text=function(e){function _(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,_.__super.call(this),this.overflow=_.VISIBLE,this._style=new CSSStyle(this),this._style.wordWrap=!1}__class(_,"laya.display.Text",e);var t=_.prototype;return t.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._lines=null,this._words&&(this._words.length=0,this._words=null)},t._getBoundPointsM=function(t){void 0===t&&(t=!1);var e=Rectangle.TEMP;return e.setTo(0,0,this.width,this.height),e._getBoundPoints()},t.getGraphicBounds=function(t){void 0===t&&(t=!1);var e=Rectangle.TEMP;return e.setTo(0,0,this.width,this.height),e},t._getCSSStyle=function(){return this._style},t.lang=function(t,e,i,n,s,o,a,r,l,h,c){if(t=_.langPacks&&_.langPacks[t]?_.langPacks[t]:t,arguments.length<2)this._text=t;else{for(var u=0,d=arguments.length;u<d;u++)t=t.replace("{"+u+"}",arguments[u+1]);this._text=t}},t._isPassWordMode=function(){var t=this._style.password;return"prompt"in this&&this.prompt==this._text&&(t=!1),t},t._getPassWordTxt=function(t){var e;e="";for(var i=t.length;0<i;i--)e+="●";return e},t.renderText=function(t,e){var i=this.graphics;i.clear(!0);var n=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(Browser.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);Browser.context.font=n;var s=this.padding,o=s[3],a="left",r=this._lines,l=this.leading+this._charSize.height,h=this._currBitmapFont;h&&(l=this.leading+h.getMaxHeight());var c=s[0];if(!h&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(a="right",o=this._width-s[1]):"center"==this.align&&(a="center",o=.5*this._width+s[3]-s[1])),0<this._height){var u=this._textHeight>this._height?"top":this.valign;"middle"===u?c=.5*(this._height-e*l)+s[0]-s[2]:"bottom"===u&&(c=this._height-e*l-s[2])}var d=this._style;if(h&&h.autoScaleSize)var _=h.fontSize/this.fontSize;if(this._clipPoint)if(i.save(),h&&h.autoScaleSize){var f=0,p=0;f=this._width?this._width-s[3]-s[1]:this._textWidth,p=this._height?this._height-s[0]-s[2]:this._textHeight,f*=_,p*=_,i.clipRect(s[3],s[0],f,p)}else i.clipRect(s[3],s[0],this._width?this._width-s[3]-s[1]:this._textWidth,this._height?this._height-s[0]-s[2]:this._textHeight);var g=d.password;"prompt"in this&&this.prompt==this._text&&(g=!1);for(var m=0,b=0,y=Math.min(this._lines.length,e+t)||1,v=t;v<y;v++){var w,x=r[v];if(g){var C=x.length;x="";for(var S=C;0<S;S--)x+="●"}if(void 0===x&&(x=""),m=o-(this._clipPoint?this._clipPoint.x:0),b=c+l*v-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(a,m,b,v),h){var T=this.width;h.autoScaleSize&&(T=this.width*_),h.drawText(x,this,m,b,this.align,T)}else Render.isWebGL?(this._words||(this._words=[]),(w=this._words.length>v-t?this._words[v-t]:new WordText).setText(x)):w=x,d.stroke?i.fillBorderText(w,m,b,n,this.color,d.strokeColor,d.stroke,a):i.fillText(w,m,b,n,this.color,a)}if(h&&h.autoScaleSize){var L=1/_;this.scale(L,L)}this._clipPoint&&i.restore(),this._startX=o,this._startY=c},t.drawUnderline=function(t,e,i,n){var s=this._lineWidths[n];switch(t){case"center":e-=s/2;break;case"right":e-=s}i+=this._charSize.height,this._graphics.drawLine(e,i,e+s,i,this.underlineColor||this.color,1)},t.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);if(Render.isConchApp){var t=""+this._getCSSStyle().font;this._getCSSStyle().stroke&&this._getCSSStyle().strokeColor&&(t+=" 1 "+this._getCSSStyle().strokeColor),Browser.context.font=t}else Browser.context.font=this._getCSSStyle().font;this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new Point(0,0)):this._clipPoint=null;var e=this._lines.length;if(this.overflow!=_.VISIBLE){var i=this.overflow==_.HIDDEN?Math.floor:Math.ceil;e=Math.min(e,i((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var n=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(n,e),this.repaint()},t.evalTextSize=function(){var t,e=NaN;t=Math.max.apply(this,this._lineWidths),e=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],t==this._textWidth&&e==this._textHeight||(this._textWidth=t,this._textHeight=e,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},t.checkEnabledViewportOrNot=function(){return this.overflow==_.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},t.changeText=function(t){this._text!==t&&(this.lang(t+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},t.parseLines=function(t){var e=this.wordWrap||this.overflow==_.HIDDEN;if(e)var i=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var n=Browser.context.measureText(_._testWord);Render.isConchApp&&0===n.width&&0===n.height&&(n=Browser.context.measureText("W")),this._charSize.width=n.width,this._charSize.height=n.height||this.fontSize}for(var s=t.replace(/\r\n/g,"\n").split("\n"),o=0,a=s.length;o<a;o++){var r=s[o];e?this.parseLine(r,i):(this._lineWidths.push(this.getTextWidth(r)),this._lines.push(r))}},t.parseLine=function(t,e){Browser.context;var i,n=this._lines,s=0,o=NaN,a=NaN,r=0;if((o=this.getTextWidth(t))<=e)return n.push(t),void this._lineWidths.push(o);o=this._charSize.width,0==(s=Math.floor(e/o))&&(s=1),a=o=this.getTextWidth(t.substring(0,s));for(var l=s,h=t.length;l<h;l++)if(e<(a+=o=this.getTextWidth(t.charAt(l))))if(this.wordWrap){var c=t.substring(r,l);if(c.charCodeAt(c.length-1)<255?(i=/(?:\w|-)+$/.exec(c))&&(l=i.index+r,0==i.index?l+=c.length:c=t.substring(r,l)):_.RightToLeft&&(i=/([\u0600-\u06FF])+$/.exec(c))&&(l=i.index+r,0==i.index?l+=c.length:c=t.substring(r,l)),n.push(c),this._lineWidths.push(a-o),!((r=l)+s<h)){n.push(t.substring(r,h)),this._lineWidths.push(this.getTextWidth(n[n.length-1])),r=-1;break}l+=s,a=o=this.getTextWidth(t.substring(r,l)),l--}else if(this.overflow==_.HIDDEN)return n.push(t.substring(0,l)),void this._lineWidths.push(this.getTextWidth(n[n.length-1]));this.wordWrap&&-1!=r&&(n.push(t.substring(r,h)),this._lineWidths.push(this.getTextWidth(n[n.length-1])))},t.getTextWidth=function(t){return this._currBitmapFont?this._currBitmapFont.getTextWidth(t):Browser.context.measureText(t).width},t.getWordWrapWidth=function(){var t=this.padding,e=NaN;return(e=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(e=this.wordWrap?100:Browser.width),e<=0&&(e=100),e-t[3]-t[1]},t.getCharPoint=function(t,e){this._isChanged&&Laya.timer.runCallLater(this,this.typeset);for(var i=0,n=this._lines,s=0,o=0,a=n.length;o<a;o++){if(t<(i+=n[o].length)){var r=o;break}s=i}var l=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Browser.context.font=l;var h=this.getTextWidth(this._text.substring(s,t));return(e||new Point).setTo(this._startX+h-(this._clipPoint?this._clipPoint.x:0),this._startY+r*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},__getset(0,t,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(t){t!=this._width&&(Laya.superSet(Sprite,this,"width",t),this.isChanged=!0)}),__getset(0,t,"textWidth",function(){return this._isChanged&&Laya.timer.runCallLater(this,this.typeset),this._textWidth}),__getset(0,t,"height",function(){return this._height?this._height:this.textHeight},function(t){t!=this._height&&(Laya.superSet(Sprite,this,"height",t),this.isChanged=!0)}),__getset(0,t,"textHeight",function(){return this._isChanged&&Laya.timer.runCallLater(this,this.typeset),this._textHeight}),__getset(0,t,"padding",function(){return this._getCSSStyle().padding},function(t){this._getCSSStyle().padding=t,this.isChanged=!0}),__getset(0,t,"bold",function(){return this._getCSSStyle().bold},function(t){this._getCSSStyle().bold=t,this.isChanged=!0}),__getset(0,t,"text",function(){return this._text||""},function(t){this._text!==t&&(this.lang(t+""),this.isChanged=!0,this.event("change"))}),__getset(0,t,"color",function(){return this._getCSSStyle().color},function(t){this._getCSSStyle().color!=t&&(this._getCSSStyle().color=t,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),__getset(0,t,"font",function(){return this._getCSSStyle().fontFamily},function(t){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),_._bitmapFonts&&_._bitmapFonts[t]&&(this._currBitmapFont=_._bitmapFonts[t]),this._getCSSStyle().fontFamily=t,this.isChanged=!0}),__getset(0,t,"fontSize",function(){return this._getCSSStyle().fontSize},function(t){this._getCSSStyle().fontSize=t,this.isChanged=!0}),__getset(0,t,"italic",function(){return this._getCSSStyle().italic},function(t){this._getCSSStyle().italic=t,this.isChanged=!0}),__getset(0,t,"align",function(){return this._getCSSStyle().align},function(t){this._getCSSStyle().align=t,this.isChanged=!0}),__getset(0,t,"valign",function(){return this._getCSSStyle().valign},function(t){this._getCSSStyle().valign=t,this.isChanged=!0}),__getset(0,t,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(t){this._getCSSStyle().wordWrap=t,this.isChanged=!0}),__getset(0,t,"leading",function(){return this._getCSSStyle().leading},function(t){this._getCSSStyle().leading=t,this.isChanged=!0}),__getset(0,t,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(t){this._getCSSStyle().backgroundColor=t,this.isChanged=!0}),__getset(0,t,"borderColor",function(){return this._getCSSStyle().borderColor},function(t){this._getCSSStyle().borderColor=t,this.isChanged=!0}),__getset(0,t,"stroke",function(){return this._getCSSStyle().stroke},function(t){this._getCSSStyle().stroke=t,this.isChanged=!0}),__getset(0,t,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(t){this._getCSSStyle().strokeColor=t,this.isChanged=!0}),__getset(0,t,"isChanged",null,function(t){this._isChanged!==t&&(this._isChanged=t)&&Laya.timer.callLater(this,this.typeset)}),__getset(0,t,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(t){if(!(this.overflow!=_.SCROLL||this.textWidth<this._width)&&this._clipPoint){t=t<this.padding[3]?this.padding[3]:t;var e=this._textWidth-this._width;t=e<t?e:t;var i=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=t,this.renderText(this._lastVisibleLineIndex,i)}}),__getset(0,t,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(t){if(!(this.overflow!=_.SCROLL||this.textHeight<this._height)&&this._clipPoint){t=t<this.padding[0]?this.padding[0]:t;var e=this._textHeight-this._height,i=(t=e<t?e:t)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=i;var n=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=t,this.renderText(i,n)}}),__getset(0,t,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),__getset(0,t,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),__getset(0,t,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),__getset(0,t,"underlineColor",function(){return this._underlineColor},function(t){this._underlineColor=t,this._isChanged=!0,this.typeset()}),_.registerBitmapFont=function(t,e){_._bitmapFonts||(_._bitmapFonts={}),_._bitmapFonts[t]=e},_.unregisterBitmapFont=function(t,e){if(void 0===e&&(e=!0),_._bitmapFonts&&_._bitmapFonts[t]){var i=_._bitmapFonts[t];e&&i.destroy(),delete _._bitmapFonts[t]}},_.setTextRightToLeft=function(){var t;(t=Browser.canvas.source.style).display="none",t.position="absolute",t.direction="rtl",Render._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,Browser.document.body.appendChild(Browser.canvas.source)},_.supportFont=function(t){Browser.context.font="10px sans-serif";var e=Browser.context.measureText("abcji").width;Browser.context.font="10px "+t;var i=Browser.context.measureText("abcji").width;return console.log(e,i),e!==i},_._testWord="游",_.langPacks=null,_.VISIBLE="visible",_.SCROLL="scroll",_.HIDDEN="hidden",_.CharacterCache=!0,_.RightToLeft=!1,_._bitmapFonts=null,__static(_,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),_}(Sprite),DebugInfoLayer=function(t){function e(){this.nodeRecInfoLayer=null,this.lineLayer=null,this.txtLayer=null,this.popLayer=null,this.graphicLayer=null,this.cacheViewLayer=null,e.__super.call(this),this.nodeRecInfoLayer=new Sprite,this.lineLayer=new Sprite,this.txtLayer=new Sprite,this.popLayer=new Sprite,this.graphicLayer=new Sprite,this.cacheViewLayer=new Sprite,this.nodeRecInfoLayer.name="nodeRecInfoLayer",this.lineLayer.name="lineLayer",this.txtLayer.name="txtLayer",this.popLayer.name="popLayer",this.graphicLayer.name="graphicLayer",this.cacheViewLayer.name="cacheViewLayer",this.addChild(this.lineLayer),this.addChild(this.cacheViewLayer),this.addChild(this.nodeRecInfoLayer),this.addChild(this.txtLayer),this.addChild(this.popLayer),this.addChild(this.graphicLayer),(e.I=this).zOrder=999,Laya.stage.on("doubleclick",this,this.setTop)}__class(e,"laya.debug.view.nodeInfo.DebugInfoLayer",Sprite);var i=e.prototype;return i.setTop=function(){DisControlTool.setTop(this)},i.isDebugItem=function(t){return DisControlTool.isInTree(this,t)},e.init=function(){e.I||(new e,Laya.stage.addChild(e.I))},e.I=null,e}(),NodeInfoPanel=function(t){function e(){this._stateDic={},this.isWorkState=!1,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.NodeInfoPanel",Sprite);var i=e.prototype;return i.showDisInfo=function(t){this.recoverNodes(),NodeInfosItem.showDisInfos(t),this.showOnly(t),this.isWorkState=!0},i.showOnly=function(t){t&&(this.hideBrothers(t),this.showOnly(t.parent))},i.recoverNodes=function(){var t,e,i;for(t in NodeInfosItem.hideAllInfos(),this._stateDic)if(i=(e=this._stateDic[t]).target)try{i.visible=e.visible}catch(t){}this.isWorkState=!1},i.hideOtherChain=function(t){if(t)for(;t;)this.hideBrothers(t),t=t.parent},i.hideChilds=function(t){if(t){var e,i,n,s=0;for(e=(i=t._childs).length,s=0;s<e;s++)(n=i[s])!=NodeInfosItem.NodeInfoContainer&&(this.saveNodeInfo(n),n.visible=!1)}},i.hideBrothers=function(t){var e;if(t&&(e=t.parent)){var i,n,s,o=0;for(i=(n=e._childs).length,o=0;o<i;o++)(s=n[o])!=NodeInfosItem.NodeInfoContainer&&s!=t&&(this.saveNodeInfo(s),s.visible=!1)}},i.saveNodeInfo=function(t){var e;(IDTools.idObj(t),this._stateDic.hasOwnProperty(IDTools.getObjID(t)))||((e={}).target=t,e.visible=t.visible,this._stateDic[IDTools.getObjID(t)]=e)},i.recoverNodeInfo=function(t){var e;(IDTools.idObj(t),this._stateDic.hasOwnProperty(IDTools.getObjID(t)))&&(e=this._stateDic[IDTools.getObjID(t)],t.visible=e.visible)},e.init=function(){e.I||(e.I=new e,NodeInfosItem.init(),ToolPanel.init())},e.I=null,e}(),NodeInfosItem=function(t){function l(){this._infoTxt=null,this._tar=null,l.__super.call(this),this._infoTxt=new Text,this._infoTxt.color="#ff0000",this._infoTxt.bgColor="#00ff00",this._infoTxt.fontSize=12}__class(l,"laya.debug.view.nodeInfo.NodeInfosItem",Sprite);var e=l.prototype;return e.removeSelf=function(){return this._infoTxt.removeSelf(),laya.display.Node.prototype.removeSelf.call(this)},e.showToUI=function(){l.NodeInfoContainer.nodeRecInfoLayer.addChild(this),this._infoTxt.removeSelf(),l.NodeInfoContainer.txtLayer.addChild(this._infoTxt),this.findOkPos()},e.randomAPos=function(t){this._infoTxt.x=this.x+Laya.stage.width*Math.random(),this._infoTxt.y=this.y+t*Math.random()},e.findOkPos=function(){var t=0;t=20,this.randomAPos(t)},e.isPosOk=function(){var t,e,i,n,s=0;if(t=(e=l.NodeInfoContainer.nodeRecInfoLayer._childs).length,(n=this._infoTxt.getBounds()).x<0)return!1;if(n.y<0)return!1;if(n.right>Laya.stage.width)return!1;for(s=0;s<t;s++)if((i=e[s])!=this._infoTxt&&n.intersects(i.getBounds()))return!1;return!0},e.showInfo=function(t){if(this._tar=t){var e,i,n,s=l._txts.length=0;for(e=l.showValues.length,t.name?l._txts.push(ClassTool.getClassName(t)+"("+t.name+")"):l._txts.push(ClassTool.getClassName(t)),s=0;s<e;s++)i=l.showValues[s],l._txts.push(i+":"+l.getNodeValue(t,i));this._infoTxt.text=l._txts.join("\n"),this.graphics.clear(),!(n=t._getBoundPointsM(!0))||n.length<1||(n=GrahamScan.pListToPointList(n,!0),WalkTools.walkArr(n,t.localToGlobal,t),n=GrahamScan.pointListToPlist(n),l._disBoundRec=Rectangle._getWrapRec(n,l._disBoundRec),this.graphics.drawRect(0,0,l._disBoundRec.width,l._disBoundRec.height,null,"#00ffff"),this.pos(l._disBoundRec.x,l._disBoundRec.y))}},e.fresh=function(){this.showInfo(this._tar)},e.clearMe=function(){this._tar=null},e.recover=function(){Pool.recover("NodeInfosItem",this)},l.init=function(){l.NodeInfoContainer||(DebugInfoLayer.init(),l.NodeInfoContainer=DebugInfoLayer.I,Laya.stage.addChild(l.NodeInfoContainer))},l.getNodeInfoByNode=function(t){IDTools.idObj(t);var e;return e=IDTools.getObjID(t),l._nodeInfoDic[e]||(l._nodeInfoDic[e]=new l),l._nodeInfoDic[e]},l.hideAllInfos=function(){var t;for(t in l._nodeInfoDic)l._nodeInfoDic[t].removeSelf();l.clearRelations()},l.showNodeInfo=function(t){var e;(e=l.getNodeInfoByNode(t)).showInfo(t),e.showToUI()},l.showDisInfos=function(t){var e;if(e=t){for(;t;)l.showNodeInfo(t),t=t.parent;DisControlTool.setTop(l.NodeInfoContainer),l.apdtTxtInfoPoss(e),l.updateRelations()}},l.apdtTxtInfoPoss=function(t){var e;for(e=[];t;)e.push(t),t=t.parent;var i,n,s,o=0;i=e.length;var a=NaN;a=Laya.stage.width-150;var r=0;for(r=100,(t=e[0])&&(n=l.getNodeInfoByNode(t))&&(s=n._infoTxt,a=Laya.stage.width-s.width-10,r=s.height+10),e=e.reverse(),o=0;o<i;o++)t=e[o],(n=l.getNodeInfoByNode(t))&&(s=n._infoTxt).pos(a,r*o)},l.clearRelations=function(){l.NodeInfoContainer.lineLayer.graphics.clear()},l.updateRelations=function(){var t,e,i;for(e in(t=l.NodeInfoContainer.lineLayer.graphics).clear(),l._nodeInfoDic)(i=l._nodeInfoDic[e]).parent&&t.drawLine(i.x,i.y,i._infoTxt.x,i._infoTxt.y,"#0000ff")},l.getNodeValue=function(t,e){var i;switch(l._nodePoint.setTo(0,0),e){case"x":i=t.x+" (g:"+t.localToGlobal(l._nodePoint).x+")";break;case"y":i=t.y+" (g:"+t.localToGlobal(l._nodePoint).y+")";break;default:i=t[e]}return i},l.NodeInfoContainer=null,l._nodeInfoDic={},l._txts=[],__static(l,["showValues",function(){return this.showValues=["x","y","scaleX","scaleY","width","height","visible","mouseEnabled"]},"_disBoundRec",function(){return this._disBoundRec=new Rectangle},"_nodePoint",function(){return this._nodePoint=new Point}]),l}(),NodeRecInfo=function(t){function i(){this.txt=null,this._tar=null,this.recColor="#00ff00",i.__super.call(this),this.txt=new Text,this.txt.color="#ff0000",this.txt.bgColor="#00ff00",this.txt.fontSize=12,this.addChild(this.txt)}__class(i,"laya.debug.view.nodeInfo.recinfos.NodeRecInfo",Sprite);var e=i.prototype;return e.setInfo=function(t){this.txt.text=t},e.setTarget=function(t){this._tar=t},e.showInfo=function(t){var e;(this._tar=t)&&(t._$P&&(this.graphics.clear(),!(e=t._getBoundPointsM(!0))||e.length<1||(e=GrahamScan.pListToPointList(e,!0),WalkTools.walkArr(e,t.localToGlobal,t),e=GrahamScan.pointListToPlist(e),i._disBoundRec=Rectangle._getWrapRec(e,i._disBoundRec),this.graphics.drawRect(0,0,i._disBoundRec.width,i._disBoundRec.height,null,DebugConsts.RECACHE_REC_COLOR,2),this.pos(i._disBoundRec.x,i._disBoundRec.y))))},e.fresh=function(){this.showInfo(this._tar)},e.clearMe=function(){this._tar=null},__static(i,["_disBoundRec",function(){return this._disBoundRec=new Rectangle}]),i}(),ToolPanel=function(t){function i(){i.__super.call(this),Base64AtlasManager.base64.preLoad(Handler.create(this,this.showToolBar)),ContextMenu.init(),DisResizer.init(),new TipManagerForDebug}__class(i,"laya.debug.view.nodeInfo.ToolPanel",Sprite);var e=i.prototype;return e.showToolBar=function(){DebugPanelView.I.show()},e.createViews=function(){i.typeClassDic.Find=FindView,i.typeClassDic.Filter=FilterView,i.typeClassDic.TxtInfo=TxtInfoView,i.typeClassDic.Tree=NodeTreeView},e.switchShow=function(t){var e;(e=this.getView(t))&&e.switchShow()},e.getView=function(t){var e;return!(e=i.viewDic[t])&&i.typeClassDic[t]&&(e=i.viewDic[t]=new i.typeClassDic[t]),e},e.showTxtInfo=function(t){OutPutView.I.showTxt(t)},e.showNodeTree=function(t){NodeTree.I.setDis(t),DebugPanelView.I.switchToTree()},e.showSelectInStage=function(t){NodeTree.I.showSelectInStage(t),DebugPanelView.I.switchToTree()},e.showSelectItems=function(t){DebugPanelView.I.swichToSelect(),SelectInfosView.I.setSelectList(t)},i.init=function(){i.I||(i.I=new i)},i.I=null,i.viewDic={},i.Find="Find",i.Filter="Filter",i.TxtInfo="TxtInfo",i.Tree="Tree",__static(i,["typeClassDic",function(){return this.typeClassDic={}}]),i}(),AnimationPlayerBase=function(e){function t(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,t.__super.call(this),this._interval=Config.animationInterval,this._setUpNoticeType(1)}__class(t,"laya.display.AnimationPlayerBase",e);var i=t.prototype;return i.play=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===n&&(n=!0),this._isPlaying=!0,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._actionName=i,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},i._getFrameByLabel=function(t){var e=0;for(e=0;e<this._count;e++)if(this._labels[e]&&0<=this._labels[e].indexOf(t))return e;return 0},i._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},i._setControlNode=function(t){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=t)&&t!=this&&(t.on("display",this,this._checkResumePlaying),t.on("undisplay",this,this._checkResumePlaying))},i._setDisplay=function(t){e.prototype._setDisplay.call(this,t),this._checkResumePlaying()},i._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},i.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},i.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[e]||(this._labels[e]=[]),this._labels[e].push(t)},i.removeLabel=function(t){if(t){if(this._labels)for(var e in this._labels)this._removeLabelFromLabelList(this._labels[e],t)}else this._labels=null},i._removeLabelFromLabelList=function(t,e){if(t)for(var i=t.length-1;0<=i;i--)t[i]==e&&t.splice(i,1)},i.gotoAndStop=function(t){this.index="string"==typeof t?this._getFrameByLabel(t):t,this.stop()},i._displayToIndex=function(t){},i.clear=function(){this.stop(),this._labels=null},__getset(0,i,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._frameRateChanged=!0,this._interval=t,this._isPlaying&&0<t&&this.timerLoop(t,this,this._frameLoop,null,!0,!0))}),__getset(0,i,"isPlaying",function(){return this._isPlaying}),__getset(0,i,"index",function(){return this._index},function(t){if(this._index=t,this._displayToIndex(t),this._labels&&this._labels[t])for(var e=this._labels[t],i=0,n=e.length;i<n;i++)this.event("label",e[i])}),__getset(0,i,"count",function(){return this._count}),t.WRAP_POSITIVE=0,t.WRAP_REVERSE=1,t.WRAP_PINGPONG=2,t}(Sprite),Stage=function(u){function a(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",a.__super.call(this),this.offset=new Point,this._canvasTransform=new Matrix,this._previousOrientation=Browser.window.orientation;var e=this;this.transform=Matrix.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var t=Browser.window,i=this;t.addEventListener("focus",function(){e._isFocused=!0,i.event("focus"),i.event("focuschange")}),t.addEventListener("blur",function(){e._isFocused=!1,i.event("blur"),i.event("focuschange"),i._isInputting()&&(Input.inputElement.target.focus=!1)});var n="visibilityState",s="visibilitychange",o=t.document;void 0!==o.hidden?(s="visibilitychange",n="visibilityState"):void 0!==o.mozHidden?(s="mozvisibilitychange",n="mozVisibilityState"):void 0!==o.msHidden?(s="msvisibilitychange",n="msVisibilityState"):void 0!==o.webkitHidden&&(s="webkitvisibilitychange",n="webkitVisibilityState"),t.document.addEventListener(s,function(){"hidden"==Browser.document[n]?i._setStageVisible(!1):i._setStageVisible(!0)}),t.document.addEventListener("qbrowserVisibilityChange",function(t){i._setStageVisible(!t.hidden)}),t.addEventListener("resize",function(){var t=Browser.window.orientation;null!=t&&t!=e._previousOrientation&&i._isInputting()&&(Input.inputElement.target.focus=!1),e._previousOrientation=t,i._isInputting()||i._resetCanvas()}),t.addEventListener("orientationchange",function(t){i._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),Browser.onMobile&&this.on("mousedown",this,this._onmouseMove)}__class(a,"laya.display.Stage",u);var t=a.prototype;return t._setStageVisible=function(t){this._isVisibility!=t&&(this._isVisibility=t,this._isVisibility||this._isInputting()&&(Input.inputElement.target.focus=!1),this.event("visibilitychange"))},t._isInputting=function(){return Browser.onMobile&&Input.isInputting},t._changeCanvasSize=function(){this.setScreenSize(Browser.clientWidth*Browser.pixelRatio,Browser.clientHeight*Browser.pixelRatio)},t._resetCanvas=function(){if(this.screenAdaptationEnabled){var t=Render._mainCanvas;t.source.style;t.size(1,1),Laya.timer.once(100,this,this._changeCanvasSize)}},t.setScreenSize=function(t,e){var i=!1;if("none"!==this._screenMode&&(i=(t/e<1?"vertical":"horizontal")!==this._screenMode)){var n=e;e=t,t=n}this.canvasRotation=i;var s=Render._mainCanvas,o=s.source.style,a=this._canvasTransform.identity(),r=this._scaleMode,l=t/this.designWidth,h=e/this.designHeight,c=this.designWidth,u=this.designHeight,d=t,_=e,f=Browser.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,r){case"noscale":l=h=1,d=this.designWidth,_=this.designHeight;break;case"showall":l=h=Math.min(l,h),c=d=Math.round(this.designWidth*l),u=_=Math.round(this.designHeight*h);break;case"noborder":l=h=Math.max(l,h),d=Math.round(this.designWidth*l),_=Math.round(this.designHeight*h);break;case"full":l=h=1,this._width=c=t,this._height=u=e;break;case"fixedwidth":h=l,this._height=u=Math.round(e/l);break;case"fixedheight":l=h,this._width=c=Math.round(t/h);break;case"fixedauto":t/e<this.designWidth/this.designHeight?(h=l,this._height=u=Math.round(e/l)):(l=h,this._width=c=Math.round(t/h))}this.conchModel&&this.conchModel.size(this._width,this._height),l*=this.scaleX,h*=this.scaleY,1===l&&1===h?this.transform.identity():(this.transform.a=this._formatData(l/(d/c)),this.transform.d=this._formatData(h/(_/u)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),s.size(c,u),RunDriver.changeWebGLSize(c,u),a.scale(d/c/f,_/u/f),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(t-d)/f:this.offset.x=.5*(t-d)/f,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(e-_)/f:this.offset.y=.5*(e-_)/f,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),a.translate(this.offset.x,this.offset.y),this.canvasDegree=0,i&&("horizontal"===this._screenMode?(a.rotate(Math.PI/2),a.translate(e/f,0),this.canvasDegree=90):(a.rotate(-Math.PI/2),a.translate(0,t/f),this.canvasDegree=-90)),a.a=this._formatData(a.a),a.d=this._formatData(a.d),a.tx=this._formatData(a.tx),a.ty=this._formatData(a.ty),o.transformOrigin=o.webkitTransformOrigin=o.msTransformOrigin=o.mozTransformOrigin=o.oTransformOrigin="0px 0px 0px",o.transform=o.webkitTransform=o.msTransform=o.mozTransform=o.oTransform="matrix("+a.toString()+")",a.translate(parseInt(o.left)||0,parseInt(o.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},t._formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?0<t?1:-1:t},t.getMousePoint=function(){return Point.TEMP.setTo(this.mouseX,this.mouseY)},t.repaint=function(){this._repaint=1},t.parentRepaint=function(){},t._loop=function(){return this.render(Render.context,0,0),!0},t._onmouseMove=function(t){this._mouseMoveTime=Browser.now()},t.getTimeFromFrameStart=function(){return Browser.now()-this._frameStartTime},t.render=function(t,e,i){if("sleep"===this._frameRate&&!Render.isConchApp){var n=Browser.now();if(!(1e3<=n-this._frameStartTime))return;this._frameStartTime=n}if(this._renderCount++,Render.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=Browser.now();var s="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),o=this._renderCount%2==0;if(Stat.renderSlow=!s,s||o||Render.isConchApp){var a;Stat.loopCount++,MouseManager.instance.runEvent(),Laya.timer._update(),RunDriver.update3DLoop();var r=0,l=0;if(Render.isConchNode)for(r=0,l=this._scenes.length;r<l;r++)(a=this._scenes[r])&&a._updateSceneConch();else for(r=0,l=this._scenes.length;r<l;r++)(a=this._scenes[r])&&a._updateScene();if(Render.isConchNode){var h=Sprite.CustomList;for(r=0,l=h.length;r<l;r++){var c=h[r];c.customRender(c.customContext,0,0)}return}}Render.isConchNode||this.renderingEnabled&&(s||!o||Render.isConchWebGL)&&(Render.isWebGL?(t.clear(),u.prototype.render.call(this,t,e,i),Stat._show&&Stat._sp&&Stat._sp.render(t,e,i),RunDriver.clear(this._bgColor),RunDriver.beginFlush(),t.flush(),RunDriver.endFinish(),VectorGraphManager.instance&&VectorGraphManager.getInstance().endDispose()):(RunDriver.clear(this._bgColor),u.prototype.render.call(this,t,e,i),Stat._show&&Stat._sp&&Stat._sp.render(t,e,i)))}else this._renderCount%5==0&&(Stat.loopCount++,MouseManager.instance.runEvent(),Laya.timer._update())},t._requestFullscreen=function(){var t=Browser.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},t._fullScreenChanged=function(){Laya.stage.event("fullscreenchange")},t.exitFullscreen=function(){var t=Browser.document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()},__getset(0,t,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),__getset(0,t,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),__getset(0,t,"frameRate",function(){return this._frameRate},function(t){if(this._frameRate=t,Render.isConchApp)switch(this._frameRate){case"slow":Browser.window.conch&&Browser.window.conchConfig.setSlowFrame&&Browser.window.conchConfig.setSlowFrame(!0);break;case"fast":Browser.window.conch&&Browser.window.conchConfig.setSlowFrame&&Browser.window.conchConfig.setSlowFrame(!1);break;case"mouse":Browser.window.conch&&Browser.window.conchConfig.setMouseFrame&&Browser.window.conchConfig.setMouseFrame(2e3);break;case"sleep":Browser.window.conch&&Browser.window.conchConfig.setLimitFPS&&Browser.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),__getset(0,t,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),__getset(0,t,"width",u.prototype._$get_width,function(t){this.designWidth=t,Laya.superSet(Sprite,this,"width",t),Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,t,"alignH",function(){return this._alignH},function(t){this._alignH=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,t,"isFocused",function(){return this._isFocused}),__getset(0,t,"height",u.prototype._$get_height,function(t){this.designHeight=t,Laya.superSet(Sprite,this,"height",t),Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,t,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||Matrix.create()},u.prototype._$set_transform),__getset(0,t,"isVisibility",function(){return this._isVisibility}),__getset(0,t,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),__getset(0,t,"scaleMode",function(){return this._scaleMode},function(t){this._scaleMode=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,t,"alignV",function(){return this._alignV},function(t){this._alignV=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,t,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,this.conchModel&&this.conchModel.bgColor(t),Render.isWebGL&&(t?a._wgColor=Color.create(t)._color:Browser.onMiniGame||(a._wgColor=null)),Browser.onLimixiu?a._wgColor=Color.create(t)._color:Render.canvas.style.background=t||"none"}),__getset(0,t,"mouseX",function(){return Math.round(MouseManager.instance.mouseX/this.clientScaleX)}),__getset(0,t,"mouseY",function(){return Math.round(MouseManager.instance.mouseY/this.clientScaleY)}),__getset(0,t,"screenMode",function(){return this._screenMode},function(t){this._screenMode=t}),__getset(0,t,"visible",u.prototype._$get_visible,function(t){this.visible!==t&&(Laya.superSet(Sprite,this,"visible",t),Render._mainCanvas.source.style.visibility=t?"visible":"hidden")}),__getset(0,t,"fullScreenEnabled",null,function(t){var e=Browser.document,i=Render.canvas;t?(i.addEventListener("mousedown",this._requestFullscreen),i.addEventListener("touchstart",this._requestFullscreen),e.addEventListener("fullscreenchange",this._fullScreenChanged),e.addEventListener("mozfullscreenchange",this._fullScreenChanged),e.addEventListener("webkitfullscreenchange",this._fullScreenChanged),e.addEventListener("msfullscreenchange",this._fullScreenChanged)):(i.removeEventListener("mousedown",this._requestFullscreen),i.removeEventListener("touchstart",this._requestFullscreen),e.removeEventListener("fullscreenchange",this._fullScreenChanged),e.removeEventListener("mozfullscreenchange",this._fullScreenChanged),e.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),e.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),a.SCALE_NOSCALE="noscale",a.SCALE_EXACTFIT="exactfit",a.SCALE_SHOWALL="showall",a.SCALE_NOBORDER="noborder",a.SCALE_FULL="full",a.SCALE_FIXED_WIDTH="fixedwidth",a.SCALE_FIXED_HEIGHT="fixedheight",a.SCALE_FIXED_AUTO="fixedauto",a.ALIGN_LEFT="left",a.ALIGN_RIGHT="right",a.ALIGN_CENTER="center",a.ALIGN_TOP="top",a.ALIGN_MIDDLE="middle",a.ALIGN_BOTTOM="bottom",a.SCREEN_NONE="none",a.SCREEN_HORIZONTAL="horizontal",a.SCREEN_VERTICAL="vertical",a.FRAME_FAST="fast",a.FRAME_SLOW="slow",a.FRAME_MOUSE="mouse",a.FRAME_SLEEP="sleep",a.FRAME_MOUSE_THREDHOLD=2e3,__static(a,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),a}(Sprite),FileBitmap=function(t){function e(){this._src=null,this._onload=null,this._onerror=null,e.__super.call(this)}__class(e,"laya.resource.FileBitmap",Bitmap);var i=e.prototype;return __getset(0,i,"src",function(){return this._src},function(t){this._src=t}),__getset(0,i,"onload",null,function(t){}),__getset(0,i,"onerror",null,function(t){}),e}(),HTMLCanvas=function(t){function i(t,e){this._is2D=!1,i.__super.call(this);var n=this;if(this._source=this,"2D"===t||"AUTO"===t&&!Render.isWebGL){this._is2D=!0,this._source=e||Browser.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var s=this;s.getContext=function(t,e){if(n._ctx)return n._ctx;var i=n._ctx=n._source.getContext(t,e);return i&&(i._canvas=s,Render.isFlash||Browser.onLimixiu||(i.size=function(t,e){})),i}}this.lock=!0}__class(i,"laya.resource.HTMLCanvas",Bitmap);var e=i.prototype;return e.clear=function(){this._ctx&&this._ctx.clear()},e.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},e.release=function(){},e._setContext=function(t){this._ctx=t},e.getContext=function(t,e){return this._ctx?this._ctx:this._ctx=i._createContext(this)},e.getMemSize=function(){return 0},e.size=function(t,e){(this._w!=t||this._h!=e||this._source&&(this._source.width!=t||this._source.height!=e))&&(this._w=t,this._h=e,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(t,e),this._source&&(this._source.height=e,this._source.width=t))},e.getCanvas=function(){return this._source},e.toBase64=function(t,e,i){if(this._source)if(Render.isConchApp&&this._source.toBase64)this._source.toBase64(t,e,i);else{var n=this._source.toDataURL(t,e);i.call(this,n)}},__getset(0,e,"context",function(){return this._ctx}),__getset(0,e,"asBitmap",null,function(t){}),i.create=function(t,e){return new i(t,e)},i.TYPE2D="2D",i.TYPE3D="3D",i.TYPEAUTO="AUTO",i._createContext=null,i}(),HTMLSubImage=function(t){function l(t,e,i,n,s,o,a,r){throw l.__super.call(this),new Error("不允许new！")}return __class(l,"laya.resource.HTMLSubImage",Bitmap),l.create=function(t,e,i,n,s,o,a,r){return void 0===r&&(r=!1),new l(t,e,i,n,s,o,a,r)},l}(),Shader=function(t){function h(t,e,i,n){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,h.__super.call(this),!t||!e)throw"Shader Error";this._id=++h._count,this._vs=t,this._ps=e,this._nameMap=n||{},null!=i&&(h.sharders[i]=this)}__class(h,"laya.webgl.shader.Shader",BaseShader);var e=h.prototype;return e.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},e.disposeResource=function(){WebGL.mainContext.deleteShader(this._vshader),WebGL.mainContext.deleteShader(this._pshader),WebGL.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},e._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var t=[this._vs,this._ps],e=WebGL.mainContext;if(this._program=e.createProgram(),this._vshader=h._createShader(e,t[0],35633),this._pshader=h._createShader(e,t[1],35632),e.attachShader(this._program,this._vshader),e.attachShader(this._program,this._pshader),e.linkProgram(this._program),!Render.isConchApp&&!e.getProgramParameter(this._program,35714))throw e.getProgramInfoLog(this._program);var i,n,s=0,o=0;for(o=Render.isConchApp?e.getProgramParameterEx(this._vs,this._ps,"",35721):e.getProgramParameter(this._program,35721),s=0;s<o;s++){var a=null;i={vartype:"attribute",glfun:null,ivartype:0,attrib:a=Render.isConchApp?e.getActiveAttribEx(this._vs,this._ps,"",s):e.getActiveAttrib(this._program,s),location:e.getAttribLocation(this._program,a.name),name:a.name,type:a.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(i)}var r=0;for(r=Render.isConchApp?e.getProgramParameterEx(this._vs,this._ps,"",35718):e.getProgramParameter(this._program,35718),s=0;s<r;s++){var l=null;l=Render.isConchApp?e.getActiveUniformEx(this._vs,this._ps,"",s):e.getActiveUniform(this._program,s),0<(i={vartype:"uniform",glfun:null,ivartype:1,attrib:a,location:e.getUniformLocation(this._program,l.name),name:l.name,type:l.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(i.name=i.name.substr(0,i.name.length-3),i.isArray=!0,i.location=e.getUniformLocation(this._program,i.name)),this._params.push(i)}for(s=0,n=this._params.length;s<n;s++)if((i=this._params[s]).indexOfParams=s,i.index=1,i.value=[i.location,null],i.codename=i.name,i.name=this._nameMap[i.codename]?this._nameMap[i.codename]:i.codename,(this._paramsMap[i.name]=i)._this=this,i.uploadedValue=[],"attribute"!==i.vartype)switch(i.type){case 5124:i.fun=i.isArray?this._uniform1iv:this._uniform1i;break;case 5126:i.fun=i.isArray?this._uniform1fv:this._uniform1f;break;case 35664:i.fun=i.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:i.fun=i.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:i.fun=i.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:i.fun=this._uniform_sampler2D;break;case 35680:i.fun=this._uniform_samplerCube;break;case 35676:i.glfun=e.uniformMatrix4fv,i.fun=this._uniformMatrix4fv;break;case 35670:i.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else i.fun=this._attribute}},e.getUniform=function(t){return this._paramsMap[t]},e._attribute=function(t,e){var i=WebGL.mainContext,n=Buffer._enableAtributes,s=t.location;return n[s]||i.enableVertexAttribArray(s),i.vertexAttribPointer(s,e[0],e[1],e[2],e[3],e[4]+this._offset),n[s]=Buffer._bindVertexBuffer,1},e._uniform1f=function(t,e){var i=t.uploadedValue;return i[0]!==e?(WebGL.mainContext.uniform1f(t.location,i[0]=e),1):0},e._uniform1fv=function(t,e){if(e.length<4){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(WebGL.mainContext.uniform1fv(t.location,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],1):0}return WebGL.mainContext.uniform1fv(t.location,e),1},e._uniform_vec2=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]?(WebGL.mainContext.uniform2f(t.location,i[0]=e[0],i[1]=e[1]),1):0},e._uniform_vec2v=function(t,e){if(e.length<2){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(WebGL.mainContext.uniform2fv(t.location,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],1):0}return WebGL.mainContext.uniform2fv(t.location,e),1},e._uniform_vec3=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]?(WebGL.mainContext.uniform3f(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2]),1):0},e._uniform_vec3v=function(t,e){return WebGL.mainContext.uniform3fv(t.location,e),1},e._uniform_vec4=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(WebGL.mainContext.uniform4f(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),1):0},e._uniform_vec4v=function(t,e){return WebGL.mainContext.uniform4fv(t.location,e),1},e._uniformMatrix2fv=function(t,e){return WebGL.mainContext.uniformMatrix2fv(t.location,!1,e),1},e._uniformMatrix3fv=function(t,e){return WebGL.mainContext.uniformMatrix3fv(t.location,!1,e),1},e._uniformMatrix4fv=function(t,e){return WebGL.mainContext.uniformMatrix4fv(t.location,!1,e),1},e._uniform1i=function(t,e){var i=t.uploadedValue;return i[0]!==e?(WebGL.mainContext.uniform1i(t.location,i[0]=e),1):0},e._uniform1iv=function(t,e){return WebGL.mainContext.uniform1iv(t.location,e),1},e._uniform_ivec2=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]?(WebGL.mainContext.uniform2i(t.location,i[0]=e[0],i[1]=e[1]),1):0},e._uniform_ivec2v=function(t,e){return WebGL.mainContext.uniform2iv(t.location,e),1},e._uniform_vec3i=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]?(WebGL.mainContext.uniform3i(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2]),1):0},e._uniform_vec3vi=function(t,e){return WebGL.mainContext.uniform3iv(t.location,e),1},e._uniform_vec4i=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(WebGL.mainContext.uniform4i(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),1):0},e._uniform_vec4vi=function(t,e){return WebGL.mainContext.uniform4iv(t.location,e),1},e._uniform_sampler2D=function(t,e){var i=WebGL.mainContext,n=t.uploadedValue;return null==n[0]?(n[0]=this._curActTexIndex,i.uniform1i(t.location,this._curActTexIndex),i.activeTexture(h._TEXTURES[this._curActTexIndex]),WebGLContext.bindTexture(i,3553,e),this._curActTexIndex++,1):(i.activeTexture(h._TEXTURES[n[0]]),WebGLContext.bindTexture(i,3553,e),0)},e._uniform_samplerCube=function(t,e){var i=WebGL.mainContext,n=t.uploadedValue;return null==n[0]?(n[0]=this._curActTexIndex,i.uniform1i(t.location,this._curActTexIndex),i.activeTexture(h._TEXTURES[this._curActTexIndex]),WebGLContext.bindTexture(i,34067,e),this._curActTexIndex++,1):(i.activeTexture(h._TEXTURES[n[0]]),WebGLContext.bindTexture(i,34067,e),0)},e._noSetValue=function(t){console.log("no....:"+t.name)},e.uploadOne=function(t,e){this.activeResource(),WebGLContext.UseProgram(this._program);var i=this._paramsMap[t];i.fun.call(this,i,e)},e.uploadTexture2D=function(t){Stat.shaderCall++;var e=WebGL.mainContext;e.activeTexture(33984),WebGLContext.bindTexture(e,3553,t)},e.upload=function(t,e){BaseShader.activeShader=BaseShader.bindShader=this,this._lastUseFrameCount===Stat.loopCount||this.activeResource(),WebGLContext.UseProgram(this._program),this._reCompile?(e=this._params,this._reCompile=!1):e=e||this._params;WebGL.mainContext;for(var i,n,s=e.length,o=0,a=0;a<s;a++)null!==(n=t[(i=e[a]).name])&&(o+=i.fun.call(this,i,n));Stat.shaderCall+=o},e.uploadArray=function(t,e,i){BaseShader.activeShader=this,(BaseShader.bindShader=this).activeResource(),WebGLContext.UseProgram(this._program);this._params;for(var n,s,o=0,a=e-2;0<=a;a-=2)(s=this._paramsMap[t[a]])&&null!=(n=t[a+1])&&(i&&i[s.name]&&i[s.name].bind(),o+=s.fun.call(this,s,n));Stat.shaderCall+=o},e.getParams=function(){return this._params},h.getShader=function(t){return h.sharders[t]},h.create=function(t,e,i,n){return new h(t,e,i,n)},h.withCompile=function(t,e,i,n){if(i&&h.sharders[i])return h.sharders[i];var s=h._preCompileShader[2e-4*t];if(!s)throw new Error("withCompile shader err!"+t);return s.createShader(e,i,n)},h.withCompile2D=function(t,e,i,n,s){if(n&&h.sharders[n])return h.sharders[n];var o=h._preCompileShader[2e-4*t+e];if(!o)throw new Error("withCompile shader err!"+t+" "+e);return o.createShader(i,n,s)},h.addInclude=function(t,e){ShaderCompile.addInclude(t,e)},h.preCompile=function(t,e,i,n){var s=2e-4*t;h._preCompileShader[s]=new ShaderCompile(s,e,i,n)},h.preCompile2D=function(t,e,i,n,s){var o=2e-4*t+e;h._preCompileShader[o]=new ShaderCompile(o,i,n,s)},h._createShader=function(t,e,i){var n=t.createShader(i);return t.shaderSource(n,e),t.compileShader(n),n},h._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],h._count=0,h._preCompileShader={},h.SHADERNAME2ID=2e-4,h.sharders=((h.sharders=[]).length=32,h.sharders),__static(h,["nameKey",function(){return this.nameKey=new StringKey}]),h}(),AtlasWebGLCanvas=function(t){function e(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,e.__super.call(this)}__class(e,"laya.webgl.atlas.AtlasWebGLCanvas",t);var i=e.prototype;return i.recreateResource=function(){var t=WebGL.mainContext,e=this._source=t.createTexture(),i=WebGLContext.curBindTexTarget,n=WebGLContext.curBindTexValue;WebGLContext.bindTexture(t,3553,e),t.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),i&&n&&WebGLContext.bindTexture(t,i,n),this.memorySize=this._w*this._h*4,this.completeCreate()},i.disposeResource=function(){this._source&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.texSubImage2D=function(t,e,i){if(Render.isFlash){this._flashCacheImage||(this._flashCacheImage=HTMLImage.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var n=i.bitmapdata;this._flashCacheImage._image.copyPixels(n,0,0,n.width,n.height,t,e),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var s=WebGL.mainContext,o=WebGLContext.curBindTexTarget,a=WebGLContext.curBindTexValue;WebGLContext.bindTexture(s,3553,this._source),Render.isConchWebGL?(i!==ConchTextCanvas&&(0<=t-1&&s.texSubImage2DEx(!0,3553,0,t-1,e,6408,5121,i),t+1<=this._w&&s.texSubImage2DEx(!0,3553,0,t+1,e,6408,5121,i),0<=e-1&&s.texSubImage2DEx(!0,3553,0,t,e-1,6408,5121,i),e+1<=this._h&&s.texSubImage2DEx(!0,3553,0,t,e+1,6408,5121,i)),s.texSubImage2DEx(!0,3553,0,t,e,6408,5121,i)):(s.pixelStorei(37441,!0),0<=t-1&&s.texSubImage2D(3553,0,t-1,e,6408,5121,i),t+1<=this._w&&s.texSubImage2D(3553,0,t+1,e,6408,5121,i),0<=e-1&&s.texSubImage2D(3553,0,t,e-1,6408,5121,i),e+1<=this._h&&s.texSubImage2D(3553,0,t,e+1,6408,5121,i),s.texSubImage2D(3553,0,t,e,6408,5121,i),s.pixelStorei(37441,!1)),o&&a&&WebGLContext.bindTexture(s,o,a)}},i.texSubImage2DPixel=function(t,e,i,n,s){var o=WebGL.mainContext,a=WebGLContext.curBindTexTarget,r=WebGLContext.curBindTexValue;WebGLContext.bindTexture(o,3553,this._source);var l=new Uint8Array(s.data);Render.isConchWebGL?o.texSubImage2DEx(!0,3553,0,t,e,i,n,6408,5121,l):(o.pixelStorei(37441,!0),o.texSubImage2D(3553,0,t,e,i,n,6408,5121,l),o.pixelStorei(37441,!1)),a&&r&&WebGLContext.bindTexture(o,a,r)},__getset(0,i,"width",t.prototype._$get_width,function(t){this._w=t}),__getset(0,i,"height",t.prototype._$get_height,function(t){this._h=t}),e}(Bitmap),WebGLCanvas=function(t){function s(){this.flipY=!0,this.alwaysChange=!1,s.__super.call(this)}__class(s,"laya.webgl.resource.WebGLCanvas",Bitmap);var e=s.prototype;return e.getCanvas=function(){return this._canvas},e.clear=function(){this._ctx&&this._ctx.clear()},e.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},e._setContext=function(t){this._ctx=t},e.getContext=function(t,e){return this._ctx?this._ctx:this._ctx=s._createContext(this)},e.size=function(t,e){this._w==t&&this._h==e||(this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this._canvas&&(this._canvas.height=e,this._canvas.width=t))},e.activeResource=function(t){void 0===t&&(t=!1),this._source||this.recreateResource()},e.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},e.disposeResource=function(){this._source&&!this.iscpuSource&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e.createWebGlTexture=function(){var t=WebGL.mainContext;this._canvas;var e=this._source=t.createTexture();this.iscpuSource=!1;var i=WebGLContext.curBindTexTarget,n=WebGLContext.curBindTexValue;WebGLContext.bindTexture(t,3553,e),t.pixelStorei(37440,this.flipY?1:0),Render.isConchWebGL?t.texImage2DEx(s.premulAlpha,3553,0,6408,6408,5121,this._imgData):(s.premulAlpha&&t.pixelStorei(37441,!0),t.texImage2D(3553,0,6408,6408,5121,this._imgData),s.premulAlpha&&t.pixelStorei(37441,!1)),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),t.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,i&&n&&WebGLContext.bindTexture(t,i,n)},e.reloadCanvasData=function(){var t=WebGL.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var e=WebGLContext.curBindTexTarget,i=WebGLContext.curBindTexValue;WebGLContext.bindTexture(t,3553,this._source),Render.isConchWebGL?t.texImage2DEx(s.premulAlpha,3553,0,6408,6408,5121,this._imgData):(s.premulAlpha&&t.pixelStorei(37441,!0),t.texImage2D(3553,0,6408,6408,5121,this._imgData),s.premulAlpha&&t.pixelStorei(37441,!1)),t.pixelStorei(37440,0),e&&i&&WebGLContext.bindTexture(t,e,i)},e.texSubImage2D=function(t,e,i){var n=WebGL.mainContext,s=WebGLContext.curBindTexTarget,o=WebGLContext.curBindTexValue;WebGLContext.bindTexture(n,3553,this._source),Render.isConchWebGL?n.texSubImage2DEx(!0,3553,0,e,i,6408,5121,t._source):(n.pixelStorei(37441,!0),n.texSubImage2D(3553,0,e,i,6408,5121,t._source),n.pixelStorei(37441,!1)),s&&o&&WebGLContext.bindTexture(n,s,o)},e.toBase64=function(t,e,i){var n=null;this._canvas&&(n=this._canvas.toDataURL(t,e)),i.call(this,n)},__getset(0,e,"context",function(){return this._ctx}),__getset(0,e,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),__getset(0,e,"asBitmap",null,function(t){this._ctx&&(this._ctx.asBitmap=t)}),s._createContext=null,s.premulAlpha=!1,s}(),WebGLCharImage=function(t){function o(t,e){this.CborderSize=12,o.__super.call(this),this.char=t,this.isSpace=" "===t,this.xs=e.scaleX,this.ys=e.scaleY,this.font=e.font.toString(),this.fontSize=e.font.size,this.fillColor=e.fillColor,this.borderColor=e.borderColor,this.lineWidth=e.lineWidth,this.underLine=e.underLine;var i,n=Render.isConchApp;n?((i=ConchTextCanvas)._source=ConchTextCanvas,i._source.canvas=ConchTextCanvas):i=Browser.canvas.source,this.canvas=i,this._enableMerageInAtlas=!0,this._ctx=n?i:this.canvas.getContext("2d",void 0);var s=Utils.measureText(this.char,this.font);this.cw=s.width*this.xs,this.ch=(s.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new Texture(this)}__class(o,"laya.webgl.resource.WebGLCharImage",Bitmap);var e=o.prototype;return Laya.imps(e,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),e.active=function(){this.texture.active()},e.recreateResource=function(){var t=Render.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),t){var e=this.fontSize;1==this.xs&&1==this.ys||(e=parseInt(e*(this.xs>this.ys?this.xs:this.ys)+""));var i="normal 100 "+this.font;i=i.replace(o._fontSizeReg,e),this.borderColor&&(i+=" 1 "+this.borderColor),this._ctx.font=i,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,Text.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var n=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(n,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},e.onresize=function(t,e){this._w=t,this._h=e,this._allowMerageInAtlas=!0},e.clearAtlasSource=function(){},__getset(0,e,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),__getset(0,e,"atlasSource",function(){return this.canvas}),__getset(0,e,"atlasImgData",function(){return!o.canUseCanvas&&this._ctx.getImageData?this._ctx.getImageData(0,0,this._w,this._h):null}),__getset(0,e,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(t){this._enableMerageInAtlas=t}),o.createOneChar=function(t,e){return new o(t,e)},o.canUseCanvas=!0,o._fontSizeReg=new RegExp("\\d+(?=px)","g"),o}(),WebGLRenderTarget=function(t){function h(t,e,i,n,s,o,a,r,l){void 0===i&&(i=6408),void 0===n&&(n=5121),void 0===s&&(s=34041),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===r&&(r=-1),void 0===l&&(l=1),h.__super.call(this),this._w=t,this._h=e,this._surfaceFormat=i,this._surfaceType=n,this._depthStencilFormat=s,Render.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=o,this._repeat=a,this._minFifter=r,this._magFifter=l}__class(h,"laya.webgl.resource.WebGLRenderTarget",Bitmap);var e=h.prototype;return e.recreateResource=function(){var t=WebGL.mainContext;this._frameBuffer||(this._frameBuffer=t.createFramebuffer()),this._source||(this._source=t.createTexture());var e=WebGLContext.curBindTexTarget,i=WebGLContext.curBindTexValue;WebGLContext.bindTexture(t,3553,this._source),t.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var n=this._minFifter,s=this._magFifter,o=this._repeat?10497:33071,a=Arith.isPOT(this._w,this._h);if(a?(this._mipMap?-1!==n||(n=9987):-1!==n||(n=9729),-1!==s||(s=9729),t.texParameteri(3553,10241,n),t.texParameteri(3553,10240,s),t.texParameteri(3553,10242,o),t.texParameteri(3553,10243,o),this._mipMap&&t.generateMipmap(3553)):(-1!==n||(n=9729),-1!==s||(s=9729),t.texParameteri(3553,10241,n),t.texParameteri(3553,10240,s),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),t.bindFramebuffer(36160,this._frameBuffer),t.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=t.createRenderbuffer()),t.bindRenderbuffer(36161,this._depthStencilBuffer),t.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:t.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:t.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:t.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}t.bindFramebuffer(36160,null),e&&i&&WebGLContext.bindTexture(t,e,i),t.bindRenderbuffer(36161,null),a&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},e.disposeResource=function(){this._frameBuffer&&(WebGL.mainContext.deleteTexture(this._source),WebGL.mainContext.deleteFramebuffer(this._frameBuffer),WebGL.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},__getset(0,e,"depthStencilBuffer",function(){return this._depthStencilBuffer}),__getset(0,e,"frameBuffer",function(){return this._frameBuffer}),h}(),WebGLSubImage=function(t){function r(t,e,i,n,s,o,a){this.offsetX=0,this.offsetY=0,r.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=o,this.canvas=t,this._ctx=t.getContext("2d",void 0),this._w=n,this._h=s,this.offsetX=e,this.offsetY=i,this.src=a,this._enableMerageInAtlas=!0,AtlasResourceManager.enabled&&this._w<AtlasResourceManager.atlasLimitWidth&&this._h<AtlasResourceManager.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}__class(r,"laya.webgl.resource.WebGLSubImage",Bitmap);var e=r.prototype;return Laya.imps(e,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),e.size=function(t,e){this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this.canvas&&(this.canvas.height=e,this.canvas.width=t)},e.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},e.createWebGlTexture=function(){var t=WebGL.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var e=this._source=t.createTexture(),i=WebGLContext.curBindTexTarget,n=WebGLContext.curBindTexValue;WebGLContext.bindTexture(t,3553,e),Render.isConchWebGL?t.texImage2DEx(!0,3553,0,6408,6408,5121,this.canvas):(t.pixelStorei(37441,!0),t.texImage2D(3553,0,6408,6408,5121,this.canvas),t.pixelStorei(37441,!1));var s=this.minFifter,o=this.magFifter,a=this.repeat?10497:33071,r=Arith.isPOT(this.width,this.height);r?(this.mipmap?-1!==s||(s=9987):-1!==s||(s=9729),-1!==o||(o=9729),t.texParameteri(3553,10240,o),t.texParameteri(3553,10241,s),t.texParameteri(3553,10242,a),t.texParameteri(3553,10243,a),this.mipmap&&t.generateMipmap(3553)):(-1!==s||(s=9729),-1!==o||(o=9729),t.texParameteri(3553,10241,s),t.texParameteri(3553,10240,o),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),i&&n&&WebGLContext.bindTexture(t,i,n),this.canvas=null,r&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},e.disposeResource=function(){AtlasResourceManager.enabled&&this._allowMerageInAtlas||!this._source||(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e.clearAtlasSource=function(){},__getset(0,e,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),__getset(0,e,"atlasSource",function(){return this.canvas}),__getset(0,e,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(t){this._allowMerageInAtlas=t}),r}(),Buffer2D=function(t){function e(){this._maxsize=0,this._upload=!0,this._uploadSize=0,e.__super.call(this),this.lock=!0}__class(e,"laya.webgl.utils.Buffer2D",t);var i=e.prototype;return i.needSize=function(t){var e=this._byteLength;if(t){var i=this._byteLength+t;i<=this._buffer.byteLength||this._resizeBuffer(i<<1,!0),this._byteLength=i}return e},i._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),Stat.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Buffer._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),Buffer._gl.bufferSubData(this._bufferType,0,this._buffer)},i._bufferSubData=function(t,e,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._maxsize=Math.max(this._maxsize,this._byteLength),Stat.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Buffer._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),e||i){var n=this._buffer.slice(e,i);Buffer._gl.bufferSubData(this._bufferType,t,n)}else Buffer._gl.bufferSubData(this._bufferType,t,this._buffer)},i._checkArrayUse=function(){},i._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},i._bind_subUpload=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(t,e,i),!0)},i._resizeBuffer=function(t,e){if(t<this._buffer.byteLength)return this;if(this.memorySize=t,e&&this._buffer&&0<this._buffer.byteLength){var i=new ArrayBuffer(t);new Uint8Array(i).set(new Uint8Array(this._buffer),0),this._buffer=i}else this._buffer=new ArrayBuffer(t);return this._checkArrayUse(),this._upload=!0,this},i.append=function(t){this._upload=!0;var e,i;e=t.byteLength,t instanceof Uint8Array?(this._resizeBuffer(this._byteLength+e,!0),i=new Uint8Array(this._buffer,this._byteLength)):t instanceof Uint16Array?(this._resizeBuffer(this._byteLength+e,!0),i=new Uint16Array(this._buffer,this._byteLength)):t instanceof Float32Array&&(this._resizeBuffer(this._byteLength+e,!0),i=new Float32Array(this._buffer,this._byteLength)),i.set(t,0),this._byteLength+=e,this._checkArrayUse()},i.appendU16Array=function(t,e){this._resizeBuffer(this._byteLength+2*e,!0);for(var i=new Uint16Array(this._buffer,this._byteLength,e),n=0;n<e;n++)i[n]=t[n];this._byteLength+=2*e,this._checkArrayUse()},i.appendEx=function(t,e){this._upload=!0;var i;i=t.byteLength,this._resizeBuffer(this._byteLength+i,!0),new e(this._buffer,this._byteLength).set(t,0),this._byteLength+=i,this._checkArrayUse()},i.appendEx2=function(t,e,i,n){void 0===n&&(n=1),this._upload=!0;var s,o;s=i*n,this._resizeBuffer(this._byteLength+s,!0),o=new e(this._buffer,this._byteLength);var a=0;for(a=0;a<i;a++)o[a]=t[a];this._byteLength+=s,this._checkArrayUse()},i.getBuffer=function(){return this._buffer},i.setNeedUpload=function(){this._upload=!0},i.getNeedUpload=function(){return this._upload},i.upload=function(){var t=this._bind_upload();return Buffer._gl.bindBuffer(this._bufferType,null),Buffer._bindActive[this._bufferType]=null,BaseShader.activeShader=null,t},i.subUpload=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var n=this._bind_subUpload();return Buffer._gl.bindBuffer(this._bufferType,null),Buffer._bindActive[this._bufferType]=null,BaseShader.activeShader=null,n},i.disposeResource=function(){t.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},i.clear=function(){this._byteLength=0,this._upload=!0},__getset(0,i,"bufferLength",function(){return this._buffer.byteLength}),__getset(0,i,"byteLength",null,function(t){this._byteLength!==t&&(t<=this._buffer.byteLength||this._resizeBuffer(2*t+256,!0),this._byteLength=t)}),e.__int__=function(t){IndexBuffer2D.QuadrangleIB=IndexBuffer2D.create(35044),GlUtils.fillIBQuadrangle(IndexBuffer2D.QuadrangleIB,16)},e.FLOAT32=4,e.SHORT=2,e}(Buffer),TextSV=function(t){function e(t){e.__super.call(this,64),this.defines.add(64)}__class(e,"laya.webgl.shader.d2.value.TextSV",t);var i=e.prototype;return i.release=function(){(e.pool[e._length++]=this).clear()},i.clear=function(){t.prototype.clear.call(this)},e.create=function(){return e._length?e.pool[--e._length]:new e(null)},e.pool=[],e._length=0,e}(TextureSV),Box=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.Box",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IBox":!0}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){for(var e in this._dataSource=t){var i=this.getChildByName(e);i?i.dataSource=t[e]:this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=t[e])}}),e}(Component),Button=function(e){function s(t,e){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,s.__super.call(this),this._labelColors=Styles.buttonLabelColors,this._stateNum=Styles.buttonStateNum,void 0===e&&(e=""),this.skin=t,this.label=e}__class(s,"laya.ui.Button",e);var t=s.prototype;return Laya.imps(t,{"laya.ui.ISelect":!0}),t.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(t),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},t.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap},t.createText=function(){this._text||(this._text=new Text,this._text.overflow=Text.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},t.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},t.onMouse=function(t){if(laya.ui.Button.isShowLog,!1!==this.toggle||!this._selected)return"click"===t.type?(this.toggle&&(this.selected=!this._selected),this._clickHandler&&this._clickHandler.run(),void laya.ui.Button.isShowLog):void(!this._selected&&(this.state=s.stateMap[t.type]));laya.ui.Button.isShowLog},t.changeClips=function(){var t=Loader.getRes(this._skin);if(t){var e=t.sourceWidth,i=t.sourceHeight/this._stateNum;t.$_GID||(t.$_GID=Utils.getGID());var n=t.$_GID+"-"+this._stateNum,s=WeakObject.I.get(n);if(Utils.isOkTextureList(s)||(s=null),s)this._sources=s;else{if(this._sources=[],1===this._stateNum)this._sources.push(t);else for(var o=0;o<this._stateNum;o++)this._sources.push(Texture.createFromTexture(t,0,i*o,e,i));WeakObject.I.set(n,this._sources)}this._autoSize?(this._bitmap.width=this._width||e,this._bitmap.height=this._height||i,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=e)}},t.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var t=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[t]),this.label&&(this._text.color=this._labelColors[t],this._strokeColors&&(this._text.strokeColor=this._strokeColors[t]))},t._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},__getset(0,t,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(t){this.createText(),this._text.strokeColor=t}),__getset(0,t,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),__getset(0,t,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this.callLater(this.changeClips),this._setStateChanged())}),__getset(0,t,"state",function(){return this._state},function(t){this._state!=t&&(this._state=t,this._setStateChanged())}),__getset(0,t,"text",function(){return this.createText(),this._text}),__getset(0,t,"stateNum",function(){return this._stateNum},function(t){"string"==typeof t&&(t=parseInt(t)),this._stateNum!=t&&(this._stateNum=t<1?1:3<t?3:t,this.callLater(this.changeClips))}),__getset(0,t,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(t){this._strokeColors=UIUtils.fillArray(Styles.buttonLabelColors,t,String),this._setStateChanged()}),__getset(0,t,"labelColors",function(){return this._labelColors.join(",")},function(t){this._labelColors=UIUtils.fillArray(Styles.buttonLabelColors,t,String),this._setStateChanged()}),__getset(0,t,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),__getset(0,t,"label",function(){return this._text?this._text.text:null},function(t){(this._text||t)&&(this.createText(),this._text.text!=t&&(t&&!this._text.parent&&this.addChild(this._text),this._text.text=(t+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),__getset(0,t,"selected",function(){return this._selected},function(t){this._selected!=t&&(this._selected=t,this.state=this._selected?2:0,this.event("change"))}),__getset(0,t,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(t){this.createText(),this._text.padding=UIUtils.fillArray(Styles.labelPadding,t,Number)}),__getset(0,t,"labelSize",function(){return this.createText(),this._text.fontSize},function(t){this.createText(),this._text.fontSize=t}),__getset(0,t,"labelStroke",function(){return this.createText(),this._text.stroke},function(t){this.createText(),this._text.stroke=t}),__getset(0,t,"labelBold",function(){return this.createText(),this._text.bold},function(t){this.createText(),this._text.bold=t}),__getset(0,t,"labelFont",function(){return this.createText(),this._text.font},function(t){this.createText(),this._text.font=t}),__getset(0,t,"labelAlign",function(){return this.createText(),this._text.align},function(t){this.createText(),this._text.align=t}),__getset(0,t,"clickHandler",function(){return this._clickHandler},function(t){this._clickHandler=t}),__getset(0,t,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,t,"width",e.prototype._$get_width,function(t){Laya.superSet(Component,this,"width",t),this._autoSize&&(this._bitmap.width=t,this._text&&(this._text.width=t))}),__getset(0,t,"height",e.prototype._$get_height,function(t){Laya.superSet(Component,this,"height",t),this._autoSize&&(this._bitmap.height=t,this._text&&(this._text.height=t))}),__getset(0,t,"dataSource",e.prototype._$get_dataSource,function(t){"number"==typeof(this._dataSource=t)||"string"==typeof t?this.label=t+"":Laya.superSet(Component,this,"dataSource",t)}),__getset(0,t,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(t){this._bitmap._offset=t?UIUtils.fillArray([1,1],t,Number):[]}),s.getQualifiedClassName=function(t){if(t&&t.constructor){var e=s._clsMap[t.constructor];if(e)return e;var i=Laya.__classmap;for(e in i){if(t.constructor==i[e])return s._clsMap[t.constructor]=e;-1==e.indexOf("laya")&&(s._clsMap[i[e]]=e)}var n=t.constructor.toString();return e=(e=(e=n.substr(0,n.indexOf("("))).replace("function","")).replace(/(^\s*)|(\s*$)/gi,""),s._clsMap[t.constructor]=e}return typeof t.toString()},s.buttonLog=[],s.isShowLog=!0,s._clsMap={},__static(s,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),s}(Component),LoginGateModule=function(t){function e(){e.__super.call(this),this.addSubscribe(LoginGateProxy),this.subPackages=["10102","10104","10106","10110","10114","10118","10201","13303","13602"]}return __class(e,"gateModule.modules.login.LoginGateModule",GateCustomModule),e}(),HTMLDivElement=function(t){function e(){this.contextHeight=NaN,this.contextWidth=NaN,e.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}__class(e,"laya.html.dom.HTMLDivElement",t);var i=e.prototype;return i.appendHTML=function(t){HTMLParse.parse(this,t,this.URI),this.layout()},i._addChildsToLayout=function(e){var t=this._getWords();if(null==t&&0==this._childs.length)return!1;t&&t.forEach(function(t){e.push(t)});for(var i=!0,n=0,s=this._childs.length;n<s;n++){var o=this._childs[n];i?i=!1:e.push(null),o._addToLayout(e)}return!0},i._addToLayout=function(t){this.layout()},i.layout=function(){if(this.style){this.style._type|=512;var t=Layout.layout(this);if(t){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new Rectangle);var e=this._$P.mHtmlBounds;e.x=e.y=0,e.width=this.contextWidth=t[0],e.height=this.contextHeight=t[1],this.setBounds(e)}}},__getset(0,i,"height",function(){return this._height?this._height:this.contextHeight},t.prototype._$set_height),__getset(0,i,"innerHTML",null,function(t){this.destroyChildren(),this.appendHTML(t)}),__getset(0,i,"width",function(){return this._width?this._width:this.contextWidth},function(t){var e=!1;e=0===t?t!=this._width:t!=this.width,Laya.superSet(HTMLElement,this,"width",t),e&&this.layout()}),e}(HTMLElement),AutoFillRec=function(e){function i(t){this.type=0,this.preX=NaN,this.preY=NaN,i.__super.call(this)}__class(i,"laya.debug.tools.resizer.AutoFillRec",e);var t=i.prototype;return t.changeSize=function(){e.prototype.changeSize.call(this);var t=this.graphics;t.clear(),t.drawRect(0,0,this.width,this.height,"#33c5f5")},t.record=function(){this.preX=this.x,this.preY=this.y},t.getDx=function(){return this.x-this.preX},t.getDy=function(){return this.y-this.preY},i}(Component),TipManagerForDebug=function(t){function i(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,i.__super.call(this),this._tipBox=new Component,this._tipBox.addChild(this._tipText=new Text),this._tipText.x=this._tipText.y=5,this._tipText.color=i.tipTextColor,this._defaultTipHandler=this.showDefaultTip,Laya.stage.on("showtip",this,this.onStageShowTip),Laya.stage.on("hidetip",this,this.onStageHideTip)}__class(i,"laya.debug.tools.TipManagerForDebug",Component);var e=i.prototype;return e.onStageHideTip=function(t){Laya.timer.clear(this,this.showTip),this.closeAll(),this.removeSelf()},e.onStageShowTip=function(t){Laya.timer.once(i.tipDelay,this,this.showTip,[t],!0)},e.showTip=function(t){if("string"==typeof t){var e=String(t);Boolean(e)&&this._defaultTipHandler(e)}else t instanceof laya.utils.Handler?t.run():"function"==typeof t&&t.apply();Laya.stage.on("mousemove",this,this.onStageMouseMove),Laya.stage.on("mousedown",this,this.onStageMouseDown),this.onStageMouseMove(null)},e.onStageMouseDown=function(t){this.closeAll()},e.onStageMouseMove=function(t){this.showToStage(this,i.offsetX,i.offsetY)},e.showToStage=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=t.getBounds();t.x=Laya.stage.mouseX+e,t.y=Laya.stage.mouseY+i,t.x+n.width>Laya.stage.width&&(t.x-=n.width+e),t.y+n.height>Laya.stage.height&&(t.y-=n.height+i)},e.closeAll=function(){Laya.timer.clear(this,this.showTip),Laya.stage.off("mousemove",this,this.onStageMouseMove),Laya.stage.off("mousedown",this,this.onStageMouseDown),this.removeChildren()},e.showDisTip=function(t){this.addChild(t),this.showToStage(this),Laya.stage.addChild(this)},e.showDefaultTip=function(t){this._tipText.text=t;var e=this._tipBox.graphics;e.clear(),e.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,i.tipBackColor),this.addChild(this._tipBox),this.showToStage(this),Laya.stage.addChild(this)},__getset(0,e,"defaultTipHandler",function(){return this._defaultTipHandler},function(t){this._defaultTipHandler=t}),i.offsetX=10,i.offsetY=15,i.tipTextColor="#ffffff",i.tipBackColor="#111111",i.tipDelay=200,i}(),UIViewBase=function(t){function e(){this.minHandler=null,this.maxHandler=null,this.isFirstShow=!0,this.dis=null,e.__super.call(this),(this.dis=this).minHandler=new Handler(this,this.close),this.maxHandler=new Handler(this,this.show),this.createPanel(),this.dis&&(this.dis.on("mousedown",this,this.bringToTop),this.dis.cacheAsBitmap=!0)}__class(e,"laya.debug.view.nodeInfo.views.UIViewBase",Component);var i=e.prototype;return i.show=function(){DebugInfoLayer.I.setTop(),DebugInfoLayer.I.popLayer.addChild(this.dis),this.isFirstShow&&(this.firstShowFun(),this.isFirstShow=!1)},i.firstShowFun=function(){this.dis.x=.5*(Laya.stage.width-this.dis.width),this.dis.y=.5*(Laya.stage.height-this.dis.height),DisControlTool.intFyDisPos(this.dis)},i.bringToTop=function(){DisControlTool.setTop(this.dis)},i.switchShow=function(){this.dis.parent?this.close():this.show()},i.close=function(){this.dis.removeSelf()},i.createPanel=function(){},i.getInput=function(){var t;return(t=new DInput).size(200,30),t.fontSize=30,t},i.getButton=function(){var t;return(t=new DButton).size(40,30),t.fontSize=30,t},e}(),DButton=function(t){function e(){e.__super.call(this),this.bgColor="#ffff00",this.wordWrap=!1,this.mouseEnabled=!0}return __class(e,"laya.debug.tools.debugUI.DButton",Text),e}(),Input=function(e){function s(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",s.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=Text.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}__class(s,"laya.display.Input",e);var t=s.prototype;return t.updatePos=function(){var t=Browser.getElementById("input");t&&t.hasOwnProperty("scrollIntoViewIfNeeded")&&t.scrollIntoViewIfNeeded()},t.setSelection=function(t,e){this.focus=!0,laya.display.Input.inputElement.selectionStart=t,laya.display.Input.inputElement.selectionEnd=e},t._onUnDisplay=function(t){this.focus=!1},t._onMouseDown=function(t){this.focus=!0},t._syncInputTransform=function(){var t=this.nativeInput,e=Utils.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),i=this._width-this.padding[1]-this.padding[3],n=this._height-this.padding[0]-this.padding[2];Render.isConchApp?(t.setScale(e.scaleX,e.scaleY),t.setSize(i,n),t.setPos(e.x,e.y)):(s.inputContainer.style.transform=s.inputContainer.style.webkitTransform="scale("+e.scaleX+","+e.scaleY+") rotate("+Laya.stage.canvasDegree+"deg)",t.style.width=i+"px",t.style.height=n+"px",s.inputContainer.style.left=e.x+"px",s.inputContainer.style.top=e.y+"px")},t.select=function(){this.nativeInput.select()},t._setInputMethod=function(){s.input.parentElement&&s.inputContainer.removeChild(s.input),s.area.parentElement&&s.inputContainer.removeChild(s.area),s.inputElement=this._multiline?s.area:s.input,s.inputContainer.appendChild(s.inputElement),Text.RightToLeft&&(s.inputElement.style.direction="rtl")},t._focusIn=function(){laya.display.Input.isInputting=!0;var t=this.nativeInput;this._focus=!0;var e=t.style;e.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),t.readOnly=!this._editable,Render.isConchApp&&(t.setType(this._type),t.setForbidEdit(!this._editable)),t.maxLength=this._maxChars;this.padding;if(t.type=this._type,t.value=this._content,t.placeholder=this._prompt,Laya.stage.off("keydown",this,this._onKeyDown),Laya.stage.on("keydown",this,this._onKeyDown),(Laya.stage.focus=this).event("focus"),Browser.onPC&&t.focus(),!Browser.onMiniGame){this._text;this._text=null}this.typeset(),t.setColor(this._originColor),t.setFontSize(this.fontSize),t.setFontFace(Browser.onIPhone&&Text._fontFamilyMap[this.font]||this.font),Render.isConchApp&&t.setMultiAble&&t.setMultiAble(this._multiline),e.lineHeight=this.leading+this.fontSize+"px",e.fontStyle=this.italic?"italic":"normal",e.fontWeight=this.bold?"bold":"normal",e.textAlign=this.align,e.padding="0 0",this._syncInputTransform(),!Render.isConchApp&&Browser.onPC&&Laya.timer.frameLoop(1,this,this._syncInputTransform)},t._setPromptColor=function(){(s.promptStyleDOM=Browser.getElementById("promptStyle"))||((s.promptStyleDOM=Browser.createElement("style")).setAttribute("id","promptStyle"),Browser.document.head.appendChild(s.promptStyleDOM)),s.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},t._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(Laya.superSet(Text,this,"text",this._content),Laya.superSet(Text,this,"color",this._originColor)):(Laya.superSet(Text,this,"text",this._prompt),Laya.superSet(Text,this,"color",this._promptColor)),Laya.stage.off("keydown",this,this._onKeyDown),Laya.stage.focus=null,this.event("blur"),Render.isConchApp&&this.nativeInput.blur(),Browser.onPC&&Laya.timer.clear(this,this._syncInputTransform)},t._onKeyDown=function(t){13===t.keyCode&&(Browser.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter")),console.log("----------onKeyDown------------")},t.changeText=function(t){this._content=t,this._focus?(this.nativeInput.value=t||"",this.event("change")):e.prototype.changeText.call(this,t)},__getset(0,t,"color",e.prototype._$get_color,function(t){this._focus&&this.nativeInput.setColor(t),Laya.superSet(Text,this,"color",this._content?t:this._promptColor),this._originColor=t}),__getset(0,t,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(t){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),__getset(0,t,"multiline",function(){return this._multiline},function(t){this._multiline=t,this.valign=t?"top":"middle"}),__getset(0,t,"maxChars",function(){return this._maxChars},function(t){t<=0&&(t=1e5),this._maxChars=t}),__getset(0,t,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(t){Laya.superSet(Text,this,"color",this._originColor),t+="",this._focus?(this.nativeInput.value=t||"",this.event("change")):(this._multiline||(t=t.replace(/\r?\n/g,"")),(this._content=t)?Laya.superSet(Text,this,"text",t):(Laya.superSet(Text,this,"text",this._prompt),Laya.superSet(Text,this,"color",this.promptColor)))}),__getset(0,t,"nativeInput",function(){return this._multiline?s.area:s.input}),__getset(0,t,"prompt",function(){return this._prompt},function(t){!this._text&&t&&Laya.superSet(Text,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?Laya.superSet(Text,this,"text",this._text==this._prompt?t:this._text):Laya.superSet(Text,this,"text",t),this._prompt=Text.langPacks&&Text.langPacks[t]?Text.langPacks[t]:t}),__getset(0,t,"focus",function(){return this._focus},function(t){var e=this.nativeInput;this._focus!==t&&(t?(e.target?e.target._focusOut():this._setInputMethod(),e.target=this,Laya.timer.loop(500,this,this.updatePos),this._focusIn()):(e.target=null,this._focusOut(),Browser.document.body.scrollTop=0,e.blur(),Laya.timer.clear(this,this.updatePos),Render.isConchApp?e.setPos(-1e4,-1e4):s.inputContainer.contains(e)&&s.inputContainer.removeChild(e)))}),__getset(0,t,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(t){t?(-1<(t="[^"+t+"]").indexOf("^^")&&(t=t.replace("^^","")),this._restrictPattern=new RegExp(t,"g")):this._restrictPattern=null}),__getset(0,t,"editable",function(){return this._editable},function(t){this._editable=t,Render.isConchApp&&s.input.setForbidEdit(!t)}),__getset(0,t,"promptColor",function(){return this._promptColor},function(t){this._promptColor=t,this._content||Laya.superSet(Text,this,"color",t)}),__getset(0,t,"type",function(){return this._type},function(t){this._getCSSStyle().password="password"==t,this._type=t,Render.isConchApp&&this.nativeInput.setType(t)}),__getset(0,t,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(t){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),__getset(0,t,"asPassword",function(){return this._getCSSStyle().password},function(t){this._getCSSStyle().password=t,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),s.__init__=function(){s._createInputElement(),Browser.onMobile&&Render.canvas.addEventListener(s.IOS_IFRAME?Browser.onMiniGame||Browser.onBDMiniGame?"touchend":"click":"touchend",s._popupInputMethod)},s._popupInputMethod=function(t){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},s._createInputElement=function(){s._initInput(s.area=Browser.createElement("textarea")),s._initInput(s.input=Browser.createElement("input")),s.input.setAttribute("id","input"),(s.inputContainer=Browser.createElement("div")).style.position="absolute",s.inputContainer.style.zIndex=1e5,Browser.container.appendChild(s.inputContainer),s.inputContainer.setPos=function(t,e){s.inputContainer.style.left=t+"px",s.inputContainer.style.top=e+"px"}},s._initInput=function(e){var t=e.style;t.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",t.resize="none",t.backgroundColor="transparent",t.border="none",t.outline="none",t.zIndex=1,e.addEventListener("input",s._processInputting),e.addEventListener("mousemove",s._stopEvent),e.addEventListener("mousedown",s._stopEvent),e.addEventListener("touchmove",s._stopEvent),e.addEventListener("compositionstart",s._compositionEvent),e.addEventListener("compositionend",s._compositionEvent),e.setFontFace=function(t){e.style.fontFamily=t},Render.isConchApp||(e.setColor=function(t){e.style.color=t},e.setFontSize=function(t){e.style.fontSize=t+"px"})},s._compositionEvent=function(t){var e=laya.display.Input.inputElement.target;e&&e.hasOwnProperty("event")&&("compositionstart"==t.type?e.event("compositionstart"):"compositionend"==t.type&&e.event("compositionend"))},s._processInputting=function(t){var e=laya.display.Input.inputElement.target;if(e){var i=laya.display.Input.inputElement.value;e._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),e._restrictPattern.test(i)&&(i=i.replace(e._restrictPattern,""),laya.display.Input.inputElement.value=i)),e._text=i,e.event("input")}},s._stopEvent=function(t){"touchmove"==t.type&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},s.TYPE_TEXT="text",s.TYPE_PASSWORD="password",s.TYPE_EMAIL="email",s.TYPE_URL="url",s.TYPE_NUMBER="number",s.TYPE_RANGE="range",s.TYPE_DATE="date",s.TYPE_MONTH="month",s.TYPE_WEEK="week",s.TYPE_TIME="time",s.TYPE_DATE_TIME="datetime",s.TYPE_DATE_TIME_LOCAL="datetime-local",s.TYPE_SEARCH="search",s.input=null,s.area=null,s.inputElement=null,s.inputContainer=null,s.confirmButton=null,s.promptStyleDOM=null,s.inputHeight=45,s.isInputting=!1,s.stageMatrix=null,__static(s,["IOS_IFRAME",function(){return this.IOS_IFRAME=Browser.onIOS&&Browser.window.top!=Browser.window.self}]),s}(Text),HTMLBrElement=function(t){function e(){e.__super.call(this),this.style.lineElement=!0,this.style.block=!0}return __class(e,"laya.html.dom.HTMLBrElement",HTMLElement),e}(),HTMLDocument=function(t){function e(){this.all=new Array,this.styleSheets=CSSStyle.styleSheets,e.__super.call(this)}__class(e,"laya.html.dom.HTMLDocument",HTMLElement);var i=e.prototype;return i.getElementById=function(t){return this.all[t]},i.setElementById=function(t,e){this.all[t]=e},__static(e,["document",function(){return this.document=new e}]),e}(),HTMLImageElement=function(t){function e(){this._tex=null,this._url=null,this._renderArgs=[],e.__super.call(this),this.style.block=!0}__class(e,"laya.html.dom.HTMLImageElement",HTMLElement);var i=e.prototype;return i._addToLayout=function(t){!this._style.absolute&&t.push(this)},i.render=function(t,e,i){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(Stat.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,t.ctx.drawTexture2(e,i,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},i.layaoutCallNative=function(){var t=0;if(this._childs&&0<(t=this._childs.length))for(var e=0;e<t;e++)this._childs[e].layaoutCallNative&&this._childs[e].layaoutCallNative()},__getset(0,i,"src",null,function(t){var e=this;if(t=this.formatURL(t),this._url!=t){this._url=t;var i=this._tex=Loader.getRes(t);i||(this._tex=i=new Texture,i.load(t),Loader.cacheRes(t,i)),i.loaded?n():i.on("loaded",null,n)}function n(){var t=e._style;t.widthed(e)||e._tex.width,t.heighted(e)||e._tex.height;t.widthed(e)||e._width==e._tex.width||(e.width=e._tex.width,e.parent&&e.parent._layoutLater()),t.heighted(e)||e._height==e._tex.height||(e.height=e._tex.height,e.parent&&e.parent._layoutLater()),Render.isConchApp&&(e._renderArgs[0]=e._tex,e._renderArgs[1]=e.x,e._renderArgs[2]=e.y,e._renderArgs[3]=e.width||e._tex.width,e._renderArgs[4]=e.height||e._tex.height,e.graphics.drawTexture(e._tex,0,0,e._renderArgs[3],e._renderArgs[4])),e.repaint(),e.parentRepaint()}}),e}(),HTMLStyleElement=function(t){function e(){e.__super.call(this),this.visible=!1}return __class(e,"laya.html.dom.HTMLStyleElement",t),__getset(0,e.prototype,"text",t.prototype._$get_text,function(t){CSSStyle.parseCSS(t,null)}),e}(HTMLElement),Image=function(e){function i(t){this._bitmap=null,this._skin=null,this._group=null,i.__super.call(this),this.skin=t}__class(i,"laya.ui.Image",e);var t=i.prototype;return t.destroy=function(t){void 0===t&&(t=!0),this._skin&&Asset.release(this._skin),e.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null},t.dispose=function(){this.destroy(!0)},t.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap,this._bitmap.autoCacheCmd=!1},t.setSource=function(t,e){t===this._skin&&e&&(this.source=e,this.onCompResize())},__getset(0,t,"source",function(){return this._bitmap.source},function(t){this._bitmap&&(this._bitmap.source=t,this.event("loaded"),this.repaint())}),__getset(0,t,"dataSource",e.prototype._$get_dataSource,function(t){"string"==typeof(this._dataSource=t)?this.skin=t:Laya.superSet(Component,this,"dataSource",t)}),__getset(0,t,"measureHeight",function(){return this._bitmap.height}),__getset(0,t,"skin",function(){return this._skin},function(t){if(URL.formatURL(this._skin)!=URL.formatURL(t))if(this._skin&&Asset.release(this._skin),this._skin=t){t&&Asset.retain(t);var e=Loader.getRes(t);e?(this.source=e,this.onCompResize()):Laya.loader.load(this._skin,Handler.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),__getset(0,t,"group",function(){return this._group},function(t){t&&this._skin&&Loader.setGroup(this._skin,t),this._group=t}),__getset(0,t,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,t,"measureWidth",function(){return this._bitmap.width}),__getset(0,t,"width",e.prototype._$get_width,function(t){Laya.superSet(Component,this,"width",t),this._bitmap.width=0==t?1e-7:t}),__getset(0,t,"height",e.prototype._$get_height,function(t){Laya.superSet(Component,this,"height",t),this._bitmap.height=0==t?1e-7:t}),i}(Component),Clip=function(e){function n(t,e,i){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,n.__super.call(this),void 0===e&&(e=1),void 0===i&&(i=1),this._clipX=e,this._clipY=i,this.skin=t}__class(n,"laya.ui.Clip",e);var t=n.prototype;return t.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},t.dispose=function(){this.destroy(!0),Laya.loader.clearRes(this._skin)},t.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap},t._onDisplay=function(t){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},t.changeClip=function(){if(this._clipChanged=!1,this._skin){var t=Loader.getRes(this._skin);t?this.loadComplete(this._skin,t):Laya.loader.load(this._skin,Handler.create(this,this.loadComplete,[this._skin]))}},t.loadComplete=function(t,e){if(t===this._skin&&e){var i=this._clipWidth||Math.ceil(e.sourceWidth/this._clipX),n=this._clipHeight||Math.ceil(e.sourceHeight/this._clipY),s=this._skin+i+n,o=WeakObject.I.get(s);if(Utils.isOkTextureList(o)||(o=null),o)this._sources=o;else{this._sources=[];for(var a=0;a<this._clipY;a++)for(var r=0;r<this._clipX;r++)this._sources.push(Texture.createFromTexture(e,i*r,n*a,i,n));WeakObject.I.set(s,this._sources)}this.index=this._index,this.event("loaded"),this.onCompResize()}},t.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._isPlaying=!0,this.index=t,this._toIndex=e,this._index++,Laya.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},t._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},t.stop=function(){this._isPlaying=!1,Laya.timer.clear(this,this._loop),this.event("complete")},t._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},__getset(0,t,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._interval=t,this._isPlaying&&this.play())}),__getset(0,t,"skin",function(){return this._skin},function(t){this._skin!=t&&((this._skin=t)?this._setClipChanged():this._bitmap.source=null)}),__getset(0,t,"sources",function(){return this._sources},function(t){this._sources=t,this.index=this._index,this.event("loaded")}),__getset(0,t,"clipX",function(){return this._clipX},function(t){this._clipX=t||1,this._setClipChanged()}),__getset(0,t,"clipY",function(){return this._clipY},function(t){this._clipY=t||1,this._setClipChanged()}),__getset(0,t,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),__getset(0,t,"clipWidth",function(){return this._clipWidth},function(t){this._clipWidth=t,this._setClipChanged()}),__getset(0,t,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,t,"group",function(){return this._group},function(t){t&&this._skin&&Loader.setGroup(this._skin,t),this._group=t}),__getset(0,t,"clipHeight",function(){return this._clipHeight},function(t){this._clipHeight=t,this._setClipChanged()}),__getset(0,t,"width",e.prototype._$get_width,function(t){Laya.superSet(Component,this,"width",t),this._bitmap.width=t}),__getset(0,t,"height",e.prototype._$get_height,function(t){Laya.superSet(Component,this,"height",t),this._bitmap.height=t}),__getset(0,t,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),__getset(0,t,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),__getset(0,t,"index",function(){return this._index},function(t){this._index=t,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[t]),this.event("change")}),__getset(0,t,"autoPlay",function(){return this._autoPlay},function(t){this._autoPlay!=t&&((this._autoPlay=t)?this.play():this.stop())}),__getset(0,t,"isPlaying",function(){return this._isPlaying},function(t){this._isPlaying=t}),__getset(0,t,"dataSource",e.prototype._$get_dataSource,function(t){"number"==typeof(this._dataSource=t)&&Math.floor(t)==t||"string"==typeof t?this.index=parseInt(t):Laya.superSet(Component,this,"dataSource",t)}),__getset(0,t,"bitmap",function(){return this._bitmap}),n}(Component),ColorPicker=function(e){function t(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,t.__super.call(this)}__class(t,"laya.ui.ColorPicker",e);var i=t.prototype;return i.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._colorPanel&&this._colorPanel.destroy(t),this._colorButton&&this._colorButton.destroy(t),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},i.createChildren=function(){this.addChild(this._colorButton=new Button),this._colorPanel=new Box,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new Sprite),this._colorPanel.addChild(this._colorBlock=new Sprite),this._colorPanel.addChild(this._colorInput=new Input)},i.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},i.onPanelMouseDown=function(t){t.stopPropagation()},i.changePanel=function(){this._panelChanged=!1;var t=this._colorPanel.graphics;t.clear(),t.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(t=this._colorTiles.graphics).clear();for(var e=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],i=0;i<12;i++)for(var n=0;n<20;n++){var s=0;s=0===n?e[i]:1===n?0:51*(((3*i+n/6)%3<<0)+3*(i/6<<0))<<16|n%6*51<<8|(i<<0)%6*51;var o=UIUtils.toColor(s);this._colors.push(o);var a=n*this._gridSize,r=i*this._gridSize;t.drawRect(a,r,this._gridSize,this._gridSize,o,"#000000")}},i.onColorButtonClick=function(t){this._colorPanel.parent?this.close():this.open()},i.open=function(){var t=this.localToGlobal(new Point),e=t.x+this._colorPanel.width<=Laya.stage.width?t.x:Laya.stage.width-this._colorPanel.width,i=t.y+this._colorButton.height;i=i+this._colorPanel.height<=Laya.stage.height?i:t.y-this._colorPanel.height,this._colorPanel.pos(e,i),this._colorPanel.zOrder=1001,Laya._currentStage.addChild(this._colorPanel),Laya.stage.on("mousedown",this,this.removeColorBox)},i.close=function(){Laya.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},i.removeColorBox=function(t){this.close()},i.onColorFieldKeyDown=function(t){13==t.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),t.stopPropagation())},i.onColorInputChange=function(t){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},i.onColorTilesClick=function(t){this.selectedColor=this.getColorByMouse(),this.close()},i.onColorTilesMouseMove=function(t){this._colorInput.focus=!1;var e=this.getColorByMouse();this._colorInput.text=e,this.drawBlock(e)},i.getColorByMouse=function(){var t=this._colorTiles.getMousePoint(),e=Math.floor(t.x/this._gridSize),i=Math.floor(t.y/this._gridSize);return this._colors[20*i+e]},i.drawBlock=function(t){var e=this._colorBlock.graphics;e.clear();var i=t||"#ffffff";e.drawRect(0,0,50,20,i,this._borderColor),t||e.drawLine(0,0,50,20,"#ff0000")},i.changeColor=function(){var t=this.graphics;t.clear();var e=this._selectedColor||"#000000";t.drawRect(0,0,this._colorButton.width,this._colorButton.height,e)},i._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},__getset(0,i,"inputBgColor",function(){return this._inputBgColor},function(t){this._inputBgColor=t,this._setPanelChanged()}),__getset(0,i,"selectedColor",function(){return this._selectedColor},function(t){this._selectedColor!=t&&(this._selectedColor=this._colorInput.text=t,this.drawBlock(t),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",Event.EMPTY.setTo("change",this,this)))}),__getset(0,i,"skin",function(){return this._colorButton.skin},function(t){this._colorButton.skin=t,this.changeColor()}),__getset(0,i,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,this._setPanelChanged()}),__getset(0,i,"borderColor",function(){return this._borderColor},function(t){this._borderColor=t,this._setPanelChanged()}),__getset(0,i,"inputColor",function(){return this._inputColor},function(t){this._inputColor=t,this._setPanelChanged()}),t}(Component),ComboBox=function(e){function i(t,e){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,i.__super.call(this),this._itemColors=Styles.comboBoxItemColors,this.skin=t,this.labels=e}__class(i,"laya.ui.ComboBox",e);var t=i.prototype;return t.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._button&&this._button.destroy(t),this._list&&this._list.destroy(t),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},t.createChildren=function(){this.addChild(this._button=new Button),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},t._createList=function(){this._list=new List,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},t._setListEvent=function(t){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=Handler.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},t.onListDown=function(t){t.stopPropagation()},t.onScrollBarDown=function(t){t.stopPropagation()},t.onButtonMouseDown=function(t){this.callLater(this.switchTo,[!this._isOpen])},t.changeList=function(){this._listChanged=!1;var t=this.width-2,e=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:t,height:this._itemHeight,fontSize:this._itemSize,color:e}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},t.onlistItemMouse=function(t,e){var i=t.type;if("mouseover"===i||"mouseout"===i){if(this._isCustomList)return;var n=this._list.getCell(e);if(!n)return;var s=n.getChildByName("label");s&&("mouseover"===i?(s.bgColor=this._itemColors[0],s.color=this._itemColors[1]):(s.bgColor=null,s.color=this._itemColors[2]))}else"click"===i&&(this.selectedIndex=e,this.isOpen=!1)},t.switchTo=function(t){this.isOpen=t},t.changeOpen=function(){this.isOpen=!this._isOpen},t.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var t=this._list.graphics;t.clear(),t.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var e=this._list.array||[],i=e.length=0,n=this._labels.length;i<n;i++)e.push({label:this._labels[i]});this._list.height=this._listHeight,this._list.array=e},t.changeSelected=function(){this._button.label=this.selectedLabel},t._onStageMouseWheel=function(t){this._list&&!this._list.contains(t.target)&&this.removeList(null)},t.removeList=function(t){Laya.stage.off("mousedown",this,this.removeList),Laya.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},__getset(0,t,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[Event.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),__getset(0,t,"measureHeight",function(){return this._button.height}),__getset(0,t,"skin",function(){return this._button.skin},function(t){this._button.skin!=t&&(this._button.skin=t,this._listChanged=!0)}),__getset(0,t,"measureWidth",function(){return this._button.width}),__getset(0,t,"width",e.prototype._$get_width,function(t){Laya.superSet(Component,this,"width",t),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),__getset(0,t,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(t){this.selectedIndex=this._labels.indexOf(t)}),__getset(0,t,"labels",function(){return this._labels.join(",")},function(t){0<this._labels.length&&(this.selectedIndex=-1),t?this._labels=t.split(","):this._labels.length=0,this._itemChanged=!0}),__getset(0,t,"height",e.prototype._$get_height,function(t){Laya.superSet(Component,this,"height",t),this._button.height=this._height}),__getset(0,t,"selectHandler",function(){return this._selectHandler},function(t){this._selectHandler=t}),__getset(0,t,"visibleNum",function(){return this._visibleNum},function(t){this._visibleNum=t,this._listChanged=!0}),__getset(0,t,"labelBold",function(){return this._button.text.bold},function(t){this._button.text.bold=t}),__getset(0,t,"itemColors",function(){return String(this._itemColors)},function(t){this._itemColors=UIUtils.fillArray(this._itemColors,t,String),this._listChanged=!0}),__getset(0,t,"itemSize",function(){return this._itemSize},function(t){this._itemSize=t,this._listChanged=!0}),__getset(0,t,"scrollBar",function(){return this.list.scrollBar}),__getset(0,t,"isOpen",function(){return this._isOpen},function(t){if(this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e=this.localToGlobal(Point.TEMP.setTo(0,0)),i=e.y+this._button.height;i=i+this._listHeight<=Laya.stage.height?i:e.y-this._listHeight,this._list.pos(e.x,i),this._list.zOrder=1001,Laya._currentStage.addChild(this._list),Laya.stage.once("mousedown",this,this.removeList),Laya.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),__getset(0,t,"scrollBarSkin",function(){return this._scrollBarSkin},function(t){this._scrollBarSkin=t}),__getset(0,t,"sizeGrid",function(){return this._button.sizeGrid},function(t){this._button.sizeGrid=t}),__getset(0,t,"button",function(){return this._button}),__getset(0,t,"list",function(){return this._list||this._createList(),this._list},function(t){t&&(t.removeSelf(),this._isCustomList=!0,this._list=t,this._setListEvent(t),this._itemHeight=t.getCell(0).height+t.spaceY)}),__getset(0,t,"dataSource",e.prototype._$get_dataSource,function(t){"number"==typeof(this._dataSource=t)&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.labels=t.join(","):Laya.superSet(Component,this,"dataSource",t)}),__getset(0,t,"labelColors",function(){return this._button.labelColors},function(t){this._button.labelColors!=t&&(this._button.labelColors=t)}),__getset(0,t,"labelPadding",function(){return this._button.text.padding.join(",")},function(t){this._button.text.padding=UIUtils.fillArray(Styles.labelPadding,t,Number)}),__getset(0,t,"labelSize",function(){return this._button.text.fontSize},function(t){this._button.text.fontSize=t}),__getset(0,t,"labelFont",function(){return this._button.text.font},function(t){this._button.text.font=t}),__getset(0,t,"stateNum",function(){return this._button.stateNum},function(t){this._button.stateNum=t}),i}(Component),ScrollBar=function(e){function i(t){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,i.__super.call(this),this._showButtons=UIConfig.showButtons,this._touchScrollEnable=UIConfig.touchScrollEnable,this._mouseWheelEnable=UIConfig.mouseWheelEnable,this.skin=t,this.max=1}__class(i,"laya.ui.ScrollBar",e);var t=i.prototype;return t.destroy=function(t){void 0===t&&(t=!0),this.stopScroll(),this.target=null,e.prototype.destroy.call(this,t),this.upButton&&this.upButton.destroy(t),this.downButton&&this.downButton.destroy(t),this.slider&&this.slider.destroy(t),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},t.createChildren=function(){this.addChild(this.slider=new Slider),this.addChild(this.upButton=new Button),this.addChild(this.downButton=new Button)},t.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},t.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},t.onButtonMouseDown=function(t){var e=t.currentTarget===this.upButton;this.slide(e),Laya.timer.once(Styles.scrollBarDelayTime,this,this.startLoop,[e]),Laya.stage.once("mouseup",this,this.onStageMouseUp)},t.startLoop=function(t){Laya.timer.frameLoop(1,this,this.slide,[t])},t.slide=function(t){t?this.value-=this._scrollSize:this.value+=this._scrollSize},t.onStageMouseUp=function(t){Laya.timer.clear(this,this.startLoop),Laya.timer.clear(this,this.slide)},t.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},t.changeSize=function(){e.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},t.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},t.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},t.setScroll=function(t,e,i){this.runCallLater(this.changeSize),this.slider.setSlider(t,e,i),this.slider.bar.visible=0<e,!this._hide&&this.autoHide&&(this.visible=!1)},t.onTargetMouseWheel=function(t){this.value-=t.delta*this._scrollSize,this.target=this._target},t.onTargetMouseDown=function(t){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new Point),this._lastPoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY),Laya.timer.clear(this,this.tweenMove),Tween.clearTween(this),Laya.stage.once("mouseup",this,this.onStageMouseUp2),Laya.stage.once("mouseout",this,this.onStageMouseUp2),Laya.timer.frameLoop(1,this,this.loop)},t.loop=function(){var t=Laya.stage.mouseY,e=Laya.stage.mouseX;if(this._lastOffset=this.isVertical?t-this._lastPoint.y:e-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?Laya.stage._canvasTransform.getScaleY():Laya.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=e,this._lastPoint.y=t,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},t.onStageMouseUp2=function(t){if(Laya.stage.off("mouseup",this,this.onStageMouseUp2),Laya.stage.off("mouseout",this,this.onStageMouseUp2),Laya.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?Tween.to(this,{value:this.min},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver)):this._value>this.max&&Tween.to(this,{value:this.max},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?Laya.stage.mouseY-this._lastPoint.y:Laya.stage.mouseX-this._lastPoint.x);for(var e=0,i=Math.min(this._offsets.length,3),n=0;n<i;n++)e+=this._offsets[this._offsets.length-1-n];if(this._lastOffset=e/i,(e=Math.abs(this._lastOffset))<2)return void this.event("end");60<e&&(this._lastOffset=0<this._lastOffset?60:-60);var s=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));Laya.timer.frameLoop(1,this,this.tweenMove,[s])}},t.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&Tween.to(this,{alpha:0},500),this.event("end")},t.tweenMove=function(t){this._lastOffset*=this.rollRatio;var e=NaN;if(0<t&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,e=.5*-(this.min-t-this.value),this._lastOffset>e&&(this._lastOffset=e)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,e=.5*-(this.max+t-this.value),this._lastOffset<e&&(this._lastOffset=e))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(Laya.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?Tween.to(this,{value:this.min},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver)):this._value>this.max?Tween.to(this,{value:this.max},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&Tween.to(this,{alpha:0},500)}},t.stopScroll=function(){this.onStageMouseUp2(null),Laya.timer.clear(this,this.tweenMove),Tween.clearTween(this)},__getset(0,t,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),__getset(0,t,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),__getset(0,t,"max",function(){return this.slider.max},function(t){this.slider.max=t}),__getset(0,t,"showButtons",function(){return this._showButtons},function(t){this._showButtons=t,this.callLater(this.changeScrollBar)}),__getset(0,t,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),__getset(0,t,"min",function(){return this.slider.min},function(t){this.slider.min=t}),__getset(0,t,"value",function(){return this._value},function(t){t!==this._value&&(this._value=t,this._isElastic||(this.slider._value!=t&&(this.slider._value=t,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),__getset(0,t,"isVertical",function(){return this.slider.isVertical},function(t){this.slider.isVertical=t}),__getset(0,t,"sizeGrid",function(){return this.slider.sizeGrid},function(t){this.slider.sizeGrid=t}),__getset(0,t,"scrollSize",function(){return this._scrollSize},function(t){this._scrollSize=t}),__getset(0,t,"dataSource",e.prototype._$get_dataSource,function(t){"number"==typeof(this._dataSource=t)||"string"==typeof t?this.value=Number(t):Laya.superSet(Component,this,"dataSource",t)}),__getset(0,t,"thumbPercent",function(){return this._thumbPercent},function(t){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),t=1<=t?.99:t,this._thumbPercent=t,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*t,Styles.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*t,Styles.scrollBarMinNum))}),__getset(0,t,"target",function(){return this._target},function(t){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=t)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),__getset(0,t,"hide",function(){return this._hide},function(t){this._hide=t,this.visible=!t}),__getset(0,t,"touchScrollEnable",function(){return this._touchScrollEnable},function(t){this._touchScrollEnable=t,this.target=this._target}),__getset(0,t,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(t){this._mouseWheelEnable=t,this.target=this._target}),__getset(0,t,"tick",function(){return this.slider.tick},function(t){this.slider.tick=t}),i}(Component),Slider=function(e){function i(t){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,i.__super.call(this),this.skin=t}__class(i,"laya.ui.Slider",e);var t=i.prototype;return t.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._bg&&this._bg.destroy(t),this._bar&&this._bar.destroy(t),this._progress&&this._progress.destroy(t),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},t.createChildren=function(){this.addChild(this._bg=new Image),this.addChild(this._bar=new Button)},t.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},t.onBarMouseDown=function(t){this._globalSacle||(this._globalSacle=new Point),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=Laya.stage.mouseX,this._ty=Laya.stage.mouseY,Laya.stage.on("mousemove",this,this.mouseMove),Laya.stage.once("mouseup",this,this.mouseUp),Laya.stage.once("mouseout",this,this.mouseUp),this.showValueText()},t.showValueText=function(){if(this.showLabel){var t=laya.ui.Slider.label;this.addChild(t),t.textField.changeText(this._value+""),this.isVertical?(t.x=this._bar.x+20,t.y=.5*(this._bar.height-t.height)+this._bar.y):(t.y=this._bar.y-20,t.x=.5*(this._bar.width-t.width)+this._bar.x)}},t.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},t.mouseUp=function(t){Laya.stage.off("mousemove",this,this.mouseMove),Laya.stage.off("mouseup",this,this.mouseUp),Laya.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},t.mouseMove=function(t){var e=this._value;this.isVertical?(this._bar.y+=(Laya.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(Laya.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=Laya.stage.mouseX,this._ty=Laya.stage.mouseY;var i=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*i)/i,this._value!=e&&this.sendChangeEvent(),this.showValueText()},t.sendChangeEvent=function(t){void 0===t&&(t="change"),this.event(t),this.changeHandler&&this.changeHandler.runWith(this._value)},t.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):(this._bar.y=Math.round(.5*(this._bg.height-this._bar.height)),this._progress&&(this._progress.y=Math.round(.5*(this._bg.height-this._progress.height))))},t.changeSize=function(){e.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},t.setSlider=function(t,e,i){this._value=-1,this._min=t,this._max=t<e?e:t,this.value=i<t?t:e<i?e:i},t.changeValue=function(){var t=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t)/t,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var e=this._max-this._min;0===e&&(e=1),this.isVertical?(this._bar.y=(this._value-this._min)/e*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/e*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},t.onBgMouseDown=function(t){var e=this._bg.getMousePoint();this.isVertical?this.value=e.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=e.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},__getset(0,t,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),__getset(0,t,"skin",function(){return this._skin},function(t){if(this._skin!=t){this._skin=t,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var e=this._skin.replace(".png","$progress.png");Loader.getRes(e)&&(this._progress||(this.addChild(this._progress=new Image),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=e),this.setBarPoint(),this.callLater(this.changeValue)}}),__getset(0,t,"allowClickBack",function(){return this._allowClickBack},function(t){this._allowClickBack!=t&&((this._allowClickBack=t)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),__getset(0,t,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.callLater(this.changeValue))}),__getset(0,t,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),__getset(0,t,"tick",function(){return this._tick},function(t){this._tick!=t&&(this._tick=t,this.callLater(this.changeValue))}),__getset(0,t,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=t,this._bar.sizeGrid=t,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),__getset(0,t,"min",function(){return this._min},function(t){this._min!=t&&(this._min=t,this.callLater(this.changeValue))}),__getset(0,t,"value",function(){return this._value},function(t){if(this._value!=t){var e=this._value;this._value=t,this.changeValue(),this._value!=e&&this.sendChangeEvent()}}),__getset(0,t,"dataSource",e.prototype._$get_dataSource,function(t){"number"==typeof(this._dataSource=t)||"string"==typeof t?this.value=Number(t):Laya.superSet(Component,this,"dataSource",t)}),__getset(0,t,"bar",function(){return this._bar}),__static(i,["label",function(){return this.label=new Label}]),i}(Component),Label=function(e){function i(t){this._tf=null,i.__super.call(this),void 0===t&&(t=""),Font.defaultColor=Styles.labelColor,this.text=t}__class(i,"laya.ui.Label",e);var t=i.prototype;return t.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._tf&&this._tf.removeSelf(),this._tf=null},t.createChildren=function(){this.addChild(this._tf=new Text)},t.changeText=function(t){this._tf.changeText(t)},__getset(0,t,"padding",function(){return this._tf.padding.join(",")},function(t){this._tf.padding=UIUtils.fillArray(Styles.labelPadding,t,Number)}),__getset(0,t,"bold",function(){return this._tf.bold},function(t){this._tf.bold=t}),__getset(0,t,"align",function(){return this._tf.align},function(t){this._tf.align=t}),__getset(0,t,"text",function(){return null==this._tf&&this.createChildren(),this._tf.text},function(t){this._tf.text!=t&&(t&&(t=UIUtils.adptString(t+"")),this._tf.text=t,this.event("change"),this._width&&this._height||this.onCompResize())}),__getset(0,t,"italic",function(){return this._tf.italic},function(t){this._tf.italic=t}),__getset(0,t,"wordWrap",function(){return this._tf.wordWrap},function(t){this._tf.wordWrap=t}),__getset(0,t,"font",function(){return this._tf.font},function(t){this._tf.font=t}),__getset(0,t,"dataSource",e.prototype._$get_dataSource,function(t){"number"==typeof(this._dataSource=t)||"string"==typeof t?this.text=t+"":Laya.superSet(Component,this,"dataSource",t)}),__getset(0,t,"color",function(){return this._tf.color},function(t){this._tf.color=t}),__getset(0,t,"valign",function(){return this._tf.valign},function(t){this._tf.valign=t}),__getset(0,t,"leading",function(){return this._tf.leading},function(t){this._tf.leading=t}),__getset(0,t,"fontSize",function(){return this._tf.fontSize},function(t){this._tf.fontSize=t}),__getset(0,t,"bgColor",function(){return this._tf.bgColor},function(t){this._tf.bgColor=t}),__getset(0,t,"borderColor",function(){return this._tf.borderColor},function(t){this._tf.borderColor=t}),__getset(0,t,"stroke",function(){return this._tf.stroke},function(t){this._tf.stroke=t}),__getset(0,t,"strokeColor",function(){return this._tf.strokeColor},function(t){this._tf.strokeColor=t}),__getset(0,t,"textField",function(){return this._tf}),__getset(0,t,"measureWidth",function(){return this._tf.width}),__getset(0,t,"measureHeight",function(){return this._tf.height}),__getset(0,t,"width",function(){return this._width||this._tf.text?Laya.superGet(Component,this,"width"):0},function(t){Laya.superSet(Component,this,"width",t),this._tf.width=t}),__getset(0,t,"height",function(){return this._height||this._tf.text?Laya.superGet(Component,this,"height"):0},function(t){Laya.superSet(Component,this,"height",t),this._tf.height=t}),__getset(0,t,"overflow",function(){return this._tf.overflow},function(t){this._tf.overflow=t}),__getset(0,t,"underline",function(){return this._tf.underline},function(t){this._tf.underline=t}),__getset(0,t,"underlineColor",function(){return this._tf.underlineColor},function(t){this._tf.underlineColor=t}),i}(Component),ProgressBar=function(e){function i(t){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,i.__super.call(this),this.skin=t}__class(i,"laya.ui.ProgressBar",e);var t=i.prototype;return t.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._bg&&this._bg.destroy(t),this._bar&&this._bar.destroy(t),this._bg=this._bar=null,this.changeHandler=null},t.createChildren=function(){this.addChild(this._bg=new Image),this.addChild(this._bar=new Image),this._bar._bitmap.autoCacheCmd=!1},t.changeValue=function(){if(this.sizeGrid){var t=this.sizeGrid.split(","),e=Number(t[3]),i=Number(t[1]),n=(this.width-e-i)*this._value;this._bar.width=e+i+n,this._bar.visible=this._bar.width>e+i}else this._bar.width=this.width*this._value},__getset(0,t,"measureHeight",function(){return this._bg.height}),__getset(0,t,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),__getset(0,t,"measureWidth",function(){return this._bg.width}),__getset(0,t,"height",e.prototype._$get_height,function(t){Laya.superSet(Component,this,"height",t),this._bg.height=this._height,this._bar.height=this._height}),__getset(0,t,"bar",function(){return this._bar}),__getset(0,t,"value",function(){return this._value},function(t){this._value!=t&&(t=1<t?1:t<0?0:t,this._value=t,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(t))}),__getset(0,t,"bg",function(){return this._bg}),__getset(0,t,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=this._bar.sizeGrid=t}),__getset(0,t,"width",e.prototype._$get_width,function(t){Laya.superSet(Component,this,"width",t),this._bg.width=this._width,this.callLater(this.changeValue)}),__getset(0,t,"dataSource",e.prototype._$get_dataSource,function(t){"number"==typeof(this._dataSource=t)||"string"==typeof t?this.value=Number(t):Laya.superSet(Component,this,"dataSource",t)}),i}(Component),ReCacheRecInfo=function(t){function e(){this.isWorking=!1,this.count=0,this.mTime=0,e.__super.call(this),this.txt.fontSize=12}__class(e,"laya.debug.view.nodeInfo.recinfos.ReCacheRecInfo",NodeRecInfo);var i=e.prototype;return i.addCount=function(t){void 0===t&&(t=0),this.count++,this.mTime+=t,this.isWorking||(this.working=!0)},i.updates=function(){this._tar.displayedInStage||(this.working=!1,this.removeSelf()),this.txt.text=ClassTool.getNodeClassAndName(this._tar)+"\nreCache:"+this.count+"\ntime:"+this.mTime,0<this.count?(this.fresh(),Laya.timer.clear(this,this.removeSelfLater)):(this.working=!1,Laya.timer.once(3e3,this,this.removeSelfLater)),this.count=0,this.mTime=0},i.removeSelfLater=function(){this.working=!1,this.removeSelf()},__getset(0,i,"working",null,function(t){(this.isWorking=t)?Laya.timer.loop(1e3,this,this.updates):Laya.timer.clear(this,this.updates)}),e.showTime=3e3,e}(),Animation=function(t){function u(){this._frames=null,this._url=null,u.__super.call(this),this._setControlNode(this)}__class(u,"laya.display.Animation",t);var e=u.prototype;return e.destroy=function(t){void 0===t&&(t=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,t),this._frames=null,this._labels=null},e.play=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===n&&(n=!0),i&&this._setFramesFromCache(i,n),this._isPlaying=!0,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._actionName=i,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},e._setFramesFromCache=function(t,e){var i;return void 0===e&&(e=!1),this._url&&(t=this._url+"#"+t),t&&u.framesMap[t]?((i=u.framesMap[t])instanceof Array?(this._frames=u.framesMap[t],this._count=this._frames.length):(i.nodeRoot&&(u.framesMap[t]=this._parseGraphicAnimationByData(i),i=u.framesMap[t]),this._frames=i.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=i.interval),this._labels=this._copyLabels(i.labels)),!0):(e&&console.log("ani not found:",t),!1)},e._copyLabels=function(t){if(!t)return null;var e,i;for(i in e={},t)e[i]=Utils.copyArray([],t[i]);return e},e._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&t.prototype._frameLoop.call(this)},e._displayToIndex=function(t){this._frames&&(this.graphics=this._frames[t])},e.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},e.loadImages=function(t,e){return void 0===e&&(e=""),this._url="",this._setFramesFromCache(e)||(this.frames=u.framesMap[e]?u.framesMap[e]:u.createFrames(t,e)),this},e.loadAtlas=function(e,i,n){void 0===n&&(n=""),this._url="";var s=this;function t(t){e===t&&(s.frames=u.framesMap[n]?u.framesMap[n]:u.createFrames(e,n),i&&i.run())}return s._setFramesFromCache(n)||(Loader.getAtlas(e)?t(e):Laya.loader.load(e,Handler.create(null,t,[e]),null,"atlas")),this},e.loadAnimation=function(t,e,i){this._url=t;return this._actionName||(this._actionName=""),this._setFramesFromCache(this._actionName)?(this._setFramesFromCache(this._actionName,!0),this.index=0,e&&e.run()):!i||Loader.getAtlas(i)?this._loadAnimationData(t,e,i):Laya.loader.load(i,Handler.create(this,this._loadAnimationData,[t,e,i]),null,"atlas"),this},e._loadAnimationData=function(r,l,t){var h=this;if(!t||Loader.getAtlas(t)){var c=this;Loader.getRes(r)?e(r):Laya.loader.load(r,Handler.create(null,e,[r]),null,"json"),Loader.clearRes(r)}else console.warn("atlas load fail:"+t);function e(t){if(Loader.getRes(t)&&r===t){var e;if(u.framesMap[r+"#"])c._setFramesFromCache(h._actionName,!0),h.index=0,h._checkResumePlaying();else{var i=c._parseGraphicAnimation(Loader.getRes(r));if(!i)return;var n,s=i.animationList,o=0,a=s.length;for(o=0;o<a;o++)e=s[o],u.framesMap[r+"#"+e.name]=e,n||(n=e);n&&(u.framesMap[r+"#"]=n,c._setFramesFromCache(h._actionName,!0),h.index=0),h._checkResumePlaying()}l&&l.run()}}},e._parseGraphicAnimation=function(t){return GraphicAnimation.parseAnimationData(t)},e._parseGraphicAnimationByData=function(t){return GraphicAnimation.parseAnimationByData(t)},__getset(0,e,"frames",function(){return this._frames},function(t){(this._frames=t)&&(this._count=t.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),__getset(0,e,"autoPlay",null,function(t){t?this.play():this.stop()}),__getset(0,e,"source",null,function(t){-1<t.indexOf(".ani")?this.loadAnimation(t):-1<t.indexOf(".json")||-1<t.indexOf("als")||-1<t.indexOf("atlas")?this.loadAtlas(t):this.loadImages(t.split(","))}),__getset(0,e,"autoAnimation",null,function(t){this.play(0,!0,t,!1)}),u.createFrames=function(t,e){var i,n,s=0,o=0;if("string"==typeof t){var a=Loader.getAtlas(t);if(a&&a.length)for(i=[],s=0,o=a.length;s<o;s++)(n=new RunDriver.createGraphics).drawTexture(Loader.getRes(a[s]),0,0),i.push(n)}else if(t instanceof Array)for(i=[],s=0,o=t.length;s<o;s++)(n=new RunDriver.createGraphics).loadImage(t[s],0,0),i.push(n);return e&&(u.framesMap[e]=i),i},u.clearCache=function(t){var e,i=u.framesMap,n=t+"#";for(e in i)e!==t&&0!=e.indexOf(n)||delete u.framesMap[e]},u.framesMap={},u}(AnimationPlayerBase),FrameAnimation=function(t){function o(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,o.__super.call(this),null==o._sortIndexFun&&(o._sortIndexFun=MathUtil.sortByKey("index",!1,!0))}__class(o,"laya.display.FrameAnimation",t);var e=o.prototype;return e._setUp=function(t,e){this._labels=null,this._animationNewFrames=null,this._targetDic=t,this._animationData=e,this.interval=1e3/e.frameRate,e.parsed?(this._count=e.count,this._labels=e.labels,this._animationNewFrames=e.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),e.parsed=!0,e.labels=this._labels,e.count=this._count,e.animationNewFrames=this._animationNewFrames},e.clear=function(){t.prototype.clear.call(this),this._targetDic=null,this._animationData=null},e._displayToIndex=function(t){if(this._animationData){t<0&&(t=0),t>this._count&&(t=this._count);var e=this._animationData.nodes,i=0,n=e.length;for(i=0;i<n;i++)this._displayNodeToFrame(e[i],t)}},e._displayNodeToFrame=function(t,e,i){i||(i=this._targetDic);var n=i[t.target];if(n){var s,o,a,r=t.frames,l=t.keys,h=0,c=l.length;for(h=0;h<c;h++)a=(o=r[s=l[h]]).length>e?o[e]:o[o.length-1],n[s]=a}},e._calculateDatas=function(){if(this._animationData){var t,e=this._animationData.nodes,i=0,n=e.length;for(i=this._count=0;i<n;i++)t=e[i],this._calculateNodeKeyFrames(t);this._count+=1}},e._calculateNodeKeyFrames=function(t){var e,i,n=t.keyframes,s=t.target;for(e in t.frames||(t.frames={}),t.keys?t.keys.length=0:t.keys=[],t.initValues||(t.initValues={}),n)i=n[e],t.frames[e]||(t.frames[e]=[]),this._targetDic&&this._targetDic[s]&&(t.initValues[e]=this._targetDic[s][e]),i.sort(o._sortIndexFun),t.keys.push(e),this._calculateNodePropFrames(i,t.frames[e],e,s)},e.resetToInitState=function(){if(this._targetDic&&this._animationData){var t,e,i=this._animationData.nodes,n=0,s=i.length;for(n=0;n<s;n++)if(e=(t=i[n]).initValues){var o,a=this._targetDic[t.target];if(a)for(o in e)a[o]=e[o]}}},e._calculateNodePropFrames=function(t,e,i,n){var s=0,o=t.length-1;for(e.length=t[o].index+1,s=0;s<o;s++)this._dealKeyFrame(t[s]),this._calculateFrameValues(t[s],t[s+1],e);0==o&&(e[t[0].index]=t[0].value,this._animationNewFrames&&(this._animationNewFrames[t[0].index]=!0)),this._dealKeyFrame(t[s])},e._dealKeyFrame=function(t){t.label&&""!=t.label&&this.addLabel(t.label,t.index)},e._calculateFrameValues=function(t,e,i){var n,s=0,o=t.index,a=e.index,r=t.value,l=e.value-t.value,h=a-o;if(a>this._count&&(this._count=a),t.tween)for(null==(n=Ease[t.tweenMethod])&&(n=Ease.linearNone),s=o;s<a;s++)i[s]=n(s-o,r,l,h),this._animationNewFrames&&(this._animationNewFrames[s]=!0);else for(s=o;s<a;s++)i[s]=r;this._animationNewFrames&&(this._animationNewFrames[t.index]=!0,this._animationNewFrames[e.index]=!0),i[e.index]=e.value},o._sortIndexFun=null,o}(AnimationPlayerBase),HTMLImage=function(t){function i(t,e){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,i.__super.call(this),this._init_(t,e)}__class(i,"laya.resource.HTMLImage",FileBitmap);var e=i.prototype;return e._init_=function(t,e){this._src=t,this._source=new Browser.window.Image,e&&(e.onload&&(this.onload=e.onload),e.onerror&&(this.onerror=e.onerror),e.onCreate&&e.onCreate(this)),0!=t.indexOf("data:image")&&(this._source.crossOrigin=""),t&&(this._source.src=t)},e.recreateResource=function(){var t=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var e=this;this._source=new Browser.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(e._needReleaseAgain)return e._needReleaseAgain=!1,e._source.onload=null,void(e._source=null);e._source.onload=null,e.memorySize=t._w*t._h*4,e._recreateLock=!1,e.completeCreate()},this._source.src=this._src}},e.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},e.onresize=function(){this._w=this._source.width,this._h=this._source.height},__getset(0,e,"onload",null,function(t){var e=this;this._onload=t,this._source&&(this._source.onload=null!=this._onload?function(){e.onresize(),e._onload()}:null)}),__getset(0,e,"onerror",null,function(t){var e=this;this._onerror=t,this._source&&(this._source.onerror=null!=this._onerror?function(){e._onerror()}:null)}),__getset(0,e,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(t){this._enableMerageInAtlas=t,Render.isConchApp&&this._source&&(this._source.enableMerageInAtlas=t)}),i.create=function(t,e){return new i(t,e)},i}(),Shader2X=function(t){function s(t,e,i,n){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,s.__super.call(this,t,e,i,n)}__class(s,"laya.webgl.shader.d2.Shader2X",t);var e=s.prototype;return e.upload2dQuick1=function(t){this.upload(t,this._params2dQuick1||this._make2dQuick1())},e._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var t,e=this._params,i=0,n=e.length;i<n;i++)t=e[i],(Render.isFlash||"size"!==t.name&&"position"!==t.name&&"texcoord"!==t.name)&&this._params2dQuick1.push(t)}return this._params2dQuick1},e.disposeResource=function(){t.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},e.upload2dQuick2=function(t){this.upload(t,this._params2dQuick2||this._make2dQuick2())},e._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var t,e=this._params,i=0,n=e.length;i<n;i++)t=e[i],(Render.isFlash||"size"!==t.name)&&this._params2dQuick2.push(t)}return this._params2dQuick2},s.create=function(t,e,i,n){return new s(t,e,i,n)},s}(Shader),IndexBuffer2D=function(t){function e(t){this._uint8Array=null,this._uint16Array=null,void 0===t&&(t=35044),e.__super.call(this),this._bufferUsage=t,this._bufferType=34963,Render.isFlash||(this._buffer=new ArrayBuffer(8))}__class(e,"laya.webgl.utils.IndexBuffer2D",Buffer2D);var i=e.prototype;return i._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},i.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},i.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},i.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},e.QuadrangleIB=null,e.create=function(t){return void 0===t&&(t=35044),new e(t)},e}(),VertexBuffer2D=function(t){function i(t,e){this._floatArray32=null,this._vertexStride=0,i.__super.call(this),this._vertexStride=t,this._bufferUsage=e,this._bufferType=34962,Render.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}__class(i,"laya.webgl.utils.VertexBuffer2D",t);var e=i.prototype;return e.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},e.bind=function(t){t&&t._bind(),this._bind()},e.insertData=function(t,e){this.getFloat32Array().set(t,e),this._upload=!0},e.bind_upload=function(t){t._bind_upload()||t._bind(),this._bind_upload()||this._bind()},e._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},e.disposeResource=function(){t.prototype.disposeResource.call(this)},e.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},__getset(0,e,"vertexStride",function(){return this._vertexStride}),i.create=function(t,e){return void 0===e&&(e=35048),new i(t,e)},i}(Buffer2D),View=function(t){var _;function f(){this._idMap=null,this._aniList=null,this._watchMap={},f.__super.call(this)}__class(f,"laya.ui.View",Box);var e=f.prototype;return e.createView=function(t){if(t.animations&&!this._idMap&&(this._idMap={}),f.createComp(t,this,this),t.animations){var e,i,n=[],s=t.animations,o=0,a=s.length;for(o=0;o<a;o++){switch(e=new FrameAnimation,i=s[o],e._setUp(this._idMap,i),(this[i.name]=e)._setControlNode(this),i.action){case 1:e.play(0,!1);break;case 2:e.play(0,!0)}n.push(e)}this._aniList=n}0<this._width&&null==t.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},e.onEvent=function(t,e){},e.loadUI=function(t){var e=f.uiMap[t];e&&this.createView(e)},e.destroy=function(t){void 0===t&&(t=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,t)},e.changeData=function(t){var e=this._watchMap[t];if(e){console.log("change",t);for(var i=0,n=e.length;i<n;i++){e[i].exe(this)}}},f._regs=function(){for(var t in f.uiClassMap)ClassUtils.regClass(t,f.uiClassMap[t])},f.createComp=function(t,e,i,n){if(!(e=e||f.getCompInstance(t)))return console.warn("can not create:"+t.type),null;var s=t.child;if(s)for(var o=e instanceof laya.ui.List,a=0,r=s.length;a<r;a++){var l=s[a];if(!e.hasOwnProperty("itemRender")||"render"!=l.props.name&&"render"!==l.props.renderType)if("Graphic"==l.type)ClassUtils.addGraphicsToSprite(l,e);else if(ClassUtils.isDrawType(l.type))ClassUtils.addGraphicToSprite(l,e,!0);else{if(o){var h=[],c=f.createComp(l,null,i,h);h.length&&(c._$bindData=h)}else c=f.createComp(l,null,i,n);"Script"==l.type?"owner"in c?c.owner=e:"target"in c&&(c.target=e):"mask"==l.props.renderType||"mask"==l.props.name?e.mask=c:c instanceof laya.display.Sprite&&e.addChild(c)}else e.itemRender=l}var u=t.props;for(var d in u){var _=u[d];f.eventDic[d]?_&&i&&e.on(d,i,i.onEvent,[_]):f.setCompValue(e,d,_,i,n)}return Laya.__typeof(e,"laya.ui.IItem")&&e.initItems(),t.compId&&i&&i._idMap&&(i._idMap[t.compId]=e),e},f.setCompValue=function(t,e,i,n,s){if("string"==typeof i&&-1<i.indexOf("${")){if(f._sheet||(f._sheet=ClassUtils.getClass("laya.data.Table")),!f._sheet)return void console.warn("Can not find class Sheet");if(s)s.push(t,e,i);else if(n){-1==i.indexOf("].")&&(i=i.replace(".","[0]."));var o,a,r=new _(t,e,i);r.exe(n);for(var l=i.replace(/\[.*?\]\./g,".");null!=(o=f._parseWatchData.exec(l));){for(var h=o[1];null!=(a=f._parseKeyWord.exec(h));){var c=a[0],u=n._watchMap[c]||(n._watchMap[c]=[]);u.push(r),f._sheet.I.notifer.on(c,n,n.changeData,[c])}(u=n._watchMap[h]||(n._watchMap[h]=[])).push(r),f._sheet.I.notifer.on(h,n,n.changeData,[h])}}}else if("var"===e&&n)n[i]=t;else if("onClick"==e){var d=Laya._runScript("(function(){"+i+"})");t.on("click",n,d)}else t[e]="true"===i||"false"!==i&&i},f.getCompInstance=function(t){var e,i=t.props?t.props.runtime:null;return e=i?f.viewClassMap[i]||f.uiClassMap[i]||Laya.__classmap[i]:f.uiClassMap[t.type],t.props&&t.props.hasOwnProperty("renderType")&&"instance"==t.props.renderType?e.instance:e?new e:null},f.regComponent=function(t,e){f.uiClassMap[t]=e,ClassUtils.regClass(t,e)},f.regViewRuntime=function(t,e){f.viewClassMap[t]=e},f.uiMap={},f.viewClassMap={},f._sheet=null,__static(f,["uiClassMap",function(){return this.uiClassMap={ViewStack:ViewStack,LinkButton:Button,TextArea:TextArea,ColorPicker:ColorPicker,Box:Box,Button:Button,CheckBox:CheckBox,Clip:Clip,ComboBox:ComboBox,Component:Component,HScrollBar:HScrollBar,HSlider:HSlider,Image:Image,Label:Label,List:List,Panel:Panel,ProgressBar:ProgressBar,Radio:Radio,RadioGroup:RadioGroup,ScrollBar:ScrollBar,Slider:Slider,Tab:Tab,TextInput:TextInput,View:f,VScrollBar:VScrollBar,VSlider:VSlider,Tree:Tree,HBox:HBox,VBox:VBox,Sprite:Sprite,Animation:Animation,Text:Text,FontClip:FontClip}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),f.__init$=function(){f._regs(),_=function(){function t(t,e,i){this.comp=null,this.prop=null,this.value=null,this.comp=t,this.prop=e,this.value=i}return __class(t,""),t.prototype.exe=function(t){var e=UIUtils.getBindFun(this.value);this.comp[this.prop]=e.call(this,t)},t}()},f}(),TipButton=function(e){function i(t,e){this._tipBitmap=null,this._tipSkin=null,this._showTip=!1,this._tipOffX=0,void(this._tipOffY=0)===e&&(e=""),i.__super.call(this,t,e)}__class(i,"gateModule.ui.TipButton",e);var t=i.prototype;return t.destroy=function(t){void 0===t&&(t=!0),this._tipBitmap&&this._tipBitmap.destroy(),this._tipBitmap=null,e.prototype.destroy.call(this,t)},t.resetTipPos=function(){this._tipBitmap&&(this._tipBitmap.x=this.width-this._tipBitmap.width+this._tipOffX,this._tipBitmap.y=this._tipOffY)},t.changeClips=function(){e.prototype.changeClips.call(this),this.resetTipPos()},t.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.resetTipPos()},__getset(0,t,"tipSkin",function(){return this._tipSkin},function(t){if(this._tipSkin!=t){this._tipSkin=t,this._tipBitmap||(this._tipBitmap=new Sprite,this._tipBitmap.visible=this._showTip,this.addChild(this._tipBitmap));var e=Loader.getRes(this._tipSkin);if(!e)return void console.log("lose tipSkin",this._tipSkin);this._tipBitmap.texture=e,this._tipBitmap.width=e.width,this._tipBitmap.height=e.height,this.resetTipPos()}}),__getset(0,t,"showTip",function(){return this._showTip},function(t){this._showTip!=t&&(this._showTip=t,this._tipBitmap&&(this._tipBitmap.visible=t))}),__getset(0,t,"tipOffX",function(){return this._tipOffX},function(t){t!=this._tipOffX&&(this._tipOffX=t,this.resetTipPos())}),__getset(0,t,"tipOffY",function(){return this._tipOffY},function(t){t!=this._tipOffY&&(this._tipOffY=t,this.resetTipPos())}),i}(Button),HtmlDiv=function(t){function e(){this._$5__text=null,e.__super.call(this),this.destroyChildren()}__class(e,"gateModule.ui.HtmlDiv",t);var i=e.prototype;return i.styleChanged=function(){this._$5__text&&(this.innerHTML=this._$5__text)},__getset(0,i,"valign",function(){return this.style.valign},function(t){this.style.valign=t,Laya.timer.callLater(this,this.styleChanged)}),__getset(0,i,"innerHTML",function(){return this._$5__text},function(t){try{Laya.superSet(HTMLDivElement,this,"innerHTML",t+"")}catch(t){Laya.superSet(HTMLDivElement,this,"innerHTML","")}this._$5__text=t}),__getset(0,i,"color",function(){return this.style.color},t.prototype._$set_color),__getset(0,i,"font",function(){return this.style.font},function(t){this.style.font=t,this.style.fontFamily=t,Laya.timer.callLater(this,this.styleChanged)}),__getset(0,i,"leading",function(){return this.style.leading},function(t){this.style.leading=t,Laya.timer.callLater(this,this.styleChanged)}),__getset(0,i,"fontSize",function(){return this.style.fontSize},function(t){this.style.fontSize=t,Laya.timer.callLater(this,this.styleChanged)}),__getset(0,i,"align",function(){return this.style.align},function(t){this.style.align=t,Laya.timer.callLater(this,this.styleChanged)}),e}(HTMLDivElement),ContextMenu=function(t){function l(){this._tY=0,l.__super.call(this),StyleConsts.setViewScale(this)}__class(l,"laya.debug.uicomps.ContextMenu",Box);var e=l.prototype;return e.addItem=function(t){this.addChild(t),t.y=this._tY,this._tY+=t.height,t.on("mousedown",this,this.onClick)},e.onClick=function(t){this.event("select",t),this.removeSelf()},e.show=function(t,e){void 0===t&&(t=-999),void 0===e&&(e=-999),Laya.timer.once(100,this,l.showMenu,[this,t,e])},l.init=function(){Laya.stage.on("click",null,l.cleanMenu)},l.cleanMenu=function(t){var e,i=0;for(e=l._menuList.length,i=0;i<e;i++)l._menuList[i]&&l._menuList[i].removeSelf();l._menuList.length=0},l.showMenu=function(t,e,i){void 0===e&&(e=-999),void 0===i&&(i=-999),l.cleanMenu(),l.adptMenu(t),Laya.stage.addChild(t),DisControlTool.showToStage(t),-999!=e&&-999!=i&&t.pos(e,i),l._menuList.push(t)},l.createMenu=function(t){return l.createMenuByArray(arguments)},l.createMenuByArray=function(t){for(var e,i=new l,n=!1,s=0,o=t.length;s<o;s++){var a=t[s],r={};"string"==typeof a?r.label=a:r=a,n=""!=r.label?((e=new ContextMenuItem(r.label,n)).data=a,i.addItem(e),!1):((e=new ContextMenuItem("",n)).data=a,i.addItem(e),!0)}return i.zOrder=9999,i},l.adptMenu=function(t){var e=80,i=80,n=0,s=t.numChildren;for(n=0;n<s;n++)i<(e=t.getChildAt(n).width)&&(i=e);for(n=0;n<s;n++)t.getChildAt(n).width=i},l._menuList=[],l}(),List=function(t){function e(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this.isDisableScrollBar=!1,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new Point,e.__super.call(this)}__class(e,"laya.ui.List",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),i.destroy=function(t){for(void 0===t&&(t=!0),this._content&&this._content.destroy(t),this._scrollBar&&this._scrollBar.destroy(t),laya.ui.Component.prototype.destroy.call(this,t),this._content=null,this._scrollBar=null,this._itemRender=null;this._cells.length;)this._cells.pop().destroy(t);this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},i.createChildren=function(){this.addChild(this._content=new Box)},i.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=Laya.superGet(Box,this,"cacheAs")),Laya.superSet(Box,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},i.onScrollEnd=function(){Laya.superSet(Box,this,"cacheAs",this._$P.cacheAs)},i._removePreScrollBar=function(){var t=this.removeChildByName("scrollBar");t&&t.destroy(!0)},i.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t=this._getOneCell();t||(t=this.createItem(),this._cells&&0===this._cells.length&&this._cells.push(t));var e=t.width+this._spaceX||1,i=t.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/e):Math.ceil(this._width/e)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/i):Math.round(this._height/i));var n=this._width?this._width:e*this.repeatX-this._spaceX,s=this._height?this._height:i*this.repeatY-this._spaceY;this._cellSize=this._isVertical?i:e,this._cellOffset=this._isVertical?i*Math.max(this._repeatY2,this._repeatY)-s-this._spaceY:e*Math.max(this._repeatX2,this._repeatX)-n-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=s:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=n),this.setContentSize(n,s);var o=this._isVertical?this.repeatX:this.repeatY,a=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,o,a),this._createdLine=a,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},i._getOneCell=function(){if(0===this._cells.length){var t=this.createItem();if(this._offset.setTo(t.x,t.y),this.cacheContent)return t;this._cells.push(t)}return this._cells[0]},i._createItems=function(t,e,i){var n=this._content,s=this._getOneCell(),o=s.width+this._spaceX,a=s.height+this._spaceY;if(this.cacheContent){var r=new Box;r.cacheAsBitmap=!0,r.pos((this._isVertical?0:t)*o,(this._isVertical?t:0)*a),this._content.addChild(r),this._content.optimizeScrollRect=!0,n=r}else{for(var l=[],h=this._cells.length-1;-1<h;h--){var c=this._cells[h];c.removeSelf(),l.push(c)}this._cells.length=0}for(var u=t;u<i;u++)for(var d=0;d<e;d++)(s=l&&l.length?l.pop():this.createItem()).x=(this._isVertical?d:u)*o-n.x,s.y=(this._isVertical?u:d)*a-n.y,s.name="item"+(u*e+d),n.addChild(s),this.addCell(s)},i.createItem=function(){var t=[];if("function"==typeof this._itemRender)var e=new this._itemRender;else e=View.createComp(this._itemRender,null,null,t);if(0==t.length&&e._watchMap){var i=e._watchMap;for(var n in i)for(var s=i[n],o=0;o<s.length;o++){var a=s[o];t.push(a.comp,a.prop,a.value)}}return t.length&&(e._$bindData=t),e},i.addCell=function(t){t.on("click",this,this.onCellMouse),t.on("rightclick",this,this.onCellMouse),t.on("mouseover",this,this.onCellMouse),t.on("mouseout",this,this.onCellMouse),t.on("mousedown",this,this.onCellMouse),t.on("mouseup",this,this.onCellMouse),this._cells.push(t)},i.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var t=0,e=t=0;e<1e4;e++){var i=this.getChildByName("item"+e);if(!i)break;this.addCell(i),t++}this.repeatY=t}},i.setContentSize=function(t,e){this._content.width=t,this._content.height=e,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new Rectangle),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,t,e),this._content.scrollRect=this._content.scrollRect),this.event("resize")},i.onCellMouse=function(t){"mousedown"===t.type&&(this._isMoved=!1);var e=t.currentTarget,i=this._startIndex+this._cells.indexOf(e);i<0||("click"===t.type||"rightclick"===t.type?this.selectEnable&&!this._isMoved?this.selectedIndex=i:this.changeCellState(e,!0,0):"mouseover"!==t.type&&"mouseout"!==t.type||this._selectedIndex===i||this.changeCellState(e,"mouseover"===t.type,0),this.mouseHandler&&this.mouseHandler.runWith([t,i]))},i.changeCellState=function(t,e,i){var n=t.getChildByName("selectBox");n&&(this.selectEnable=!0,n.visible=e,n.index=i)},i.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},i.onScrollBarChange=function(t){if(!this.isDisableScrollBar){this.runCallLater(this.changeCells);var e=this._scrollBar.value,i=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,s=Math.floor(e/this._cellSize);if(this.cacheContent)a=n+1,this._createdLine-s<a&&(this._createItems(this._createdLine,i,this._createdLine+a),this.renderItems(this._createdLine*i,0),this._createdLine+=a);else{var o=s*i,a=0;if(o>this._startIndex){a=o-this._startIndex;var r=!0,l=this._startIndex+i*(n+1);this._isMoved=!0}else o<this._startIndex&&(a=this._startIndex-o,r=!1,l=this._startIndex-1,this._isMoved=!0);for(var h=0;h<a;h++){if(r){var c=this._cells.shift();this._cells[this._cells.length]=c;var u=l+h}else c=this._cells.pop(),this._cells.unshift(c),u=l-h;var d=Math.floor(u/i)*this._cellSize;this._isVertical?c.y=d:c.x=d,this.renderItem(c,u)}this._startIndex=o,this.changeSelectStatus()}this._content.scrollRect||(this._content.scrollRect=new Rectangle,this._content.scrollRect.setTo(0,0,this._content.width,this._content.height));var _=this._content.scrollRect;this._isVertical?(_.y=e-this._offset.y,_.x=-this._offset.x):(_.y=-this._offset.y,_.x=e-this._offset.x),this._content.scrollRect=_}},i.posCell=function(t,e){if(this._scrollBar){var i=this._isVertical?this.repeatX:this.repeatY,n=(this._isVertical?this.repeatY:this.repeatX,Math.floor(e/i)*this._cellSize);this._isVertical?t.y=n:t.x=n}},i.clearSelect=function(){this._selectedIndex=-1},i.changeSelectStatus=function(){for(var t=0,e=this._cells.length;t<e;t++)this.changeCellState(this._cells[t],this._selectedIndex===this._startIndex+t,1)},i.renderItems=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);for(var i=t,n=e||this._cells.length;i<n;i++)this.renderItem(this._cells[i],this._startIndex+i);this.changeSelectStatus()},i.renderItem=function(t,e){this._array&&0<=e&&e<this._array.length?(t.visible=!0,t._$bindData?(t._dataSource=this._array[e],this._bindData(t,this._array[e])):t.dataSource=this._array[e],this.cacheContent||this.posCell(t,e),this.hasListener("render")&&this.event("render",[t,e]),this.renderHandler&&this.renderHandler.runWith([t,e])):(t.visible=!1,t.dataSource=null)},i._bindData=function(t,e){for(var i=t._$bindData,n=0,s=i.length;n<s;n++){var o=i[n++],a=i[n++],r=i[n],l=UIUtils.getBindFun(r);o[a]=l.call(this,e)}},i.refresh=function(){this.array=this._array},i.getItem=function(t){return-1<t&&t<this._array.length?this._array[t]:null},i.changeItem=function(t,e){-1<t&&t<this._array.length&&(this._array[t]=e,t>=this._startIndex&&t<this._startIndex+this._cells.length&&this.renderItem(this.getCell(t),t))},i.setItem=function(t,e){this.changeItem(t,e)},i.addItem=function(t){this._array.push(t),this.array=this._array},i.addItemAt=function(t,e){this._array.splice(e,0,t),this.array=this._array},i.deleteItem=function(t){this._array.splice(t,1),this.array=this._array},i.getCell=function(t){return this.runCallLater(this.changeCells),-1<t&&this._cells?this._cells[(t-this._startIndex)%this._cells.length]:null},i.scrollTo=function(t){if(this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(t/e)*this._cellSize}else this.startIndex=t},i.tweenTo=function(t,e,i){if(void 0===e&&(e=200),this._scrollBar){var n=this._isVertical?this.repeatX:this.repeatY;Tween.to(this._scrollBar,{value:Math.floor(t/n)*this._cellSize},e,null,i,0,!0)}else this.startIndex=t,i&&i.run()},i._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},i.commitMeasure=function(){this.runCallLater(this.changeCells)},__getset(0,i,"cacheAs",t.prototype._$get_cacheAs,function(t){Laya.superSet(Box,this,"cacheAs",t),this._scrollBar&&(this._$P.cacheAs=null,"none"!==t?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),__getset(0,i,"content",function(){return this._content}),__getset(0,i,"height",t.prototype._$get_height,function(t){t!=this._height&&(Laya.superSet(Box,this,"height",t),this._setCellChanged())}),__getset(0,i,"itemRender",function(){return this._itemRender},function(t){if(this._itemRender!=t){this._itemRender=t;for(var e=this._cells.length-1;-1<e;e--)this._cells[e].destroy();this._cells.length=0,this._setCellChanged()}}),__getset(0,i,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var e=new VScrollBar;e.name="scrollBar",e.right=0,t&&" "!=t&&(e.skin=t),this.scrollBar=e,this.addChild(e),this._setCellChanged()}),__getset(0,i,"page",function(){return this._page},function(t){this._page=t,this._array&&(this._page=0<t?t:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),__getset(0,i,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var e=new HScrollBar;e.name="scrollBar",e.bottom=0,t&&" "!=t&&(e.skin=t),this.scrollBar=e,this.addChild(e),this._setCellChanged()}),__getset(0,i,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(t){this._repeatX=t,this._setCellChanged()}),__getset(0,i,"scrollBar",function(){return this._scrollBar},function(t){this._scrollBar!=t&&(this._scrollBar=t)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),__getset(0,i,"width",t.prototype._$get_width,function(t){t!=this._width&&(Laya.superSet(Box,this,"width",t),this._setCellChanged())}),__getset(0,i,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(t){this._repeatY=t,this._setCellChanged()}),__getset(0,i,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,this._setCellChanged()}),__getset(0,i,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,this._setCellChanged()}),__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(t),this.startIndex=this._startIndex)}),__getset(0,i,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(t){this.selectedIndex=this._array.indexOf(t)}),__getset(0,i,"length",function(){return this._array?this._array.length:0}),__getset(0,i,"selection",function(){return this.getCell(this._selectedIndex)},function(t){this.selectedIndex=this._startIndex+this._cells.indexOf(t)}),__getset(0,i,"startIndex",function(){return this._startIndex},function(t){this._startIndex=0<t?t:0,this.callLater(this.renderItems)}),__getset(0,i,"array",function(){return this._array},function(t){this.runCallLater(this.changeCells),this._array=t||[];var e=this._array.length;if(this.totalPage=Math.ceil(e/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<e?this._selectedIndex:e-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var i=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,s=Math.ceil(e/i);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=n/s,this._scrollBar.setScroll(0,(s-n)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){"number"==typeof(this._dataSource=t)&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.array=t:Laya.superSet(Box,this,"dataSource",t)}),__getset(0,i,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),e}(Box),Tree=function(t){function e(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,e.__super.call(this),this.width=this.height=200}__class(e,"laya.ui.Tree",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IRender":!0}),i.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._list&&this._list.destroy(t),this._list=null,this._source=null,this._renderHandler=null},i.createChildren=function(){this.addChild(this._list=new List),this._list.renderHandler=Handler.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},i.onListChange=function(t){this.event("change")},i.getArray=function(){var t,e=[];for(var i in this._source)t=this._source[i],this.getParentOpenStatus(t)&&(t.x=this._spaceLeft*this.getDepth(t),e.push(t));return e},i.getDepth=function(t,e){return void 0===e&&(e=0),null==t.nodeParent?e:this.getDepth(t.nodeParent,e+1)},i.getParentOpenStatus=function(t){var e=t.nodeParent;return null==e||!!e.isOpen&&(null==e.nodeParent||this.getParentOpenStatus(e))},i.renderItem=function(t,e){var i=t.dataSource;if(i){t.left=i.x;var n=t.getChildByName("arrow");n&&(i.hasChild?(n.visible=!0,n.index=i.isOpen?1:0,n.tag=e,n.off("click",this,this.onArrowClick),n.on("click",this,this.onArrowClick)):n.visible=!1);var s=t.getChildByName("folder");s&&(2==s.clipY?s.index=i.isDirectory?0:1:s.index=i.isDirectory?i.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([t,e])}},i.onArrowClick=function(t){var e=t.currentTarget.tag;this._list.array[e].isOpen=!this._list.array[e].isOpen,this.event("open"),this._list.array=this.getArray()},i.setItemState=function(t,e){this._list.array[t]&&(this._list.array[t].isOpen=e,this._list.array=this.getArray())},i.fresh=function(){this._list.array=this.getArray(),this.repaint()},i.parseXml=function(t,e,i,n){var s,o=t.childNodes,a=o.length;if(!n){s={};var r,l=t.attributes;for(var h in l){var c=(r=l[h]).nodeName,u=r.nodeValue;s[c]="true"==u||"false"!=u&&u}s.nodeParent=i,0<a&&(s.isDirectory=!0),s.hasChild=0<a,e.push(s)}for(var d=0;d<a;d++){var _=o[d];this.parseXml(_,e,s,!1)}},i.parseOpenStatus=function(t,e){for(var i=0,n=e.length;i<n;i++){var s=e[i];if(s.isDirectory)for(var o=0,a=t.length;o<a;o++){var r=t[o];if(r.isDirectory&&this.isSameParent(r,s)&&s.label==r.label){s.isOpen=r.isOpen;break}}}},i.isSameParent=function(t,e){return null==t.nodeParent&&null==e.nodeParent||null!=t.nodeParent&&null!=e.nodeParent&&(t.nodeParent.label==e.nodeParent.label&&this.isSameParent(t.nodeParent,e.nodeParent))},i.filter=function(t){if(Boolean(t)){var e=[];this.getFilterSource(this._source,e,t),this._list.array=e}else this._list.array=this.getArray()},i.getFilterSource=function(t,e,i){var n;for(var s in i=i.toLocaleLowerCase(),t)!(n=t[s]).isDirectory&&-1<String(n.label).toLowerCase().indexOf(i)&&(n.x=0,e.push(n)),n.child&&0<n.child.length&&this.getFilterSource(n.child,e,i)},__getset(0,i,"spaceBottom",function(){return this._list.spaceY},function(t){this._list.spaceY=t}),__getset(0,i,"keepStatus",function(){return this._keepStatus},function(t){this._keepStatus=t}),__getset(0,i,"itemRender",function(){return this._list.itemRender},function(t){this._list.itemRender=t}),__getset(0,i,"array",function(){return this._list.array},function(t){this._keepStatus&&this._list.array&&t&&this.parseOpenStatus(this._list.array,t),this._source=t,this._list.array=this.getArray()}),__getset(0,i,"mouseHandler",function(){return this._list.mouseHandler},function(t){this._list.mouseHandler=t}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,Laya.superSet(Box,this,"dataSource",t)}),__getset(0,i,"source",function(){return this._source}),__getset(0,i,"scrollBar",function(){return this._list.scrollBar}),__getset(0,i,"list",function(){return this._list}),__getset(0,i,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(t){this._list.vScrollBarSkin=t}),__getset(0,i,"renderHandler",function(){return this._renderHandler},function(t){this._renderHandler=t}),__getset(0,i,"selectedIndex",function(){return this._list.selectedIndex},function(t){this._list.selectedIndex=t}),__getset(0,i,"spaceLeft",function(){return this._spaceLeft},function(t){this._spaceLeft=t}),__getset(0,i,"selectedItem",function(){return this._list.selectedItem},function(t){this._list.selectedItem=t}),__getset(0,i,"width",t.prototype._$get_width,function(t){Laya.superSet(Box,this,"width",t),this._list.width=t}),__getset(0,i,"height",t.prototype._$get_height,function(t){Laya.superSet(Box,this,"height",t),this._list.height=t}),__getset(0,i,"xml",null,function(t){var e=[];this.parseXml(t.childNodes[0],e,null,!0),this.array=e}),__getset(0,i,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),e}(Box),ContextMenuItem=function(t){function i(t,e){this.data=null,this.img=null,i.__super.call(this),this.img||(this.img=new Image),""!=t?(this.label=t,this.name=t):(this.label="------",this.height=5,this.mouseEnabled=!1,this.img.skin=Base64AtlasManager.base64.getAdptUrl("comp/line2.png"),this.img.sizeGrid="0,2,0,2",this.addChild(this.img)),this.labelColors="#000000,#000000,#000000,#000000",this._text.x=10,this._text.padding=[-2,0,0,0],this._text.align="left",this._text.wordWrap=!1,this._text.typeset(),this.width=this._text.width+25,this.sizeGrid="3,3,3,3",this.skin=Base64AtlasManager.base64.getAdptUrl("comp/button1.png")}return __class(i,"laya.debug.uicomps.ContextMenuItem",t),__getset(0,i.prototype,"width",t.prototype._$get_width,function(t){Laya.superSet(Button,this,"width",t),this.img.width=this.width,this.img.x=0}),i}(Button),LayoutBox=function(t){function e(){this._space=0,this._align="none",this._itemChanged=!1,e.__super.call(this)}__class(e,"laya.ui.LayoutBox",Box);var i=e.prototype;return i.addChild=function(t){return t.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,t)},i.onResize=function(t){this._setItemChanged()},i.addChildAt=function(t,e){return t.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,t,e)},i.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,t)},i.refresh=function(){this._setItemChanged()},i.changeItems=function(){this._itemChanged=!1},i.sortItem=function(t){t&&t.sort(function(t,e){return t.y-e.y})},i._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},__getset(0,i,"space",function(){return this._space},function(t){this._space=t,this._setItemChanged()}),__getset(0,i,"align",function(){return this._align},function(t){this._align=t,this._setItemChanged()}),e}(),Panel=function(t){function e(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,e.__super.call(this),this.width=this.height=100}__class(e,"laya.ui.Panel",t);var i=e.prototype;return i.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._content&&this._content.destroy(t),this._vScrollBar&&this._vScrollBar.destroy(t),this._hScrollBar&&this._hScrollBar.destroy(t),this._vScrollBar=null,this._hScrollBar=null,this._content=null},i.destroyChildren=function(){this._content.destroyChildren()},i.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new Box)},i.addChild=function(t){return t.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(t)},i.onResize=function(){this._setScrollChanged()},i.addChildAt=function(t,e){return t.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(t,e)},i.removeChild=function(t){return t.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(t)},i.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(t)},i.removeChildren=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=2147483647),this._content.removeChildren(t,e),this._setScrollChanged(),this},i.getChildAt=function(t){return this._content.getChildAt(t)},i.getChildByName=function(t){return this._content.getChildByName(t)},i.getChildIndex=function(t){return this._content.getChildIndex(t)},i.changeScroll=function(){this._scrollChanged=!1;var t=this.contentWidth||1,e=this.contentHeight||1,i=this._vScrollBar,n=this._hScrollBar,s=i&&e>this._height,o=n&&t>this._width,a=s?this._width-i.width:this._width,r=o?this._height-n.height:this._height;i&&(i.x=this._width-i.width,i.y=0,i.height=this._height-(o?n.height:0),i.scrollSize=Math.max(.033*this._height,1),i.thumbPercent=r/e,i.setScroll(0,e-r,i.value)),n&&(n.x=0,n.y=this._height-n.height,n.width=this._width-(s?i.width:0),n.scrollSize=Math.max(.033*this._width,1),n.thumbPercent=a/t,n.setScroll(0,t-a,n.value))},i.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},i.setContentSize=function(t,e){var i=this._content;i.width=t,i.height=e,i.scrollRect||(i.scrollRect=new Rectangle),i.scrollRect.setTo(0,0,t,e),i.scrollRect=i.scrollRect},i.onScrollBarChange=function(t){var e=this._content.scrollRect;if(e){var i=Math.round(t.value);t.isVertical?e.y=i:e.x=i,this._content.scrollRect=e}},i.scrollTo=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.vScrollBar&&(this.vScrollBar.value=e),this.hScrollBar&&(this.hScrollBar.value=t)},i.refresh=function(){this.changeScroll()},i.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=Laya.superGet(Box,this,"cacheAs")),Laya.superSet(Box,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},i.onScrollEnd=function(){Laya.superSet(Box,this,"cacheAs",this._$P.cacheAs)},i._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},__getset(0,i,"numChildren",function(){return this._content.numChildren}),__getset(0,i,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new HScrollBar),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=t}),__getset(0,i,"contentWidth",function(){for(var t=0,e=this._content.numChildren-1;-1<e;e--){var i=this._content.getChildAt(e);t=Math.max(i.x+i.width*i.scaleX,t)}return t}),__getset(0,i,"contentHeight",function(){for(var t=0,e=this._content.numChildren-1;-1<e;e--){var i=this._content.getChildAt(e);t=Math.max(i.y+i.height*i.scaleY,t)}return t}),__getset(0,i,"width",t.prototype._$get_width,function(t){Laya.superSet(Box,this,"width",t),this._setScrollChanged()}),__getset(0,i,"hScrollBar",function(){return this._hScrollBar}),__getset(0,i,"content",function(){return this._content}),__getset(0,i,"height",t.prototype._$get_height,function(t){Laya.superSet(Box,this,"height",t),this._setScrollChanged()}),__getset(0,i,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new VScrollBar),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=t}),__getset(0,i,"vScrollBar",function(){return this._vScrollBar}),__getset(0,i,"cacheAs",t.prototype._$get_cacheAs,function(t){Laya.superSet(Box,this,"cacheAs",t),this._$P.cacheAs=null,"none"!==t?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),e}(Box),UIGroup=function(t){function i(t,e){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,i.__super.call(this),this.skin=e,this.labels=t}__class(i,"laya.ui.UIGroup",t);var e=i.prototype;return Laya.imps(e,{"laya.ui.IItem":!0}),e.preinitialize=function(){this.mouseEnabled=!0},e.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},e.addItem=function(t,e){void 0===e&&(e=!0);var i=t,n=this._items.length;if(i.name="item"+n,this.addChild(i),this.initItems(),e&&0<n){var s=this._items[n-1];"horizontal"==this._direction?i.x=s.x+s.width+this._space:i.y=s.y+s.height+this._space}else e&&(i.x=0,i.y=0);return n},e.delItem=function(t,e){void 0===e&&(e=!0);var i=this._items.indexOf(t);if(-1!=i){var n=t;this.removeChild(n);for(var s=i+1,o=this._items.length;s<o;s++){var a=this._items[s];a.name="item"+(s-1),e&&("horizontal"==this._direction?a.x-=n.width+this._space:a.y-=n.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var r;r=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=r}}},e.initItems=function(){this._items||(this._items=[]);for(var t=this._items.length=0;t<1e4;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.selected=t===this._selectedIndex,e.clickHandler=Handler.create(this,this.itemClick,[t],!1)}},e.itemClick=function(t){this.selectedIndex=t},e.setSelect=function(t,e){this._items&&-1<t&&t<this._items.length&&(this._items[t].selected=e)},e.createItem=function(t,e){return null},e.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var t=0,e=0,i=this._items.length;e<i;e++){var n=this._items[e];this._skin&&(n.skin=this._skin),this._labelColors&&(n.labelColors=this._labelColors),this._labelSize&&(n.labelSize=this._labelSize),this._labelStroke&&(n.labelStroke=this._labelStroke),this._labelStrokeColor&&(n.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(n.strokeColors=this._strokeColors),this._labelBold&&(n.labelBold=this._labelBold),this._labelPadding&&(n.labelPadding=this._labelPadding),this._labelAlign&&(n.labelAlign=this._labelAlign),this._stateNum&&(n.stateNum=this._stateNum),this._labelFont&&(n.labelFont=this._labelFont),"horizontal"===this._direction?(n.y=0,n.x=t,t+=n.width+this._space):(n.x=0,n.y=t,t+=n.height+this._space)}this.changeSize()},e.commitMeasure=function(){this.runCallLater(this.changeLabels)},e._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},__getset(0,e,"labelStrokeColor",function(){return this._labelStrokeColor},function(t){this._labelStrokeColor!=t&&(this._labelStrokeColor=t,this._setLabelChanged())}),__getset(0,e,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._setLabelChanged())}),__getset(0,e,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(t,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),__getset(0,e,"labels",function(){return this._labels},function(t){if(this._labels!=t){if(this._labels=t,this.removeChildren(),this._setLabelChanged(),this._labels)for(var e=this._labels.split(","),i=0,n=e.length;i<n;i++){var s=this.createItem(this._skin,e[i]);s.name="item"+i,this.addChild(s)}this.initItems()}}),__getset(0,e,"strokeColors",function(){return this._strokeColors},function(t){this._strokeColors!=t&&(this._strokeColors=t,this._setLabelChanged())}),__getset(0,e,"labelColors",function(){return this._labelColors},function(t){this._labelColors!=t&&(this._labelColors=t,this._setLabelChanged())}),__getset(0,e,"labelStroke",function(){return this._labelStroke},function(t){this._labelStroke!=t&&(this._labelStroke=t,this._setLabelChanged())}),__getset(0,e,"labelSize",function(){return this._labelSize},function(t){this._labelSize!=t&&(this._labelSize=t,this._setLabelChanged())}),__getset(0,e,"stateNum",function(){return this._stateNum},function(t){this._stateNum!=t&&(this._stateNum=t,this._setLabelChanged())}),__getset(0,e,"labelBold",function(){return this._labelBold},function(t){this._labelBold!=t&&(this._labelBold=t,this._setLabelChanged())}),__getset(0,e,"labelFont",function(){return this._labelFont},function(t){this._labelFont!=t&&(this._labelFont=t,this._setLabelChanged())}),__getset(0,e,"labelPadding",function(){return this._labelPadding},function(t){this._labelPadding!=t&&(this._labelPadding=t,this._setLabelChanged())}),__getset(0,e,"direction",function(){return this._direction},function(t){this._direction=t,this._setLabelChanged()}),__getset(0,e,"space",function(){return this._space},function(t){this._space=t,this._setLabelChanged()}),__getset(0,e,"items",function(){return this._items}),__getset(0,e,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),__getset(0,e,"dataSource",t.prototype._$get_dataSource,function(t){"number"==typeof(this._dataSource=t)&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.labels=t.join(","):Laya.superSet(Box,this,"dataSource",t)}),i}(Box),ViewStack=function(t){function e(){this._items=null,this._selectedIndex=0,e.__super.call(this),this._setIndexHandler=Handler.create(this,this.setIndex,null,!1)}__class(e,"laya.ui.ViewStack",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IItem":!0}),i.setItems=function(t){this.removeChildren();for(var e=0,i=0,n=t.length;i<n;i++){var s=t[i];s&&(s.name="item"+e,this.addChild(s),e++)}this.initItems()},i.addItem=function(t){t.name="item"+this._items.length,this.addChild(t),this.initItems()},i.initItems=function(){this._items=[];for(var t=0;t<1e4;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.visible=t==this._selectedIndex}},i.setSelect=function(t,e){this._items&&-1<t&&t<this._items.length&&(this._items[t].visible=e)},i.setIndex=function(t){this.selectedIndex=t},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if("number"==typeof(this._dataSource=t)&&Math.floor(t)==t||"string"==typeof t)this.selectedIndex=parseInt(t);else for(var e in this._dataSource)this.hasOwnProperty(e)&&(this[e]=this._dataSource[e])}),__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(this._selectedIndex,!0))}),__getset(0,i,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),__getset(0,i,"items",function(){return this._items}),__getset(0,i,"setIndexHandler",function(){return this._setIndexHandler},function(t){this._setIndexHandler=t}),e}(Box),CheckBox=function(t){function i(t,e){void 0===e&&(e=""),i.__super.call(this,t,e)}__class(i,"laya.ui.CheckBox",t);var e=i.prototype;return e.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},e.initialize=function(){t.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},__getset(0,e,"dataSource",t.prototype._$get_dataSource,function(t){"boolean"==typeof(this._dataSource=t)?this.selected=t:"string"==typeof t?this.selected="true"===t:Laya.superSet(Button,this,"dataSource",t)}),i}(Button),Radio=function(e){function i(t,e){this._value=null,void 0===e&&(e=""),i.__super.call(this,t,e)}__class(i,"laya.ui.Radio",e);var t=i.prototype;return t.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._value=null},t.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},t.initialize=function(){e.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},t.onClick=function(t){this.selected=!0},__getset(0,t,"value",function(){return null!=this._value?this._value:this.label},function(t){this._value=t}),i}(Button),DInput=function(t){function e(){e.__super.call(this),this.bgColor="#11ff00"}return __class(e,"laya.debug.tools.debugUI.DInput",Input),e}(),CacheRankView=function(t){function o(){this.view=null,o.__super.call(this)}__class(o,"laya.debug.view.nodeInfo.views.CacheRankView",UIViewBase);var e=o.prototype;return e.createPanel=function(){this.view=new Rank,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),NodeMenu.I.setNodeListAction(this.view.itemList),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),(this.dis=this).view.itemList.array=[],this.onAutoUpdateChange(),this.fresh()},e.onRightClick=function(){var t,e;(t=this.view.itemList).selectedItem&&(e=t.selectedItem.path,NodeMenu.I.objRightClick(e))},e.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},e.fresh=function(){var t,e,i,n,s;for(e in CacheAnalyser.counter.updates(),this.view.title.text="ReCache排行",DebugTool.enableCacheAnalyse||(this.view.title.text="ReCache排行(未开启)",this.view.title.toolTip="DebugTool.init(true)可开启该功能"),s=[],t=CacheAnalyser.counter.resultNodeDic)i=t[e],o.filterDebugNodes&&DisControlTool.isInTree(DebugInfoLayer.I,i)||CacheAnalyser.counter.getCount(i)<=0||((n={}).time=CacheAnalyser.counter.getCount(i),n.path=i,n.label=ClassTool.getNodeClassAndName(i)+":"+n.time,s.push(n));s.sort(MathTools.sortByKey("time",!0,!0)),this.view.itemList.array=s},__getset(0,e,"autoUpdate",null,function(t){Laya.timer.clear(this,this.fresh),t&&(this.fresh(),Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.fresh))}),__getset(1,o,"I",function(){return o._I||(o._I=new o),o._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),o._I=null,o.filterDebugNodes=!0,o}(),DebugPanelView=function(t){function e(){this.view=null,this.dragIcon=null,this.tSelectTar=null,this._selectTip=new Sprite,e.__super.call(this),this._selectTip.setBounds(new Rectangle(0,0,0,0))}__class(e,"laya.debug.view.nodeInfo.views.DebugPanelView",UIViewBase);var i=e.prototype;return i.createPanel=function(){this.view=new DebugPage,this.dis=this.view,this.view.minBtn.minHandler=this.minHandler,this.view.minBtn.maxHandler=this.maxHandler,this.view.minBtn.tar=this.view,DisControlTool.setDragingItem(this.view.bg,this.view),DisControlTool.setDragingItem(this.view.tab,this.view),DisControlTool.setDragingItem(this.view.clearBtn,this.view),this.clickSelectChange(),this.view.selectWhenClick.on("change",this,this.clickSelectChange),Notice.listen("ItemClicked",this,this.itemClicked),StyleConsts.setViewScale(this.view),this.dragIcon=this.view.dragIcon,this.dragIcon.removeSelf(),this.view.mouseAnalyseBtn.on("mousedown",this,this.mouseAnalyserMouseDown),this.dragIcon.on("dragend",this,this.mouseAnalyserDragEnd),this.view.clearBtn.on("mousedown",this,this.clearBtnClick)},i.clearBtnClick=function(){DebugTool.clearDebugLayer()},i.mouseAnalyserMouseDown=function(){var t=e.tempPos;t.setTo(0,0),t=this.view.mouseAnalyseBtn.localToGlobal(t),this.dragIcon.pos(t.x,t.y),this.dragIcon.mouseEnabled=!1,Laya.stage.addChild(this.dragIcon),this.dragIcon.startDrag()},i.mouseAnalyserDragEnd=function(){this.dragIcon.removeSelf(),this.selectTarget(DisplayHook.instance.getDisUnderMouse()),NodeToolView.I.showByNode(DisplayHook.instance.getDisUnderMouse(),!1)},i.switchToTree=function(){this.view.tab.selectedIndex=0},i.swichToSelect=function(){this.view.tab.selectedIndex=1},i.itemClicked=function(t){e.isClickSelectState&&(e.ignoreDebugTool&&DebugInfoLayer.I.isDebugItem(t)||t instanceof laya.debug.uicomps.ContextMenuItem||t.parent instanceof laya.debug.uicomps.ContextMenuItem||(ToolPanel.I.showSelectInStage(t),NodeToolView.I.showByNode(t,!1),this.view.selectWhenClick.selected=!1,DebugTool.showDisBound(t),this.clickSelectChange()))},i.selectTarget=function(t){t&&(ToolPanel.I.showSelectInStage(t),DebugTool.showDisBound(t))},i.clickSelectChange=function(){e.isClickSelectState=this.view.selectWhenClick.selected,Browser.onPC&&(this.tSelectTar=null,this.clearSelectTip(),e.isClickSelectState?Laya.timer.loop(200,this,this.updateSelectTar,null,!0):Laya.timer.clear(this,this.updateSelectTar))},i.clearSelectTip=function(){this._selectTip.removeSelf()},i.updateSelectTar=function(){var t,e;(this.clearSelectTip(),this.tSelectTar=DisplayHook.instance.getDisUnderMouse(),this.tSelectTar)&&(DebugInfoLayer.I.isDebugItem(this.tSelectTar)||((t=this._selectTip.graphics).clear(),e=NodeUtils.getGRec(this.tSelectTar),DebugInfoLayer.I.popLayer.addChild(this._selectTip),t.drawRect(0,0,e.width,e.height,null,"#00ffff",2),this._selectTip.pos(e.x,e.y)))},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.ignoreDebugTool=!0,e.isClickSelectState=!1,__static(e,["tempPos",function(){return this.tempPos=new Point}]),e}(),FilterView=function(t){function e(){this.input=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.FilterView",t);var i=e.prototype;return i.createPanel=function(){this.input=new Input,this.input.size(400,500),this.input.multiline=!0,this.input.bgColor="#ff00ff",this.input.fontSize=24,this.addChild(this.input)},i.show=function(){this.input.text=NodeInfosItem.showValues.join("\n"),t.prototype.show.call(this)},i.close=function(){t.prototype.close.call(this),NodeInfosItem.showValues=this.input.text.split("\n")},e}(UIViewBase),FindSmallView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.FindSmallView",UIViewBase);var i=e.prototype;return i.createPanel=function(){this.view=new FindNodeSmall,StyleConsts.setViewScale(this.view),DisControlTool.setDragingItem(this.view.bg,this.view),this.view.typeSelect.selectedIndex=1,this.view.closeBtn.on("click",this,this.close),this.view.findBtn.on("click",this,this.onFind),this.dis=this.view},i.onFind=function(){var t,e;t=this.view.findTxt.text,t=StringTool.trimSide(t),e=0==this.view.typeSelect.selectedIndex?DebugTool.findNameHas(t,!1):DebugTool.findClassHas(Laya.stage,t),ToolPanel.I.showSelectItems(e),this.close()},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(),FindView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.FindView",UIViewBase);var i=e.prototype;return i.createPanel=function(){this.view=new FindNode,DisControlTool.setDragingItem(this.view.bg,this.view),this.view.result.scrollBar.hide=!0,this.view.result.array=[],this.view.typeSelect.selectedIndex=1,this.view.closeBtn.on("click",this,this.close),this.view.findBtn.on("click",this,this.onFind),NodeMenu.I.setNodeListAction(this.view.result),this.dis=this.view},i.onRightClick=function(){var t,e;(t=this.view.result).selectedItem&&(e=t.selectedItem.path,NodeMenu.I.objRightClick(e))},i.onFind=function(){var t,e;t=this.view.findTxt.text,t=StringTool.trimSide(t),e=0==this.view.typeSelect.selectedIndex?DebugTool.findNameHas(t,!1):DebugTool.findClassHas(Laya.stage,t),this.showFindResult(e)},i.showFindResult=function(t){if(t){var e,i,n,s,o=0;for(e=t.length,i=[],o=0;o<e;o++)s=t[o],(n={}).label=ClassTool.getNodeClassAndName(s),n.path=s,i.push(n);this.view.result.array=i}},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(),NodeListPanelView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.NodeListPanelView",UIViewBase);var i=e.prototype;return i.createPanel=function(){this.view=new NodeListPanel,this.addChild(this.view),DisControlTool.setDragingItem(this.view.bg,this.view),NodeMenu.I.setNodeListAction(this.view.itemList),this.view.closeBtn.on("click",this,this.close),this.view.itemList.scrollBar.hide=!0,(this.dis=this).view.itemList.array=[]},i.showList=function(t){this.view.itemList.array=t,this.show()},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.filterDebugNodes=!0,e}(),NodeToolView=function(i){function e(){this.view=null,this.dragIcon=null,this._tar=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.NodeToolView",i);var t=e.prototype;return t.show=function(){this.showByNode()},t.createPanel=function(){this.view=new NodeTool,this.addChild(this.view),this.view.on("click",this,this.onBtnClick),this.view.closeBtn.on("click",this,this.onCloseBtn),DisControlTool.setDragingItem(this.view.bg,this.view),this.dis=this.view,this.view.freshBtn.on("click",this,this.onFreshBtn),this.dragIcon=this.view.dragIcon,this.dragIcon.removeSelf(),this.dragIcon.on("dragend",this,this.mouseAnalyserDragEnd),this.view.mouseAnalyseBtn.on("mousedown",this,this.mouseAnalyserMouseDown)},t.mouseAnalyserMouseDown=function(){var t=e.tempPos;t.setTo(0,0),t=this.view.mouseAnalyseBtn.localToGlobal(t),this.dragIcon.pos(t.x,t.y),this.dragIcon.mouseEnabled=!1,Laya.stage.addChild(this.dragIcon),this.dragIcon.startDrag()},t.mouseAnalyserDragEnd=function(){this.dragIcon.removeSelf(),laya.debug.view.nodeInfo.views.NodeToolView.I.target&&MouseEventAnalyser.analyseNode(laya.debug.view.nodeInfo.views.NodeToolView.I.target)},t.onFreshBtn=function(){this._tar&&(this._tar.reCache(),this._tar.repaint())},t.onCloseBtn=function(){this.close()},t.onBtnClick=function(t){var e;if(this._tar)switch(e=t.target,console.log("onBtnClick:",e),e.label){case"父链":DebugTool.showParentChain(this._tar),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"子":DebugTool.showAllChild(this._tar),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"兄弟":DebugTool.showAllBrother(this._tar),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"Enable链":OutPutView.I.dTrace(DebugTool.traceDisMouseEnable(this._tar)),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"Size链":OutPutView.I.dTrace(DebugTool.traceDisSizeChain(this._tar)),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"隐藏旁支":NodeInfoPanel.I.recoverNodes(),NodeInfoPanel.I.hideOtherChain(this._tar);break;case"隐藏兄弟":NodeInfoPanel.I.recoverNodes(),NodeInfoPanel.I.hideBrothers(this._tar);break;case"隐藏子":NodeInfoPanel.I.recoverNodes(),NodeInfoPanel.I.hideChilds(this._tar);break;case"恢复":NodeInfoPanel.I.recoverNodes();break;case"节点树定位":ToolPanel.I.showSelectInStage(this._tar);break;case"显示边框":DebugTool.showDisBound(this._tar);break;case"输出到控制台":console.log(this._tar);break;case"显示切换":this._tar.visible=!this._tar.visible}},t.showByNode=function(t,e){void 0===e&&(e=!0),t||(t=Laya.stage),e&&i.prototype.show.call(this),this._tar=t,this.fresh()},t.fresh=function(){this._tar&&(this.view.tarTxt.text=ClassTool.getNodeClassAndName(this._tar))},__getset(0,t,"target",function(){return this._tar}),__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,__static(e,["tempPos",function(){return this.tempPos=new Point}]),e}(UIViewBase),NodeTreeSettingView=function(t){function e(){this.view=null,this._handler=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.NodeTreeSettingView",t);var i=e.prototype;return i.createPanel=function(){t.prototype.createPanel.call(this),this.view=new NodeTreeSetting,StyleConsts.setViewScale(this.view),this.addChild(this.view),this.inits(),this.dis=this.view},i.show=function(){t.prototype.show.call(this)},i.showSetting=function(t,e,i){i instanceof laya.display.Node?this.view.showTxt.text=NodeConsts.defaultFitlerStr.split(",").join("\n"):this.view.showTxt.text=t.join("\n"),this._handler=e,this.show()},i.inits=function(){this.view.okBtn.on("click",this,this.onOkBtn),this.view.closeBtn.on("click",this,this.onCloseBtn),DisControlTool.setDragingItem(this.view.bg,this.view),this.dis=this.view},i.onCloseBtn=function(){this.close()},i.onOkBtn=function(){var t;this.close(),t=this.view.showTxt.text.split("\n"),this._handler&&(this._handler.runWith([t]),this._handler=null)},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(UIViewBase),NodeTreeView=function(e){function t(){this.nodeTree=null,t.__super.call(this)}__class(t,"laya.debug.view.nodeInfo.views.NodeTreeView",e);var i=t.prototype;return i.show=function(){this.showByNode()},i.showByNode=function(t){t||(t=Laya.stage),this.nodeTree.setDis(t)},i.createPanel=function(){var t;e.prototype.createPanel.call(this),this.nodeTree||(this.nodeTree=new NodeTree),this.dis=null,(t=this.nodeTree).top=t.bottom=t.left=t.right=0,this.addChild(t),this.showByNode(Laya.stage)},i.showSelectInStage=function(t){this.showByNode(Laya.stage),this.nodeTree.selectByNode(t)},t}(UIViewBase),ObjectCreateView=function(t){function e(){this.view=null,this._menu=null,this._menuItems=["统计详情","增量详情"],this._tSelectKey=null,this.preInfo={},e.__super.call(this),e._I=this}__class(e,"laya.debug.view.nodeInfo.views.ObjectCreateView",UIViewBase);var i=e.prototype;return i.createPanel=function(){this.view=new ObjectCreate,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),this.view.itemList.on(DebugTool.getMenuShowEvent(),this,this.onRightClick),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this._menu=ContextMenu.createMenuByArray(this._menuItems),this._menu.on("select",this,this.onEmunSelect),this.fresh()},i.onEmunSelect=function(t){if(this._tSelectKey){var e,i=t.target.data;if("string"==typeof i)switch(i){case"统计详情":(e=RunProfile.getRunInfo(this._tSelectKey))&&OutPutView.I.showTxt(this._tSelectKey+" createInfo:\n"+e.traceSelfR());break;case"增量详情":(e=RunProfile.getRunInfo(this._tSelectKey))&&OutPutView.I.showTxt(this._tSelectKey+" createInfo:\n"+e.traceSelfR(e.changeO))}}},i.onRightClick=function(){var t,e;(t=this.view.itemList).selectedItem&&(e=t.selectedItem.path,this._tSelectKey=e,this._tSelectKey&&this._menu.show())},i.show=function(){this.fresh()},i.fresh=function(){var t,e,i,n,s;for(e in i=[],t=ClassCreateHook.I.createInfo)this.preInfo[e]||(this.preInfo[e]=0),(n={}).path=e,n.count=t[e],n.add=t[e]-this.preInfo[e],0<n.add?n.label=e+":"+t[e]+" +"+n.add:n.label=e+":"+t[e],(s=RunProfile.getRunInfo(e))&&s.record(),n.rank=1e3*n.add+n.count,this.preInfo[e]=t[e],i.push(n);i.sort(MathTools.sortByKey("rank",!0,!0)),this.view.itemList.array=i},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(),ObjectInfoView=function(t){function a(){this.view=null,this.showKeys=["x","y","width","height","renderCost"],this._closeSettingHandler=null,this._tar=null,a.__super.call(this)}__class(a,"laya.debug.view.nodeInfo.views.ObjectInfoView",t);var e=a.prototype;return e.createPanel=function(){t.prototype.createPanel.call(this),this.view=new ObjectInfo,StyleConsts.setViewScale(this.view),this.addChild(this.view),this.inits()},e.inits=function(){this.view.closeBtn.on("click",this,this.close),this.view.settingBtn.on("click",this,this.onSettingBtn),this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),DisControlTool.setDragingItem(this.view.bg,this.view),DisControlTool.setResizeAbleEx(this.view),this._closeSettingHandler=new Handler(this,this.closeSetting),this.dis=this.view},e.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},e.onSettingBtn=function(){NodeTreeSettingView.I.showSetting(this.showKeys,this._closeSettingHandler,this._tar)},e.reset=function(){this.showKeys=["x","y","width","height","renderCost"]},e.closeSetting=function(t){this.showKeys=t,this.fresh()},e.showObjectInfo=function(t){this._tar=t,this.fresh(),this.show(),this.onAutoUpdateChange()},e.fresh=function(){this._tar?(this.view.title.text=ClassTool.getNodeClassAndName(this._tar),this.view.showTxt.text=a.getObjValueStr(this._tar,this.showKeys,!1)):(this.view.showTxt.text="",this.view.title.text="未选中对象")},e.freshKeyInfos=function(){this.fresh()},e.close=function(){t.prototype.close.call(this),this.autoUpdate=!1,Pool.recover("ObjectInfoView",this)},e.show=function(){t.prototype.show.call(this)},__getset(0,e,"autoUpdate",null,function(t){Laya.timer.clear(this,this.freshKeyInfos),t&&Laya.timer.loop(2e3,this,this.freshKeyInfos)}),a.getObjValueStr=function(t,e,i){void 0===i&&(i=!0);var n,s,o=0;for(a._txts.length=0,n=e.length,i&&(t.name?a._txts.push(ClassTool.getClassName(t)+"("+t.name+")"):a._txts.push(ClassTool.getClassName(t))),o=0;o<n;o++)s=e[o],a._txts.push(s+":"+a.getNodeValue(t,s));return a._txts.join("\n")},a.getNodeValue=function(t,e){var i,n;if(t instanceof laya.display.Sprite)switch(n=t,e){case"gRec":i=NodeUtils.getGRec(n).toString();break;case"gAlpha":i=NodeUtils.getGAlpha(n)+"";break;case"cmdCount":i=NodeUtils.getNodeCmdCount(n)+"";break;case"cmdAll":i=NodeUtils.getNodeCmdTotalCount(n)+"";break;case"nodeAll":i=""+NodeUtils.getNodeCount(n);break;case"nodeVisible":i=""+NodeUtils.getNodeCount(n,!0);break;case"nodeRender":i=""+NodeUtils.getRenderNodeCount(n);break;case"nodeReCache":i=""+NodeUtils.getReFreshRenderNodeCount(n);break;case"renderCost":i=""+RenderAnalyser.I.getTime(n);break;case"renderCount":i=""+RenderAnalyser.I.getCount(n);break;default:i=t[e]+""}else i=t[e]+"";return i},a.showObject=function(t){var e;(e=Pool.getItemByClass("ObjectInfoView",a)).reset(),e.showObjectInfo(t)},a._txts=[],a}(UIViewBase),OutPutView=function(t){function e(){this.view=null,e.__super.call(this),DebugTool._logFun=e.log}__class(e,"laya.debug.view.nodeInfo.views.OutPutView",UIViewBase);var i=e.prototype;return i.createPanel=function(){this.view=new OutPut,DisControlTool.setDragingItem(this.view.txt,this.view),DisControlTool.setDragingItem(this.view.bg,this.view),StyleConsts.setViewScale(this.view),this.view.txt.textField.overflow=Text.SCROLL,this.view.txt.textField.wordWrap=!0,this.view.on("mousewheel",this,this.mouseWheel),this.view.txt.text="",DisControlTool.setResizeAbleEx(this.view),this.view.closeBtn.on("click",this,this.close),this.view.clearBtn.on("click",this,this.onClearBtn),this.dis=this.view},i.onClearBtn=function(){this.clearText()},i.mouseWheel=function(t){this.view.txt.textField.scrollY-=10*t.delta},i.showTxt=function(t){this.view.txt.text=t,this.show(),this.view.txt.textField.scrollY=this.view.txt.textField.maxScrollY},i.clearText=function(){this.view.txt.text=""},i.dTrace=function(t){var e,i=arguments;1e3<this.view.txt.textField.scrollY&&(this.view.txt.text="");var n,s=0;for(n=i.length,e=i[0],s=1;s<n;s++)e+=" "+i[s];this.addStr(e)},i.addStr=function(t){this.view.txt.text+="\n"+t,this.show(),this.view.txt.textField.scrollY=this.view.txt.textField.maxScrollY},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e.log=function(t){e.I.addStr(t)},e._I=null,e}(),RenderCostRankView=function(t){function o(){this.view=null,o.__super.call(this)}__class(o,"laya.debug.view.nodeInfo.views.RenderCostRankView",UIViewBase);var e=o.prototype;return e.createPanel=function(){this.view=new Rank,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),NodeMenu.I.setNodeListAction(this.view.itemList),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),(this.dis=this).view.itemList.array=[],this.onAutoUpdateChange(),this.fresh(),Laya.timer.once(5e3,this,this.fresh)},e.onRightClick=function(){var t,e;(t=this.view.itemList).selectedItem&&(e=t.selectedItem.path,NodeMenu.I.objRightClick(e))},e.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},e.fresh=function(){var t,e,i,n,s;for(e in this.view.title.text="渲染用时排行("+NodeConsts.RenderCostMaxTime+"ms)",s=[],t=RenderAnalyser.I.nodeDic)i=t[e],o.filterDebugNodes&&DisControlTool.isInTree(DebugInfoLayer.I,i)||RenderAnalyser.I.getTime(i)<=0||((n={}).time=RenderAnalyser.I.getTime(i),o.filterDebugNodes&&i==Laya.stage&&(n.time-=RenderAnalyser.I.getTime(DebugInfoLayer.I)),n.path=i,n.label=ClassTool.getNodeClassAndName(i)+":"+n.time,s.push(n));s.sort(MathTools.sortByKey("time",!0,!0)),this.view.itemList.array=s},__getset(0,e,"autoUpdate",null,function(t){Laya.timer.clear(this,this.fresh),t&&(this.fresh(),Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.fresh))}),__getset(1,o,"I",function(){return o._I||(o._I=new o),o._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),o._I=null,o.filterDebugNodes=!0,o}(),ResRankView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.ResRankView",UIViewBase);var i=e.prototype;return i.createPanel=function(){this.view=new Rank,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),(this.dis=this).view.itemList.array=[],this.view.itemList.on("rightclick",this,this.onRightClick),this.onAutoUpdateChange(),this.fresh()},i.onRightClick=function(){var t;(t=this.view.itemList).selectedItem&&console.log(t.selectedItem.url)},i.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},i.fresh=function(){var t,e,i;this.view.title.text="图片缓存列表",i=[];var n,s=0;for(n=(t=ResTools.getCachedResList()).length,s=0;s<n;s++){var o;e={},o=(o=t[s]).replace(URL.rootPath,""),e.label=o,e.url=o,i.push(e)}this.view.itemList.array=i},__getset(0,i,"autoUpdate",null,function(t){Laya.timer.clear(this,this.fresh),t&&(this.fresh(),Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.fresh))}),__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.filterDebugNodes=!0,e}(),SelectInfosView=function(t){function e(){this.showKeys=[],this.view=null,this.fliterTxt=null,this.itemList=null,e.__super.call(this),(e._I=this).setSelectList(null)}__class(e,"laya.debug.view.nodeInfo.views.SelectInfosView",UIViewBase);var i=e.prototype;return i.createPanel=function(){this.view=new SelectInfos,this.addChild(this.view),this.view.top=this.view.bottom=this.view.left=this.view.right=0,NodeMenu.I.setNodeListAction(this.view.selectList),this.view.closeBtn.on("click",this,this.close),this.view.selectList.scrollBar.hide=!0,this.dis=null,this.view.findBtn.on("click",this,this.onFindBtn),this.fliterTxt=this.view.fliterTxt,this.view.fliterTxt.on("enter",this,this.onFliterTxtChange),this.view.fliterTxt.on("blur",this,this.onFliterTxtChange)},i.onFliterTxtChange=function(t){var e;""==(e=this.fliterTxt.text)?0!=this.showKeys.length&&(this.showKeys.length=0,this.fresh()):e!=this.showKeys.join(",")&&(this.showKeys=e.split(","),this.fresh())},i.onFindBtn=function(){FindSmallView.I.show()},i.onRightClick=function(){var t,e;(t=this.view.selectList).selectedItem&&(e=t.selectedItem.path,NodeMenu.I.objRightClick(e))},i.setSelectTarget=function(t){t&&this.setSelectList([t])},i.setSelectList=function(t){this.itemList=t,this.fresh()},i.fresh=function(){var t;if(!(t=this.itemList)||t.length<1)this.view.selectList.array=[];else{var e,i,n,s,o=0;for(e=t.length,s=[],o=0;o<e;o++)i=t[o],(n={}).label=this.getLabelTxt(i),n.path=i,s.push(n);this.view.selectList.array=s}},i.getLabelTxt=function(t){var e;e=ClassTool.getNodeClassAndName(t);var i,n=0;for(i=this.showKeys.length,n=0;n<i;n++)e+=","+ObjectInfoView.getNodeValue(t,this.showKeys[n]);return e},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(),ToolBarView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.ToolBarView",UIViewBase);var i=e.prototype;return i.createPanel=function(){this.view=new ToolBar,this.addChild(this.view),DisControlTool.setDragingItem(this.view.bg,this.view),this.view.on("click",this,this.onBtnClick),this.view.minBtn.minHandler=this.minHandler,this.view.minBtn.maxHandler=this.maxHandler,this.view.minBtn.tar=this.view,this.clickSelectChange(),this.view.selectWhenClick.on("change",this,this.clickSelectChange),Notice.listen("ItemClicked",this,this.itemClicked),this.dis=this.view},i.itemClicked=function(t){e.isClickSelectState&&(DisControlTool.isInTree(this.view.selectWhenClick,t)||!e.ignoreDebugTool||DebugInfoLayer.I.isDebugItem(t))},i.clickSelectChange=function(){e.isClickSelectState=this.view.selectWhenClick.selected},i.firstShowFun=function(){this.dis.x=Laya.stage.width-this.dis.width-20,this.dis.y=5},i.onBtnClick=function(t){switch(t.target){case this.view.treeBtn:ToolPanel.I.switchShow("Tree");break;case this.view.findBtn:ToolPanel.I.switchShow("Find");break;case this.view.clearBtn:DebugTool.clearDebugLayer();break;case this.view.rankBtn:RenderCostRankView.I.show();break;case this.view.nodeRankBtn:ObjectCreateView.I.show();break;case this.view.cacheBtn:NodeUtils.showCachedSpriteRecs()}},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.ignoreDebugTool=!0,e.isClickSelectState=!1,e}(),TxtInfoView=function(t){function e(){this.input=null,this.btn=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.TxtInfoView",UIViewBase);var i=e.prototype;return i.createPanel=function(){this.input=new Input,this.input.size(200,400),this.input.multiline=!0,this.input.bgColor="#ff00ff",this.input.fontSize=12,this.input.wordWrap=!0,this.addChild(this.input),this.btn=this.getButton(),this.btn.text="关闭",this.btn.size(50,20),this.btn.align="center",this.btn.on("mousedown",this,this.onCloseBtn),this.btn.pos(5,this.input.height+5),this.addChild(this.btn)},i.showInfo=function(t){this.input.text=t,this.show()},i.show=function(){DebugInfoLayer.I.setTop(),DebugInfoLayer.I.popLayer.addChild(this),this.x=Laya.stage.width-this.width,this.y=0},i.onCloseBtn=function(){this.close()},e}(),TipButton$1=function(e){function i(t,e){this._tipBitmap=null,this._tipSkin=null,this._showTip=!1,this._tipOffX=0,void(this._tipOffY=0)===e&&(e=""),i.__super.call(this,t,e)}__class(i,"ui.controls.TipButton",e,"TipButton$1");var t=i.prototype;return t.destroy=function(t){void 0===t&&(t=!0),this._tipBitmap&&this._tipBitmap.destroy(),this._tipBitmap=null,e.prototype.destroy.call(this,t)},t.resetTipPos=function(){this._tipBitmap&&(this._tipBitmap.x=this.width-this._tipBitmap.width+this._tipOffX,this._tipBitmap.y=this._tipOffY)},t.changeClips=function(){e.prototype.changeClips.call(this),this.resetTipPos()},t.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.resetTipPos()},__getset(0,t,"tipSkin",function(){return this._tipSkin},function(t){if(this._tipSkin!=t){this._tipSkin=t,this._tipBitmap||(this._tipBitmap=new Sprite,this._tipBitmap.visible=this._showTip,this.addChild(this._tipBitmap));var e=Loader.getRes(this._tipSkin);if(!e)return;this._tipBitmap.texture=e,this._tipBitmap.width=e.width,this._tipBitmap.height=e.height,this.resetTipPos()}}),__getset(0,t,"showTip",function(){return this._showTip},function(t){this._showTip!=t&&(this._showTip=t,this._tipBitmap&&(this._tipBitmap.visible=t))}),__getset(0,t,"tipOffX",function(){return this._tipOffX},function(t){t!=this._tipOffX&&(this._tipOffX=t,this.resetTipPos())}),__getset(0,t,"tipOffY",function(){return this._tipOffY},function(t){t!=this._tipOffY&&(this._tipOffY=t,this.resetTipPos())}),i}(Button),HtmlDiv$1=function(t){function e(){this._$5__text=null,e.__super.call(this),this.destroyChildren()}__class(e,"ui.controls.HtmlDiv",t,"HtmlDiv$1");var i=e.prototype;return i.styleChanged=function(){this._$5__text&&(this.innerHTML=this._$5__text)},__getset(0,i,"valign",function(){return this.style.valign},function(t){this.style.valign=t,Laya.timer.callLater(this,this.styleChanged)}),__getset(0,i,"innerHTML",function(){return this._$5__text},function(t){try{Laya.superSet(HTMLDivElement,this,"innerHTML",t+"")}catch(t){Laya.superSet(HTMLDivElement,this,"innerHTML","")}this._$5__text=t}),__getset(0,i,"color",function(){return this.style.color},t.prototype._$set_color),__getset(0,i,"font",function(){return this.style.font},function(t){this.style.font=t,this.style.fontFamily=t,Laya.timer.callLater(this,this.styleChanged)}),__getset(0,i,"leading",function(){return this.style.leading},function(t){this.style.leading=t,Laya.timer.callLater(this,this.styleChanged)}),__getset(0,i,"fontSize",function(){return this.style.fontSize},function(t){this.style.fontSize=t,Laya.timer.callLater(this,this.styleChanged)}),__getset(0,i,"align",function(){return this.style.align},function(t){this.style.align=t,Laya.timer.callLater(this,this.styleChanged)}),e}(HTMLDivElement),FontClip=function(e){function i(t,e){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,i.__super.call(this),t&&(this.skin=t),e&&(this.sheet=e)}__class(i,"laya.ui.FontClip",e);var t=i.prototype;return t.createChildren=function(){this._bitmap=new AutoBitmap,this.on("loaded",this,this._onClipLoaded)},t._onClipLoaded=function(){this.callLater(this.changeValue)},t.changeValue=function(){var t;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),t=this._sources[0]))){var e="horizontal"===this._direction;e?(this._wordsW=this._valueArr.length*(t.sourceWidth+this.spaceX),this._wordsH=t.sourceHeight):(this._wordsW=t.sourceWidth,this._wordsH=(t.sourceHeight+this.spaceY)*this._valueArr.length);var i=0;if(this._width)switch(this._align){case"center":i=.5*(this._width-this._wordsW);break;case"right":i=this._width-this._wordsW;break;default:i=0}for(var n=0,s=this._valueArr.length;n<s;n++){var o=this._indexMap[this._valueArr.charAt(n)];this.sources[o]&&(t=this.sources[o],e?this.graphics.drawTexture(t,i+n*(t.sourceWidth+this.spaceX),0,t.sourceWidth,t.sourceHeight):this.graphics.drawTexture(t,0+i,n*(t.sourceHeight+this.spaceY),t.sourceWidth,t.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},t.destroy=function(t){void 0===t&&(t=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),e.prototype.destroy.call(this,t)},__getset(0,t,"sheet",function(){return this._sheet},function(t){t+="";var e=(this._sheet=t).split(" ");this._clipX=String(e[0]).length,this.clipY=e.length,this._indexMap={};for(var i=0;i<this._clipY;i++)for(var n=e[i].split(""),s=0,o=n.length;s<o;s++)this._indexMap[n[s]]=i*this._clipX+s}),__getset(0,t,"height",e.prototype._$get_height,function(t){Laya.superSet(Clip,this,"height",t),this.callLater(this.changeValue)}),__getset(0,t,"direction",function(){return this._direction},function(t){this._direction=t,this.callLater(this.changeValue)}),__getset(0,t,"value",function(){return this._valueArr?this._valueArr:""},function(t){t+="",this._valueArr=t,this.callLater(this.changeValue)}),__getset(0,t,"width",e.prototype._$get_width,function(t){Laya.superSet(Clip,this,"width",t),this.callLater(this.changeValue)}),__getset(0,t,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,"horizontal"===this._direction&&this.callLater(this.changeValue)}),__getset(0,t,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),__getset(0,t,"align",function(){return this._align},function(t){this._align=t,this.callLater(this.changeValue)}),__getset(0,t,"measureWidth",function(){return this._wordsW}),__getset(0,t,"measureHeight",function(){return this._wordsH}),i}(Clip),HScrollBar=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.HScrollBar",t),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.slider.isVertical=!1},e}(ScrollBar),HSlider=function(t){function e(t){e.__super.call(this,t),this.isVertical=!1}return __class(e,"laya.ui.HSlider",Slider),e}(),VScrollBar=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.VScrollBar",ScrollBar),e}(),TextInput=function(e){function i(t){this._bg=null,this._skin=null,i.__super.call(this),void 0===t&&(t=""),this.text=t,this.skin=this.skin}__class(i,"laya.ui.TextInput",e);var t=i.prototype;return t.preinitialize=function(){this.mouseEnabled=!0},t.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._bg&&this._bg.destroy(),this._bg=null},t.createChildren=function(){this.addChild(this._tf=new Input),this._tf.padding=Styles.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus),this._tf.on("compositionstart",this,this._onCompositionStart),this._tf.on("compositionend",this,this._onCompositionEnd)},t._onCompositionStart=function(){this.event("compositionstart",this)},t._onCompositionEnd=function(){this.event("compositionend",this)},t._onFocus=function(){this.event("focus",this)},t._onBlur=function(){this.event("blur",this)},t._onInput=function(){this.event("input",this)},t._onEnter=function(){this.event("enter",this)},t.initialize=function(){this.width=128,this.height=22},t.select=function(){this._tf.select()},t.setSelection=function(t,e){this._tf.setSelection(t,e)},__getset(0,t,"text",e.prototype._$get_text,function(t){this._tf.text!=t&&(t+="",this._tf.text=t,this.event("change"))}),__getset(0,t,"bg",function(){return this._bg},function(t){this.graphics=this._bg=t}),__getset(0,t,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(t){this._tf.inputElementYAdjuster=t}),__getset(0,t,"multiline",function(){return this._tf.multiline},function(t){this._tf.multiline=t}),__getset(0,t,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._bg||(this.graphics=this._bg=new AutoBitmap),this._bg.source=Loader.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),__getset(0,t,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(t){this._bg||(this.graphics=this._bg=new AutoBitmap),this._bg.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,t,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(t){this._tf.inputElementXAdjuster=t}),__getset(0,t,"width",e.prototype._$get_width,function(t){Laya.superSet(Label,this,"width",t),this._bg&&(this._bg.width=t)}),__getset(0,t,"height",e.prototype._$get_height,function(t){Laya.superSet(Label,this,"height",t),this._bg&&(this._bg.height=t)}),__getset(0,t,"editable",function(){return this._tf.editable},function(t){this._tf.editable=t}),__getset(0,t,"restrict",function(){return this._tf.restrict},function(t){this._tf.restrict=t}),__getset(0,t,"prompt",function(){return this._tf.prompt},function(t){this._tf.prompt=t}),__getset(0,t,"promptColor",function(){return this._tf.promptColor},function(t){this._tf.promptColor=t}),__getset(0,t,"maxChars",function(){return this._tf.maxChars},function(t){this._tf.maxChars=t}),__getset(0,t,"focus",function(){return this._tf.focus},function(t){this._tf.focus=t}),__getset(0,t,"type",function(){return this._tf.type},function(t){this._tf.type=t}),__getset(0,t,"asPassword",function(){return this._tf.asPassword},function(t){this._tf.asPassword=t}),i}(Label),VSlider=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.VSlider",Slider),e}(),HTMLClipElement=function(_super){function HTMLClipElement(){this.URI=null,this._href=null,this._text=HTMLClipElement._EMPTYTEXT,HTMLClipElement.__super.call(this),this.setStyle(new CSSStyle(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0,this.style.block=!0,this.autoPlay=!0,this.interval=120}__class(HTMLClipElement,"ui.controls.HTMLClipElement",_super);var __proto=HTMLClipElement.prototype;return __proto.loadComplete=function(t,e){_super.prototype.loadComplete.call(this,t,e),this.parent&&this.parent._layoutLater()},__proto._addToLayout=function(t){!this._style.absolute&&t.push(this)},__proto.appendChild=function(t){return this.addChild(t)},__proto._getWords=function(){var t=this._text.text;if(!t||0===t.length)return null;var e,i=this._text.words;if(i&&i.length===t.length)return i;null===i&&(this._text.words=i=[]),i.length=t.length;for(var n=this.style,s=n.font,o=0,a=t.length;o<a;o++){e=Utils.measureText(t[o],s);var r=i[o]=new HTMLChar(t[o],e.width,e.height,n);if(this.href){var l=new Sprite;this.addChild(l),r.setSprite(l)}}return i},__proto.showLinkSprite=function(){var t=this._text.words;if(t)for(var e,i,n=[],s=0;s<t.length;s++)i=t[s],(e=new Sprite).graphics.drawRect(0,0,i.width,i.height,"#ff0000"),e.width=i.width,e.height=i.height,this.addChild(e),n.push(e)},__proto._layoutLater=function(){var t=this.style;512&t._type||(t.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&t.block?(Layout.later(this),t._type|=512):this.parent&&this.parent._layoutLater())},__proto._setAttributes=function(t,e){switch(t){case"style":return void this.style.cssText(e);case"class":return void(this.className=e)}laya.display.Sprite.prototype._setAttributes.call(this,t,e)},__proto.updateHref=function(){if(null!=this._href){var t=this._getWords();if(t)for(var e,i,n=0;n<t.length;n++)if(i=(e=t[n]).getSprite()){var s=e.height-1;i.graphics.drawLine(0,s,e.width,s,e._getCSSStyle().color),i.size(e.width,e.height),i.on("click",this,this.onLinkHandler)}}},__proto.onLinkHandler=function(t){switch(t.type){case"click":Laya.stage.event("link",[this.href])}},__proto.formatURL=function(t){return URL.formatURL(t,this.URI?this.URI.path:null)},__getset(0,__proto,"href",function(){return this._href},function(t){null!=(this._href=t)&&this.updateHref()}),__getset(0,__proto,"color",null,function(t){this.style.color=t}),__getset(0,__proto,"onClick",null,function(value){var fn;eval("fn=function(event){"+value+";}"),this.on("click",this,fn)}),__getset(0,__proto,"id",null,function(t){HTMLDocument.document.setElementById(t,this)}),__getset(0,__proto,"innerTEXT",function(){return this._text.text},function(t){this.text=t}),__getset(0,__proto,"style",function(){return this._style}),__getset(0,__proto,"text",function(){return this._text.text},function(t){this._text==HTMLClipElement._EMPTYTEXT?this._text={text:t,words:null}:(this._text.text=t,this._text.words&&(this._text.words.length=0)),this._renderType|=2048,this.repaint(),this.updateHref()}),__getset(0,__proto,"parent",_super.prototype._$get_parent,function(t){if(t instanceof laya.html.dom.HTMLElement){var e=t;this.URI||(this.URI=e.URI),this.style.inherit(e.style)}Laya.superSet(Clip,this,"parent",t)}),__getset(0,__proto,"className",null,function(t){this.style.attrs(HTMLDocument.document.styleSheets["."+t])}),HTMLClipElement._EMPTYTEXT={text:null,words:null},HTMLClipElement}(Clip),GraphicAnimation=function(e){var R;function I(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,I.__super.call(this)}__class(I,"laya.utils.GraphicAnimation",e);var t=I.prototype;return t._parseNodeList=function(t){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[t.compId]=t.props,t.compId&&this._nodeList.push(t.compId);var e=t.child;if(e){var i=0,n=e.length;for(i=0;i<n;i++)this._parseNodeList(e[i])}},t._calGraphicData=function(t){var e;if(this._setUp(null,t),this._createGraphicData(),this._nodeIDAniDic)for(e in this._nodeIDAniDic)this._nodeIDAniDic[e]=null},t._createGraphicData=function(){var t,e=[],i=0,n=this.count,s=this._animationNewFrames;for(s||(s=[]),i=0;i<n;i++)!s[i]&&t||(t=this._createFrameGraphic(i)),e.push(t);this._gList=e},t._createFrameGraphic=function(t){var e=RunDriver.createGraphics();return I._rootMatrix||(I._rootMatrix=new Matrix),this._updateNodeGraphic(this._rootNode,t,I._rootMatrix,e),e},t._updateNodeGraphic=function(t,e,i,n,s){var o;void 0===s&&(s=1);var a,r,l,h=(o=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId])).alpha*s;if(!(h<.01)&&(o.resultTransform||(o.resultTransform=Matrix.create()),a=o.resultTransform,Matrix.mul(o.transform,i,a),o.skin&&(r=this._getTextureByUrl(o.skin))&&(a._checkTransform()?(n.drawTexture(r,0,0,o.width,o.height,a,h),o.resultTransform=null):n.drawTexture(r,a.tx,a.ty,o.width,o.height,null,h)),l=t.child)){var c,u=0;for(c=l.length,u=0;u<c;u++)this._updateNodeGraphic(l[u],e,a,n,h)}},t._updateNoChilds=function(t,e){if(t.skin){var i=this._getTextureByUrl(t.skin);if(i){var n=t.transform;n._checkTransform();!n.bTransform?e.drawTexture(i,n.tx,n.ty,t.width,t.height,null,t.alpha):e.drawTexture(i,0,0,t.width,t.height,n.clone(),t.alpha)}}},t._updateNodeGraphic2=function(t,e,i){var n;if(n=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId]),t.child){var s=n.transform;s._checkTransform();var o,a;a=(o=!s.bTransform)&&(0!=s.tx||0!=s.ty);var r,l,h;if((r=s.bTransform||1!=n.alpha)&&i.save(),1!=n.alpha&&i.alpha(n.alpha),o?a&&i.translate(s.tx,s.ty):i.transform(s.clone()),l=t.child,n.skin&&(h=this._getTextureByUrl(n.skin))&&i.drawTexture(h,0,0,n.width,n.height),l){var c,u=0;for(c=l.length,u=0;u<c;u++)this._updateNodeGraphic2(l[u],e,i)}r?i.restore():o?a&&i.translate(-s.tx,-s.ty):i.transform(s.clone().invert())}else this._updateNoChilds(n,i)},t._calculateNodeKeyFrames=function(t){e.prototype._calculateNodeKeyFrames.call(this,t),this._nodeIDAniDic[t.target]=t},t.getNodeDataByID=function(t){return this._nodeIDAniDic[t]},t._getParams=function(t,e,i,n){var s=I._temParam;s.length=e.length;var o=0,a=e.length;for(o=0;o<a;o++)s[o]=this._getObjVar(t,e[o][0],i,e[o][1],n);return s},t._getObjVar=function(t,e,i,n,s){if(t.hasOwnProperty(e)){var o=t[e];if(i>=o.length&&(i=o.length-1),null!=t[e][i])return t[e][i]}return s.hasOwnProperty(e)?s[e]:n},t._getNodeGraphicData=function(t,e,i){i||(i=R.create()),i.transform?i.transform.identity():i.transform=Matrix.create();var n=this.getNodeDataByID(t);if(!n)return i;var s,o,a=n.frames,r=this._getParams(a,I._drawTextureCmd,e,this._nodeDefaultProps[t]),l=r[0],h=NaN,c=NaN,u=r[5],d=r[6],_=r[13],f=r[14],p=r[7],g=r[8],m=r[9],b=r[11],y=r[12];h=r[3],c=r[4],0!=h&&0!=c||(l=null),-1==h&&(h=0),-1==c&&(c=0),i.skin=l,i.width=h,i.height=c,l&&((s=this._getTextureByUrl(l))?(h||(h=s.sourceWidth),c||(c=s.sourceHeight)):console.warn("lost skin:",l,",you may load pics first")),i.alpha=r[10],o=i.transform,0!=_&&(u=_*h),0!=f&&(d=f*c),0==u&&0==d||o.translate(-u,-d);var v=null;if(m||1!==p||1!==g||b||y){(v=I._tempMt).identity(),v.bTransform=!0;var w=.0174532922222222*(m-b),x=.0174532922222222*(m+y),C=Math.cos(x),S=Math.sin(x),T=Math.sin(w),L=Math.cos(w);v.a=p*C,v.b=p*S,v.c=-g*T,v.d=g*L,v.tx=v.ty=0}return v&&(o=Matrix.mul(o,v,o)),o.translate(r[1],r[2]),i},t._getTextureByUrl=function(t){return Loader.getRes(t)},t.setAniData=function(t,e){if(t.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t,this._parseNodeList(t);var i,n={},s=[],o=t.animations,a=0,r=o.length;for(a=0;a<r;a++)if(i=o[a],this._labels=null,(!e||e==i.name)&&i){try{this._calGraphicData(i)}catch(t){console.warn("parse animation fail:"+i.name+",empty animation created"),this._gList=[]}var l={};l.interval=1e3/i.frameRate,l.frames=this._gList,l.labels=this._labels,l.name=i.name,s.push(l),n[i.name]=l}this.animationList=s,this.animationDic=n}I._temParam.length=0},t.parseByData=function(t){var e,i;e=t.nodeRoot,i=t.aniO,delete t.nodeRoot,delete t.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e,this._parseNodeList(e),this._labels=null;try{this._calGraphicData(i)}catch(t){console.warn("parse animation fail:"+i.name+",empty animation created"),this._gList=[]}var n=t;return n.interval=1e3/i.frameRate,n.frames=this._gList,n.labels=this._labels,n.name=i.name,n},t.setUpAniData=function(t){if(t.animations){var e,i={},n=[],s=t.animations,o=0,a=s.length;for(o=0;o<a;o++)if(e=s[o]){var r={};r.name=e.name,r.aniO=e,r.nodeRoot=t,n.push(r),i[e.name]=r}this.animationList=n,this.animationDic=i}},t._clear=function(){var t,e;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(t in this._nodeGDic)(e=this._nodeGDic[t])&&e.recover();this._nodeGDic=null},I.parseAnimationByData=function(t){var e;return I._I||(I._I=new I),e=I._I.parseByData(t),I._I._clear(),e},I.parseAnimationData=function(t){var e;return I._I||(I._I=new I),I._I.setUpAniData(t),(e={}).animationList=I._I.animationList,e.animationDic=I._I.animationDic,I._I._clear(),e},I._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],I._temParam=[],I._I=null,I._rootMatrix=null,__static(I,["_tempMt",function(){return this._tempMt=new Matrix}]),I.__init$=function(){R=function(){function t(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return __class(t,""),t.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),Pool.recover("GraphicNode",this)},t.create=function(){return Pool.getItemByClass("GraphicNode",t)},t}()},I}(FrameAnimation),WebGLImage=function(t){function o(t,e,i,n){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===i&&(i=6408),void 0===n&&(n=!0),o.__super.call(this,t,e),this._format=i,this._mipmap=n,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof t)this._url=t,this._src=t,this._image=new Browser.window.Image,e&&(e.onload&&(this.onload=e.onload),e.onerror&&(this.onerror=e.onerror),e.onCreate&&e.onCreate(this)),this._image.crossOrigin=t&&0==t.indexOf("data:")?null:"",t&&(this._image.src=t);else if(t instanceof ArrayBuffer){this._src=e,this._url=this._src;var s=new Byte(t);s.readUTFBytes(4),s.readUTFBytes(2),s.getInt16();s.endian="bigEndian",this._w=s.getInt16(),this._h=s.getInt16();s.getInt16(),s.getInt16();this._image=new Uint8Array(t,s.pos),this._format=WebGL.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,AtlasResourceManager.enabled&&this._w<AtlasResourceManager.atlasLimitWidth&&this._h<AtlasResourceManager.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else this._src=e,this._url=this._src,this._image=t.source||t,this.onresize();this._$5__enableMerageInAtlas=!0}__class(o,"laya.webgl.resource.WebGLImage",HTMLImage);var e=o.prototype;return Laya.imps(e,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),e._init_=function(t,e){},e._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var t=WebGL.mainContext,e=this._source=t.createTexture(),i=WebGLContext.curBindTexTarget,n=WebGLContext.curBindTexValue;if(WebGLContext.bindTexture(t,3553,e),Render.isConchWebGL)switch(this._format){case 6408:t.texImage2DEx(!0,3553,0,this._format,6408,5121,this._image);break;case WebGL.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:t.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image)}else{switch(t.pixelStorei(37441,!0),this._format){case 6408:t.texImage2D(3553,0,this._format,6408,5121,this._image);break;case WebGL.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:t.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image)}t.pixelStorei(37441,!1)}var s=this.minFifter,o=this.magFifter,a=this.repeat?10497:33071,r=Arith.isPOT(this._w,this._h);r?(this.mipmap?-1!==s||(s=9987):-1!==s||(s=9729),-1!==o||(o=9729),t.texParameteri(3553,10241,s),t.texParameteri(3553,10240,o),t.texParameteri(3553,10242,a),t.texParameteri(3553,10243,a),this.mipmap&&t.generateMipmap(3553)):(-1!==s||(s=9729),-1!==o||(o=9729),t.texParameteri(3553,10241,s),t.texParameteri(3553,10240,o),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),i&&n&&WebGLContext.bindTexture(t,i,n),this._image.onload=null,this._image=null,r&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._recreateLock=!1},e.recreateResource=function(){var t=this;if(null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var e=this;this._image=new Browser.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(e._needReleaseAgain)return e._needReleaseAgain=!1,e._image.onload=null,void(e._image=null);e._allowMerageInAtlas&&e._enableMerageInAtlas?(t.memorySize=0,t._recreateLock=!1):e._createWebGlTexture(),e.completeCreate()},this._image.src=this._src}},e.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},e.onresize=function(){this._w=this._image.width,this._h=this._image.height,AtlasResourceManager.enabled&&this._w<AtlasResourceManager.atlasLimitWidth&&this._h<AtlasResourceManager.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},e.clearAtlasSource=function(){this._image=null},__getset(0,e,"format",function(){return this._format}),__getset(0,e,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(t){this._$5__enableMerageInAtlas=t}),__getset(0,e,"mipmap",function(){return this._mipmap}),__getset(0,e,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),__getset(0,e,"atlasSource",function(){return this._image}),__getset(0,e,"onload",null,function(t){var e=this;this._onload=t,this._image&&(this._image.onload=null!=this._onload?function(){e.onresize(),e._onload()}:null)}),__getset(0,e,"onerror",null,function(t){var e=this;this._onerror=t,this._image&&(this._image.onerror=null!=this._onerror?function(){e._onerror()}:null)}),o}(),LoadingIosViewUI=function(t){function e(){this.big_bg=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login.LoadingIosViewUI",View),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:720,top:0,height:1280,centerY:0,centerX:0},child:[{type:"Image",props:{var:"big_bg",centerY:0,centerX:0}},{type:"Image",props:{y:100,x:2,skin:"ui/layouts/login/dl_text_cqbdd1.png"}},{type:"Image",props:{y:101,x:362,skin:"ui/layouts/login/dl_text_cqbdd2.png"}}]},e}(),LoadingViewUI=function(t){function e(){this.big_bg=null,this.g_circle=null,this.mc_loading=null,this.mc_Mask=null,this.txt_yellowLoader=null,this.mc_Point=null,this.txt_des2=null,this.link_Refresh=null,this.txt_des3=null,this.txt_broadcast=null,this.green_pro=null,this.g_bar_bg=null,this.g_bar=null,this.mc_Mask_g=null,this.mc_Point_g=null,this.txt_LoadingTF=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login.LoadingViewUI",View),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:720,top:0,height:1280},child:[{type:"Image",props:{y:0,var:"big_bg",centerX:0}},{type:"Image",props:{y:841,x:140,visible:!1,var:"g_circle",skin:"ui/layouts/login/loading_img_jz.png",pivotY:12,pivotX:12,left:128,bottom:427}},{type:"Image",props:{width:608,skin:"ui/layouts/login/ty_jdt_jdbg.png",sizeGrid:"0,30,0,30",centerX:0,bottom:340}},{type:"Image",props:{visible:!1,skin:"ui/layouts/login/loading_text.png",right:120,left:159,bottom:424}},{type:"Image",props:{width:566,var:"mc_loading",skin:"ui/layouts/login/ty_jdt_jd.png",sizeGrid:"0,13,0,13",centerX:0,bottom:345},child:[{type:"Image",props:{y:0,x:0,width:566,var:"mc_Mask",renderType:"mask",height:25},child:[{type:"Rect",props:{y:0,x:0,width:566,lineWidth:1,height:25,fillColor:"#ff0000"}}]}]},{type:"Label",props:{width:516,var:"txt_yellowLoader",mouseEnabled:!1,height:20,fontSize:20,font:"SimHei",color:"#e0d6c1",centerX:0,bottom:344,align:"center"}},{type:"Image",props:{x:63,var:"mc_Point",skin:"ui/layouts/login/loading_img_gx.png",bottom:333}},{type:"Label",props:{x:220,visible:!1,var:"txt_des2",text:"如果无法进入游戏，",mouseThrough:!1,mouseEnabled:!1,fontSize:20,font:"SimHei",color:"#e0d6c1",bottom:388,align:"right"}},{type:"Label",props:{x:399,visible:!1,var:"link_Refresh",underline:!0,text:"请点击刷新",mouseEnabled:!0,fontSize:20,font:"SimHei",color:"#23b11f",bottom:388}},{type:"Sprite",props:{y:1045,x:50},child:[{type:"Label",props:{y:0,x:30,wordWrap:!0,width:558,var:"txt_des3",text:"审批文号：新广出审【2015】976号 \\n著作权人：江苏极光网络技术有限公司 \\n著作权登记号：2014SR092419 \\n网络游戏出版物号：ISBN 978-7-89988-407-2  \\n出版单位名称：上海三七玩网络科技有限公司 ",leading:20,height:109,fontSize:20,font:"SimHei",color:"#5f5952",align:"center"}}]},{type:"Label",props:{y:886,x:360,var:"txt_broadcast",text:"宣传语",fontSize:24,font:"SimHei",color:"#e6d80d",centerX:0,bottom:394}},{type:"Image",props:{skin:"ui/layouts/login/yk_ty_bthw.png",left:48,bottom:400}},{type:"Image",props:{skin:"ui/layouts/login/yk_ty_bthw.png",scaleX:-1,right:160,bottom:400}},{type:"Box",props:{x:25,var:"green_pro",top:958,centerX:0},child:[{type:"Image",props:{y:0,width:608,var:"g_bar_bg",skin:"ui/layouts/login/ty_jdt_jdbg.png",sizeGrid:"0,30,0,30"}},{type:"Image",props:{y:5,x:21,width:566,var:"g_bar",skin:"ui/layouts/login/loading_jd_ls.png",sizeGrid:"0,13,0,13"},child:[{type:"Image",props:{y:0,x:0,width:566,var:"mc_Mask_g",renderType:"mask",height:25},child:[{type:"Rect",props:{y:0,x:0,width:566,lineWidth:1,height:25,fillColor:"#ff0000"}}]}]},{type:"Image",props:{y:-6,x:8,var:"mc_Point_g",skin:"ui/layouts/login/loading_img_gxls.png"}},{type:"Label",props:{y:48,width:300,var:"txt_LoadingTF",text:"（加载必要配置）",mouseEnabled:!1,fontSize:20,font:"SimHei",color:"#e0d6c1",centerX:0,align:"center"}}]}]},e}(),LoginAlertUI=function(t){function e(){this.closeBtn=null,this.contentTxt=null,this.confirmBtn=null,this.title_txt=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login.LoginAlertUI",View),e.prototype.createChildren=function(){View.regComponent("Text",Text),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:600,height:470,centerY:0,centerX:0},child:[{type:"Image",props:{y:20,x:20,top:0,skin:"ui/layouts/login/ty_jm_db.jpg",sizeGrid:"94,76,90,80",right:0,left:0,bottom:0}},{type:"Image",props:{y:20,x:20,top:0,skin:"ui/layouts/login/ty_jm_bk.png",sizeGrid:"8,8,8,8",right:0,left:0,bottom:0}},{type:"Image",props:{y:3,x:5,top:3,skin:"ui/layouts/login/ty_jm_btdk.jpg",sizeGrid:"0,118,0,120",right:5,left:5,height:62}},{type:"Image",props:{y:102,width:540,skin:"ui/layouts/login/ty_jm_rqk.png",sizeGrid:"42,48,40,48",height:246,centerX:0}},{type:"Button",props:{y:0,x:531,var:"closeBtn",stateNum:2,skin:"ui/layouts/login/ty_btn_gb.png"}},{type:"HtmlDiv",props:{y:124,x:50,width:500,var:"contentTxt",innerHTML:"htmlText",height:200,fontSize:24,font:"黑体",color:"#f4efef",align:"center"}},{type:"TipButton",props:{y:366,var:"confirmBtn",stateNum:2,skin:"ui/layouts/login/ty_bt_bq.png",selected:!0,renderType:"render",labelSize:24,labelFont:"黑体",labelColors:"#b8a26e,#fff9b4",label:"确定",centerX:0}},{type:"Box",props:{y:10,x:10,centerX:0,bottom:-41},child:[{type:"Image",props:{y:4,x:0,skin:"ui/layouts/login/comp_symbol_line.png"}},{type:"Image",props:{y:4,x:541,skin:"ui/layouts/login/comp_symbol_line.png",scaleX:-1}},{type:"Text",props:{y:0,x:-18,width:580,text:"点击空白区域关闭窗口",height:27,fontSize:24,font:"SimHei",color:"#90877b",align:"center"}}]},{type:"HtmlDiv",props:{y:19,x:200,width:200,var:"title_txt",innerHTML:"系统提示",height:30,fontSize:24,font:"黑体",color:"#e3dcc2",align:"center"}}]},e}(),LoginBaseUI=function(t){function e(){this.lable1=null,this.Lable2=null,this.Lable3=null,this.txt_Arthor=null,this.txt_ServerId=null,this.txt_Platform=null,this.btn_Login=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login.LoginBaseUI",View),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:640,height:500},child:[{type:"Label",props:{y:168,x:222,var:"lable1",text:"账号:",fontSize:20,color:"#f6f4f4"}},{type:"Label",props:{y:209,x:187,var:"Lable2",text:"服务器Id:",fontSize:20,color:"#f6f4f4"}},{type:"Label",props:{y:254,x:223,var:"Lable3",text:"平台:",fontSize:20,color:"#f6f4f4"}},{type:"TextInput",props:{y:163,x:284,width:168,var:"txt_Arthor",text:"TextInput",skin:"ui/layouts/login/charNameBg.png",height:30,fontSize:20,color:"#f8f3f3",align:"center"}},{type:"TextInput",props:{y:205,x:284,width:167,var:"txt_ServerId",text:"TextInput",skin:"ui/layouts/login/charNameBg.png",height:30,fontSize:20,color:"#f8f3f3",align:"center"}},{type:"TextInput",props:{y:251,x:285,width:166,var:"txt_Platform",text:"TextInput",skin:"ui/layouts/login/charNameBg.png",height:30,fontSize:20,color:"#f8f3f3",align:"center"}},{type:"Button",props:{y:303,x:262,width:144,var:"btn_Login",stateNum:2,skin:"ui/layouts/login/login_btn_area.png",labelSize:20,labelColors:"#fff9e0,#ccc7b3",label:"登陆",height:40}}]},e}(),LoginConcealUI=function(t){function e(){this.btn_close=null,this.panel_div=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login.LoginConcealUI",View),e.prototype.createChildren=function(){View.regComponent("Text",Text),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:640,mouseThrough:!1,height:870,centerY:0,centerX:0},child:[{type:"Image",props:{y:10,x:10,top:0,skin:"ui/layouts/login/ty_jm_db.jpg",sizeGrid:"94,76,90,80",right:0,left:0,bottom:0}},{type:"Image",props:{y:10,x:10,top:0,skin:"ui/layouts/login/ty_jm_bk.png",sizeGrid:"8,8,8,8",right:0,left:0,bottom:0}},{type:"Image",props:{y:13,x:15,top:3,skin:"ui/layouts/login/ty_jm_btdk.jpg",sizeGrid:"0,118,0,120",right:5,left:5,height:62}},{type:"Image",props:{y:102,width:580,skin:"ui/layouts/login/ty_jm_rqk.png",sizeGrid:"42,48,40,48",height:730,centerX:0}},{type:"Image",props:{y:18,skin:"ui/layouts/login/dl_text_yszc.png",centerX:0}},{type:"Button",props:{y:1,x:569,var:"btn_close",stateNum:2,skin:"ui/layouts/login/ty_btn_gb.png"}},{type:"Box",props:{centerX:0,bottom:-41},child:[{type:"Image",props:{y:4,x:0,skin:"ui/layouts/login/comp_symbol_line.png"}},{type:"Image",props:{y:4,x:541,skin:"ui/layouts/login/comp_symbol_line.png",scaleX:-1}},{type:"Text",props:{y:0,x:-18,width:580,text:"点击空白区域关闭窗口",height:27,fontSize:24,font:"SimHei",color:"#90877b",align:"center"}}]},{type:"Panel",props:{y:125,x:52,width:538,var:"panel_div",height:689}}]},e}(),LoginNoticeUI=function(t){function e(){this.btn_close=null,this.panel_div=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login.LoginNoticeUI",View),e.prototype.createChildren=function(){View.regComponent("Text",Text),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:640,mouseThrough:!1,height:870,centerY:0,centerX:0},child:[{type:"Image",props:{y:10,x:10,top:0,skin:"ui/layouts/login/ty_jm_db.jpg",sizeGrid:"94,76,90,80",right:0,left:0,bottom:0}},{type:"Image",props:{y:10,x:10,top:0,skin:"ui/layouts/login/ty_jm_bk.png",sizeGrid:"8,8,8,8",right:0,left:0,bottom:0}},{type:"Image",props:{y:13,x:15,top:3,skin:"ui/layouts/login/ty_jm_btdk.jpg",sizeGrid:"0,118,0,120",right:5,left:5,height:62}},{type:"Image",props:{y:102,width:580,skin:"ui/layouts/login/ty_jm_rqk.png",sizeGrid:"42,48,40,48",height:730,centerX:0}},{type:"Image",props:{y:18,skin:"ui/layouts/login/dl_text_gg.png",centerX:0}},{type:"Button",props:{y:1,x:569,var:"btn_close",stateNum:2,skin:"ui/layouts/login/ty_btn_gb.png"}},{type:"Box",props:{centerX:0,bottom:-41},child:[{type:"Image",props:{y:4,x:0,skin:"ui/layouts/login/comp_symbol_line.png"}},{type:"Image",props:{y:4,x:541,skin:"ui/layouts/login/comp_symbol_line.png",scaleX:-1}},{type:"Text",props:{y:0,x:-18,width:580,text:"点击空白区域关闭窗口",height:27,fontSize:24,font:"SimHei",color:"#90877b",align:"center"}}]},{type:"Panel",props:{y:125,x:52,width:538,var:"panel_div",height:689}}]},e}(),LoginViewUI=function(t){function e(){this.bg=null,this.serverBg=null,this.btn_Gonggao=null,this.btn_Start=null,this.txt_ServerName=null,this.notice=null,this.mc_Effect=null,this.age18=null,this.selectedTxtBg=null,this.txt_ChangeServer=null,this.imgYs=null,this.txtYs=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login.LoginViewUI",View),e.prototype.createChildren=function(){View.regComponent("Text",Text),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{y:0,x:0,width:720,top:0,height:1280,centerX:0},child:[{type:"Image",props:{y:0,var:"bg",centerX:0}},{type:"Image",props:{y:60,x:590,top:60,skin:"ui/layouts/login/ty_btn_dk.png",right:40}},{type:"Image",props:{y:844,var:"serverBg",centerX:0}},{type:"Button",props:{y:58,x:586,var:"btn_Gonggao",stateNum:2,skin:"ui/layouts/login/dl_btn_gg.png"}},{type:"Button",props:{y:986,x:199,var:"btn_Start",stateNum:2,skin:"ui/layouts/login/cj_btn_jryx.png"}},{type:"Label",props:{y:883,x:72,width:247,var:"txt_ServerName",text:"s9999",height:32,fontSize:32,font:"SimHei",color:"#e0d6c1",align:"right"}},{type:"Sprite",props:{y:1138,x:52},child:[{type:"Label",props:{y:0,x:30,wordWrap:!0,width:558,var:"notice",text:"抵制不良游戏，拒绝盗版游戏，注意自我保护，谨防受骗上当适度游戏益脑，沉迷游戏伤身，合理安排时间，享受健康生活为了您的健康，请合理控制游戏时间",leading:20,height:109,fontSize:20,font:"SimHei",color:"#5f5952",align:"center"}}]},{type:"Clip",props:{y:955,x:160,var:"mc_Effect",skin:"ui/layouts/login/btn_effect.png",renderType:"render",mouseThrough:!0,mouseEnabled:!1,index:0,clipY:5,clipX:2}},{type:"Label",props:{wordWrap:!0,width:324,var:"age18",top:49,text:"本游戏适合18周岁以上用户使用",left:10,leading:20,height:27,fontSize:20,font:"SimHei",color:"#bbb1a5",align:"left"}},{type:"Image",props:{y:864,x:377,width:151,var:"selectedTxtBg",skin:"ui/layouts/login/comp_img_2.png",height:68,alpha:0}},{type:"Text",props:{y:882,x:386,var:"txt_ChangeServer",underline:!0,text:"点击换区",fontSize:32,font:"SimHei",color:"#23b11f"}},{type:"Image",props:{y:41,x:295,width:231,var:"imgYs",skin:"ui/layouts/login/comp_img_2.png",height:72,alpha:0}},{type:"Label",props:{wordWrap:!0,width:204,var:"txtYs",underline:!0,top:49,left:303,leading:20,height:27,fontSize:20,font:"SimHei",color:"#13c521",align:"left"}}]},e}(),ServerIdListUIUI=function(t){function e(){this.btn_Close=null,this.list_ServerList=null,this.list_Servers=null,this.mc_ListMask=null,this.mc_Mask=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login.ServerIdListUIUI",View),e.prototype.createChildren=function(){View.regComponent("Text",Text),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:720,mouseThrough:!0,height:1280,centerY:0,centerX:0},child:[{type:"Image",props:{y:188,x:45,width:631,skin:"ui/layouts/login/ty_jm_db.jpg",sizeGrid:"0,0,0,0",height:862}},{type:"Image",props:{y:179,x:41,width:640,skin:"ui/layouts/login/ty_jm_bk.png",sizeGrid:"8,8,8,8",height:870}},{type:"Image",props:{y:184,x:47,width:627,skin:"ui/layouts/login/ty_jm_btdk.jpg",sizeGrid:"0,73,0,73",height:59}},{type:"Image",props:{y:276,x:324,width:332,skin:"ui/layouts/login/ty_jm_rqk.png",sizeGrid:"5,5,5,5",height:730}},{type:"Image",props:{y:221,x:58,width:250,skin:"ui/layouts/login/boss_tab_dk.png",sizeGrid:"144,0,133,0",height:790}},{type:"Button",props:{y:178,x:607,width:73,var:"btn_Close",stateNum:2,skin:"ui/layouts/login/ty_btn_gb.png",height:73}},{type:"List",props:{y:293,x:89,width:193,var:"list_ServerList",spaceY:14,repeatY:1,repeatX:1,height:686},child:[{type:"TipButton",props:{y:0,x:0,stateNum:2,skin:"ui/layouts/login/ty_bt_bq.png",selected:!1,renderType:"render",labelSize:24,labelFont:"黑体",labelColors:"#b8a26e,#fff9b4",label:"最近登录"}}]},{type:"List",props:{y:288,x:341,width:300,var:"list_Servers",spaceY:6,height:701}},{type:"Image",props:{y:962,x:87,width:192,var:"mc_ListMask",skin:"ui/layouts/login/comp_mc_mask.png",height:21}},{type:"Image",props:{y:957,x:327,width:325,var:"mc_Mask",skin:"ui/layouts/login/comp_mc_mask.png",height:47}},{type:"Box",props:{width:658,height:24,centerX:-8,bottom:192},child:[{type:"Image",props:{y:5,x:67,skin:"ui/layouts/login/comp_symbol_line.png"}},{type:"Image",props:{y:5,x:609,skin:"ui/layouts/login/comp_symbol_line.png",scaleX:-1}},{type:"Text",props:{y:0,x:217,text:"点击空白区域关闭窗口",fontSize:24,font:"黑体",color:"#e0d6c1"}}]},{type:"Image",props:{y:197,x:268,skin:"ui/layouts/login/dl_text_xzqf.png"}}]},e}(),ServerItemUI=function(t){function e(){this.mc_new=null,this.mc_stop=null,this.mc_busy=null,this.txt_Name=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login.ServerItemUI",View),e.prototype.createChildren=function(){View.regComponent("Text",Text),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:294,height:64},child:[{type:"Texture",props:{y:0,x:0,width:296,skin:"ui/layouts/login/phb_db_no2.png",height:64}},{type:"Image",props:{y:0,x:240,var:"mc_new",skin:"ui/layouts/login/dl_jb_x.png"}},{type:"Image",props:{y:0,x:240,var:"mc_stop",skin:"ui/layouts/login/dl_jb_w.png"}},{type:"Image",props:{y:0,x:240,var:"mc_busy",skin:"ui/layouts/login/dl_jb_h.png"}},{type:"Text",props:{y:18,x:35,width:226,var:"txt_Name",text:"传奇520区",height:33,fontSize:24,font:"黑体",color:"#e6d80d",align:"center"}}]},e}(),WelcomeViewUI=function(t){function e(){this.bg=null,this.loadingBox=null,this.loading_sub_bg=null,this.img_circle=null,this.subLab=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login.WelcomeViewUI",View),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:720,height:1280,centerY:0,centerX:0},child:[{type:"Image",props:{y:0,var:"bg",centerX:0}},{type:"Box",props:{y:907,width:186,var:"loadingBox",height:206,centerX:0},child:[{type:"Image",props:{x:66,width:186,var:"loading_sub_bg",skin:"ui/layouts/login/dl_db.png",sizeGrid:"12,12,12,12",height:206,centerY:0,centerX:0}},{type:"Image",props:{x:98,var:"img_circle",top:16,skin:"ui/layouts/login/loading_jzq_yq.png",pivotY:60,pivotX:60,centerX:5}},{type:"Label",props:{x:24,var:"subLab",text:"请求区服信息",fontSize:24,font:"SimHei",color:"#e0d6c1",bottom:20}}]}]},e}(),_RoleCreateBase2UI=function(t){function e(){this.g_bg=null,this.g_title=null,this.g_font=null,this.btn_GetName=null,this.btn_Login=null,this.btn_3_1=null,this.btn_3_2=null,this.btn_1_1=null,this.btn_1_2=null,this.btn_2_1=null,this.btn_2_2=null,this.g_select=null,this.g_job=null,this.txt_tipenter=null,this.txt_Name=null,this.mc_Effect=null,this.invented_box=null,this.g_bold_d=null,this.g_bold_up=null,this.redTip=null,this.g_redBg=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login._RoleCreateBase2UI",View),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:720,layoutEnabled:!0,hitTestPrior:!1,height:1280},child:[{type:"Image",props:{var:"g_bg",skin:"ui/layouts/createrole2/cj_bg2.jpg",scaleY:2.5,scaleX:2.5,centerY:0,centerX:0}},{type:"Image",props:{var:"g_title",top:16,skin:"ui/layouts/createrole2/cj_title_cjjs.png",centerX:0}},{type:"Image",props:{var:"g_font",skin:"ui/layouts/createrole2/cj_text_jsmc.png",left:158,bottom:244}},{type:"Image",props:{y:995,x:275,width:249,skin:"ui/layouts/createrole2/ty_jm_szbk.png",sizeGrid:"10,10,10,10",left:275,height:50,bottom:235}},{type:"Button",props:{y:989,x:510,var:"btn_GetName",stateNum:2,skin:"ui/layouts/createrole2/cj_btn_tz.png",right:158,bottom:233}},{type:"Button",props:{var:"btn_Login",stateNum:2,skin:"ui/layouts/createrole2/cj_btn_jryx.png",centerX:0,bottom:117}},{type:"Button",props:{y:602,x:81,var:"btn_3_1",stateNum:1,skin:"ui/layouts/createrole2/cj_img_3_1.png",name:"3_1",anchorY:.5,anchorX:.5},child:[{type:"Poly",props:{y:-188,x:44,renderType:"hit",points:"-32.76265504525628,208.91619175326855,81.86399400524562,202.37504683402028,112.5009366804046,755.8216560509553,13.695766204571008,767.2131884600974",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"}}]},{type:"Button",props:{y:596,x:192,var:"btn_3_2",stateNum:1,skin:"ui/layouts/createrole2/cj_img_3_2.png",name:"3_2",anchorY:.5,anchorX:.5},child:[{type:"Poly",props:{y:-190,x:45,renderType:"hit",points:"-33.399597720415514,205.73147837747229,82.50093668040483,203.0119895091795,97.5901086549269,755.9872611464967,-1.5781191457474506,760.1049082053203",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"}}]},{type:"Button",props:{y:593,x:302,var:"btn_1_1",stateNum:1,skin:"ui/layouts/createrole2/cj_img_1_1.png",name:"1_1",anchorY:.5,anchorX:.5},child:[{type:"Poly",props:{y:-191,x:48,renderType:"hit",points:"-34.744889200236116,204.5746990795373,79.50473548649433,204.2601686528772,79.91188719485837,753.2955658990688,-18.775571375046894,757.7255598466726",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"}}]},{type:"Button",props:{y:593,x:419,var:"btn_1_2",stateNum:1,skin:"ui/layouts/createrole2/cj_img_1_2.png",name:"1_2",anchorY:.5,anchorX:.5},child:[{type:"Poly",props:{y:-193,x:46,renderType:"hit",points:"-32.12571237009706,206.36842105263162,83.13787935556411,210.01835893593113,67.91494941925811,754.6053010067803,-31.527163731734767,754.4743349569127",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"}}]},{type:"Button",props:{y:596,x:529,var:"btn_2_1",stateNum:1,skin:"ui/layouts/createrole2/cj_img_2_1.png",name:"2_1",anchorY:.5,anchorX:.5},child:[{type:"Poly",props:{y:-193,x:59,renderType:"hit",points:"-28.940998994300912,204.4575930271539,84.41176470588255,208.10753091045336,55.81303859123267,755.8216560509554,-44.9029599100787,753.2004496065942",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"}}]},{type:"Button",props:{y:602,x:639,var:"btn_2_2",stateNum:1,skin:"ui/layouts/createrole2/cj_img_2_2.png",name:"2_2",anchorY:.5,anchorX:.5},child:[{type:"Poly",props:{y:-196,x:71,renderType:"hit",points:"-28.304056319141637,206.36842105263162,86.32259273136026,213.20307231172723,41.800299737729404,771.7452229299363,-57.00487073810414,759.5698763581867",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"}}]},{type:"Image",props:{y:601,x:302,var:"g_select",skin:"ui/layouts/createrole2/cj_s_1_1.png",scaleY:1.1,scaleX:1.1,anchorY:.5,anchorX:.5}},{type:"Image",props:{y:647,x:20,var:"g_job",skin:"ui/layouts/createrole2/cj_job_1.png"}},{type:"Label",props:{y:1183,x:60,width:600,text:"只需体验两分钟，你就会跟我一样，爱上这款游戏！",fontSize:24,font:"SimHei",color:"#e0d6c1",centerX:0,cacheAsBitmap:!0,cacheAs:"bitmap",bottom:73,align:"center"}},{type:"Label",props:{y:1103,x:532,width:212,var:"txt_tipenter",text:"25秒后进入游戏",fontSize:24,font:"SimHei",color:"#90877b",centerX:278,bottom:153}},{type:"TextInput",props:{y:998,x:282,width:234,var:"txt_Name",text:"请输入名字",sizeGrid:"11,8,10,11",left:282,height:44,fontSize:26,font:"SimHei",color:"#90877b",bottom:238,align:"center"}},{type:"Clip",props:{x:160,var:"mc_Effect",renderType:"render",mouseThrough:!0,mouseEnabled:!1,index:0,clipY:5,clipX:2,bottom:88}},{type:"Box",props:{y:137,x:154,width:412,var:"invented_box",height:116,centerX:0}},{type:"Image",props:{y:208,x:154,width:412,var:"g_bold_d",skin:"ui/layouts/createrole2/ty_jm_xlzz.png",sizeGrid:"24,12,0,10",height:45}},{type:"Image",props:{y:182,x:153,width:412,var:"g_bold_up",skin:"ui/layouts/createrole2/ty_jm_xlzz.png",sizeGrid:"14,9,0,10",scaleY:-1,height:45}},{type:"Box",props:{y:957,x:287,var:"redTip"},child:[{type:"Image",props:{y:0,x:0,var:"g_redBg",skin:"ui/layouts/createrole2/xt_xx_bg.png"}},{type:"Label",props:{y:2,x:0,width:230,text:"角色名最多六个字",fontSize:24,font:"SimHei",color:"#ff2e24",align:"center"}}]}]},e}(),_RoleCreateBase3UI=function(t){function e(){this.g_bg=null,this.img_role=null,this.btn_job_1=null,this.btn_job_2=null,this.btn_job_3=null,this.btn_sex_1=null,this.btn_sex_2=null,this.btn_Login=null,this.btn_wp_1=null,this.btn_wp_2=null,this.btn_wp_3=null,this.txt_Name=null,this.btn_GetName=null,this.invented_box=null,this.txt_tipenter=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login._RoleCreateBase3UI",View),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:720,hitTestPrior:!1,height:1280,centerY:0,centerX:0},child:[{type:"Image",props:{width:768,var:"g_bg",skin:"ui/layouts/createrole3/cj_bg.jpg",height:1280,centerY:0,centerX:0}},{type:"Image",props:{var:"img_role",top:220,skin:"ui/layouts/createrole3/cj_js_3_2.png",scaleY:1.1,scaleX:1.1,centerX:1}},{type:"Button",props:{y:155,x:643,var:"btn_job_1",stateNum:1,skin:"ui/layouts/createrole3/cj_zydk_11.png",pivotY:55,pivotX:55,labelSize:28,labelPadding:"45,15,46,66",labelFont:"SimHei",labelColors:"#ff450c,#1bb32d"}},{type:"Button",props:{y:278,x:643,var:"btn_job_2",stateNum:1,skin:"ui/layouts/createrole3/cj_zydk_21.png",pivotY:55,pivotX:55,labelSize:24,labelPadding:"46,6,47,65",labelFont:"SimHei",labelColors:"#405e90"}},{type:"Button",props:{y:401,x:643,var:"btn_job_3",stateNum:1,skin:"ui/layouts/createrole3/cj_zydk_31.png",pivotY:55,pivotX:55,labelSize:24,labelPadding:"46,6,47,65",labelFont:"SimHei",labelColors:"#33761f"}},{type:"Button",props:{y:483,x:609,var:"btn_sex_1",stateNum:1,skin:"ui/layouts/createrole3/cj_btn_m.png"}},{type:"Button",props:{y:483,x:609,var:"btn_sex_2",stateNum:1,skin:"ui/layouts/createrole3/cj_btn_w.png"}},{type:"Button",props:{var:"btn_Login",stateNum:1,skin:"ui/layouts/createrole3/cj_btn_jryx.png",centerX:0,bottom:118}},{type:"Button",props:{y:70,x:569,var:"btn_wp_1",stateNum:1,skin:"ui/layouts/createrole3/cj_btn_zy_selected.png",mouseEnabled:!1}},{type:"Button",props:{y:193,x:569,var:"btn_wp_2",stateNum:1,skin:"ui/layouts/createrole3/cj_btn_zy_selected.png",mouseEnabled:!1}},{type:"Button",props:{y:316,x:569,var:"btn_wp_3",stateNum:1,skin:"ui/layouts/createrole3/cj_btn_zy_selected.png",mouseEnabled:!1}},{type:"Image",props:{width:249,skin:"ui/layouts/createrole3/ty_jm_szbk.png",sizeGrid:"20,25,20,25",height:60,centerX:0,bottom:248}},{type:"TextInput",props:{width:234,var:"txt_Name",text:"请输入名字",sizeGrid:"11,8,10,11",maxChars:7,height:44,fontSize:26,font:"SimHei",color:"#90877b",centerX:0,bottom:257,align:"center"}},{type:"Button",props:{var:"btn_GetName",stateNum:1,skin:"ui/layouts/createrole3/cj_btn_tz.png",centerX:153,bottom:244}},{type:"Box",props:{y:50,x:10,var:"invented_box"}},{type:"Label",props:{y:1202,text:"只需体验两分钟，你就会跟我一样，爱上这款游戏！",fontSize:30,color:"#ffbb00",centerX:0,align:"center"}},{type:"Label",props:{width:195,var:"txt_tipenter",text:"25秒后进入游戏",height:30,fontSize:24,color:"#ffffff",centerX:232,bottom:142,align:"left"}},{type:"Image",props:{top:17,skin:"ui/layouts/createrole3/createrole_text.png",left:39}}]},e}(),_RoleCreateBaseUI=function(t){function e(){this.g_bg=null,this.img_role=null,this.btn_job_1=null,this.btn_job_2=null,this.btn_job_3=null,this.btn_sex_1=null,this.btn_sex_2=null,this.btn_Login=null,this.btn_wp_3=null,this.btn_wp_2=null,this.btn_wp_1=null,this.txt_Name=null,this.btn_GetName=null,this.invented_box=null,this.txt_tipenter=null,this.mc_Effect=null,e.__super.call(this)}return __class(e,"gateModule.layouts.login._RoleCreateBaseUI",View),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:720,hitTestPrior:!1,height:1280,centerY:0,centerX:0},child:[{type:"Image",props:{width:720,var:"g_bg",height:1280,centerY:0,centerX:0}},{type:"Image",props:{x:22,var:"img_role",top:40}},{type:"Button",props:{var:"btn_job_1",top:507,stateNum:1,skin:"ui/layouts/createrole1/cj_zydk_1.png",right:0,labelSize:28,labelPadding:"45,15,46,66",labelFont:"SimHei",labelColors:"#ff450c,#1bb32d",label:"战士"}},{type:"Button",props:{var:"btn_job_2",top:632,stateNum:1,skin:"ui/layouts/createrole1/cj_zydk_ct.png",right:0,labelSize:24,labelPadding:"46,6,47,65",labelFont:"SimHei",labelColors:"#405e90",label:"法师"}},{type:"Button",props:{var:"btn_job_3",top:757,stateNum:1,skin:"ui/layouts/createrole1/cj_zydk_ct.png",right:0,labelSize:24,labelPadding:"46,6,47,65",labelFont:"SimHei",labelColors:"#33761f",label:"道士"}},{type:"Button",props:{var:"btn_sex_1",stateNum:2,skin:"ui/layouts/createrole1/cj_btn_m.png",left:247,bottom:303}},{type:"Button",props:{var:"btn_sex_2",stateNum:2,skin:"ui/layouts/createrole1/cj_btn_w.png",right:247,bottom:303}},{type:"Button",props:{var:"btn_Login",stateNum:2,skin:"ui/layouts/createrole1/cj_btn_jryx.png",centerX:0,bottom:116}},{type:"Button",props:{var:"btn_wp_3",top:772,stateNum:2,skin:"ui/layouts/createrole1/cj_btn_zy_ds.png",right:51,mouseEnabled:!1}},{type:"Button",props:{var:"btn_wp_2",top:647,stateNum:2,skin:"ui/layouts/createrole1/cj_btn_zy_fs.png",right:51,mouseEnabled:!1}},{type:"Button",props:{var:"btn_wp_1",top:522,stateNum:2,skin:"ui/layouts/createrole1/cj_btn_zy_zs.png",right:67,mouseEnabled:!1}},{type:"Image",props:{x:234,width:249,skin:"ui/layouts/createrole1/ty_jm_szbk.png",sizeGrid:"10,9,9,8",height:50,bottom:234}},{type:"TextInput",props:{x:240,width:234,var:"txt_Name",text:"请输入名字",sizeGrid:"11,8,10,11",maxChars:7,height:44,fontSize:26,font:"SimHei",color:"#90877b",bottom:237,align:"center"}},{type:"Button",props:{x:471,var:"btn_GetName",stateNum:2,skin:"ui/layouts/createrole1/cj_btn_tz.png",bottom:232}},{type:"Box",props:{y:50,x:10,var:"invented_box"}},{type:"Label",props:{y:1174,text:"只需体验两分钟，你就会跟我一样，爱上这款游戏！",fontSize:30,color:"#ffbb00",centerX:0,align:"center"}},{type:"Label",props:{width:195,var:"txt_tipenter",text:"25秒后进入游戏",height:30,fontSize:24,color:"#ffffff",centerX:260,bottom:150,align:"left"}},{type:"Clip",props:{x:160,var:"mc_Effect",renderType:"render",mouseThrough:!0,mouseEnabled:!1,index:0,clipY:5,clipX:2,bottom:88}}]},e}(),FirstLoadingView=function(e){function t(){this._Image=null,this.txt_Des=null,this.txt_Loading=null,this.isInit=!1,t.__super.call(this)}__class(t,"gateModule.modules.login.views.FirstLoadingView",e);var i=t.prototype;return i.inteUI=function(){this.isInit||(this.width=720,this.height=450,this.txt_Des=new Text,this.txt_Des.fontSize=24,this.txt_Des.color="#c8c4c4",this.txt_Des.width=720,this.txt_Des.align="center",this.txt_Des.text="首次加载时间稍长，请耐心等待...",this.txt_Des.pos(0,220),this.addChild(this.txt_Des),this.txt_Loading=new Text,this.txt_Loading.fontSize=24,this.txt_Loading.color="#f48d09",this.txt_Loading.width=720,this.txt_Loading.align="center",this.txt_Loading.text="正在开启新纪元，热血未冷再战巅峰",this.txt_Loading.pos(0,275),this.addChild(this.txt_Loading),this.centerX=0,this.centerY=0,this.isInit=!0)},i.isShowing=function(){return null!=this.parent},i.show=function(){this.resize(),this.inteUI(),Laya.stage.addChildAt(this,0)},i.setLoading=function(t,e){void 0===e&&(e="");this.graphics.clear(),""!=e&&(this.txt_Loading.text="正在开启传奇新纪元，热血未冷再战传奇")},i.resize=function(){this.pos((Laya.stage.width-this.width)/2,(Laya.stage.height-this.height)/2)},i.destroy=function(t){void 0===t&&(t=!0),this.txt_Des.text="",this.txt_Loading.text="",this.txt_Des.visible=!1,this.removeChild(this.txt_Des),this.txt_Des=null,this.parent&&this.parent.removeChild(this),e.prototype.destroy.call(this,t)},t}(View),ListItemUI=function(t){function e(){e.__super.call(this)}__class(e,"laya.debug.ui.debugui.comps.ListItemUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:244,height:19},child:[{type:"Clip",props:{y:-1,skin:"comp/clip_selectBox.png",clipY:2,height:19,name:"selectBox",left:2,right:2,x:0}},{type:"Label",props:{x:25,text:"render",color:"#dcea36",width:77,height:17,name:"label",y:2,fontSize:12}},{type:"Clip",props:{skin:"comp/clip_tree_arrow.png",clipY:2,name:"arrow",x:8,y:4,mouseEnabled:!1}}]}}]),e}(),RankListItemUI=function(t){function e(){e.__super.call(this)}__class(e,"laya.debug.ui.debugui.comps.RankListItemUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{y:-1,skin:"comp/clip_selectBox.png",clipY:2,height:19,name:"selectBox",left:0,right:0,x:0},type:"Clip"},{props:{text:"render",color:"#a0a0a0",height:15,name:"label",y:2,left:11,right:5,fontSize:12,x:11,width:163},type:"Label"}],props:{width:179,height:19}}}]),e}(),DebugPanelUI=function(t){function e(){this.bg=null,this.minBtn=null,this.treePanel=null,this.selectWhenClick=null,this.profilePanel=null,this.resizeBtn=null,this.mouseAnalyseBtn=null,this.dragIcon=null,this.clearBtn=null,this.selectPanel=null,this.tab=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.DebugPanelUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.view.nodeInfo.nodetree.MinBtnComp",MinBtnComp),View.regComponent("laya.debug.view.nodeInfo.views.NodeTreeView",NodeTreeView),View.regComponent("laya.debug.view.nodeInfo.nodetree.Profile",Profile),View.regComponent("laya.debug.view.nodeInfo.views.SelectInfosView",SelectInfosView)},__static(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:260,height:400},child:[{type:"Image",props:{x:205,y:254,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"}},{type:"Image",props:{y:0,skin:"view/bg_top.png",left:0,right:0}},{type:"MinBtnComp",props:{y:-3,var:"minBtn",runtime:"laya.debug.view.nodeInfo.nodetree.MinBtnComp",right:-3,x:207}},{type:"NodeTree",props:{left:0,right:0,top:32,bottom:0,name:"节点树",var:"treePanel",runtime:"laya.debug.view.nodeInfo.views.NodeTreeView"}},{type:"CheckBox",props:{x:8,y:9,skin:"view/clickselect.png",toolTip:"点击选取",var:"selectWhenClick",mouseEnabled:!0,width:14,height:14}},{type:"Profile",props:{name:"性能",top:32,right:0,left:0,bottom:0,var:"profilePanel",runtime:"laya.debug.view.nodeInfo.nodetree.Profile"}},{type:"Button",props:{x:169,y:247,skin:"view/resize.png",right:2,bottom:2,name:"resizeBtn",var:"resizeBtn",stateNum:3}},{type:"Clip",props:{y:9,skin:"view/clickanalyse.png",var:"mouseAnalyseBtn",toolTip:"拖动选取",left:33,x:33,clipY:3}},{type:"Clip",props:{y:0,skin:"view/clickanalyse.png",var:"dragIcon",x:33,clipY:3}},{type:"Button",props:{y:7,skin:"view/res.png",stateNum:2,toolTip:"清除边框",var:"clearBtn",right:34,x:184}},{type:"SelectInfos",props:{top:32,left:0,right:0,bottom:0,name:"选中",var:"selectPanel",runtime:"laya.debug.view.nodeInfo.views.SelectInfosView"}},{type:"Tab",props:{x:59,y:0,name:"tab",var:"tab",selectedIndex:0},child:[{type:"Button",props:{skin:"view/tab_panel.png",label:"节点",width:42,height:32,name:"item0",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:42,skin:"view/tab_panel.png",label:"查询",width:42,height:32,name:"item1",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:84,skin:"view/tab_panel.png",label:"性能",width:42,height:32,name:"item2",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}}]}]}}]),e}(),FindNodeSmallUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.typeSelect=null,this.findTxt=null,this.findBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.FindNodeSmallUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:185,y:234,skin:"view/bg_tool.png",left:0,right:0,top:0,bottom:0,var:"bg"},type:"Image"},{props:{x:185,y:15,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2},type:"Button"},{props:{x:6,y:4,text:"查找对象",width:67,height:20,color:"#288edf",var:"title"},type:"Label"},{props:{x:60,y:81,skin:"comp/combobox.png",labels:"name,class",width:63,height:21,var:"typeSelect",sizeGrid:"5,35,5,5",labelColors:"#a0a0a0,#fffff,#ffffff#fffff"},type:"ComboBox"},{props:{x:27,y:83,text:"类型",width:27,height:20,color:"#288edf",align:"right"},type:"Label"},{props:{x:7,y:40,text:"包含内容",width:47,height:20,color:"#288edf",align:"right"},type:"Label"},{props:{x:60,y:37,skin:"comp/textinput.png",text:"Sprite",width:164,height:22,var:"findTxt",sizeGrid:"5,5,5,5",color:"#a0a0a0"},type:"TextInput"},{props:{x:158,y:79,skin:"comp/button.png",label:"查找",width:65,height:23,var:"findBtn",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},type:"Button"}],props:{base64pic:!0,width:233,height:120}}}]),e}(),FindNodeUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.typeSelect=null,this.findTxt=null,this.result=null,this.findBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.FindNodeUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.RankListItem",RankListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:185,y:234,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:185,y:15,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2},type:"Button"},{props:{x:6,y:4,text:"查找对象",width:67,height:20,color:"#88ef19",var:"title"},type:"Label"},{props:{x:52,y:75,skin:"comp/combobox.png",labels:"name,class",width:63,height:21,var:"typeSelect",sizeGrid:"5,35,5,5",labelColors:"#a0a0a0,#fffff,#ffffff#fffff"},type:"ComboBox"},{props:{x:10,y:77,text:"类型",width:27,height:20,color:"#88ef19",align:"right"},type:"Label"},{props:{x:7,y:34,text:"包含内容",width:47,height:20,color:"#88ef19",align:"right"},type:"Label"},{props:{x:59,y:31,skin:"comp/textinput.png",text:"Sprite",width:131,height:22,var:"findTxt",sizeGrid:"5,5,5,5",color:"#a0a0a0"},type:"TextInput"},{type:"List",child:[{type:"RankListItem",props:{y:30,left:5,right:5,name:"render",x:30,runtime:"laya.debug.uicomps.RankListItem"}}],props:{x:6,y:106,width:188,height:180,vScrollBarSkin:"comp/vscroll.png",var:"result"}},{props:{x:125,y:73,skin:"comp/button.png",label:"查找",width:65,height:23,var:"findBtn",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},type:"Button"}],props:{width:200,height:300,base64pic:!0}}}]),e}(),MinBtnCompUI=function(t){function e(){this.minBtn=null,this.maxUI=null,this.bg=null,this.maxBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.MinBtnCompUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:7,y:8,skin:"comp/minBtn.png",stateNum:"3",var:"minBtn",width:22,height:20,toolTip:"最小化"},type:"Button"},{type:"Box",child:[{props:{x:0,y:0,skin:"view/bg_panel.png",var:"bg",width:36,height:36,sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:6,y:8,skin:"view/zoom_out.png",stateNum:"2",var:"maxBtn"},type:"Button"}],props:{var:"maxUI"}}],props:{width:36,height:36,base64pic:!0}}}]),e}(),NodeListPanelUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.itemList=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.NodeListPanelUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.RankListItem",RankListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:235,y:284,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:204,y:32,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2,visible:!0},type:"Button"},{props:{x:10,y:6,text:"节点信息",width:147,height:16,color:"#288edf",var:"title"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png",var:"itemList",left:2,right:2,top:26,bottom:0,repeatX:1,x:20}}],props:{width:200,height:300}}}]),e}(),NodeToolUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.tarTxt=null,this.freshBtn=null,this.mouseAnalyseBtn=null,this.dragIcon=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.NodeToolUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:200,height:341},child:[{type:"Image",props:{x:195,y:244,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"}},{type:"Label",props:{x:9,y:5,text:"当前选中对象",width:67,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:195,y:25,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2}},{type:"Label",props:{x:10,y:25,text:"当前对象",width:67,height:16,color:"#a0a0a0",var:"tarTxt"}},{type:"Button",props:{x:15,y:65,skin:"comp/button.png",label:"父链",width:39,height:23,mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:66,y:65,skin:"comp/button.png",label:"子",width:35,height:23,mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:112,y:65,skin:"comp/button.png",label:"兄弟",width:49,height:23,mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:13,y:117,skin:"comp/button.png",label:"Enable链",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:100,y:117,skin:"comp/button.png",label:"Size链",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Label",props:{x:14,y:97,text:"节点链信息",width:67,height:16,color:"#a0a0a0"}},{type:"Label",props:{x:15,y:45,text:"对象选取",width:67,height:16,color:"#a0a0a0"}},{type:"Label",props:{x:16,y:145,text:"节点显示",width:67,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:13,y:164,skin:"comp/button.png",label:"隐藏旁支",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:100,y:164,skin:"comp/button.png",label:"隐藏兄弟",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:13,y:197,skin:"comp/button.png",label:"隐藏子",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:99,y:197,skin:"comp/button.png",label:"恢复",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Label",props:{x:15,y:228,text:"其他",width:67,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:12,y:247,skin:"comp/button.png",label:"节点树定位",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:99,y:247,skin:"comp/button.png",label:"显示边框",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Label",props:{x:12,y:315,text:"Alt+A分析鼠标能否够点中对象",width:173,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:156,y:1,skin:"view/refresh2.png",var:"freshBtn",left:156,toolTip:"recache节点"}},{type:"Button",props:{x:12,y:279,skin:"comp/button.png",label:"输出到控制台",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:99,y:279,skin:"comp/button.png",label:"显示切换",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Clip",props:{y:44,skin:"view/clickanalyse.png",var:"mouseAnalyseBtn",toolTip:"拖动到对象上方判断是否能够点中",left:84,x:84,clipY:3}},{type:"Clip",props:{y:35,skin:"view/clickanalyse.png",var:"dragIcon",x:94,clipY:3}}]}}]),e}(),NodeTreeSettingUI=function(t){function e(){this.bg=null,this.showTxt=null,this.okBtn=null,this.closeBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.NodeTreeSettingUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:0,y:0,skin:"view/bg_panel.png",left:0,top:0,bottom:0,right:0,var:"bg",width:200,height:300,sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:9,y:7,text:"要显示的属性",width:76,height:16,color:"#ffffff",align:"left"},type:"Label"},{props:{x:6,y:29,skin:"comp/textinput.png",text:"x\\ny\\nwidth\\nheight",width:188,height:230,multiline:!0,var:"showTxt",color:"#a0a0a0",sizeGrid:"5,5,5,5"},type:"TextInput"},{props:{x:57,y:269,skin:"comp/button.png",label:"确定",var:"okBtn",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},type:"Button"},{props:{x:175,y:5,skin:"view/btn_close.png",var:"closeBtn"},type:"Button"}],props:{base64pic:!0,width:200,height:300}}}]),e}(),NodeTreeUI=function(t){function e(){this.nodeTree=null,this.controlBar=null,this.settingBtn=null,this.freshBtn=null,this.fliterTxt=null,this.closeBtn=null,this.ifShowProps=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.NodeTreeUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.TreeListItem",TreeListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",props:{width:200,height:260,base64pic:!0},child:[{type:"Image",props:{x:-22,y:-47,skin:"view/bg_panel.png",width:211,height:206,left:0,right:0,top:0,bottom:0,sizeGrid:"5,5,5,5"}},{props:{y:0,skin:"view/bg_tool.png",left:0,right:0},type:"Image"},{type:"Tree",props:{x:0,scrollBarSkin:"comp/vscroll.png",width:195,height:229,var:"nodeTree",left:0,right:0,top:38,bottom:20},child:[{type:"ListItem",props:{y:0,name:"render",left:0,right:0,runtime:"laya.debug.uicomps.TreeListItem"}}]},{type:"Box",props:{x:3,y:5,var:"controlBar",left:3,right:3,top:5,height:23},child:[{type:"Button",props:{x:6,skin:"view/setting.png",stateNum:3,var:"settingBtn",toolTip:"设置显示的属性",y:6}},{type:"Button",props:{y:6,skin:"view/refresh.png",var:"freshBtn",left:30,toolTip:"刷新数据"}},{type:"TextInput",props:{y:0,skin:"view/bg_top.png",height:22,var:"fliterTxt",left:53,right:0,color:"#a0a0a0"}},{type:"Button",props:{x:172,y:2,skin:"view/btn_close.png",var:"closeBtn",right:1,visible:!1}}]},{props:{y:243,skin:"comp/checkbox.png",label:"显示属性",var:"ifShowProps",bottom:3,selected:!0,visible:!0,x:2,width:70,height:14,labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"},type:"CheckBox"}]}}]),e}(),ObjectCreateUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.itemList=null,this.freshBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.ObjectCreateUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.RankListItem",RankListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:215,y:264,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:184,y:12,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2,visible:!1},type:"Button"},{props:{x:11,y:5,text:"对象创建统计",width:83,height:16,color:"#288edf"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{y:0,left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png",var:"itemList",top:26,bottom:5,left:5,right:5,repeatX:1}},{props:{y:1,skin:"view/refresh2.png",var:"freshBtn",toolTip:"刷新数据",right:1,x:178},type:"Button"}],props:{width:200,height:300,base64pic:!0}}}]),e}(),ObjectInfoUI=function(t){function e(){this.bg=null,this.title=null,this.showTxt=null,this.closeBtn=null,this.autoUpdate=null,this.settingBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.ObjectInfoUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:-1,y:0,skin:"view/bg_panel.png",left:-1,right:1,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:7,y:5,text:"对象类型",width:67,height:20,color:"#ffffff",var:"title",left:7,right:6},type:"Label"},{props:{x:2,skin:"comp/textinput.png",text:"属性内容",width:196,height:228,left:2,right:2,var:"showTxt",top:25,bottom:20,editable:!1,multiline:!0,sizeGrid:"5,5,5,5",color:"#a0a0a0"},type:"TextArea"},{props:{x:178,y:4,skin:"view/btn_close.png",var:"closeBtn",top:4,right:2},type:"Button"},{props:{skin:"comp/checkbox.png",label:"自动刷新属性",var:"autoUpdate",bottom:2,x:3,labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"},type:"CheckBox"},{props:{x:164,skin:"view/setting.png",stateNum:"3",var:"settingBtn",y:6,top:6,right:24,toolTip:"设置显示属性"},type:"Button"},{props:{x:179,y:257,skin:"view/resize.png",right:2,bottom:2,name:"resizeBtn",stateNum:3},type:"Button"}],props:{base64pic:!0,width:200,height:200}}}]),e}(),OutPutUI=function(t){function e(){this.bg=null,this.txt=null,this.closeBtn=null,this.clearBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.OutPutUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",props:{width:300,height:200,base64pic:!0},child:[{type:"Image",props:{x:205,y:254,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"}},{type:"Label",props:{skin:"comp/textarea.png",text:"TextArea",color:"#a0a0a0",var:"txt",left:5,right:5,top:22,bottom:5,mouseEnabled:!0,sizeGrid:"3,3,3,3"}},{type:"Button",props:{x:185,y:15,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2}},{props:{x:253,y:1,skin:"view/re.png",stateNum:"2",var:"clearBtn",right:25},type:"Button"},{props:{x:169,y:247,skin:"view/resize.png",right:2,bottom:2,name:"resizeBtn",stateNum:3},type:"Button"}]}}]),e}(),ProfileUI=function(t){function e(){this.renderPanel=null,this.createPanel=null,this.cachePanel=null,this.tab=null,this.resPanel=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.ProfileUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.view.nodeInfo.views.RenderCostRankView",RenderCostRankView),View.regComponent("laya.debug.view.nodeInfo.views.ObjectCreateView",ObjectCreateView),View.regComponent("laya.debug.view.nodeInfo.views.CacheRankView",CacheRankView),View.regComponent("laya.debug.view.nodeInfo.views.ResRankView",ResRankView)},__static(e,["uiView",function(){return this.uiView={type:"View",props:{width:260,height:329,base64pic:!0},child:[{type:"Image",props:{y:0,skin:"view/bg_tool.png",right:0,left:0}},{type:"Rank",props:{var:"renderPanel",top:29,runtime:"laya.debug.view.nodeInfo.views.RenderCostRankView",right:0,name:"渲染用时",left:0,bottom:0}},{type:"ObjectCreate",props:{var:"createPanel",top:29,runtime:"laya.debug.view.nodeInfo.views.ObjectCreateView",right:0,name:"对象创建统计",left:0,bottom:0}},{type:"Rank",props:{x:10,var:"cachePanel",top:29,runtime:"laya.debug.view.nodeInfo.views.CacheRankView",right:0,name:"cache用时",left:0,bottom:0}},{type:"Tab",props:{y:9,x:7,width:191,var:"tab",selectedIndex:0,height:19},child:[{type:"CheckBox",props:{y:0,x:0,width:50,skin:"view/create.png",name:"item0",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:"  对象",height:17}},{type:"CheckBox",props:{y:0,x:55,width:50,skin:"view/rendertime.png",name:"item1",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:" 渲染",height:19}},{type:"CheckBox",props:{y:0,x:110,width:50,skin:"view/cache.png",name:"item2",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:" 重绘",height:16}},{type:"CheckBox",props:{y:0,x:165,width:50,skin:"view/cache.png",name:"item3",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:" 资源",height:16}}]},{type:"Rank",props:{y:40,x:50,var:"resPanel",top:29,runtime:"laya.debug.view.nodeInfo.views.ResRankView",right:0,name:"资源缓存",left:0,bottom:0}}]}}]),e}(),RankUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.itemList=null,this.autoUpdate=null,this.freshBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.RankUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.RankListItem",RankListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:225,y:274,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:194,y:22,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2,visible:!1},type:"Button"},{props:{x:8,y:5,text:"渲染用时表(3000ms)",width:109,height:16,color:"#288edf",var:"title"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png",var:"itemList",left:2,right:2,top:26,bottom:25,repeatX:1,x:10,y:10}},{props:{skin:"comp/checkbox.png",label:"自动刷新属性",var:"autoUpdate",bottom:3,selected:!1,visible:!0,left:2,labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"},type:"CheckBox"},{props:{y:1,skin:"view/refresh2.png",var:"freshBtn",toolTip:"刷新数据",right:1},type:"Button"}],props:{width:200,height:300}}}]),e}(),SelectInfosUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.selectList=null,this.findBtn=null,this.fliterTxt=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.SelectInfosUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.RankListItem",RankListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:205,y:254,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{skin:"view/btn_close.png",var:"closeBtn",top:32,visible:!1,right:2},type:"Button"},{props:{x:7,y:36,text:"当前选中列表",width:83,height:16,color:"#288edf"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png",var:"selectList",left:5,right:5,top:56,bottom:25,repeatX:1,x:20}},{props:{x:6,text:"Alt+V选取鼠标下的对象",width:189,height:16,color:"#a0a0a0",bottom:3},type:"Label"},{type:"Image",props:{y:0,skin:"view/bg_tool.png",left:0,right:0}},{type:"Clip",props:{y:6,skin:"view/search.png",clipY:2,var:"findBtn",right:5,toolTip:"查找",x:174}},{type:"TextInput",props:{y:6,skin:"view/bg_top.png",height:22,var:"fliterTxt",left:8,right:45,color:"#a0a0a0",x:8,width:147}}],props:{width:200,height:300,base64pic:!0}}}]),e}(),ToolBarUI=function(t){function e(){this.bg=null,this.treeBtn=null,this.findBtn=null,this.minBtn=null,this.selectWhenClick=null,this.clearBtn=null,this.rankBtn=null,this.nodeRankBtn=null,this.cacheBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.ToolBarUI",View);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.view.nodeInfo.nodetree.MinBtnComp",MinBtnComp)},__static(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:250,height:30},child:[{type:"Image",props:{x:195,y:244,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"}},{type:"Button",props:{x:2,y:6,skin:"view/save.png",stateNum:2,var:"treeBtn",toolTip:"节点树"}},{type:"Button",props:{x:25,y:6,skin:"view/save.png",stateNum:2,var:"findBtn",toolTip:"查找面板"}},{type:"MinBtnComp",props:{x:218,y:-3,var:"minBtn",runtime:"laya.debug.view.nodeInfo.nodetree.MinBtnComp"}},{type:"CheckBox",props:{x:124,y:8,skin:"comp/checkbox.png",label:"点击选取",var:"selectWhenClick",labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"}},{type:"Button",props:{x:193,y:5,skin:"view/res.png",stateNum:2,toolTip:"清除边框",var:"clearBtn"}},{type:"Button",props:{x:49,y:6,skin:"view/save.png",stateNum:2,var:"rankBtn",toolTip:"渲染用时排行"}},{type:"Button",props:{x:72,y:6,skin:"view/save.png",stateNum:2,var:"nodeRankBtn",toolTip:"创建对象排行"}},{type:"Button",props:{x:94,y:6,skin:"view/save.png",stateNum:2,var:"cacheBtn",toolTip:"cache对象"}}]}}]),e}(),ListBase=function(t){function e(){e.__super.call(this)}return __class(e,"laya.debug.uicomps.ListBase",t),__getset(0,e.prototype,"selectedIndex",t.prototype._$get_selectedIndex,function(t){if(this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(t)),this.selectEnable&&this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;(t<this._startIndex||t+e>this._startIndex+this.repeatX*this.repeatY)&&this.scrollTo(t)}}),e}(List),TreeBase=function(t){function e(){e.__super.call(this)}return __class(e,"laya.debug.uicomps.TreeBase",Tree),e.prototype.createChildren=function(){this.addChild(this._list=new ListBase),this._list.renderHandler=Handler.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},e}(),ConfigView=function(t){function o(){this._configJson=null,this._activeConfigJson=!1,this._compCaches={},this._isInvalidJsonData=!1,o.__super.call(this)}__class(o,"ui.controls.ConfigView",View);var e=o.prototype;return e._resetConfigView=function(){this._configJson=null,this._isInvalidJsonData=!1,this.clearTimer(this,this._updateConfigJson),this.once("display",this,this._onConfigViewDisplay)},e._onConfigViewDisplay=function(){this._invalidConfigJson()},e._invalidConfigJson=function(){this._isInvalidJsonData||(this._isInvalidJsonData=!0,this.callLater(this._updateConfigJson))},e._thisConfigJson=function(){return this._activeConfigJson?o.getJsonData(this._configJson):null},e._updateConfigJson=function(){var t=this._thisConfigJson()||o.EMPTY_OBJ;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var i=this._compCaches[e];if(null==i){var n=o.findComp(e,this);if(null==n)continue;i=this._compCaches[e]={comp:n,propCache:{},propList:[]}}var s=t[e];this._updateCompProps(i,s||o.EMPTY_OBJ)}for(e in this._compCaches)Object.prototype.hasOwnProperty.call(this._compCaches,e)&&(e in t||(i=this._compCaches[e],this._updateCompProps(i,o.EMPTY_OBJ)))},e._updateCompProps=function(t,e){this._isInvalidJsonData=!1;var i=t.comp,n=t.propCache,s=t.propList;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(!n.hasOwnProperty(o)){try{n[o]=i[o]}catch(t){n[o]=void 0}s.push(o)}try{i[o]=e[o]}catch(t){continue}}for(o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&!(o in e))try{i[o]=n[o]}catch(t){continue}},e.destroy=function(t){void 0===t&&(t=!0),this._configJson=null,this._compCaches=null,this._activeConfigJson=!1,this._isInvalidJsonData=!1,this.clearTimer(this,this._updateConfigJson)},__getset(0,e,"activeConfigJson",function(){return this._activeConfigJson},function(t){this._activeConfigJson!=t&&(this._activeConfigJson=t,this._invalidConfigJson())}),__getset(0,e,"configJson",function(){return this._configJson},function(t){this._configJson!=t&&(this._configJson=t,this._invalidConfigJson())}),o.findComp=function(t,e){if(!e)return null;for(var i=0;i<e.numChildren;i++){var n=e.getChildAt(i);if(n&&n.name==t)return n;if((n=o.findComp(t,n))&&n.name==t)return n}return null},o.getJsonData=function(t){if(!t)return null;try{var e=JSON.parse(t)}catch(t){return null}return e},o.EMPTY_OBJ={},o}(),ViewBase$1=function(t){function e(){e.__super.call(this),this.on("display",this,this.onAdd),this.on("undisplay",this,this.onRemove)}__class(e,"ui.ViewBase",View,"ViewBase$1");var i=e.prototype;return i.onAdd=function(t){this.stage.on("resize",this,this.onResize),this.onResize()},i.onRemove=function(t){this.stage.off("resize",this,this.onResize)},i.onResize=function(){},i.destoryImage=function(t){},e}(),HBox=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.HBox",t);var i=e.prototype;return i.sortItem=function(t){t&&t.sort(function(t,e){return t.x-e.x})},i.changeItems=function(){this._itemChanged=!1;for(var t=[],e=0,i=0,n=this.numChildren;i<n;i++){var s=this.getChildAt(i);s&&s.layoutEnabled&&(t.push(s),e=this._height?this._height:Math.max(e,s.height*s.scaleY))}this.sortItem(t);var o=0;for(i=0,n=t.length;i<n;i++)(s=t[i]).x=o,o+=s.width*s.scaleX+this._space,"top"==this._align?s.y=0:"middle"==this._align?s.y=.5*(e-s.height*s.scaleY):"bottom"==this._align&&(s.y=e-s.height*s.scaleY);this.changeSize()},__getset(0,i,"height",t.prototype._$get_height,function(t){this._height!=t&&(Laya.superSet(LayoutBox,this,"height",t),this.callLater(this.changeItems))}),e.NONE="none",e.TOP="top",e.MIDDLE="middle",e.BOTTOM="bottom",e}(LayoutBox),VBox=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.VBox",t);var i=e.prototype;return i.changeItems=function(){this._itemChanged=!1;for(var t=[],e=0,i=0,n=this.numChildren;i<n;i++){var s=this.getChildAt(i);s&&s.layoutEnabled&&(t.push(s),e=this._width?this._width:Math.max(e,s.width*s.scaleX))}this.sortItem(t);var o=0;for(i=0,n=t.length;i<n;i++)(s=t[i]).y=o,o+=s.height*s.scaleY+this._space,"left"==this._align?s.x=0:"center"==this._align?s.x=.5*(e-s.width*s.scaleX):"right"==this._align&&(s.x=e-s.width*s.scaleX);this.changeSize()},__getset(0,i,"width",t.prototype._$get_width,function(t){this._width!=t&&(Laya.superSet(LayoutBox,this,"width",t),this.callLater(this.changeItems))}),e.NONE="none",e.LEFT="left",e.CENTER="center",e.RIGHT="right",e}(LayoutBox),RadioGroup=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.RadioGroup",UIGroup),e.prototype.createItem=function(t,e){return new Radio(t,e)},e}(),Tab=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.Tab",UIGroup),e.prototype.createItem=function(t,e){return new Button(t,e)},e}(),TextArea=function(e){function i(t){this._vScrollBar=null,this._hScrollBar=null,void 0===t&&(t=""),i.__super.call(this,t)}__class(i,"laya.ui.TextArea",e);var t=i.prototype;return t.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},t.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},t.onVBarChanged=function(t){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},t.onHBarChanged=function(t){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},t.changeScroll=function(){var t=this._vScrollBar&&0<this._tf.maxScrollY,e=this._hScrollBar&&0<this._tf.maxScrollX,i=t?this._width-this._vScrollBar.width:this._width,n=e?this._height-this._hScrollBar.height:this._height,s=this._tf.padding||Styles.labelPadding;this._tf.width=i,this._tf.height=n,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-s[2],this._vScrollBar.y=s[1],this._vScrollBar.height=this._height-(e?this._hScrollBar.height:0)-s[1]-s[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=n/Math.max(this._tf.textHeight,n),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=t),this._hScrollBar&&(this._hScrollBar.x=s[0],this._hScrollBar.y=this._height-this._hScrollBar.height-s[3],this._hScrollBar.width=this._width-(t?this._vScrollBar.width:0)-s[0]-s[2],this._hScrollBar.scrollSize=Math.max(.033*i,1),this._hScrollBar.thumbPercent=i/Math.max(this._tf.textWidth,i),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=e)},t.scrollTo=function(t){this.commitMeasure(),this._tf.scrollY=t},__getset(0,t,"scrollY",function(){return this._tf.scrollY}),__getset(0,t,"width",e.prototype._$get_width,function(t){Laya.superSet(TextInput,this,"width",t),this.callLater(this.changeScroll)}),__getset(0,t,"hScrollBar",function(){return this._hScrollBar}),__getset(0,t,"height",e.prototype._$get_height,function(t){Laya.superSet(TextInput,this,"height",t),this.callLater(this.changeScroll)}),__getset(0,t,"maxScrollX",function(){return this._tf.maxScrollX}),__getset(0,t,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new VScrollBar),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=t}),__getset(0,t,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new HScrollBar),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=t}),__getset(0,t,"vScrollBar",function(){return this._vScrollBar}),__getset(0,t,"maxScrollY",function(){return this._tf.maxScrollY}),__getset(0,t,"scrollX",function(){return this._tf.scrollX}),i}(TextInput),LoadingIosView=function(t){function e(){this.image1=null,this.image2=null,this.image3=null,this.target=null,this._tween=null,this.index=1,e.__super.call(this)}__class(e,"gateModule.modules.login.views.LoadingIosView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.big_bg.skin=GlobalConst.getFullUrl("ui/images/loginios/guoshenbg.jpg"),this.big_bg.scaleX=3,this.big_bg.scaleY=3,this.image1=new Image(GlobalConst.getFullUrl("ui/images/loginios/actor1.png")),this.image2=new Image(GlobalConst.getFullUrl("ui/images/loginios/actor2.png")),this.image3=new Image(GlobalConst.getFullUrl("ui/images/loginios/actor3.png")),this.image1.x=-1e3,this.image2.x=-1e3,this.image3.x=-1e3,this.image1.y=400,this.image2.y=400,this.image3.y=400,this.image1.scaleX=1.2,this.image1.scaleY=1.2,this.image2.scaleX=1.2,this.image2.scaleY=1.2,this.image3.scaleX=1.2,this.image3.scaleY=1.2,this.addChild(this.image1),this.addChild(this.image2),this.addChild(this.image3),Laya.timer.loop(2200,this,this.moveHandler),this.moveHandler()},i.moveHandler=function(){this.target=this["image"+this.index],this.index++,4==this.index&&(this.index=1),this.target.x=-1e3,this._tween=Tween.to(this.target,{x:100},1e3,Ease.expoOut,Handler.create(this,this.onNextMove))},i.onNextMove=function(){this._tween=Tween.to(this.target,{x:1e3},1e3,Ease.expoIn)},i.destroy=function(t){void 0===t&&(t=!0),this._tween&&(this._tween.clear(),this._tween=null),this.parent&&this.parent.removeChild(this),this.image1.dispose(),this.image2.dispose(),this.image3.dispose(),this.clearTimer(this,this.moveHandler),laya.ui.View.prototype.destroy.call(this,t)},e}(LoadingIosViewUI),LoadingView=function(t){function e(){this.loadingIos=null,this.tipsIdx=1,this.per=0,e.__super.call(this),Render.isConchApp||0<Global.xgame?this.big_bg.skin=GlobalConst.checkTranferSkin(SkinUtil.LOADING_BG,"ui/layouts/login/dl_jm_bg1.jpg"):this.big_bg.skin=GlobalConst.checkTranferSkin(SkinUtil.LOADING_BG,"ui/layouts/login/dl_jm_bg1.jpg?"+GlobalConfig.gateResVerison,!1)}__class(e,"gateModule.modules.login.views.LoadingView",LoadingViewUI);var i=e.prototype;return i.inteUI=function(){this.txt_broadcast.text="首次加载时间稍长，请耐心等待……"},i.isShowing=function(){return this.parent},i.show=function(){this.resize(),this.inteUI(),Laya.stage.addChild(this),this.startShowTips();var t=GlobalConfig.defaultQualification;GlobalConfig.loadingDescribe?t=GlobalConfig.loadingDescribe:1==Global.application_model&&(t=""),this.txt_des3.text=t,Global.nativeIOS&&1==Global.iosChecking&&(this.loadingIos=new LoadingIosView,this.addChild(this.loadingIos))},i.startShowTips=function(){if(CLoadingCoolTime.count<=0||CLoadingMsg.count<=0)ResUtils.loadConfig(["LoadingCoolTime","LoadingMsg"],["CLoadingCoolTime","CLoadingMsg"],Handler.create(this,this.startShowTips));else{var t=CLoadingCoolTime.MODEL.coolTime(0);this.timerLoop(t,this,this.showTips),this.txt_broadcast.text=CLoadingMsg.MODEL.tipMsg(0)||""}},i.showTips=function(){var t,e=CLoadingMsg.count;1!=this.tipsIdx?(this.tipsIdx=Math.floor(Math.random()*(e-2))+2,this.tipsIdx==e&&(this.tipsIdx=2)):t=CLoadingMsg.MODEL.tipMsg(this.tipsIdx++),this.txt_broadcast.text=t||CLoadingMsg.MODEL.tipMsg(this.tipsIdx)||""},i.onRefresh=function(t){Browser.window.location.reload()},i.resize=function(){this.pos((Laya.stage.width-this.width)/2,(Laya.stage.height-this.height)/2)},i.setLoading=function(t,e,i,n){void 0===n&&(n="");var s=this.mc_loading.width*e;this.mc_Mask.x=-this.mc_loading.width+s;var o=this.mc_loading.x+this.mc_Mask.x+566;o<59&&(o=59),this.mc_Point.x=o,null==i?this.green_pro.visible&&(this.green_pro.visible=!1):(this.green_pro.visible||(this.green_pro.visible=!0),this.per+=.04*Math.random(),1<this.per&&(this.per=0),.99<=e&&(this.per=1),s=this.g_bar.width*this.per,this.mc_Mask_g.x=-this.g_bar.width+s,(o=this.g_bar.x+this.mc_Mask_g.x+566)<59&&(o=59),this.mc_Point_g.x=o,this.txt_LoadingTF.text=t),n||(n=""),this.txt_yellowLoader.text=n},i.onTimer=function(){this.g_circle.rotation+=12},i.destroy=function(t){void 0===t&&(t=!0),this.parent&&this.parent.removeChild(this),this.loadingIos&&(this.removeChild(this.loadingIos),this.loadingIos=null),this.clearTimer(this,this.showTips),Laya.loader.clearRes(GlobalConst.getDBPath("LoadingCoolTime")),Laya.loader.clearRes(GlobalConst.getDBPath("LoadingMsg")),laya.ui.View.prototype.destroy.call(this,t)},e}(),LoginAlertView=function(t){function e(){this._mask=null,this._tf=null,this._reload=!1,this._closeHandler=null,this.idx=NaN,e.__super.call(this),this._mask||(this._mask=new Sprite,this._mask.alpha=.8,this._mask.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000",null)),this._mask.pos((this.width-Laya.stage.width)/2,(this.height-Laya.stage.height)/2),this.addChildAt(this._mask,0),this.closeBtn.visible=!1}__class(e,"gateModule.modules.login.views.LoginAlertView",LoginAlertUI);var i=e.prototype;return i.show=function(t,e,i){void 0===e&&(e=!1),this.parent||(this._closeHandler=i,this._reload=e,this.contentTxt.innerHTML=t,this.contentTxt.y=167,this._$7_onEvent(),this.idx=Browser.now(),Laya.stage.addChild(this))},i._$7_onEvent=function(){Laya.stage.on("click",this,this.closePanel),this.confirmBtn.on("click",this,this.onClose),this.closeBtn.on("click",this,this.onClose)},i.onClose=function(t){this._reload&&Browser.window.location.reload(),this._reload=!1,this.close()},i.closePanel=function(t){t.target!=this&&150<Browser.now()-this.idx&&this.onClose(t)},i.close=function(){Laya.stage.off("click",this,this.closePanel),this.closeBtn.off("click",this,this.onClose),this.confirmBtn.off("click",this,this.onClose),this.parent&&this.parent.removeChild(this),this._closeHandler&&(this._closeHandler.run(),this._closeHandler=null)},i.destroy=function(t){void 0===t&&(t=!0),this.close(),this._mask=null,laya.ui.View.prototype.destroy.call(this,t)},__getset(1,e,"ins",function(){return e._instance||(e._instance=new e),e._instance},gateModule.layouts.login.LoginAlertUI._$SET_ins),e._instance=null,e}(),LoginBaseView=function(t){function e(){e.__super.call(this)}__class(e,"gateModule.modules.login.views.LoginBaseView",LoginBaseUI);var i=e.prototype;return i.show=function(){var t=ResUtils.getCookie("arthor");t&&(GlobalConfig.uid=t),null==GlobalConfig.uid&&(GlobalConfig.uid="char_"+(new Date).getMilliseconds()),this.txt_Arthor.text=GlobalConfig.uid,this.txt_ServerId.text=GlobalConfig.serverID,this.txt_Platform.text=GlobalConfig.platform,this.resize(),Laya.stage.addChild(this),this.btn_Login.on("click",this,this.onLogin);var e=new Text;e.color="#ffffff",e.y=this.btn_Login.y+45,e.x=this.lable1.x,e.text=GlobalConfig.version.toString(),this.addChild(e),this.centerX=0},i.destroy=function(t){void 0===t&&(t=!0),this.parent&&this.parent.removeChild(this),this.btn_Login.off("click",this,this.onLogin),laya.ui.View.prototype.destroy.call(this,t)},i.onLogin=function(){GlobalConfig.uid=this.txt_Arthor.text,GlobalConfig.serverID=this.txt_ServerId.text,GlobalConfig.platform=this.txt_Platform.text;var t={arthor:GlobalConfig.uid};ResUtils.setCookie(t),Global.isConchApp||Message.sendToModule("SHOWLOGINUI",["gateModule.modules.login.LoginGateModule"]),this.destroy()},i.resize=function(){this.pos((Laya.stage.width-this.width)/2,(Laya.stage.height-this.height)/2)},e}(),LoginConcealView=function(t){function e(){this.showPanelTime=NaN,this._mask=null,this._tf=null,e.__super.call(this),this._mask||(this._mask=new Component,this._mask.alpha=.8,this._mask.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000",null),this._mask.mouseEnabled=!0),this._mask.pos((this.width-Laya.stage.width)/2,(this.height-Laya.stage.height)/2),this.addChildAt(this._mask,0),this.panel_div.vScrollBarSkin="",this.panel_div.vScrollBar.isVertical=!0,this.panel_div.vScrollBar.elasticDistance=200,this._tf||(this._tf=new HtmlDiv$1,this._tf.pos(0,0),this._tf.fontSize=24,this._tf.color="#90877b",this._tf.font="SimHei",this._tf.leading=11,this._tf.width=this.panel_div.width,this._tf.height=730,this.panel_div.addChild(this._tf))}__class(e,"gateModule.modules.login.views.LoginConcealView",LoginConcealUI);var i=e.prototype;return i.show=function(t){Laya.stage.addChild(this),this.showPanelTime=Browser.now(),this._tf.innerHTML=t,this._$7_onEvent()},i._$7_onEvent=function(){this.btn_close.once("click",this,this.onClose),Laya.stage.on("click",this,this.closePanel)},i.onClose=function(t){this.close()},i.close=function(){this.btn_close.off("click",this,this.onClose),Laya.stage.off("click",this,this.closePanel),this.parent&&this.parent.removeChild(this)},i.closePanel=function(t){t.target!=this.panel_div&&t.target!=this._tf&&t.target!=this&&1e3<Browser.now()-this.showPanelTime&&this.onClose(t)},__getset(1,e,"ins",function(){return e._instance||(e._instance=new e),e._instance},gateModule.layouts.login.LoginConcealUI._$SET_ins),e._instance=null,e}(),LoginNoticeView=function(t){function e(){this._mask=null,this._tf=null,this.showPanelTime=NaN,e.__super.call(this),this._mask||(this._mask=new Component,this._mask.alpha=.8,this._mask.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000",null),this._mask.mouseEnabled=!0),this._mask.pos((this.width-Laya.stage.width)/2,(this.height-Laya.stage.height)/2),this.addChildAt(this._mask,0),this.panel_div.vScrollBarSkin="",this.panel_div.vScrollBar.isVertical=!0,this.panel_div.vScrollBar.elasticDistance=200,this._tf||(this._tf=new HtmlDiv,this._tf.pos(0,0),this._tf.fontSize=24,this._tf.color="#90877b",this._tf.font="SimHei",this._tf.leading=11,this._tf.width=this.panel_div.width,this._tf.height=730,this.panel_div.addChild(this._tf))}__class(e,"gateModule.modules.login.views.LoginNoticeView",LoginNoticeUI);var i=e.prototype;return i.show=function(){Laya.stage.addChild(this),this.showPanelTime=Browser.now(),this._tf.innerHTML=GlobalConfig.logMsg.content,this._$7_onEvent()},i._$7_onEvent=function(){this.btn_close.once("click",this,this.onClose),Laya.stage.on("click",this,this.closePanel)},i.closePanel=function(t){t.target!=this.panel_div&&t.target!=this._tf&&t.target!=this&&150<Browser.now()-this.showPanelTime&&this.onClose(t)},i.onClose=function(t){this.close()},i.close=function(){this.btn_close.off("click",this,this.onClose),Laya.stage.off("click",this,this.closePanel),this.parent&&this.parent.removeChild(this)},i.destroy=function(t){void 0===t&&(t=!0),this.close(),this._mask=null,laya.ui.View.prototype.destroy.call(this,t)},__getset(1,e,"ins",function(){return e._instance||(e._instance=new e),e._instance},gateModule.layouts.login.LoginNoticeUI._$SET_ins),e._instance=null,e}(),LoginStartView=function(t){function e(){this.listChangeView=null,this.msgTxts=null,this.isConcelTxt=!1,this.isAutoShow=!1,this.txt_Ys="",e.__super.call(this),this.txtYs.top=this.age18.top=50,this.txtYs.left=320,Render.isConchApp||0<Global.xgame?(this.bg.skin=GlobalConst.checkTranferSkin(SkinUtil.LOADING_BG,"ui/layouts/login/dl_jm_bg1.jpg"),this.serverBg.skin=GlobalConst.checkTranferSkin(SkinUtil.LOADING_XQD,"ui/layouts/login/dl_jm_xqd1.png")):(this.bg.skin=GlobalConst.checkTranferSkin(SkinUtil.LOADING_BG,"ui/layouts/login/dl_jm_bg1.jpg?"+GlobalConfig.gateResVerison,!1),this.serverBg.skin=GlobalConst.checkTranferSkin(SkinUtil.LOADING_XQD,"ui/layouts/login/dl_jm_xqd1.png?"+GlobalConfig.gateResVerison,!1)),this.mc_Effect.skin=GlobalConst.getLayoutsImagePath("login/btn_effect.png"),this.selectedTxtBg.alpha=0,ResUtils.loadConfig(["Conceal"],["CConCeal"],Handler.create(this,this.loadedConCel))}__class(e,"gateModule.modules.login.views.LoginStartView",LoginViewUI);var i=e.prototype;return i.show=function(){if(Common.mirClick(5,GlobalConfig.pid,GlobalConfig.uid),this.selectedTxtBg.on("click",this,this.onChangeServer),this.txt_ChangeServer.on("click",this,this.onChangeServer),this.btn_Start.on("click",this,this.onEnterGame),this.txtYs.on("click",this,this.onShowYs),this.imgYs.on("click",this,this.onShowYs),this.resize(),Laya.stage.addChild(this),Laya.timer.loop(83,this,this.onPlayEffect),this.btn_Gonggao.on("click",this,this.showGongGao),this.update(),GlobalConfig.logMsg)this.dealWithNotice();else{var t={};t.platCode=GlobalConfig.platCode,t.pid=GlobalConfig.pid,t.gid=GlobalConfig.gid,GlobalConfig.packageName&&0<GlobalConfig.packageName.length&&(t.packName=GlobalConfig.packageName),console.log("requst pNoteUrl :"+GlobalConfig.pNoteUrl+"params："+JSON.stringify(t)),HttpActionUtil.httpGet(GlobalConfig.pNoteUrl,t,this,this.onGetNoticeHandler,this.onGetNoticeError)}this.mc_Effect.blendMode="lighter",Global.nativeIOS&&(this.notice.height=200,this.notice.leading=10,this.notice.y=-40,this.notice.text="审批文号：新广出审[2016]118号 \n著作权人：江苏易乐网络科技有限公司 \n著作权登记号：2015SR094949 \n网络游戏出版物号：ISBN 978-7-89404-309-2  \n出版单位名称：上海同济大学电子音像出版社有限公司\n备案号：文网游备字〔2016〕Ｍ-RPG 6075 号"),console.log("enter select")},i.checkImportTimeOut=function(t){this.showAlertOutServer(t)},i.showAlertOutServer=function(t){LoginAlertView.ins.show(t)},i.onGetNoticeHandler=function(e){if("string"==typeof e)try{console.log("pNoteUrl jason format:"+e),e=JSON.parse(e),GlobalConfig.logMsg=e}catch(t){console.log("pNoteUrl jason format:error,"+e),GlobalConfig.logMsg={},GlobalConfig.logMsg.isPrompt="1",GlobalConfig.logMsg.title="公告jason格式错误",GlobalConfig.logMsg.content=e,e=null}this.dealWithNotice()},i.dealWithNotice=function(){GlobalConfig.logMsg&&(Global.setAdminNoticeInfo(),GlobalConfig.logMsg.hasOwnProperty("isPrompt")&&GlobalConfig.logMsg.isPrompt+""=="1"&&LoginNoticeView.ins.show())},i.closeList=function(){null!=this.listChangeView&&this.listChangeView.parent&&(this.listChangeView.close(),this.update())},i.onGetNoticeError=function(t){console.log("获取公告接口错误")},i.showGongGao=function(t){if(GlobalConfig.logMsg)GlobalConfig.logMsg.hasOwnProperty("title")?LoginNoticeView.ins.show():this.checkImportTimeOut("游戏暂无最新公告，敬请关注！");else{var e={};e.platCode=GlobalConfig.platform,e.pid=GlobalConfig.pid,e.gid=GlobalConfig.gid,HttpActionUtil.httpGet(GlobalConfig.pNoteUrl,e,this,this.onGetNoticeHandler2,this.onGetNoticeError2)}},i.onGetNoticeHandler2=function(e){if("string"==typeof e)try{e=JSON.parse(e),GlobalConfig.logMsg=e}catch(t){e=null,GlobalConfig.logMsg={},GlobalConfig.logMsg.isPrompt="1",GlobalConfig.logMsg.title="公告jason格式错误",GlobalConfig.logMsg.content=e}GlobalConfig.logMsg&&(GlobalConfig.logMsg.hasOwnProperty("title")?LoginNoticeView.ins.show():this.checkImportTimeOut("游戏暂无最新公告，敬请关注！"))},i.onGetNoticeError2=function(t){},i.update=function(){this.txt_ServerName.text=GlobalConfig.serverName},i.onPlayEffect=function(){this.mc_Effect.index<this.mc_Effect.total-1?this.mc_Effect.index++:this.mc_Effect.index=0},i.resize=function(){},i.showAlert=function(t,e){void 0===e&&(e=!1),this.doShowAlert(t,e)},i.doShowAlert=function(t,e){void 0===e&&(e=!1),LoginAlertView.ins.show(t,e)},i.onEnterGame=function(t){if(Common.mirClick(6,GlobalConfig.pid,GlobalConfig.uid),5==GlobalConfig.serverState){if(Browser.now()<GlobalConfig.openSerTime){var e=DateUtil.dateFormat(DateUtil.getDateByServer(GlobalConfig.openSerTime),"MM月dd日hh时mm分");return void this.showAlert(e+"正式开服，敬请期待")}}else{if(4==GlobalConfig.serverState)return void this.showAlert("该服务器正在维护中",!0);if(3<GlobalConfig.serverState)return void this.showAlert("该服务器正在维护中",!0)}if(Common.mirClick(8,GlobalConfig.pid,GlobalConfig.uid),Global.isConchApp)GlobalConfig.socket_host&&GateSocketDock.GetIntance().connect(GlobalConfig.socket_host,GlobalConfig.socket_port);else if(20==GlobalConfig.client)GlobalConfig.socket_host&&(Message.sendToModule("STARTLODING",["gateModule.modules.login.LoginGateModule"]),GateSocketDock.GetIntance().connect(GlobalConfig.socket_host,GlobalConfig.socket_port));else{if(GlobalConfig.client=10,!GlobalConfig.socket_host)return void this.showAlert("该服务器不存在,请重新选服");GateSocketDock.GetIntance().connect(GlobalConfig.socket_host,GlobalConfig.socket_port)}Laya.timer.clear(this,this.onPlayEffect)},i.onChangeServer=function(t){null==this.listChangeView&&(this.listChangeView=new LoginServerView),this.listChangeView.isRequest&&this.playFlyMsg("已请求过数据，请耐心等待……"),this.listChangeView.show(this)},i.playFlyMsg=function(t){var e=CodeUtils.createText(Laya.stage.width/2-150,Laya.stage.mouseY-20,200,20,t,20,"#FF0000",!0),i=e.y-150;Laya.stage.addChild(e),Tween.to(e,{alpha:0,y:i},1500,null,Handler.create(this,this.onTFGone,[e]))},i.onTFGone=function(t){t&&(t.parent&&t.parent.removeChild(t),t.destroy(),t=null)},i.destroy=function(t){void 0===t&&(t=!0),this.txt_ChangeServer.off("click",this,this.onChangeServer),this.btn_Start.off("click",this,this.onEnterGame),this.txtYs.off("click",this,this.onShowYs),this.imgYs.off("click",this,this.onShowYs),Laya.timer.clear(this,this.onPlayEffect),this.parent&&this.parent.removeChild(this),this.listChangeView&&this.listChangeView.destroy(),this.mc_Effect&&this.mc_Effect.skin&&Laya.loader.clearRes(this.mc_Effect.skin),this.serverBg&&this.serverBg.skin&&Laya.loader.clearRes(this.serverBg.skin),laya.ui.View.prototype.destroy.call(this,t)},i.onShowYs=function(t){LoginConcealView.ins.show(this.txt_Ys)},i.loadedConCel=function(){var t=0;for(t=0;t<CConCeal.count;t++)if(-1!=CConCeal.MODEL.platform(t).split(",").indexOf(GlobalConfig.appid)){this.isConcelTxt=!0,this.txt_Ys=CConCeal.MODEL.content(t),this.txtYs.text=CConCeal.MODEL.title(t),1==CConCeal.MODEL.isAuto(t)&&(this.isAutoShow=!0);break}this.isConcelTxt?(this.txtYs.visible=!0,this.isAutoShow&&LoginConcealView.ins.show(this.txt_Ys)):this.txtYs.visible=!1},e}(),LoginServerView=function(t){function e(){this.listData=null,this.sectionList=null,this.isRequest=!1,this.m_Context=null,this._mask=null,e.__super.call(this),this._mask||(this._mask=new Component,this._mask.alpha=.8,this._mask.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000",null),this._mask.mouseEnabled=!0,this._mask.mouseThrough=!0),this._mask.pos((this.width-Laya.stage.width)/2,(this.height-Laya.stage.height)/2),this.addChildAt(this._mask,0)}__class(e,"gateModule.modules.login.views.LoginServerView",ServerIdListUIUI);var i=e.prototype;return i.show=function(t){if(this.m_Context=t,this.isRequest&&console.log("请求数据中"),null==this.sectionList){Laya.timer.clear(this,this.checkImportTimeOut),this.isRequest=!0;var e=new Object;e.uid=GlobalConfig.uid,e.pid=GlobalConfig.pid,e.gid=GlobalConfig.gid,e.version=GlobalConfig.appVersion,Browser.onAndroid?e.os="andriod":Browser.onIOS?e.os="ios":Browser.onPC&&(e.os="window"),e.platCode=GlobalConfig.platform,e.time=GlobalConfig.serverTime,e.imei=GlobalConfig.IMEI,e.sign=GlobalConfig.sign,Global.isConchApp&&NativeSdk.deviceInfo?e.version=NativeSdk.deviceInfo.bundle_version:e.version=GlobalConfig.version.toString(),HttpActionUtil.httpGet(GlobalConfig.getServerListUrl,e,this,this.onGetListHandler,this.onErrorHandler),Laya.timer.once(1e4,this,this.checkImportTimeOut)}else this.doShow()},i.checkImportTimeOut=function(){this.isRequest=!1,this.showAlertOutServer()},i.showAlertOutServer=function(){LoginAlertView.ins.show("数据返回超时了，请稍后再试！")},i.onGetListHandler=function(t){if(Laya.timer.clear(this,this.checkImportTimeOut),console.log("getServerListUrl接口返回数据："+JSON.stringify(t)),"string"==typeof t&&(t=JSON.parse(t)),this.isRequest=!1,this.listData=t,this.listData){this.sectionList=[];var e={label:"最近登陆",servers:[]},i={label:"推荐服务器",servers:[]};if(this.listData.hasOwnProperty("servers")){this.sectionList.push(e);for(var n=0;n<this.listData.servers.length;++n){var s=this.listData.servers[n];this.listData.loginedServers&&-1!=this.listData.loginedServers.indexOf(s.serverId)&&e.servers.push(s),this.listData.recommendServers&&-1!=this.listData.recommendServers.indexOf(s.serverId)&&i.servers.push(s);for(var o,a=!1,r=0;r<this.sectionList.length;++r){var l=s.groupNo;if((o=this.sectionList[r]).label==l){o.servers.push(s),a=!0;break}}a||(o={label:s.groupNo,servers:[s]},this.sectionList.push(o))}this.doShow()}else this.showAlert("当前无服务器列表数据")}else this.showAlert("当前无服务器列表数据")},i.onErrorHandler=function(t){Laya.timer.clear(this,this.checkImportTimeOut),this.checkImportTimeOut(),this.isRequest=!1,console.log("请求接口:"+GlobalConfig.getServerListUrl+"错误")},i.doShow=function(){10!=GlobalConfig.client&&this.sectionList&&(this.list_Servers.repeatX=1,this.list_Servers.spaceY=8,this.list_Servers.vScrollBarSkin="",this.list_Servers.itemRender=LoginServerItem,this.list_Servers.scrollBar.elasticDistance=60,this.list_Servers.scrollBar.on("change",this,this.onScrollEnd2),this.list_Servers.selectEnable=!0,this.list_Servers.selectHandler=Handler.create(this,this.onSelecetHandler2,null,!1),this.list_ServerList.repeatY=this.sectionList.length,this.list_ServerList.repeatX=1,this.list_ServerList.spaceY=1,this.list_ServerList.vScrollBarSkin="",this.list_ServerList.scrollBar.elasticDistance=60,this.list_ServerList.scrollBar.on("change",this,this.onScrollEnd),this.list_ServerList.dataSource=this.sectionList,this.list_ServerList.selectEnable=!0,this.list_ServerList.selectHandler=Handler.create(this,this.onSelecetHandler,null,!1),this.list_ServerList.tweenTo(0),this.list_ServerList.selectedIndex=0,this._mask.once("click",this,this.onClose),this.btn_Close.once("click",this,this.onClose),this.m_Context.addChild(this))},i.onClose=function(t){this.close()},i.onSelecetHandler=function(t){var e=this.list_ServerList.array[t];e.selected=!0,e.labelSize=30;for(var i=0;i<this.list_ServerList.array.length;i++){var n=this.list_ServerList.array[i];i!=t&&n.selected?(n.selected=!1,e.labelSize=24,this.list_ServerList.changeItem(i,n)):i==t&&this.list_ServerList.changeItem(i,n)}this.list_Servers.dataSource=e.servers},i.onScrollEnd=function(){0==this.list_ServerList.scrollBar.max||this.list_ServerList.scrollBar.value>=this.list_ServerList.scrollBar.max?this.mc_ListMask.visible=!1:this.mc_ListMask.visible=!0},i.onScrollEnd2=function(){0==this.list_Servers.scrollBar.max||this.list_Servers.scrollBar.value>=this.list_Servers.scrollBar.max?this.mc_Mask.visible=!1:this.mc_Mask.visible=!0},i.onSelecetHandler2=function(t){},i.showAlert=function(t){this.doShowAlert(t)},i.doShowAlert=function(t){LoginAlertView.ins.show(t)},i.close=function(){this._mask.off("click",this,this.onClose),this.btn_Close.off("click",this,this.onClose),this.parent&&this.parent.removeChild(this)},i.destroy=function(t){void 0===t&&(t=!0),this._mask.off("click",this,this.onClose),this.btn_Close.off("click",this,this.onClose),this.parent&&this.parent.removeChild(this),this.m_Context=null,(this.listData=null)!=this.sectionList&&(this.sectionList.length=0,this.sectionList=null),laya.ui.View.prototype.destroy.call(this,t)},e}(),LoginServerItem=function(t){function e(){this._state=0,e.__super.call(this),this.on("click",this,this.onSelectHandler)}__class(e,"gateModule.modules.login.views.LoginServerItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this)},i.destroy=function(t){void 0===t&&(t=!0),this.off("click",this,this.onSelectHandler)},i.onSelectHandler=function(t){if(this.dataSource){if(this.dataSource.hasOwnProperty("state")){var e="";if(5==this._state)return e=DateUtil.dateFormat(DateUtil.getDateByServer(this.dataSource.autoOpenTime),"MM月dd日hh时mm分"),void this.showAlert(e+"正式开服，敬请期待");if(4==this._state)return void this.showAlert(e+"该服务器正在维护中");if(3<this._state)return void this.showAlert(e+"该服务器正在维护中")}this.dataSource.hasOwnProperty("domain")&&(GlobalConfig.socket_host=this.dataSource.domain),this.dataSource.hasOwnProperty("port")&&(GlobalConfig.socket_port=this.dataSource.port),this.dataSource.hasOwnProperty("serverId")&&(GlobalConfig.serverID=this.dataSource.serverId),this.dataSource.hasOwnProperty("state")&&(GlobalConfig.serverState=parseInt(this.dataSource.state+"")),this.dataSource.hasOwnProperty("name")&&(GlobalConfig.serverName=this.dataSource.name),this.dataSource.version&&(GlobalConfig.appVersion=this.dataSource.version),Message.sendToModule("CLOSESERVERLIST",["gateModule.modules.login.LoginGateModule"])}},i.showAlert=function(t){LoginAlertView.ins.show(t)},__getset(0,i,"name",null,function(t){this.txt_Name&&(this.txt_Name.text=t)}),__getset(0,i,"state",null,function(t){this._state=t,this.mc_new&&(this.mc_new.visible=1==t,this.mc_busy.visible=2==t||3==t,this.mc_stop.visible=!this.mc_new.visible&&!this.mc_busy.visible)}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){Laya.superSet(ServerItemUI,this,"dataSource",t)}),e}(ServerItemUI),WelcomeView=function(t){function e(){this._defaultValue="获取信息",e.__super.call(this),this.loading_sub_bg.visible=!1,this.subLab.centerX=0,this.img_circle.centerX=0,this.subLab.align="center"}__class(e,"gateModule.modules.login.views.WelcomeView",WelcomeViewUI);var i=e.prototype;return i.show=function(t,e){void 0===e&&(e=!1),this.parent||Laya.stage.addChildAt(this,0),this.subLab.text=t||this._defaultValue,this.loadingBox.visible=!e,this.updateCircle()},i.hide=function(){this.loadingBox.visible=!1,this.parent&&Laya.stage.removeChild(this),this.updateCircle()},i.updateCircle=function(){0==this.loadingBox.visible?(this.img_circle.visible=!1,this.img_circle.rotation=0,this.img_circle.alpha=0):(this.img_circle.visible=!0,this.frameLoop(1,this,this.onTimer))},i.onTimer=function(){this.img_circle.alpha<1&&(this.img_circle.alpha=Math.min(this.img_circle.alpha+.02,1)),this.img_circle.rotation+=12},e}(),_RoleCreateView=function(t){function e(){this.unSelectArr=null,this.selecetChar=null,this.sex=1,this.carrId=1,this._recordIndexs=null,this._showList=null,this._showLen=5,this._namesMaxLen=100,this._initedName=!1,this.randTime=0,this.drawTime=0,this._enterTime=0,this.enterSec=25,e.__super.call(this),this.g_bg.skin=GlobalConst.getLayoutsImagePath("createrole1/cj_bg.jpg?"+GlobalConfig.gateResVerison,!1),this._recordIndexs=[],this._showList=[],this.invented_box.scrollRect=new Rectangle(0,30,300,120),this.graphics.drawRect(-50,0,this.width+100,this.height,"#000000")}__class(e,"gateModule.modules.login.views._RoleCreateView",_RoleCreateBaseUI);var i=e.prototype;return i._$7_onEvent=function(){this.on("click",this,this.onClick),this.txt_Name.on("input",this,this.onInputChange),this.txt_Name.on("focus",this,this.onFocusChange),this.txt_Name.on("blur",this,this.onFocusChange),Laya.timer.loop(33,this,this.onLoop)},i.offEvent=function(){this.off("click",this,this.onClick),this.txt_Name.off("input",this,this.onInputChange),this.txt_Name.off("focus",this,this.onFocusChange),this.txt_Name.off("blur",this,this.onFocusChange),Laya.timer.clear(this,this.onLoop)},i.show=function(){Common.mirClick(17,GlobalConfig.pid,GlobalConfig.uid),this.resize(),this.unSelectArr=[];for(var t=0;t<6;++t){var e=new Sprite;e.graphics.drawRect(0,0,114,578,"#000000"),e.alpha=.5,this.unSelectArr.push(e)}this.update(),Laya.stage.addChild(this),Laya.timer.loop(83,this,this.onPlayEffect),this._$7_onEvent(),this.onGetRadomName(),this.mc_Effect.skin=GlobalConst.getLayoutsImagePath("login/btn_effect.png?"+GlobalConfig.gateResVerison,!1),this.mc_Effect.blendMode="lighter",ResUtils.loadConfig(["inventedName"],["CInventedName"],Handler.create(this,this.loadedNames))},i.loadedNames=function(){0<CInventedName.count&&(this._namesMaxLen=CInventedName.count,this._initedName=!0)},i.onPlayEffect=function(){this.mc_Effect.index<this.mc_Effect.total-1?this.mc_Effect.index++:this.mc_Effect.index=0},i.update=function(){var t,e=null;for(t in this.unSelectArr)(e=this.unSelectArr[t]).parent&&e.parent.removeChild(e);this.btn_sex_1.selected=Boolean(1==this.sex),this.btn_sex_2.selected=Boolean(2==this.sex),this.img_role.skin=GlobalConst.getLayoutsImagePath("createrole1/cj_js_"+this.carrId+"_"+this.sex+".png",!1);for(var i=1;i<=3;i++)this.carrId==i?(this["btn_job_"+i].skin=GlobalConst.getLayoutsImagePath("createrole1/cj_zydk_"+i+".png",!1),this["btn_wp_"+i].right=67,this["btn_wp_"+i].selected=!0):(this["btn_job_"+i].skin=GlobalConst.getLayoutsImagePath("createrole1/cj_zydk_ct.png",!1),this["btn_wp_"+i].selected=!1,this["btn_wp_"+i].right=51),this.setLabColor(i,this.carrId==i)},i.setLabColor=function(t,e){var i;switch(t){case 1:i=e?"#ff450c":"#bc5c3f";break;case 2:i=e?"#288bca":"#405e90";break;case 2:i=e?"#1bb32d":"#33761f"}this["btn_job_"+t].labelSize=e?28:24,this["btn_job_"+t].labelColors=i,this["btn_job_"+t].labelPadding=e?"45,15,46,66":"46,6,47,65"},i.onLoop=function(){var t=Browser.now();900<t-this.randTime&&(this.randTime=t,this.inventedNamse()),30<t-this.drawTime&&(this.drawTime=t,this.drawInventedNames(this.invented_box.graphics)),this.enterTime<=0?this.enterTime=t:this.txt_Name&&0==this.txt_Name.focus&&this.enterSec<=0?this.onEntername(null):this.txt_Name&&0==this.txt_Name.focus&&(1e3<t-this._enterTime&&(this._enterTime=t,this.enterSec=this.enterSec-1),this.txt_tipenter.text=this.enterSec+"秒后进入游戏")},i.inventedNamse=function(){if(0!=this._initedName)for(var t=this.randomEnterIndexs(),e=0;e<t.length;e++){var i=t[e];if(this._showList.indexOf(i)<0){this._recordIndexs.push(i);var n=CInventedName.MODEL.name(i);n&&this._showList.push([n,-25*(t.length-e)])}}},i.drawInventedNames=function(t){t.clear();for(var e=0,i=0;i<this._showList.length;i++){var n=this._showList[i][0]+"",s=this._showList[i][1];if(s<120||0<=s){if(e=150-s,0<n.length){var o=0;this.invented_box.graphics.fillText("玩家",o,e,"20px SimHei","#ffffff","left"),o+=45,this.invented_box.graphics.fillText(n,o,e,"20px SimHei","#00bbff","left"),o+=20*n.length+5,this.invented_box.graphics.fillText("正在进入游戏",o,e,"20px SimHei","#ffffff","left")}this._showList[i]=0==i?[n,s+1]:[n,this._showList[i-1][1]-25]}}for(var a in this._showList){145<this._showList[a][1]&&this._showList.splice(parseInt(a),1)}},i.randomEnterIndexs=function(){var t=[];this._recordIndexs.length>=this._namesMaxLen&&(this._recordIndexs=this._recordIndexs.splice(this._namesMaxLen-10,this._namesMaxLen));for(var e=0;e<20&&!(1<=t.length);e++){var i=Math.floor(this._namesMaxLen*Math.random());this._recordIndexs.indexOf(i)<0&&t.push(i)}return t},i.onFocusChange=function(){if(Browser.onMobile&&(this.txt_Name.focus?this.bottom=104:this.bottom=0),!this.txt_Name.focus){var t=this.txt_Name.text;if(12<StringUtils.getStringLength(t))for(var e=0,i=0;i<t.length;++i)if(12<=(e+=StringUtils.getStringLength(t.charAt(i))))return void(this.txt_Name.text=12==e?t.substring(0,i+1):t.substring(0,i))}},i.onInputChange=function(t){},i.onClick=function(t){if(t.target!=this.selecetChar){switch(t.target){case this.btn_GetName:this.onGetRadomName(null),this.enterTime=Browser.now();break;case this.btn_Login:this.enterTime=Browser.now(),this.onEntername(null);break;case this.btn_sex_1:this.enterTime=Browser.now(),this.sex=1;break;case this.btn_sex_2:this.enterTime=Browser.now(),this.sex=2;break;case this.btn_job_1:this.enterTime=Browser.now(),this.carrId=1;break;case this.btn_job_2:this.enterTime=Browser.now(),this.carrId=2;break;case this.btn_job_3:this.enterTime=Browser.now(),this.carrId=3}this.update()}},i.onGetRadomName=function(t){this.enterTime=Browser.now();var e=new tos_10103;e.sex=this.sex,Message.sendToService(e)},i.onEntername=function(t){this.enterTime=Browser.now();var e=new tos_10105;e.sex=this.sex,e.carrerId=this.carrId,e.charName=this.txt_Name.text,Message.sendToService(e),Common.mirClick(18,GlobalConfig.pid,GlobalConfig.uid)},i.setName=function(t){this.txt_Name.text=t},i.resize=function(){this.pos((Laya.stage.width-this.width)/2,(Laya.stage.height-this.height)/2)},i.destroy=function(t){var e;for(var i in void 0===t&&(t=!0),Laya.timer.clear(this,this.onPlayEffect),this.parent&&this.parent.removeChild(this),this.unSelectArr)(e=this.unSelectArr[i]).parent&&e.parent.removeChild(e),e.destroy(),e=null;this.unSelectArr.length=0,this.unSelectArr=null,this.offEvent(),this.selecetChar=null,Laya.timer.clearAll(this),this.g_bg&&this.g_bg.skin&&Laya.loader.clearRes(this.g_bg.skin),this.img_role&&this.img_role.skin&&Laya.loader.clearRes(this.g_bg.skin),this.btn_GetName&&this.btn_GetName.skin&&Laya.loader.clearRes(this.btn_GetName.skin),this.btn_Login&&this.btn_Login.skin&&Laya.loader.clearRes(this.btn_Login.skin),this.mc_Effect&&this.mc_Effect.skin&&Laya.loader.clearRes(this.mc_Effect.skin);var n=GlobalConst.getLayoutsPath("createrole1");if(Laya.loader.clearRes(n),-1<n.indexOf(".atlas")){var s=n.replace(".atlas",".png"),o=Loader.getRes(s);o&&(o.destroy(),Laya.loader.clearRes(s))}if(LoginGateProxy.urls&&0<LoginGateProxy.urls.length){for(var a=0;a<LoginGateProxy.urls.length;a++)LoginGateProxy.urls[a]&&""!=LoginGateProxy.urls[a]&&Laya.loader.clearRes(LoginGateProxy.urls[a]);LoginGateProxy.urls.splice(0,LoginGateProxy.urls.length)}this.parent&&this.parent.removeChild(this),laya.ui.View.prototype.destroy.call(this,t)},__getset(0,i,"enterTime",null,function(t){this._enterTime=t,this.enterSec=25}),e}(),_RoleCreateView3=function(t){function e(){this.unSelectArr=null,this.selecetChar=null,this.sex=1,this.carrId=1,this._recordIndexs=null,this._showList=null,this._showLen=5,this._namesMaxLen=100,this._initedName=!1,this.randTime=0,this.drawTime=0,this._enterTime=0,this.enterSec=25,e.__super.call(this),this.g_bg.skin=GlobalConst.getLayoutsImagePath("createrole3/cj_bg.jpg?"+GlobalConfig.gateResVerison,!1),this._recordIndexs=[],this._showList=[],this.invented_box.scrollRect=new Rectangle(0,30,300,120)}__class(e,"gateModule.modules.login.views._RoleCreateView3",_RoleCreateBase3UI);var i=e.prototype;return i._$7_onEvent=function(){this.on("click",this,this.onClick),this.txt_Name.on("input",this,this.onInputChange),this.txt_Name.on("focus",this,this.onFocusChange),this.txt_Name.on("blur",this,this.onFocusChange),Laya.timer.loop(33,this,this.onLoop)},i.offEvent=function(){this.off("click",this,this.onClick),this.txt_Name.off("input",this,this.onInputChange),this.txt_Name.off("focus",this,this.onFocusChange),this.txt_Name.off("blur",this,this.onFocusChange),Laya.timer.clear(this,this.onLoop)},i.show=function(){Common.mirClick(17,GlobalConfig.pid,GlobalConfig.uid),this.resize(),this.unSelectArr=[];for(var t=0;t<6;++t){var e=new Sprite;e.graphics.drawRect(0,0,114,578,"#000000"),e.alpha=.5,this.unSelectArr.push(e)}this.update(),Laya.stage.addChild(this),this._$7_onEvent(),this.onGetRadomName(),ResUtils.loadConfig(["inventedName"],["CInventedName"],Handler.create(this,this.loadedNames))},i.loadedNames=function(){0<CInventedName.count&&(this._namesMaxLen=CInventedName.count,this._initedName=!0)},i.update=function(){var t,e=null;for(t in this.unSelectArr)(e=this.unSelectArr[t]).parent&&e.parent.removeChild(e);this.btn_sex_1.visible=1==this.sex,this.btn_sex_2.visible=!this.btn_sex_1.visible,this.img_role.skin=GlobalConst.getLayoutsImagePath("createrole3/cj_js_"+this.carrId+"_"+this.sex+".png",!1);for(var i=1;i<=3;i++)this.carrId==i?(this["btn_job_"+i].skin=GlobalConst.getLayoutsImagePath("createrole3/cj_zydk_"+i+"1.png",!1),this["btn_job_"+i].pivotX=55,this["btn_job_"+i].pivotY=55,this["btn_wp_"+i].visible=!0):(this["btn_job_"+i].skin=GlobalConst.getLayoutsImagePath("createrole3/cj_zydk_"+i+".png",!1),this["btn_job_"+i].pivotX=44,this["btn_job_"+i].pivotY=44,this["btn_wp_"+i].visible=!1),this.setLabColor(i,this.carrId==i)},i.setLabColor=function(t,e){var i;switch(t){case 1:i=e?"#ff450c":"#bc5c3f";break;case 2:i=e?"#288bca":"#405e90";break;case 2:i=e?"#1bb32d":"#33761f"}this["btn_job_"+t].labelSize=e?28:24,this["btn_job_"+t].labelColors=i,this["btn_job_"+t].labelPadding=e?"45,15,46,66":"46,6,47,65"},i.onLoop=function(){var t=Browser.now();this.enterTime<=0?this.enterTime=t:this.txt_Name&&0==this.txt_Name.focus&&this.enterSec<=0?this.onEntername(null):this.txt_Name&&0==this.txt_Name.focus&&(1e3<t-this._enterTime&&(this._enterTime=t,this.enterSec=this.enterSec-1),this.txt_tipenter.text=this.enterSec+"秒后进入游戏")},i.inventedNamse=function(){if(0!=this._initedName)for(var t=this.randomEnterIndexs(),e=0;e<t.length;e++){var i=t[e];if(this._showList.indexOf(i)<0){this._recordIndexs.push(i);var n=CInventedName.MODEL.name(i);n&&this._showList.push([n,-25*(t.length-e)])}}},i.drawInventedNames=function(t){t.clear();for(var e=0,i=0;i<this._showList.length;i++){var n=this._showList[i][0]+"",s=this._showList[i][1];if(s<120||0<=s){if(e=150-s,0<n.length){var o=0;this.invented_box.graphics.fillText("玩家",o,e,"20px SimHei","#ffffff","left"),o+=45,this.invented_box.graphics.fillText(n,o,e,"20px SimHei","#00bbff","left"),o+=20*n.length+5,this.invented_box.graphics.fillText("正在进入游戏",o,e,"20px SimHei","#ffffff","left")}this._showList[i]=[n,s+1]}}for(var a in this._showList){145<this._showList[a][1]&&this._showList.splice(parseInt(a),1)}},i.randomEnterIndexs=function(){var t=[];this._recordIndexs.length>=this._namesMaxLen&&(this._recordIndexs=this._recordIndexs.splice(this._namesMaxLen-10,this._namesMaxLen));for(var e=0;e<20&&!(1<=t.length);e++){var i=Math.floor(this._namesMaxLen*Math.random());this._recordIndexs.indexOf(i)<0&&t.push(i)}return t},i.onFocusChange=function(){if(Browser.onMobile&&(this.txt_Name.focus?this.bottom=104:this.bottom=0),!this.txt_Name.focus){var t=this.txt_Name.text;if(12<StringUtils.getStringLength(t))for(var e=0,i=0;i<t.length;++i)if(12<=(e+=StringUtils.getStringLength(t.charAt(i))))return void(this.txt_Name.text=12==e?t.substring(0,i+1):t.substring(0,i))}},i.onInputChange=function(t){},i.onClick=function(t){if(t.target!=this.selecetChar){switch(t.target){case this.btn_GetName:this.onGetRadomName(null),this.enterTime=Browser.now();break;case this.btn_Login:this.enterTime=Browser.now(),this.onEntername(null);break;case this.btn_sex_1:this.enterTime=Browser.now(),this.sex=2;break;case this.btn_sex_2:this.enterTime=Browser.now(),this.sex=1;break;case this.btn_job_1:this.enterTime=Browser.now(),this.carrId=1;break;case this.btn_job_2:this.enterTime=Browser.now(),this.carrId=2;break;case this.btn_job_3:this.enterTime=Browser.now(),this.carrId=3}this.update()}},i.onGetRadomName=function(t){this.enterTime=Browser.now();var e=new tos_10103;e.sex=this.sex,Message.sendToService(e)},i.onEntername=function(t){this.enterTime=Browser.now();var e=new tos_10105;e.sex=this.sex,e.carrerId=this.carrId,e.charName=this.txt_Name.text,Message.sendToService(e),Common.mirClick(18,GlobalConfig.pid,GlobalConfig.uid)},i.setName=function(t){this.txt_Name.text=t},i.resize=function(){this.pos((Laya.stage.width-this.width)/2,(Laya.stage.height-this.height)/2)},i.destroy=function(t){var e;for(var i in void 0===t&&(t=!0),this.parent&&this.parent.removeChild(this),this.unSelectArr)(e=this.unSelectArr[i]).parent&&e.parent.removeChild(e),e.destroy(),e=null;this.unSelectArr.length=0,this.unSelectArr=null,this.offEvent(),this.selecetChar=null,Laya.timer.clearAll(this),this.g_bg&&this.g_bg.skin&&Laya.loader.clearRes(this.g_bg.skin),this.img_role&&this.img_role.skin&&Laya.loader.clearRes(this.g_bg.skin),this.btn_GetName&&this.btn_GetName.skin&&Laya.loader.clearRes(this.btn_GetName.skin),this.btn_Login&&this.btn_Login.skin&&Laya.loader.clearRes(this.btn_Login.skin);var n=GlobalConst.getLayoutsPath("createrole1");if(Laya.loader.clearRes(n),-1<n.indexOf(".atlas")){var s=n.replace(".atlas",".png"),o=Loader.getRes(s);o&&(o.destroy(),Laya.loader.clearRes(s))}if(LoginGateProxy.urls&&0<LoginGateProxy.urls.length){for(var a=0;a<LoginGateProxy.urls.length;a++)LoginGateProxy.urls[a]&&""!=LoginGateProxy.urls[a]&&Laya.loader.clearRes(LoginGateProxy.urls[a]);LoginGateProxy.urls.splice(0,LoginGateProxy.urls.length)}this.parent&&this.parent.removeChild(this),laya.ui.View.prototype.destroy.call(this,t)},__getset(0,i,"enterTime",null,function(t){this._enterTime=t,this.enterSec=25}),e}(),RankListItem=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(RankListItemUI.uiView),this.createView(RankListItemUI.uiView)}return __class(e,"laya.debug.uicomps.RankListItem",RankListItemUI),e.prototype.createChildren=function(){},e}(),TreeListItem=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(ListItemUI.uiView),this.createView(ListItemUI.uiView)}return __class(e,"laya.debug.uicomps.TreeListItem",ListItemUI),e.prototype.createChildren=function(){},e}(),DebugPage=function(t){function e(){this.views=null,e.__super.call(this),this.msRec=new Rectangle,Base64AtlasManager.replaceRes(DebugPanelUI.uiView),this.createView(DebugPanelUI.uiView),DisControlTool.setResizeAbleEx(this),this.views=[this.treePanel,this.selectPanel,this.profilePanel],this.tab.selectedIndex=0,this.tabChange(),this.tab.on("change",this,this.tabChange),this.changeSize()}__class(e,"laya.debug.view.nodeInfo.nodetree.DebugPage",DebugPanelUI);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},i.tabChange=function(){DisControlTool.addOnlyByIndex(this.views,this.tab.selectedIndex,this),DisControlTool.setTop(this.resizeBtn)},i.changeSize=function(){this.width<245&&(this.width=245),this.height<100&&(this.height=200),laya.ui.Component.prototype.changeSize.call(this),this.msRec.setTo(0,0,this.width,this.height),this.scrollRect=this.msRec},e}(),FindNodeSmall=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(FindNodeSmallUI.uiView),this.createView(FindNodeSmallUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.FindNodeSmall",FindNodeSmallUI),e.prototype.createChildren=function(){},e}(),FindNode=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(FindNodeUI.uiView),this.createView(FindNodeUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.FindNode",FindNodeUI),e.prototype.createChildren=function(){this.viewMapRegists()},e}(),MinBtnComp=function(t){function e(){this.tar=null,this.minHandler=null,this.maxHandler=null,this.prePos=new Point,e.__super.call(this),Base64AtlasManager.replaceRes(MinBtnCompUI.uiView),this.createView(MinBtnCompUI.uiView),this.init()}__class(e,"laya.debug.view.nodeInfo.nodetree.MinBtnComp",MinBtnCompUI);var i=e.prototype;return i.createChildren=function(){},i.init=function(){this.minBtn.on("click",this,this.onMinBtn),this.maxBtn.on("click",this,this.onMaxBtn),this.minState=!1,this.maxUI.removeSelf(),DisControlTool.setDragingItem(this.bg,this.maxUI)},i.onMaxBtn=function(){this.maxUI.removeSelf(),this.maxHandler&&this.maxHandler.run(),this.tar&&(this.tar.x+=this.maxUI.x-this.prePos.x,this.tar.y+=this.maxUI.y-this.prePos.y)},i.onMinBtn=function(){var t;this.displayedInStage&&((t=Point.TEMP).setTo(0,0),t=this.localToGlobal(t),t=DebugInfoLayer.I.popLayer.globalToLocal(t),this.maxUI.pos(t.x,t.y),DebugInfoLayer.I.popLayer.addChild(this.maxUI),this.tar&&this.prePos.setTo(t.x,t.y),this.minHandler&&this.minHandler.run())},__getset(0,i,"minState",null,function(t){}),e}(),NodeListPanel=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(NodeListPanelUI.uiView),this.createView(NodeListPanelUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.NodeListPanel",NodeListPanelUI),e.prototype.createChildren=function(){this.viewMapRegists()},e}(),NodeTool=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(NodeToolUI.uiView),this.createView(NodeToolUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.NodeTool",NodeToolUI),e.prototype.createChildren=function(){},e}(),NodeTree=function(t){function i(){this.showProps=!1,this._closeSettingHandler=null,this._tar=null,i.__super.call(this),Base64AtlasManager.replaceRes(NodeTreeUI.uiView),View.regComponent("Tree",TreeBase),this.createView(NodeTreeUI.uiView),View.regComponent("Tree",Tree),this.inits(),i.I=this}__class(i,"laya.debug.view.nodeInfo.nodetree.NodeTree",NodeTreeUI);var e=i.prototype;return e.createChildren=function(){this.viewMapRegists()},e.inits=function(){this.nodeTree.list.scrollBar.hide=!0,this.nodeTree.list.selectEnable=!0,this.settingBtn.on("click",this,this.onSettingBtn),this.freshBtn.on("click",this,this.fresh),this.closeBtn.on("click",this,this.onCloseBtn),this.fliterTxt.on("enter",this,this.onFliterTxtChange),this.fliterTxt.on("blur",this,this.onFliterTxtChange),NodeMenu.I.setNodeListAction(this.nodeTree.list),this.nodeTree.list.on("click",this,this.onListClick,[this.nodeTree.list]),this.nodeTree.renderHandler=new Handler(this,this.treeRender),this._closeSettingHandler=new Handler(this,this.closeSetting),this.onIfShowPropsChange(),this.ifShowProps.on("change",this,this.onIfShowPropsChange)},e.onIfShowPropsChange=function(){this.showProps=this.ifShowProps.selected,this.fresh()},e.onListClick=function(t){t.selectedItem&&t.selectedItem.isDirectory&&(t.selectedItem.isOpen=!t.selectedItem.isOpen,this.nodeTree.fresh())},e.onFindBtn=function(){FindSmallView.I.show()},e.onCloseBtn=function(){this.removeSelf()},e.onTreeDoubleClick=function(t){var e;this.nodeTree.selectedItem&&(e=this.nodeTree.selectedItem.path,NodeMenu.I.objRightClick(e))},e.onTreeRightMouseDown=function(t){var e;this.nodeTree.selectedItem&&(e=this.nodeTree.selectedItem.path,NodeMenu.I.objRightClick(e))},e.onSettingBtn=function(){NodeTreeSettingView.I.showSetting(i.showKeys,this._closeSettingHandler,this._tar)},e.closeSetting=function(t){i.showKeys=t,this.fresh()},e.onFliterTxtChange=function(t){var e;""!=(e=this.fliterTxt.text)&&e!=i.showKeys.join(",")&&(i.showKeys=e.split(","),this.fresh())},e.selecteByFile=function(t){var e,i,n;(e=this.nodeTree.source,(i=DebugTool.findNameHas(t,!1))&&0<i.length)&&(n=i[0],this.parseOpen(e,n))},e.showSelectInStage=function(t){this.setDis(Laya.stage),this.selectByNode(t)},e.selectByNode=function(t){var e;t&&(e=this.nodeTree.source,this.parseOpen(e,t))},e.showNodeList=function(t){if(t){var e,i,n,s,o=0;for(e=t.length,i=[],o=0;o<e;o++)s=t[o],(n={}).label=ClassTool.getNodeClassAndName(s),n.path=s,i.push(n);this.nodeTree.array=i}},e.parseOpen=function(t,e){if(!(t.length<1)&&e){var i,n,s=0;for(i=t.length,s=0;s<i;s++)if((n=t[s]).path==e){var o;for(o=n;n;)n.isOpen=!0,this.nodeTree.fresh(),n=n.nodeParent;return void(this.nodeTree.selectedItem=o)}}},e.getFilterSource=function(t,e,i){var n;for(var s in i=i.toLocaleLowerCase(),t)(n=t[s]).isDirectory&&-1<String(n.label).toLowerCase().indexOf(i)&&(n.x=0,e.push(n)),n.child&&0<n.child.length&&this.getFilterSource(n.child,e,i)},e.onControlDown=function(){this.startDrag()},e.setDis=function(t){this._tar=t,this.fresh()},e.fresh=function(){var t;if(this.nodeTree.selectedItem){var e;for(e=this.nodeTree.selectedItem;e&&!(e.path instanceof laya.display.Sprite);)e=e.nodeParent;e&&e.path&&(t=e.path)}this._tar?this.nodeTree.array=NodeUtils.getNodeTreeData(this._tar,this.showProps?i.showKeys:i.emptyShowKey):this.nodeTree.array=[],t&&this.selectByNode(t)},e.treeRender=function(t,e){var i=t.dataSource;if(i){i.child||i.isDirectory;var n=t.getChildByName("label");i.path instanceof laya.display.Node?n.color="#09a4f6":i.isChilds?n.color="#00ff11":n.color="#838bc5"}},i.I=null,i.emptyShowKey=[],__static(i,["showKeys",function(){return this.showKeys=["x","y","width","height","renderCost"]}]),i}(),NodeTreeSetting=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(NodeTreeSettingUI.uiView),this.createView(NodeTreeSettingUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.NodeTreeSetting",NodeTreeSettingUI),e.prototype.createChildren=function(){},e}(),ObjectCreate=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(ObjectCreateUI.uiView),this.createView(ObjectCreateUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.ObjectCreate",ObjectCreateUI),e.prototype.createChildren=function(){this.viewMapRegists()},e}(),ObjectInfo=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(ObjectInfoUI.uiView),this.createView(ObjectInfoUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.ObjectInfo",ObjectInfoUI),e.prototype.createChildren=function(){},e}(),OutPut=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(OutPutUI.uiView),this.createView(OutPutUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.OutPut",OutPutUI),e.prototype.createChildren=function(){},e}(),Profile=function(t){function e(){this.views=null,e.__super.call(this),Base64AtlasManager.replaceRes(ProfileUI.uiView),this.createView(ProfileUI.uiView),this.views=[this.createPanel,this.renderPanel,this.cachePanel,this.resPanel],this.tab.selectedIndex=0,this.tabChange(),this.tab.on("change",this,this.tabChange)}__class(e,"laya.debug.view.nodeInfo.nodetree.Profile",ProfileUI);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},i.tabChange=function(){DisControlTool.addOnlyByIndex(this.views,this.tab.selectedIndex,this)},e}(),Rank=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(RankUI.uiView),this.createView(RankUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.Rank",RankUI),e.prototype.createChildren=function(){this.viewMapRegists()},e}(),SelectInfos=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(SelectInfosUI.uiView),this.createView(SelectInfosUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.SelectInfos",SelectInfosUI),e.prototype.createChildren=function(){this.viewMapRegists()},e}(),ToolBar=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(ToolBarUI.uiView),this.createView(ToolBarUI.uiView)}return __class(e,"laya.debug.view.nodeInfo.nodetree.ToolBar",ToolBarUI),e.prototype.createChildren=function(){},e}(),ConfigView_Temp_1=function(o){function t(){this._title=null,this._mid_left=NaN,this._mid_right=NaN,this._mid_top=NaN,this._mid_bottom=NaN,this._backVisible=void 0,t.__super.call(this)}__class(t,"ui.controls.ConfigView_Temp_1",o);var e=t.prototype;return e._resetConfigView=function(){this._title=null,this._mid_left=NaN,this._mid_right=NaN,this._mid_top=NaN,this._mid_bottom=NaN,this._backVisible=void 0,o.prototype._resetConfigView.call(this)},e._thisConfigJson=function(){if(!this._activeConfigJson)return null;var t;this._title&&(!t&&(t={}),t.txt_title={text:this._title});var e={};for(var i in isNaN(this._mid_left)||(e.left=this._mid_left),isNaN(this._mid_right)||(e.right=this._mid_right),isNaN(this._mid_top)||(e.top=this._mid_top),isNaN(this._mid_bottom)||(e.bottom=this._mid_bottom),e){!t&&(t={}),t.comp_mid=e;break}this._backVisible&&(!t&&(t={}),t.btn_back={visible:this._backVisible});var n=o.prototype._thisConfigJson.call(this);if(t)if(n)for(var s in t)n[s]=t[s];else n=t;return n},e.__cv_close=function(){PanelUtil.ins._closePanelForce(this)},e.__cv_back=function(){PanelUtil.ins._backPanelForce(this)},__getset(0,e,"mid_top",function(){return this._mid_top},function(t){this._mid_top!=t&&(this._mid_top=t,this._invalidConfigJson())}),__getset(0,e,"title",function(){return this._title},function(t){this._title!=t&&(this._title=t,this._invalidConfigJson())}),__getset(0,e,"mid_right",function(){return this._mid_right},function(t){this._mid_right!=t&&(this._mid_right=t,this._invalidConfigJson())}),__getset(0,e,"backVisible",function(){return this._backVisible},function(t){this._backVisible!=t&&(this._backVisible=t,this._invalidConfigJson())}),__getset(0,e,"mid_left",function(){return this._mid_left},function(t){this._mid_left!=t&&(this._mid_left=t,this._invalidConfigJson())}),__getset(0,e,"mid_bottom",function(){return this._mid_bottom},function(t){this._mid_bottom!=t&&(this._mid_bottom=t,this._invalidConfigJson())}),t.initConfigView=function(t){var e=ConfigView.findComp("btn_close",t);e&&e.on("click",t,t.__cv_close),(e=ConfigView.findComp("btn_back",t))&&e.on("click",t,t.__cv_back)},t.COMP_TITLE="txt_title",t.COMP_MID="comp_mid",t.COMP_BTN_CLOSE="btn_close",t.COMP_BTN_BACK="btn_back",t}(ConfigView),SubPanel=function(e){function t(){this.id=null,this.navList=null,this.title=null,this.isTop=!1,this.isHideBg=!1,t.__super.call(this)}__class(t,"ui.SubPanel",e);var i=t.prototype;return i.setTitle=function(t){this.layout&&this.layout.setTitle(t)},i.tabScrollTo=function(t){this.layout&&this.layout.tabScrollTo(t)},i.showGuide=function(t,e){void 0===e&&(e=!1),this.event("SubPanel_showGuide",[this,t,e])},i.onAdd=function(t){e.prototype.onAdd.call(this,t)},i.onRemove=function(t){e.prototype.onRemove.call(this,t),this.event("SubPanel_onRemove",[this])},i.close=function(){this.id?this.event("SubPanel_Close",[this.id]):this.event("close",this)},i.destroy=function(t){void 0===t&&(t=!0),laya.ui.View.prototype.destroy.call(this,t)},__getset(0,i,"layout",function(){return this.parent}),__getset(0,i,"panelName",null,function(t){this.layout&&(this.layout.curOpenUI=t)}),t}(ViewBase$1);Laya.__init([EventDispatcher,LoaderManager,Browser,View,Render,LocalStorage,GraphicAnimation,WebGLFilter,Timer,WebGLContext2D,AtlasGrid,DrawText,ShaderCompile]),new gameGate}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";for(var i in Object.defineProperty(e,"__esModule",{value:!0}),Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}}),gameGate.getInstance().run(3,!1,"awyxcx");